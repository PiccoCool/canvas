(()=>{var __webpack_modules__={"./index.js":function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\n__webpack_require__(/*! @/src/physics/PhysicsEngineModule.js */ "./src/physics/PhysicsEngineModule.js");\n__webpack_require__(/*! @/src/lib/ModulePixi.js */ "./src/lib/ModulePixi.js");\n__webpack_require__(/*! @/src/lib/PhaserLib.js */ "./src/lib/PhaserLib.js");\nvar n = __webpack_require__(/*! @/src/utils/WebFontLoader.js */ "./src/utils/WebFontLoader.js");\nvar o = __webpack_require__(/*! @/src/states/StateIndex.js */ "./src/states/StateIndex.js");\nvar a = __webpack_require__(/*! @/src/states/PreloadState.js */ "./src/states/PreloadState.js");\nvar r = __webpack_require__(/*! @/src/states/BootState.js */ "./src/states/BootState.js");\nvar h = __webpack_require__(/*! @/src/config/Game.js */ "./src/config/Game.js");\nvar l = __webpack_require__(/*! @/src/services/AdsManager.js */ "./src/services/AdsManager.js");\nvar c;\n(function (t) {\n  var e = function (t) {\n    function e() {\n      var e = t.call(this, {\n        enableDebug: false,\n        width: 720,\n        height: 480,\n        renderer: Phaser.AUTO,\n        parent: "content",\n        transparent: true,\n        antialias: true,\n        preserveDrawingBuffer: false,\n        physicsConfig: null,\n        seed: "",\n        state: null,\n        forceSetTimeOut: false\n      }) || this;\n      e.clearBeforeRender = false;\n      Phaser.Device.whenReady(function () {\n        h["default"].isDesktop = e.device.desktop;\n        if (e._isPad()) {\n          h["default"].isDesktop = false;\n        }\n        e.stage.disableVisibilityChange = true;\n        var t = h["default"].isDesktop ? "click" : "touchstart";\n        document.getElementById("content").addEventListener(t, function (t) {\n          e.gameResumed(t);\n          window.focus();\n        });\n        l["default"].getInstance().init(e);\n      });\n      e.state.add("game", {\n        create: e.stateCreator.bind(e),\n        preload: e.statePreloader.bind(e)\n      }, true);\n      return e;\n    }\n    s(e, t);\n    e.prototype._isPad = function () {\n      var t = navigator.userAgent.toLowerCase().indexOf("ipad") !== -1;\n      return !t && !!navigator.userAgent.match(/Mac/) && !!navigator.maxTouchPoints && !!(navigator.maxTouchPoints > 2) || t;\n    };\n    e.prototype.statePreloader = function () {};\n    e.prototype.stateCreator = function () {\n      var t = this;\n      this.plugins.add(PhaserSuperStorage.StoragePlugin);\n      this.plugins.add(PhaserCachebuster.CacheBuster);\n      this.storage.forcePromises = true;\n      this.state.add(o.Boot.Name, o.Boot, false);\n      this.state.add(a["default"].Name, a["default"], false);\n      this.state.add(r["default"].Name, r["default"], false);\n      this.state.add(o.Menu.Name, o.Menu, false);\n      this.state.add(o.Garage.Name, o.Garage, false);\n      this.state.add(o.ChooseZone.Name, o.ChooseZone, false);\n      this.state.add(o.Gameplay.Name, o.Gameplay, false);\n      function e() {\n        t.recursiveUpdateText(t.stage);\n      }\n      n.load({\n        custom: {\n          families: ["Aller Display", "CfCrackBold", "Impact"],\n          urls: ["assets/css/AllerDisplay.css", "assets/css/CfCrackBold.css", "assets/css/impact.css"]\n        },\n        active: e,\n        inactive: e\n      });\n      this.state.start(o.Boot.Name);\n      this.state.remove("game");\n    };\n    e.prototype.recursiveUpdateText = function (t) {\n      var e = this;\n      if (t instanceof Phaser.Text) {\n        t.dirty = true;\n      }\n      if (t.children && t.children.length > 0) {\n        t.children.forEach(function (t) {\n          e.recursiveUpdateText(t);\n        });\n      }\n    };\n    e.prototype.adsResume = function () {\n      this.sound.mute = false;\n      o.Gameplay.isAdsPause = false;\n      this.gameResumed(null);\n      window.focus();\n    };\n    e.prototype.adsPause = function () {\n      this.sound.mute = true;\n      o.Gameplay.isAdsPause = true;\n    };\n    return e;\n  }(Phaser.Game);\n  t.Game = e;\n})(c || (c = {}));\nnew c.Game();\n\n//# sourceURL=webpack://motox3m/./index.js?')},"./src/assets/AssetLoader.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _src_bridge_UIBridge_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\n/* harmony import */ var _src_data_JSONData_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/data/JSONData.js */ "./src/data/JSONData.js");\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n// src/assets/AssetLoader.js\n\n\nvar AssetLoader = /*#__PURE__*/function () {\n  function AssetLoader() {\n    _classCallCheck(this, AssetLoader);\n    this.inited = false;\n    this.game = null;\n    this.loader = null;\n  }\n  return _createClass(AssetLoader, [{\n    key: "init",\n    value: function init(game) {\n      if (!this.inited) {\n        this.inited = true;\n        this.game = game;\n        this.loader = new Phaser.Loader(game);\n        this.loadArt();\n      }\n    }\n  }, {\n    key: "loadArt",\n    value: function loadArt() {\n      var _this = this;\n      this.loader.onFileComplete.add(this.fileArtComplete, this);\n      var scalePath = "x" + _src_bridge_UIBridge_js__WEBPACK_IMPORTED_MODULE_0__.Constants.GAME_SCALE + "/";\n      _src_bridge_UIBridge_js__WEBPACK_IMPORTED_MODULE_0__.Atlases.fullList.forEach(function (atlas) {\n        _this.loader.atlas(atlas, "assets/atlases/".concat(scalePath).concat(atlas, ".png"), "assets/atlases/".concat(scalePath).concat(atlas, ".json"));\n      });\n      _src_data_JSONData_js__WEBPACK_IMPORTED_MODULE_1__["default"].fullList.forEach(function (level) {\n        _this.loader.json(level, "assets/levels/".concat(level, ".json"));\n      });\n      _src_bridge_UIBridge_js__WEBPACK_IMPORTED_MODULE_0__.Images.fullList.forEach(function (image) {\n        _this.loader.image(image, "assets/images/".concat(scalePath).concat(image, ".png"));\n      });\n      _src_data_JSONData_js__WEBPACK_IMPORTED_MODULE_1__["default"].fullListPivots.forEach(function (level) {\n        _this.loader.json(level, "assets/bike/".concat(level, ".json"));\n      });\n      this.loader.start();\n    }\n  }, {\n    key: "fileArtComplete",\n    value: function fileArtComplete(progress, key, data, totalLoaded, totalFiles) {\n      if (key === _src_bridge_UIBridge_js__WEBPACK_IMPORTED_MODULE_0__.Images.MapBg) {\n        AssetLoader.isMapReady = true;\n      }\n      if (totalLoaded === totalFiles) {\n        AssetLoader.isArtReady = true;\n        this.loader.onFileComplete.remove(this.fileArtComplete, this);\n        this.loadSfx();\n      }\n    }\n  }, {\n    key: "loadSfx",\n    value: function loadSfx() {\n      var _this2 = this;\n      this.loader.onFileComplete.add(this.fileSfxComplete, this);\n      _src_bridge_UIBridge_js__WEBPACK_IMPORTED_MODULE_0__.Sounds.fullList.forEach(function (sound) {\n        if (_this2.game.device.iOS) {\n          _this2.loader.audio(sound, ["assets/sound/".concat(sound, ".m4a")]);\n        } else {\n          _this2.loader.audio(sound, ["assets/sound/".concat(sound, ".ogg"), "assets/sound/".concat(sound, ".mp3")]);\n        }\n      });\n      this.loader.start();\n    }\n  }, {\n    key: "fileSfxComplete",\n    value: function fileSfxComplete(progress, key, data, totalLoaded, totalFiles) {\n      if (totalLoaded === totalFiles) {\n        AssetLoader.isSfxReady = true;\n        this.loader.onFileComplete.remove(this.fileSfxComplete, this);\n        AssetLoader.sfxReady.dispatch();\n        this.loadTracks();\n      }\n    }\n  }, {\n    key: "loadTracks",\n    value: function loadTracks() {\n      var _this3 = this;\n      this.loader.onFileComplete.add(this.fileTracksComplete, this);\n      _src_bridge_UIBridge_js__WEBPACK_IMPORTED_MODULE_0__.Sounds.tracksList.forEach(function (track) {\n        if (_this3.game.device.iOS) {\n          _this3.loader.audio(track, ["assets/sound/".concat(track, ".m4a")]);\n        } else {\n          _this3.loader.audio(track, ["assets/sound/".concat(track, ".ogg"), "assets/sound/".concat(track, ".mp3")]);\n        }\n      });\n      this.loader.start();\n    }\n  }, {\n    key: "fileTracksComplete",\n    value: function fileTracksComplete(progress, key, data, totalLoaded, totalFiles) {\n      if (totalLoaded === totalFiles) {\n        AssetLoader.isTracksReady = true;\n        AssetLoader.trackReady.dispatch();\n        this.loader.onFileComplete.remove(this.fileTracksComplete, this);\n      }\n    }\n  }], [{\n    key: "getInstance",\n    value: function getInstance() {\n      if (!this.instance) {\n        this.instance = new AssetLoader();\n      }\n      return this.instance;\n    }\n  }]);\n}();\n_defineProperty(AssetLoader, "instance", null);\n_defineProperty(AssetLoader, "isMapReady", false);\n_defineProperty(AssetLoader, "isArtReady", false);\n_defineProperty(AssetLoader, "isSfxReady", false);\n_defineProperty(AssetLoader, "isTracksReady", false);\n_defineProperty(AssetLoader, "trackReady", new Phaser.Signal());\n_defineProperty(AssetLoader, "sfxReady", new Phaser.Signal());\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AssetLoader);\n\n//# sourceURL=webpack://motox3m/./src/assets/AssetLoader.js?')},"./src/bridge/UIBridge.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('//exports.__esModule = true;\nvar s = __webpack_require__(/*! @/src/data/ImageData.js */ "./src/data/ImageData.js");\nexports.Images = s["default"];\nvar n = __webpack_require__(/*! @/src/utils/Constants.js */ "./src/utils/Constants.js");\nexports.Constants = n["default"];\nvar o = __webpack_require__(/*! @/src/data/AtlasesData.js */ "./src/data/AtlasesData.js");\nexports.Atlases = o["default"];\nvar a = __webpack_require__(/*! @/src/ui/Sound.js */ "./src/ui/Sound.js");\nexports.Sounds = a["default"];\nvar r = __webpack_require__(/*! @/src/data/JSONData.js */ "./src/data/JSONData.js");\nexports.JSONData = r["default"];\n\n//# sourceURL=webpack://motox3m/./src/bridge/UIBridge.js?')},"./src/camera/CameraPathes.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CameraPath: () => (/* binding */ CameraPath),\n/* harmony export */   CameraPathes: () => (/* binding */ CameraPathes)\n/* harmony export */ });\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n// CameraPathes - Singleton class for managing camera movement paths\n// CameraPath - Class for individual path calculations using Nape vectors\n\n// Key features:\n// - Manages multiple camera movement paths\n// - Uses Nape Vec2 for point calculations\n// - Supports path transitions and tweening\n// - Calculates camera positions along paths\n// - Singleton pattern for global access\n\n// CameraPathes class:\n// - Singleton manager for multiple paths\n// - Methods:\n//   * addPathByPoints(points): Add new camera path\n//   * getPathPointXY(x, y): Get camera position at point\n//   * reset(): Reset path state\n//   * clear(): Remove all paths\n//   * clearPrevPath(): Clear transition state\n// \n// Properties:\n// - pathes: Array of CameraPath instances\n// - tweened: Boolean for transition state\n// - prevPath: Reference to previous active path\n\n// CameraPath class:\n// - Individual path implementation\n// - Methods:\n//   * getPoint(x, y): Calculate point along path\n// \n// Properties:\n// - points: Array of path points\n// - minX/maxX: Path boundaries\n\n// Usage example:\n// const pathManager = CameraPathes.instance;\n// pathManager.addPathByPoints([\n//   new Vec2(0, 0),\n//   new Vec2(100, 50),\n//   new Vec2(200, 100)\n// ]);\n//exports.__esModule = true;\nvar Vec2 = nape.geom.Vec2;\nvar CameraPath = /*#__PURE__*/function () {\n  function CameraPath(points) {\n    _classCallCheck(this, CameraPath);\n    this.points = points;\n    this.minX = points[0].x;\n    this.maxX = points[points.length - 1].x;\n  }\n  return _createClass(CameraPath, [{\n    key: "getPoint",\n    value: function getPoint(x, y) {\n      if (x < this.minX || x > this.maxX) {\n        return NaN;\n      }\n      for (var i = this.points.length, n = new Vec2(0, 0), o = 1; o < i; o++) {\n        var a = this.points[o];\n        if (a.x >= x) {\n          var r = this.points[o - 1];\n          var h = x - r.x;\n          n.x = a.x - r.x;\n          n.y = a.y - r.y;\n          var l = h * Math.tan(n.angle);\n          var c = r.y + l;\n          if (c < y) {\n            return NaN;\n          } else {\n            return c;\n          }\n        }\n      }\n      return NaN;\n    }\n  }]);\n}();\nvar CameraPathes = /*#__PURE__*/function () {\n  function CameraPathes() {\n    _classCallCheck(this, CameraPathes);\n    this.tweened = false;\n    this.pathes = [];\n    this.prevPath = null;\n  }\n  return _createClass(CameraPathes, [{\n    key: "reset",\n    value: function reset() {\n      this.prevPath = null;\n      this.tweened = false;\n    }\n  }, {\n    key: "addPathByPoints",\n    value: function addPathByPoints(points) {\n      var path = new CameraPath(points);\n      this.pathes.push(path);\n    }\n  }, {\n    key: "getPathPointXY",\n    value: function getPathPointXY(x, y) {\n      var closestY = NaN;\n      var closestPath = null;\n      for (var i = 0; i < this.pathes.length; i++) {\n        var path = this.pathes[i];\n        var calculatedY = path.getPoint(x, y);\n        if (!isNaN(calculatedY)) {\n          if (isNaN(closestY) || calculatedY < closestY) {\n            closestY = calculatedY;\n            closestPath = path;\n          }\n        }\n      }\n      if (this.prevPath !== null && this.prevPath !== closestPath) {\n        this.tweened = true;\n      }\n      this.prevPath = closestPath;\n      return closestY;\n    }\n  }, {\n    key: "clearPrevPath",\n    value: function clearPrevPath() {\n      this.tweened = false;\n      this.prevPath = null;\n    }\n  }, {\n    key: "clear",\n    value: function clear() {\n      this.clearPrevPath();\n      this.pathes.splice(0, this.pathes.length);\n    }\n  }], [{\n    key: "instance",\n    get: function get() {\n      if (!this._instance) {\n        this._instance = new CameraPathes();\n      }\n      return this._instance;\n    }\n  }]);\n}();\n\n\n//# sourceURL=webpack://motox3m/./src/camera/CameraPathes.js?')},"./src/camera/CameraZone.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }\nfunction _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); return e; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }\nfunction _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n// CameraZone - Camera control zone for managing viewport\n// Extends GameObject to create areas that control camera behavior\n\n// Key features:\n// - Aspect ratio handling\n// - Movement constraints\n// - Scale calculations\n// - Zone activation\n// - Static/Horizontal/Vertical modes\n\n// Properties:\n// - move: Movement type (STATIC/HOR/VER)\n// - scale: View scale factor\n// - minMove/maxMove: Movement bounds\n// - x/y: Zone position\n// - static current: Active zone reference\n// - static focusedOnPoint: Point focus state\n\n// Key Methods:\n// - create(): Initialize zone\n//   * Calculates aspect ratios\n//   * Determines movement type\n//   * Sets up constraints\n//\n// - activate(): Enable zone\n// - deactivate(): Disable zone\n\n// Constants:\n// - STATIC: No movement (0)\n// - HOR: Horizontal movement (1)\n// - VER: Vertical movement (2)\n\n// Usage example:\n// const zone = new CameraZone();\n// zone.create({\n//   params: {\n//     x: 100,\n//     y: 100,\n//     width: 800,\n//     height: 600\n//   }\n// });\n// src/camera/CameraZone.js\nvar _require = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js"),\n  GameObject = _require.GameObject;\nvar _require2 = __webpack_require__(/*! @/src/config/Game.js */ "./src/config/Game.js"),\n  Game = _require2["default"];\n\n/**\r\n * CameraZone - Camera control zone for managing viewport\r\n * Extends GameObject to create areas that control camera behavior\r\n */\nvar CameraZone = /*#__PURE__*/function (_GameObject) {\n  function CameraZone() {\n    var _this;\n    _classCallCheck(this, CameraZone);\n    _this = _callSuper(this, CameraZone);\n    _this.move = CameraZone.STATIC;\n    _this.scale = 1;\n    _this.minMove = 0;\n    _this.maxMove = 0;\n    _this.x = 0;\n    _this.y = 0;\n    return _this;\n  }\n\n  /**\r\n   * Initialize zone with parameters\r\n   * @param {Object} params Configuration parameters\r\n   */\n  _inherits(CameraZone, _GameObject);\n  return _createClass(CameraZone, [{\n    key: "create",\n    value: function create() {\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      this.id = params.params.id;\n      var width = params.params.width;\n      var height = params.params.height;\n      var aspectRatio = width / height;\n      var gameAspectRatio = Game.GAME_W / Game.GAME_H;\n      this.x = params.params.x;\n      this.y = params.params.y;\n      if (aspectRatio === gameAspectRatio) {\n        this.scale = Game.GAME_W / width;\n        this.move = CameraZone.STATIC;\n      } else if (aspectRatio > gameAspectRatio) {\n        this.move = CameraZone.HOR;\n        this.scale = Game.GAME_H / height;\n        this.minMove = this.x - width * 0.5 + this.scale * 0.5 * width;\n        this.maxMove = this.x + width * 0.5 - this.scale * 0.5 * width;\n      } else {\n        this.move = CameraZone.VER;\n        this.scale = Game.GAME_W / width;\n        this.minMove = this.y - height * 0.5 + this.scale * 0.5 * height;\n        this.maxMove = this.y + height * 0.5 - this.scale * 0.5 * height;\n      }\n    }\n\n    /**\r\n     * Enable or disable the zone\r\n     * @param {boolean} active Whether to activate the zone\r\n     */\n  }, {\n    key: "activate",\n    value: function activate() {\n      var active = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (active) {\n        CameraZone.focusedOnPoint = false;\n        CameraZone.current = this;\n      } else {\n        this.deactivate();\n      }\n    }\n\n    /**\r\n     * Deactivate the zone if it\'s currently active\r\n     */\n  }, {\n    key: "deactivate",\n    value: function deactivate() {\n      if (CameraZone.current === this) {\n        CameraZone.current = null;\n      }\n    }\n\n    /**\r\n     * Clean up resources\r\n     */\n  }, {\n    key: "dispose",\n    value: function dispose() {\n      CameraZone.current = null;\n    }\n\n    /**\r\n     * Reset zone state\r\n     */\n  }, {\n    key: "restart",\n    value: function restart() {\n      CameraZone.current = null;\n    }\n\n    /**\r\n     * Check if zone is active\r\n     * @returns {boolean} Always returns true in current implementation\r\n     */\n  }, {\n    key: "isActive",\n    value: function isActive() {\n      return true;\n    }\n  }]);\n}(GameObject); // Export both named and default\n_defineProperty(CameraZone, "STATIC", 0);\n_defineProperty(CameraZone, "HOR", 1);\n_defineProperty(CameraZone, "VER", 2);\n_defineProperty(CameraZone, "focusedOnPoint", false);\n_defineProperty(CameraZone, "current", null);\nmodule.exports = CameraZone;\nmodule.exports.CameraZone = CameraZone;\n\n//# sourceURL=webpack://motox3m/./src/camera/CameraZone.js?')},"./src/config/CbTypes.js":(__unused_webpack_module,exports)=>{eval("// src/config/CbTypes.js\nvar CbType = nape.callbacks.CbType;\nvar CbTypes = function () {\n  function CbTypes() {}\n\n  // Physics collision types\n  CbTypes.WHEEL = new CbType();\n  CbTypes.BODY_COLLIDER = new CbType();\n  CbTypes.ZONE_FINISH = new CbType();\n  CbTypes.COIN = new CbType();\n  CbTypes.DESTOYED = new CbType();\n  CbTypes.TOGGLE = new CbType();\n  CbTypes.TOGGLE_OFF = new CbType();\n  CbTypes.GROUND = new CbType();\n  CbTypes.DRIVER = new CbType();\n  CbTypes.DRIVER_PART = new CbType();\n  CbTypes.SAFE_POINT = new CbType();\n  CbTypes.SPIKES = new CbType();\n  CbTypes.SAW = new CbType();\n  CbTypes.BARREL = new CbType();\n  CbTypes.WOOD = new CbType();\n  CbTypes.WATER = new CbType();\n  CbTypes.GLASS = new CbType();\n  CbTypes.BOOST = new CbType();\n  CbTypes.GEYSER = new CbType();\n  return CbTypes;\n}();\n\n// Export CbTypes\nexports.CbTypes = CbTypes;\n\n/**\r\n * Usage:\r\n * const { CbTypes } = require('./CbTypes');\r\n * \r\n * // Access collision types\r\n * const wheelType = CbTypes.WHEEL;\r\n * const groundType = CbTypes.GROUND;\r\n */\n\n//# sourceURL=webpack://motox3m/./src/config/CbTypes.js?")},"./src/config/Filters.js":(__unused_webpack_module,exports)=>{eval("var Filter = nape.dynamics.InteractionFilter;\nvar Filters = function () {\n  function Filters() {}\n  Filters.NOTHING = new Filter(0, 0, 0, 0, 0, 0);\n  Filters.SENSOR = new Filter(0, 0, 1, 4369);\n  Filters.SENS_ONLY_PLAYER = new Filter(0, 0, 1, 4368);\n  Filters.TOGGLE = new Filter(0, 0, 1, 4369);\n  Filters.WITH_EARTH_ONLY = new Filter(1, 4369, 0, 0);\n  Filters.WHEEL = new Filter(4096, 272, 17, 4369);\n  Filters.DRIVER_PART = new Filter(4096, 272);\n  Filters.BODY_COLLIDER = new Filter(4096, 272, 17, 4369);\n  Filters.GROUND = new Filter(17, 4369, 1, 4369);\n  Filters.PLAYER_ONLY = new Filter(256, 4096, 1, 4369);\n  Filters.WATER = new Filter(0, 0, 1, 4369);\n  return Filters;\n}();\nexports.Filters = Filters;\n\n//# sourceURL=webpack://motox3m/./src/config/Filters.js?")},"./src/config/Game.js":(__unused_webpack_module,exports)=>{eval('//exports.__esModule = true;\nvar Game = function () {\n  function Game() {}\n  Game.GAME_W = 720;\n  Game.GAME_H = 480;\n  Game.DISPLAY_W = 720;\n  Game.DISPLAY_H = 480;\n  Game.CAR_ED_SAVE = "tbgce";\n  Game.ED_SAVE = "tbge";\n  return Game;\n}();\nexports["default"] = Game;\n\n//# sourceURL=webpack://motox3m/./src/config/Game.js?')},"./src/config/Materials.js":(__unused_webpack_module,exports)=>{eval("//exports.__esModule = true;\nvar Material = nape.phys.Material;\nvar Materials = function () {\n  function Materials() {}\n  Materials.DEFAULT = new Material();\n  Materials.GROUND = new Material();\n  Materials.WIEGHTLESS = new Material(0, 1, 2, 0.001);\n  Materials.TUMBEWEED = new Material(0, 1, 2, 0.5);\n  Materials.GBARREL = new Material(0, 1, 2, 0.5);\n  return Materials;\n}();\nexports.Materials = Materials;\n\n//# sourceURL=webpack://motox3m/./src/config/Materials.js?")},"./src/config/ObjectTypes.js":(__unused_webpack_module,exports)=>{eval("//exports.__esModule = true;\nvar ObjectTypes = function () {\n  function ObjectTypes() {}\n  ObjectTypes.BG = 0;\n  ObjectTypes.LANDSCAPE = 1;\n  ObjectTypes.LANDSCAPE_SHAPE = 9;\n  ObjectTypes.CAR = 2;\n  ObjectTypes.BULLET = 3;\n  ObjectTypes.FRONT = 4;\n  ObjectTypes.OBJECT = 5;\n  ObjectTypes.EFFECT = 6;\n  ObjectTypes.CAR_PART = 7;\n  ObjectTypes.LANDSCAPE_BACK = 8;\n  return ObjectTypes;\n}();\nexports.ObjectTypes = ObjectTypes;\n\n//# sourceURL=webpack://motox3m/./src/config/ObjectTypes.js?")},"./src/controllers/CarController.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CarController: () => (/* binding */ CarController)\n/* harmony export */ });\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nvar CarController = /*#__PURE__*/function () {\n  function CarController(car) {\n    _classCallCheck(this, CarController);\n    this.acceleration = false;\n    this.brake = false;\n    this.car = car;\n  }\n  return _createClass(CarController, [{\n    key: "getBoost",\n    value: function getBoost() {\n      return true;\n    }\n  }, {\n    key: "getDrive",\n    value: function getDrive() {\n      return 0;\n    }\n  }, {\n    key: "getTilt",\n    value: function getTilt() {\n      return 0;\n    }\n  }, {\n    key: "getUseItem",\n    value: function getUseItem() {\n      return false;\n    }\n  }, {\n    key: "dispose",\n    value: function dispose() {\n      this.car = null;\n    }\n  }]);\n}();\n\n\n//# sourceURL=webpack://motox3m/./src/controllers/CarController.js?')},"./src/controllers/InputController.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('// InputController - Singleton class for handling game input across platforms\n// Manages both keyboard and on-screen controls for desktop/mobile\n\n// Key features:\n// - Cross-platform input handling (desktop/mobile)\n// - Virtual on-screen buttons for mobile\n// - Keyboard support (WASD + Arrow keys)\n// - Responsive button positioning\n// - Singleton pattern for global access\n\n// Properties:\n// Input States:\n// - isbtnUp: Up direction input state\n// - isbtnDown: Down direction input state\n// - isbtnLeft: Left direction input state\n// - isbtnRight: Right direction input state\n\n// UI Elements:\n// - container: Parent container for mobile controls\n// - btnUp: Up direction button\n// - btnDown: Down direction button\n// - btnLeft: Left direction button\n// - btnRight: Right direction button\n\n// Methods:\n// - init(container, game): Initialize controller\n// - createButtons(): Create mobile UI buttons\n// - resize(scale): Handle responsive layout\n// - [direction]Tap(): Handle touch input start\n// - [direction]UnTap(): Handle touch input end\n\n// Usage example:\n// const input = InputController.instance;\n// input.init(gameContainer, game);\n// \n// // Check input state\n// if (input.isbtnRight) {\n//     // Move right\n// }\n//exports.__esModule = true;\nvar Keyboard = Phaser.Keyboard;\nvar UIBridge = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar Button = (__webpack_require__(/*! @/src/ui/Button.js */ "./src/ui/Button.js")["default"]);\nvar Game = (__webpack_require__(/*! @/src/config/Game.js */ "./src/config/Game.js")["default"]);\nvar InputController = function () {\n  function InputController() {\n    this.container = null;\n    this.game = null;\n    this.keyboard = null;\n\n    // Control buttons\n    this.btnUp = null;\n    this.btnDown = null;\n    this.btnLeft = null;\n    this.btnRight = null;\n\n    // Button states\n    this._isbtnUp = false;\n    this._isbtnDown = false;\n    this._isbtnLeft = false;\n    this._isbtnRight = false;\n  }\n  Object.defineProperty(InputController, "instance", {\n    get: function get() {\n      InputController._instance || (InputController._instance = new InputController());\n      return InputController._instance;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(InputController.prototype, "isbtnUp", {\n    get: function get() {\n      var keyboardInput = this.keyboard.isDown(Keyboard.UP) || this.keyboard.isDown(Keyboard.W);\n      return Game.isDesktop ? keyboardInput : this._isbtnUp || keyboardInput;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(InputController.prototype, "isbtnDown", {\n    get: function get() {\n      var keyboardInput = this.keyboard.isDown(Keyboard.DOWN) || this.keyboard.isDown(Keyboard.S);\n      return Game.isDesktop ? keyboardInput : this._isbtnDown || keyboardInput;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(InputController.prototype, "isbtnLeft", {\n    get: function get() {\n      var keyboardInput = this.keyboard.isDown(Keyboard.LEFT) || this.keyboard.isDown(Keyboard.A);\n      return Game.isDesktop ? keyboardInput : this._isbtnLeft || keyboardInput;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(InputController.prototype, "isbtnRight", {\n    get: function get() {\n      var keyboardInput = this.keyboard.isDown(Keyboard.RIGHT) || this.keyboard.isDown(Keyboard.D);\n      return Game.isDesktop ? keyboardInput : this._isbtnRight || keyboardInput;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  InputController.prototype.init = function (container, game) {\n    this.container = container;\n    this.game = game;\n    this.container.inputEnableChildren = true;\n    this.keyboard = this.game.input.keyboard;\n    var keysToCapture = [Keyboard.RIGHT, Keyboard.LEFT, Keyboard.DOWN, Keyboard.UP];\n    keysToCapture.forEach(function (key) {\n      this.keyboard.addKeyCapture(key);\n    }, this);\n    if (!Game.isDesktop) {\n      this.createButtons();\n    }\n  };\n  InputController.prototype._createDirectionalButton = function (config) {\n    var arrow = this.game.add.image(0, 0, UIBridge.Atlases.Garage, config.arrowKey);\n    arrow.anchor.set(0.5);\n    if (config.rotation) {\n      arrow.rotation = config.rotation;\n    }\n    if (config.flipX) {\n      arrow.scale.set(-1, 1);\n    }\n    var button = new Button(this.game, "", {}, null, null, UIBridge.Atlases.Garage);\n    button.setFrames("btn_body0000", "btn_body0000", "btn_body0001", "btn_body0000");\n    button.x = config.x;\n    button.y = config.y;\n    button.scale.set(1.3);\n    button.btn.events.onInputDown.add(this[config.tapHandler], this);\n    button.btn.events.onInputUp.add(this[config.unTapHandler], this);\n    this.container.addChild(button);\n    button.label.parent.addChild(arrow);\n    this[config.buttonRef] = button;\n  };\n  InputController.prototype.createButtons = function () {\n    this._createDirectionalButton({\n      arrowKey: "arrow_key0000",\n      x: this.game.width - 70,\n      y: this.game.height - 70,\n      tapHandler: "upTap",\n      unTapHandler: "upUnTap",\n      buttonRef: "btnUp"\n    });\n    this._createDirectionalButton({\n      arrowKey: "arrow_key0000",\n      x: this.game.width - 220,\n      y: this.game.height - 70,\n      rotation: Math.PI,\n      tapHandler: "downTap",\n      unTapHandler: "downUnTap",\n      buttonRef: "btnDown"\n    });\n    this._createDirectionalButton({\n      arrowKey: "arrow_key20000",\n      x: 70,\n      y: this.game.height - 70,\n      flipX: true,\n      tapHandler: "leftTap",\n      unTapHandler: "leftUnTap",\n      buttonRef: "btnLeft"\n    });\n    this._createDirectionalButton({\n      arrowKey: "arrow_key20000",\n      x: 220,\n      y: this.game.height - 70,\n      tapHandler: "rightTap",\n      unTapHandler: "rightUnTap",\n      buttonRef: "btnRight"\n    });\n  };\n\n  // Button tap handlers\n  InputController.prototype.upTap = function () {\n    this._isbtnUp = true;\n  };\n  InputController.prototype.downTap = function () {\n    this._isbtnDown = true;\n  };\n  InputController.prototype.leftTap = function () {\n    this._isbtnLeft = true;\n  };\n  InputController.prototype.rightTap = function () {\n    this._isbtnRight = true;\n  };\n\n  // Button release handlers\n  InputController.prototype.upUnTap = function () {\n    this._isbtnUp = false;\n  };\n  InputController.prototype.downUnTap = function () {\n    this._isbtnDown = false;\n  };\n  InputController.prototype.leftUnTap = function () {\n    this._isbtnLeft = false;\n  };\n  InputController.prototype.rightUnTap = function () {\n    this._isbtnRight = false;\n  };\n  InputController.prototype.resize = function (scale) {\n    if (!this.container) return;\n    this.container.scale.set(scale);\n    var scaledHeight = this.game.height / scale - 70;\n    var scaledWidth = this.game.width / scale;\n    this.btnUp.x = scaledWidth - 70;\n    this.btnUp.y = scaledHeight;\n    this.btnDown.x = scaledWidth - 220;\n    this.btnDown.y = scaledHeight;\n    this.btnLeft.x = 70;\n    this.btnLeft.y = scaledHeight;\n    this.btnRight.x = 220;\n    this.btnRight.y = scaledHeight;\n  };\n  return InputController;\n}();\nexports["default"] = InputController;\n\n//# sourceURL=webpack://motox3m/./src/controllers/InputController.js?')},"./src/controllers/PlayerController.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\nexports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/controllers/CarController.js */ "./src/controllers/CarController.js");\nvar o = __webpack_require__(/*! @/src/controllers/InputController.js */ "./src/controllers/InputController.js");\nvar a = function (t) {\n  function e(e) {\n    return t.call(this, e) || this;\n  }\n  s(e, t);\n  e.prototype.getDrive = function () {\n    var t = 0;\n    if (o["default"].instance.isbtnDown) {\n      t--;\n      this.brake = true;\n    } else {\n      this.brake = false;\n    }\n    if (o["default"].instance.isbtnUp) {\n      t++;\n      this.accell = true;\n    } else {\n      this.accell = false;\n    }\n    return t;\n  };\n  e.prototype.getBoost = function () {\n    return t.prototype.getBoost.call(this);\n  };\n  e.prototype.getUseItem = function () {\n    return this.car.itemId >= 0;\n  };\n  e.prototype.getTilt = function () {\n    var t = 0;\n    if (o["default"].instance.isbtnLeft) {\n      t--;\n    }\n    if (o["default"].instance.isbtnRight) {\n      t++;\n    }\n    return t;\n  };\n  return e;\n}(n.CarController);\nexports.PlayerController = a;\n\n//# sourceURL=webpack://motox3m/./src/controllers/PlayerController.js?')},"./src/controllers/RaceBuilder.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('var Signal = Phaser.Signal;\nvar GameUtils = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar MaxGameCore = (__webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js").MaxGameCore);\nvar Constants = __webpack_require__(/*! @/src/utils/Constants.js */ "./src/utils/Constants.js");\nvar RaceBuilder = function () {\n  function RaceBuilder() {\n    this.complete = new Signal();\n    this.handlers = {};\n  }\n  RaceBuilder.prototype.start = function () {\n    this.parseParams();\n    this.parseLayers();\n    this.buildBg();\n    MaxGameCore.instance.initialDeactivate();\n    this.complete.dispatch(this);\n  };\n  RaceBuilder.prototype.parseParams = function () {\n    var settings = GameUtils.RacesData.map.settings;\n    GameUtils.RacesData.data.gravityY = settings.gravityY;\n    GameUtils.MaxPhysics.space.gravity.setxy(0, GameUtils.RacesData.data.gravityY);\n    GameUtils.RacesData.data.countdown = 0;\n  };\n  RaceBuilder.prototype.buildBg = function () {\n    var bgObject = new GameUtils.BgObject();\n    bgObject.create();\n    var scale = 1;\n    var initialHeight = bgObject.layer0.height;\n    var gameAspectRatio = GameUtils.GraphicUtil.game.width / GameUtils.GraphicUtil.game.height;\n    var targetAspectRatio = Constants["default"].WIDTH / Constants["default"].HEIGHT;\n    scale = gameAspectRatio >= targetAspectRatio ? GameUtils.GraphicUtil.game.width / Constants["default"].WIDTH : GameUtils.GraphicUtil.game.height / Constants["default"].HEIGHT;\n    bgObject.layer0.scale.set(scale);\n    bgObject.layer0.y = initialHeight - bgObject.layer0.height;\n    bgObject.layer1W = bgObject.layer0.width;\n    MaxGameCore.instance.add(bgObject);\n  };\n  RaceBuilder.prototype.parseLayers = function () {\n    var mapData = GameUtils.RacesData.map;\n    var layers = mapData.layers;\n    for (var i = 0, len = layers.length; i < len; i++) {\n      this.parseLayer(layers[i], i);\n    }\n  };\n  RaceBuilder.prototype.parseLayer = function (layer, layerIndex) {\n    if (!layer) return;\n    for (var i = 0, len = layer.length; i < len; i++) {\n      var objectData = layer[i];\n      var gameObject = this.getObject(objectData, layerIndex);\n      console.log("className", objectData, gameObject);\n      if (objectData.className === "PivotJointE") {\n        // continue;\n      }\n      if (gameObject) {\n        gameObject.create(objectData);\n        MaxGameCore.instance.add(gameObject);\n      } else {\n        this.parseObject(objectData);\n      }\n    }\n  };\n  RaceBuilder.prototype.parseObject = function (objectData) {\n    if (objectData.className === "PlayerWP") {\n      GameUtils.CarsData.cars.add(objectData);\n    }\n  };\n  RaceBuilder.prototype.getObject = function (objectData, layerIndex) {\n    var className = objectData.className;\n\n    // Ground objects\n    if (this._isGroundObject(className)) {\n      return new GameUtils.GroundObject();\n    }\n\n    // Shapers\n    if (this._isShaper(className)) {\n      return new GameUtils.ShaperObject();\n    }\n\n    // Special objects\n    if (className.indexOf("WaterShaper") >= 0) return new GameUtils.WaterObject();\n    if (className.indexOf("GeyserE") >= 0) return new GameUtils.GeyserObject();\n    if (className.indexOf("MoverPather") >= 0) return new GameUtils.MoverPatherObject();\n    if (className.indexOf("DynamicPather") >= 0 || className.indexOf("PillarPather") >= 0) {\n      return new GameUtils.PlankObject();\n    }\n    if (this._isSphereObject(className)) {\n      return new GameUtils.SphereObject();\n    }\n\n    // Basic objects\n    if (className.indexOf("Glass") === 0) return new GameUtils.GlassBlock();\n    if (className === "TiltZone" || className === "BrakeZone") return new GameUtils.WaypointObject();\n    if (className === "Dec2_1") return new GameUtils.DecorMultiObject(layerIndex <= 1);\n\n    // Decor objects\n    if (this._isDecorObject(className)) {\n      return this._createDecorObject(objectData, layerIndex);\n    }\n\n    // Dynamic objects\n    // if (this._isDynamicBody(className)) {\n    //     return new GameUtils.DynamicBodyObject();\n    // }\n    if (className === \'BarrelE\' || className.indexOf(\'Plank\') === 0) {\n      return new GameUtils.DynamicBodyObject();\n    }\n    if (className.indexOf(\'Ball\') >= 0) {\n      return new GameUtils.DynamicBodyObject();\n    }\n\n    // Vector decor\n    if (className.indexOf("VecDec_") === 0) return new GameUtils.VectorDecor();\n\n    // Game mechanics\n    var mechanicsObject = this._createMechanicsObject(className);\n    if (mechanicsObject) return mechanicsObject;\n\n    // Special cases\n    if (className.indexOf("Removed") === 0) return new GameUtils.RemovedBodyObjects();\n    if (className.indexOf("Tnt") === 0) return new GameUtils.TntObject();\n    if (className === "FinishZone") return new GameUtils.FinishObject();\n    return null;\n  };\n  RaceBuilder.prototype._isGroundObject = function (className) {\n    return className.indexOf("GroundPather") >= 0 || className.indexOf("BonesPather") >= 0;\n  };\n  RaceBuilder.prototype._isShaper = function (className) {\n    return className.indexOf("LandscapeShaper") >= 0 || className.indexOf("FinishShaper") >= 0;\n  };\n  RaceBuilder.prototype._isDecorObject = function (className) {\n    return className.indexOf("Dec") === 0 || className.indexOf("Sign") === 0 || className.indexOf("Pillar") === 0;\n  };\n  RaceBuilder.prototype._createDecorObject = function (objectData, layerIndex) {\n    return objectData.params.id !== null && objectData.params.id >= 0 ? new GameUtils.DecorActObject(layerIndex <= 1) : new GameUtils.DecorObject(layerIndex <= 1);\n  };\n  RaceBuilder.prototype._isDynamicBody = function (className) {\n    return className.indexOf("BarrelE") === 0 || className.indexOf("Plank0") === 0 || className.indexOf("PlankBone") === 0 || className.indexOf("Ball") === 0 || className.indexOf("PlankCandy") === 0;\n  };\n  RaceBuilder.prototype._isSphereObject = function (className) {\n    return className === "SphereE";\n  };\n  RaceBuilder.prototype._createMechanicsObject = function (className) {\n    var mechanicsMap = {\n      "ToggleE": GameUtils.ToggleObject,\n      "BoostE": GameUtils.BoostObject,\n      "SafePointE": GameUtils.SafePointObject,\n      "MotorJointE": GameUtils.MotorObject,\n      "PivotJointE": GameUtils.PivotObject,\n      "CameraZoneE": GameUtils.CameraZone,\n      "SpikesE": GameUtils.SpikesObject\n    };\n    var ObjectClass = mechanicsMap[className];\n    return ObjectClass ? new ObjectClass() : null;\n  };\n  // miss fence, HelicopterObject , SphereE\n  RaceBuilder.prototype.dispose = function () {\n    this.complete.removeAll();\n  };\n  return RaceBuilder;\n}();\nexports.RaceBuilder = RaceBuilder;\n\n//# sourceURL=webpack://motox3m/./src/controllers/RaceBuilder.js?')},"./src/controllers/SoundController.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nvar SaveUtils = __webpack_require__(/*! @/src/utils/SaveUtils.js */ "./src/utils/SaveUtils.js");\nvar AssetLoader = __webpack_require__(/*! @/src/assets/AssetLoader.js */ "./src/assets/AssetLoader.js");\nvar SoundController = /*#__PURE__*/function () {\n  function SoundController(game) {\n    _classCallCheck(this, SoundController);\n    if (!game) {\n      throw new Error("Can\'t create a new instance without a game");\n    }\n    this.music = null;\n    this.musicKey = null;\n    this.musicStopped = false;\n    this.musicListen = false;\n    this.audioInstances = {};\n    this.sound = game.sound;\n  }\n  return _createClass(SoundController, [{\n    key: "play",\n    value: function play(key) {\n      var volume = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var loop = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      if (AssetLoader["default"].isSfxReady) {\n        if (!this.audioInstances.hasOwnProperty(key)) {\n          this.audioInstances[key] = this.sound.add(key);\n        }\n        var sfxEnabled = SaveUtils["default"].getInstance().sfx;\n        this.audioInstances[key].play(undefined, undefined, sfxEnabled ? volume : 0, loop, true);\n        return this.audioInstances[key];\n      }\n    }\n  }, {\n    key: "stop",\n    value: function stop(key) {\n      if (this.audioInstances.hasOwnProperty(key)) {\n        this.audioInstances[key].stop();\n      }\n    }\n  }, {\n    key: "playMusic",\n    value: function playMusic(key) {\n      var musicEnabled = SaveUtils["default"].getInstance().music;\n      if (!musicEnabled) {\n        if (AssetLoader["default"].isTracksReady) {\n          this.music = this.sound.play(key, 0.5, true);\n          this.music.stop();\n        } else if (!this.musicListen) {\n          AssetLoader["default"].trackReady.add(this.onMusicReady, this);\n          this.musicListen = true;\n          this.musicKey = key;\n          this.musicStopped = true;\n        }\n        return;\n      }\n      if (!this.music || this.music.name !== key) {\n        if (this.music && this.music.name !== key) {\n          this.music.stop();\n        }\n        if (AssetLoader["default"].isTracksReady) {\n          this.music = this.sound.play(key, 0.5, true);\n        } else if (!this.musicListen) {\n          AssetLoader["default"].trackReady.add(this.onMusicReady, this);\n          this.musicListen = true;\n          this.musicKey = key;\n          this.musicStopped = false;\n        }\n      }\n    }\n  }, {\n    key: "onMusicReady",\n    value: function onMusicReady() {\n      AssetLoader["default"].trackReady.remove(this.onMusicReady, this);\n      if (this.musicKey !== null) {\n        this.music = this.sound.play(this.musicKey, 0.5, true);\n        if (this.musicStopped) {\n          this.music.stop();\n        }\n      }\n    }\n  }, {\n    key: "fadeMusicVolume",\n    value: function fadeMusicVolume(volume, duration) {\n      if (this.music) {\n        this.music.fadeTo(volume, duration);\n      }\n    }\n  }, {\n    key: "stopMusic",\n    value: function stopMusic() {\n      if (this.music && this.music.isPlaying) {\n        this.music.stop();\n      }\n    }\n  }, {\n    key: "toggleSfx",\n    value: function toggleSfx() {\n      var saveUtils = SaveUtils["default"].getInstance();\n      saveUtils.sfx = !saveUtils.sfx;\n    }\n  }, {\n    key: "toggleMusic",\n    value: function toggleMusic() {\n      var saveUtils = SaveUtils["default"].getInstance();\n      saveUtils.music = !saveUtils.music;\n      if (saveUtils.music) {\n        if (this.music) {\n          this.music.play(undefined, undefined, 1, true);\n        }\n        this.musicStopped = false;\n      } else {\n        if (this.music && this.music.isPlaying) {\n          this.stopMusic();\n        }\n        this.musicStopped = true;\n      }\n    }\n  }], [{\n    key: "getInstance",\n    value: function getInstance(game) {\n      if (!SoundController.instance) {\n        SoundController.instance = new SoundController(game);\n      }\n      return SoundController.instance;\n    }\n  }]);\n}();\nSoundController.instance = null;\nexports["default"] = SoundController;\n\n//# sourceURL=webpack://motox3m/./src/controllers/SoundController.js?')},"./src/core/GameCore.js":(__unused_webpack_module,exports)=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n// GameCore - Core game object management system\n// Manages game objects, physics, views, and update cycles\n// Key features:\n// - Central game object management\n// - Update cycle handling\n// - Physics integration\n// - View management\n// - Object lifecycle control\n// Properties:\n// - updated[]: Objects requiring updates\n// - restarted[]: Objects with restart capability\n// - objects[]: All game objects\n// - game: Game instance reference\n// - updatedLen: Length of updated array\n// Methods:\n// - start(): Initialize view and physics\n// - init(game): Set game instance\n// - add(object): Add new game object\n//   * Handles physics bodies\n//   * Adds to view if has graphics\n//   * Registers for updates/restarts\n// - update(delta): Update cycle\n// - restart(): Restart all objects\n// - release(): Cleanup all objects\n// Usage example:\n// const core = new GameCore();\n// core.init(game);\n// core.add(gameObject);\n// \n// // In game loop:\n// core.update(deltaTime);\n//exports.__esModule = true;\nvar GameCore = /*#__PURE__*/function () {\n  function GameCore() {\n    _classCallCheck(this, GameCore);\n    // Core arrays for object management\n    this.updated = [];\n    this.restarted = [];\n    this.objects = [];\n    this.game = null;\n    this.updatedLen = 0;\n  }\n  return _createClass(GameCore, [{\n    key: "start",\n    value: function start() {\n      this.view.start();\n      this.physics.start();\n    }\n  }, {\n    key: "init",\n    value: function init(game) {\n      this.game = game;\n    }\n  }, {\n    key: "add",\n    value: function add(object) {\n      // Add to main objects array\n      this.objects.push(object);\n\n      // Register for updates if needed\n      if (object.update) {\n        this.updatedLen = this.updated.push(object);\n      }\n\n      // Register for restarts if needed\n      if (object.restart) {\n        this.restarted.push(object);\n      }\n\n      // Add to physics system if has body\n      if (object.body) {\n        this.physics.add(object);\n      }\n\n      // Add to view system if has graphics\n      if (object.graphic) {\n        this.view.add(object);\n      }\n    }\n  }, {\n    key: "update",\n    value: function update(delta) {\n      // Update physics first\n      this.physics.update(delta);\n\n      // Update all registered objects\n      for (var i = 0; i < this.updatedLen; i++) {\n        this.updated[i].update(delta);\n      }\n    }\n  }, {\n    key: "restart",\n    value: function restart() {\n      var len = this.restarted.length;\n      for (var i = 0; i < len; i++) {\n        this.restarted[i].restart();\n      }\n    }\n  }, {\n    key: "release",\n    value: function release() {\n      // Release all objects\n      var len = this.objects.length;\n      for (var i = 0; i < len; i++) {\n        this.objects[i].release();\n      }\n\n      // Clear arrays\n      this.objects.splice(0, len);\n      this.restarted.splice(0, this.restarted.length);\n      this.updated.splice(0, this.updatedLen);\n      this.updatedLen = 0;\n\n      // Release subsystems\n      this.view.release();\n      this.physics.release();\n    }\n  }]);\n}();\nexports.GameCore = GameCore;\n\n//# sourceURL=webpack://motox3m/./src/core/GameCore.js?')},"./src/core/GameView.js":(__unused_webpack_module,exports)=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n// GameView - Abstract base class for game view management\n// Defines interface for managing game camera and visual elements\n// Key features:\n// - Abstract view interface\n// - Camera management\n// - Game instance reference\n// - Update cycle support\n// - Resource cleanup\n// Properties:\n// - game: Phaser game instance\n// - raceCamera: Camera instance for racing view\n// Methods:\n// - add(object): Virtual method for adding visual elements\n//   * Meant to be overridden by implementations\n//   * Handles adding objects to view\n//\n// - update(param1, param2, param3, param4): Update view state\n//   * Abstract update method\n//   * Parameters vary by implementation\n//\n// - start(): Initialize view\n//   * Abstract initialization method\n//\n// - release(): Cleanup resources\n//   * Cleans up game reference\n//   * Cleans up camera reference\n// Usage example:\n// class MyGameView extends GameView {\n//   add(object) {\n//     // Add object to view\n//   }\n//   update(p1, p2, p3, p4) {\n//     // Update view state\n//   }\n// }\n/**\r\n * GameView - Abstract base class for game view management\r\n * Handles camera and visual elements in the game\r\n */\nvar GameView = /*#__PURE__*/function () {\n  /**\r\n   * Create a new GameView instance\r\n   * @param {Phaser.Game} game - The Phaser game instance\r\n   */\n  function GameView(game) {\n    _classCallCheck(this, GameView);\n    if (!game) {\n      throw new Error(\'GameView requires a game instance\');\n    }\n\n    /** @type {Phaser.Game} */\n    this.game = game;\n\n    /** @type {Camera} */\n    this.raceCamera = null;\n  }\n\n  /**\r\n   * Add a visual element to the view\r\n   * @param {GameObject} object - The object to add\r\n   * @virtual\r\n   */\n  return _createClass(GameView, [{\n    key: "add",\n    value: function add(object) {\n      // Virtual method - implement in derived class\n    }\n\n    /**\r\n     * Update the view state\r\n     * @param {*} param1 - Implementation specific parameter\r\n     * @param {*} param2 - Implementation specific parameter  \r\n     * @param {*} param3 - Implementation specific parameter\r\n     * @param {*} param4 - Implementation specific parameter\r\n     * @virtual\r\n     */\n  }, {\n    key: "update",\n    value: function update(param1, param2, param3, param4) {\n      // Virtual method - implement in derived class\n    }\n\n    /**\r\n     * Initialize the view\r\n     * @virtual\r\n     */\n  }, {\n    key: "start",\n    value: function start() {\n      // Virtual method - implement in derived class\n    }\n\n    /**\r\n     * Clean up view resources\r\n     */\n  }, {\n    key: "release",\n    value: function release() {\n      this.game = null;\n      this.raceCamera = null;\n    }\n  }]);\n}();\nexports.GameView = GameView;\n\n//# sourceURL=webpack://motox3m/./src/core/GameView.js?')},"./src/core/MaxGameCore.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n\n// Import dependencies\nvar n = __webpack_require__(/*! @/src/physics/NapePhysics.js */ "./src/physics/NapePhysics.js");\nvar o = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar a = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar r = __webpack_require__(/*! @/src/ui/GameUIManager.js */ "./src/ui/GameUIManager.js");\nvar h = __webpack_require__(/*! @/src/camera/CameraPathes.js */ "./src/camera/CameraPathes.js");\nvar l = __webpack_require__(/*! @/src/controllers/SoundController.js */ "./src/controllers/SoundController.js");\nvar c = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar u = __webpack_require__(/*! @/src/utils/SaveUtils.js */ "./src/utils/SaveUtils.js");\n\n// Define MaxGameCore class extending GameCore\nvar d = function (t) {\n  function e() {\n    var e = t !== null && t.apply(this, arguments) || this;\n\n    // Game state variables\n    e.car = null;\n    e.carBuilder = null;\n    e.paused = false;\n    e.drive = false;\n    e.finished = false;\n    e.playerController = null;\n    e.countdown = 0;\n    e.countdownTotal = 0;\n    e.timer = 0;\n\n    // Signal variables\n    e.signalFinish = null;\n    e.signalLoaded = null;\n\n    // Engine sound variables\n    e.pitchPlaying = false;\n    e.prevPart = 0;\n    e.prevAccel = false;\n    e.enginePitch = null;\n    e.engineGazNum = 0;\n    e.engineGaz = null;\n    e.engineStart = null;\n    e.engineLoop = null;\n    e.gamePadLayer = null;\n    return e;\n  }\n  s(e, t);\n\n  // Singleton instance accessor\n  Object.defineProperty(e, "instance", {\n    get: function get() {\n      if (e._instance === null) {\n        e._instance = new e();\n      }\n      return e._instance;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  // Initialize the game core\n  e.prototype.init = function (config) {\n    t.prototype.init.call(this, config);\n    this.physics = new o.MaxPhysics();\n    if (this.signalFinish) {\n      this.signalFinish.removeAll();\n    }\n    this.pitchPlaying = false;\n    this.prevPart = 0;\n    this.engineGazNum = Math.round(Math.random() * 3);\n    this.signalFinish = new Phaser.Signal();\n    this.signalLoaded = new Phaser.Signal();\n    this.view = new o.MaxGameView(this.game);\n  };\n\n  // Add an object to the game\n  e.prototype.add = function (object) {\n    if (object !== null) {\n      t.prototype.add.call(this, object);\n\n      // Handle activatable objects\n      if (object.isActive) {\n        var activatableList = e.activatables[object.id];\n        if (!activatableList) {\n          activatableList = [];\n          e.activatables[object.id] = activatableList;\n        }\n        activatableList.push(object);\n      }\n\n      // Handle reviewable objects\n      if (object.review) {\n        if (!(object instanceof o.DriverObject)) {\n          e.safed.push(object);\n        }\n      }\n    }\n  };\n\n  // Release resources and reset game state\n  e.prototype.release = function () {\n    this.playerController = null;\n    this.playerCar = null;\n    this.car = null;\n    this.finished = false;\n    this.gamePadLayer = null;\n\n    // Clear activatables\n    for (var i in e.activatables) {\n      var _e$activatables, _i;\n      (_e$activatables = e.activatables)[_i = i] && (_e$activatables[_i] = null);\n    }\n\n    // Clear camera paths and other collections\n    h.CameraPathes.instance.clear();\n    e.targets.splice(0, e.targets.length);\n    e.safed.splice(0, e.safed.length);\n\n    // Stop engine sounds\n    if (this.enginePitch) {\n      this.enginePitch.stop();\n    }\n    this.pitchPlaying = false;\n    this.prevPart = 0;\n    this.enginePitch = null;\n\n    // Stop all sounds and release drawings\n    this.stopAllSounds();\n    o.Drawing.release();\n    t.prototype.release.call(this);\n  };\n\n  // Stop all engine-related sounds\n  e.prototype.stopAllSounds = function () {\n    if (this.engineGaz) {\n      this.engineGaz.stop();\n    }\n    this.engineGaz = null;\n    if (this.engineLoop) {\n      this.engineLoop.stop();\n    }\n    this.engineLoop = null;\n    if (this.engineStart) {\n      this.engineStart.stop();\n    }\n    this.engineStart = null;\n  };\n\n  // Activate or deactivate objects by ID\n  e.prototype.activate = function (id, state) {\n    var activatableList = e.activatables[id.toString()];\n    if (activatableList) {\n      for (var n = 0; n < activatableList.length; n++) {\n        var obj = activatableList[n];\n        obj.activate(state);\n      }\n    }\n  };\n\n  // Start the game by setting the map\n  e.prototype.start = function () {\n    t.prototype.start.call(this);\n    this.timer = 0;\n    this.setMap(o.GameData.currentLevel);\n  };\n\n  // Set delayed masks and dispatch signal\n  e.prototype.setDelayedMasks = function () {\n    for (var t = 0; t < o.GraphicUtil.masks.length; t++) {\n      var mask = o.GraphicUtil.masks[t];\n      o.GraphicUtil.maskOwners[t].mask = mask;\n    }\n    o.GraphicUtil.masks = [];\n    o.GraphicUtil.maskOwners = [];\n    this.signalLoaded.dispatch();\n  };\n\n  // Calculate and adjust engine sound based on angular velocity\n  e.prototype.calcEngineSound = function (angularVel) {\n    if (this.enginePitch) {\n      if (this.paused) {\n        if (this.pitchPlaying) {\n          this.pitchPlaying = false;\n          this.enginePitch.stop();\n        }\n        return;\n      }\n      var minVolume = 0.1;\n      var maxVolume = 0.5;\n      var s = this.car.dead ? 0 : 0.5;\n      if (!u["default"].getInstance().sfx) {\n        s = 0;\n      }\n      var normalizedVel = angularVel / 80;\n      if (normalizedVel > 1) {\n        normalizedVel = 1;\n      }\n      var volume = (minVolume + normalizedVel * maxVolume) * s;\n\n      // Clamp volume between 0 and 1\n      volume = Math.max(Math.min(volume, 1), 0);\n      normalizedVel = this.prevPart + (normalizedVel - this.prevPart) * 0.2;\n      if (this.pitchPlaying) {\n        if (this.prevPart !== normalizedVel) {\n          this.enginePitch.volume = volume;\n        }\n        this.prevPart = normalizedVel;\n      } else {\n        this.enginePitch.play("", 0, volume, true);\n        this.pitchPlaying = true;\n      }\n    }\n  };\n\n  // Update loop for the game core\n  e.prototype.update = function (deltaTime) {\n    if (!this.playerCar) {\n      if (!this.car) {\n        return;\n      }\n      this.playerCar = this.car;\n    }\n    this.calcEngineSound(this.playerCar.backWheel.body.angularVel);\n\n    // Handle engine start and loop sounds\n    if (this.engineStart !== null) {\n      if (!this.engineStart.isPlaying) {\n        if (this.engineLoop === null) {\n          this.engineLoop = l["default"].getInstance().play(c.Sounds.EngineFon, 1, true);\n        }\n      }\n    }\n    if (this.paused) {\n      if (this.engineLoop !== null) {\n        this.engineLoop.volume = 0;\n      }\n      if (this.engineStart !== null && this.engineStart.isPlaying) {\n        this.engineStart.volume = 0;\n      }\n      if (this.engineGaz !== null) {\n        this.engineGaz.stop();\n        this.engineGaz = null;\n      }\n    } else if (this.engineLoop !== null) {\n      if (this.car.dead) {\n        this.engineLoop.volume = 0;\n        if (this.engineGaz !== null) {\n          this.engineGaz.stop();\n          this.engineGaz = null;\n        }\n      } else {\n        this.engineLoop.volume = u["default"].getInstance().sfx ? 1 : 0;\n        if (this.engineGaz !== null) {\n          this.engineGaz.volume = u["default"].getInstance().sfx ? 1 : 0;\n        }\n        if (!this.prevAccel && this.car.accell) {\n          if (this.engineGaz !== null) {\n            this.engineGaz.stop();\n            this.engineGaz = null;\n          }\n          this.engineGazNum++;\n          if (this.engineGazNum === 5) {\n            this.engineGazNum = 1;\n          }\n          var accelSoundId = "accel0" + this.engineGazNum;\n          this.engineGaz = l["default"].getInstance().play(accelSoundId);\n        }\n        this.prevAccel = this.car.accell;\n      }\n    }\n    if (!this.paused) {\n      if (o.RacesData.data.delayForMaks > 0) {\n        o.RacesData.data.delayForMaks -= deltaTime;\n        if (o.RacesData.data.delayForMaks <= 0) {\n          e.instance.setDelayedMasks();\n        }\n      }\n      this.updateIternal(deltaTime);\n      t.prototype.update.call(this, deltaTime);\n      this.view.update(this.car.speed, 0, true, deltaTime);\n      this.car.frame.graphic.update2(deltaTime);\n    }\n  };\n\n  // Process finishing the game\n  e.prototype.processFinish = function () {\n    if (!this.finished) {\n      this.finished = true;\n      this.signalFinish.dispatch(1);\n      l["default"].getInstance().play(c.Sounds.Finish);\n    }\n  };\n\n  // Internal update logic\n  e.prototype.updateIternal = function (deltaTime) {\n    if (this.paused) {\n      r["default"].instance.hideTimer();\n    } else if (this.drive) {\n      if (!this.playerCar.dead) {\n        this.timer += deltaTime;\n        r["default"].instance.showTimer();\n      }\n    } else if (this.playerCar.accell || this.playerCar.tilt !== 0) {\n      this.drive = true;\n      r["default"].instance.hideControlsHint();\n    }\n    o.RacesData.TARGET_X = this.playerCar.x;\n    o.RacesData.TARGET_Y = this.playerCar.y;\n  };\n\n  // Set the map for the current level\n  e.prototype.setMap = function (map) {\n    map.id = o.GameData.raceId;\n    o.RacesData.map = map;\n    this.prepareAssets();\n  };\n\n  // Prepare assets for the level\n  e.prototype.prepareAssets = function () {\n    a.RaceAssetsLoader.instance.complete.add(this.assetsReady, this);\n    a.RaceAssetsLoader.instance.start();\n  };\n\n  // Callback when assets are ready\n  e.prototype.assetsReady = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    if (t) {\n      t.dispose();\n    }\n    o.RacesData.data.assetsReady = true;\n    this.buildLevel();\n  };\n\n  // Build the level after assets are ready\n  e.prototype.buildLevel = function () {\n    o.RacesData.data.restart();\n    var raceBuilder = new o.RaceBuilder();\n    raceBuilder.complete.add(this.buildReady, this);\n    raceBuilder.start();\n  };\n\n  // Callback when build is ready\n  e.prototype.buildReady = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    if (t) {\n      t.dispose();\n    }\n    this.createCars();\n  };\n\n  // Create cars for the level\n  e.prototype.createCars = function () {\n    this.carBuilder || (this.carBuilder = new o.CarBuilder());\n    this.carBuilder.complete.add(this.carsReady, this);\n    this.carBuilder.createAllCars();\n  };\n\n  // Callback when cars are ready\n  e.prototype.carsReady = function () {\n    if (this.carBuilder != null) {\n      this.carBuilder.dispose();\n    }\n    this.carBuilder = null;\n    o.RacesData.data.camera = e.instance.view.raceCamera;\n  };\n\n  // Get the physics space\n  e.prototype.getSpace = function () {\n    return n.NapePhysics.space;\n  };\n\n  // Restart from a safe point\n  e.prototype.restartFromSafePoint = function () {\n    for (var i = 0; i < e.safed.length; i++) {\n      e.safed[i].review();\n    }\n  };\n\n  // Deactivate initial activatables\n  e.prototype.initialDeactivate = function () {\n    for (var t in e.activatables) {\n      if (e.activatables[t]) {\n        for (var i = 0; i < e.activatables[t].length; i++) {\n          var obj = e.activatables[t][i];\n          if (obj && !obj.isActive) {\n            obj.activate(false);\n          }\n        }\n      }\n    }\n  };\n\n  // Static properties initialization\n  e._instance = null;\n  e.activatables = {};\n  e.safed = [];\n  e.targets = [];\n  return e;\n  buildLevel;\n}(o.GameCore);\n\n// Export the MaxGameCore class\nexports.MaxGameCore = d;\n\n//# sourceURL=webpack://motox3m/./src/core/MaxGameCore.js?')},"./src/core/RaceCamera.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('var GameUtils = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar CameraPathes = (__webpack_require__(/*! @/src/camera/CameraPathes.js */ "./src/camera/CameraPathes.js").CameraPathes);\nvar RaceCamera = function () {\n  function Camera() {\n    this.object = null;\n    this.car = null;\n    this.tweening = false;\n  }\n  Camera.prototype.setup = function (cameraObject, viewWidth, viewHeight, carObject) {\n    this.maxScale = this.maxScale;\n    this.tweening = false;\n    this.viewportW = viewWidth;\n    this.viewportH = viewHeight;\n    this.viewportHalfH = viewHeight * 0.5;\n    this.viewportHalfW = viewWidth * 0.5;\n    this.object = cameraObject;\n    this.prevX = cameraObject.x;\n    this.prevY = cameraObject.y;\n    this.car = carObject;\n    this.prevScale = cameraObject.scale.x;\n    this.prevFrameH = viewHeight;\n    CameraPathes.instance.tweened = false;\n    this.shakeX = 0;\n    this.shakeY = 0;\n  };\n  Camera.prototype.hardFocusOnCar = function (posX, posY, scale) {\n    this.update(posX + Camera.CAR_DX / scale, posY - 100, scale, false);\n  };\n  Camera.prototype.shake = function () {\n    var tween = GameUtils.GraphicUtil.game.add.tween(this);\n    tween.to({\n      shakeX: 15,\n      shakeY: 15\n    }, 100, Phaser.Easing.Bounce.InOut, false, 0, 3, true);\n    tween.start();\n  };\n  Camera.prototype.shakeContainer = function () {\n    var container = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var tween = GameUtils.GraphicUtil.game.add.tween(container);\n    var originalX = container.x;\n    var originalY = container.y;\n    tween.to({\n      x: container.x - 10,\n      y: container.y - 10\n    }, 15, Phaser.Easing.Bounce.InOut, false, 0, 3, true);\n    tween.onComplete.addOnce(function () {\n      container.x = originalX;\n      container.y = originalY;\n    }, this);\n    tween.start();\n  };\n  Camera.prototype.update = function (posX, posY, scale) {\n    var smooth = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    var targetX;\n    var targetY;\n    var currentScale = 1;\n    if (smooth) {\n      var smoothFactor = 0.4;\n      this.prevX += (posX - this.prevX) * smoothFactor;\n      this.prevY += (posY - this.prevY) * smoothFactor;\n      currentScale = this.prevScale + (scale - this.prevScale);\n      targetX = -this.prevX * currentScale + this.viewportHalfW;\n      targetY = -this.prevY * currentScale + this.viewportHalfH;\n    } else {\n      currentScale = scale;\n      targetX = -posX * currentScale + this.viewportHalfW;\n      targetY = -posY * currentScale + this.viewportHalfH;\n      this.prevX = posX;\n      this.prevY = posY;\n    }\n    this.prevScale = currentScale;\n    Camera.x = -targetX / currentScale;\n    Camera.y = -targetY / currentScale;\n    if (!this.car.finished) {\n      this.updateObject(targetX + this.shakeX, targetY + this.shakeY, currentScale);\n    }\n    Camera.w = this.viewportW / currentScale;\n    Camera.h = this.viewportH / currentScale;\n  };\n  Camera.prototype.updateObject = function (posX, posY, scale) {\n    this.object.scale.set(scale);\n    this.object.x = posX;\n    this.object.y = posY;\n  };\n  Camera.prototype.focusOnCar = function (carX, carY, speed) {\n    var pathY = CameraPathes.instance.getPathPointXY(carX, carY);\n    var isTweening = false;\n    var scale = 1;\n    var frameHeight = this.getFrameHBySpeed(speed);\n    var targetX;\n    var targetY;\n    if (isNaN(pathY)) {\n      scale = Camera.SCALE_MULT * this.viewportH / frameHeight;\n      targetX = carX + Camera.CAR_DX / scale;\n      targetY = carY - 100;\n    } else {\n      var offsetY = 200;\n      var heightDiff = pathY - carY + offsetY;\n      if (heightDiff > frameHeight) {\n        frameHeight = heightDiff;\n      }\n      scale = Camera.SCALE_MULT * this.viewportH / frameHeight;\n      targetY = pathY - frameHeight * 0.5;\n      targetX = carX + Camera.CAR_DX / scale;\n      isTweening = CameraPathes.instance.tweened;\n    }\n    if (isTweening) {\n      this.tweening = true;\n    }\n    this.update(targetX, targetY, scale, this.tweening);\n  };\n  Camera.prototype.focusOnCameraZone = function (posX, posY) {\n    var zone = GameUtils.CameraZone.current;\n    var targetX = zone.x;\n    var targetY = zone.y;\n    if (zone.move === GameUtils.CameraZone.HOR) {\n      targetX = posX < zone.minMove ? zone.minMove : posX > zone.maxMove ? zone.maxMove : posX;\n    } else if (zone.move === GameUtils.CameraZone.VER) {\n      targetY = posY < zone.minMove ? zone.minMove : posY > zone.maxMove ? zone.maxMove : posY;\n    }\n    this.tweening = true;\n    this.update(targetX, targetY, zone.scale, true);\n  };\n  Camera.prototype.focusOnPoint = function (posX, posY) {\n    this.tweening = true;\n    this.update(posX, posY, 1, true);\n  };\n  Camera.prototype.getFrameHBySpeed = function (speed) {\n    var frameHeight = this.viewportH;\n    var minSpeed = 500;\n    var maxSpeed = 3000;\n    if (speed > minSpeed) {\n      var baseHeight = this.viewportH;\n      speed = speed > maxSpeed ? maxSpeed : speed;\n      frameHeight += (speed - minSpeed) / 2500 * baseHeight;\n    }\n    var heightDiff = frameHeight - this.prevFrameH;\n    var minDiff = 2;\n    if (heightDiff < -minDiff) {\n      frameHeight = this.prevFrameH - minDiff;\n    } else if (heightDiff > 8) {\n      frameHeight = this.prevFrameH + 8;\n    }\n    this.prevFrameH = frameHeight;\n    return frameHeight;\n  };\n  Camera.prototype.release = function () {\n    this.object = null;\n    this.car = null;\n  };\n  Camera.inCamera = function (posX, posY, margin) {\n    return posX > Camera.x - margin && posX < Camera.x + Camera.w + margin && posY > Camera.y - margin && posY < Camera.y + Camera.h + margin;\n  };\n  Camera.CAR_DX = 150;\n  Camera.SCALE_MULT = 1;\n  return Camera;\n}();\nexports.RaceCamera = RaceCamera;\n\n//# sourceURL=webpack://motox3m/./src/core/RaceCamera.js?')},"./src/core/SpriteData.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true; Assets Management\nvar n = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar o = __webpack_require__(/*! @/src/config/Game.js */ "./src/config/Game.js");\nvar a = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar r = Phaser.Group;\nvar h = __webpack_require__(/*! @/src/lib/PhaserLib.js */ "./src/lib/PhaserLib.js");\nvar l = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar c = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar u = __webpack_require__(/*! @/src/controllers/InputController.js */ "./src/controllers/InputController.js");\nvar d = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar p = function () {\n  function t() {}\n  return t;\n}();\nexports["default"] = p;\nvar f = function () {\n  function t(t, e, i) {\n    this.target = i;\n    this.method = e;\n    this.key = t;\n  }\n  return t;\n}();\nexports.RenderVO = f;\nvar y = function () {\n  function t() {}\n  t.BG = [["Bg0_0", "Bg1_0", "Bg2_0"], ["Bg0_0", "Bg1_0", "Bg2_0"], ["Bg0_0", "Bg1_0", "Bg2_0"]];\n  t.ROAD_LINE = [["line", "RoadLine0_1", "RoadLine1_4", "RoadLine0_3", "RoadLine0_4", "Plank0", "line", "line_alum", "RoadLine0_8", "LineSpike0", "UnLine0", "UnLine1", "line_alum", "CandyGround", "RoadLine0_Bg"]];\n  t.PILLAR_LINE = [["RoadPillar0_0", "RoadPillar0_1", "RoadPillar0_2"], ["RoadPillar0_0", "RoadPillar0_1", "RoadPillar0_2"], ["RoadPillar0_0", "RoadPillar0_1", "RoadPillar0_2"]];\n  // t.PILLAR_LINE = [["RoadPillar0_0", "CandyPillar", "RoadPillar0_2"]];\n  t.PILLAR_LINE = [["RoadPillar0_0", "CandyPillar", "line_alum"]];\n  t.ROAD_TILE = ["RoadTile0", "RoadTile0", "RoadTile0"];\n  t.ROAD_SHAPE = [["RoadTile0_1", "RoadTile1_1", "RoadTile0", "UnTile0", "UnTile1", "UnTile2", "RoadTile0_Bg"], ["RoadTile0_1", "RoadTile1_1", "RoadTile0", "UnTile0", "UnTile1", "UnTile2", "RoadTile0_Bg"], ["RoadTile0_1", "RoadTile1_1", "RoadTile0", "UnTile0", "UnTile1", "UnTile2", "RoadTile0_Bg"]];\n  t.DECORS = [["Dec13", "Dec14", "Dec15", "Dec16", "Dec36", "Dec37", "Dec38", "Dec40", "Dec41", "Dec42", "Dec50", "Dec51", "Dec52", "Dec53", "Dec54", "Dec55", "Dec56", "Dec57", "Dec58", "Dec59", "Dec60", "Sign1", "Sign2", "Sign15", "Sign21", "SignPillar", "PillarTop0_0", "PillarTop0_1", "PillarTop0_2", "PillarBot0_0", "PillarBot0_1", "PillarBot0_2", "GlassCrashed0_0", "GlassCrashed0_1", "GlassCrashed0_2", "GlassCrashed0_3", "GlassCrashed0_4", "GlassCrashed0_5", "BoostAnim", "RocketAnim", "Pivot0", "particle_boost", "GeyserBase", "geyser_anim", "PlankCandy0", "PlankCandy1"]];\n  t.OBJECTS = [["Tnt1", "BarrelE", "SpikesE", "Removed0", "Removed1", "Plank0", "GlassCrashed0", "GlassCrashed1", "BoostE", "PlankWipe0", "RemovedWipe0", "SphereE"]];\n  t.FRAMES_ANCHORX = [0.48, 0.46, 0.45, 0.48, 0.52, 0.59, 0.49, 0.58, 0.526, .453]; // 23 is new bike\n  t.FRAMES_ANCHORY = [0.65, 0.61, 0.62, 0.67, 0.65, 0.647, 0.67, 0.71, 0.596, .647];\n  t.SUSPEND_BACK_ANCHORX = [0.05, null, 0.05, 0.08, 0, -0.06, 0.03, -0.07, -0.125, .114];\n  t.SUSPEND_BACK_ANCHORY = [0.5, null, 0.5, 0.54, 0.5, 0.5, 0.53, 0.43, 0.5625, .417];\n  t.SUSPEND_FRONT_ANCHORX = [0.8, null, 0.8, 0.86, 0.95, 0.86, 0.87, 0.95, 0.836, .808];\n  t.SUSPEND_FRONT_ANCHORY = [0.2, null, 0.5, 0.32, 0.5, 0.478, 0.1, 0.46, 0.625, .213];\n  t.ARCHORS_X = {\n    driver_head: [0.5, 0.5, 0.5, 0.5, 0.5, 0.6, 0.62, 0.42, 0.486, .395],\n    // 23 is new bike\n    driver_corpse: [0.5, 0.5, 0.5, 0.5, 0.5, 0.56, 0.69, 0.47, null, null],\n    driver_arm: [0.5, 0.5, 0.5, 0.5, 0.5, 0.45, 0.4, 0.47, null, null],\n    driver_forearm: [0.5, 0.5, 0.5, 0.5, 0.5, 0.35, 0.48, 0.5, null, null],\n    driver_hip: [0.5, 0.5, 0.5, 0.5, 0.5, 0.59, 0.5, 0.55, 0.5, .545],\n    driver_shin: [0.5, 0.5, 0.5, 0.5, 0.5, 0.43, 0.28, 0.4, 0.35, .4]\n  };\n  t.ARCHORS_Y = {\n    driver_head: [0.5, 0.5, 0.5, 0.5, 0.5, 0.38, 0.52, 0.47, 0.606, .519],\n    // 23 is new bike\n    driver_corpse: [0.5, 0.5, 0.5, 0.5, 0.5, 0.61, 0.47, 0.5, null, null],\n    driver_arm: [0.5, 0.5, 0.5, 0.5, 0.5, 0.54, 0.5, 0.55, null, null],\n    driver_forearm: [0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.38, 0.5, null, null],\n    driver_hip: [0.5, 0.5, 0.5, 0.5, 0.5, 0.53, 0.6, 0.64, 0.454, .583],\n    driver_shin: [0.5, 0.5, 0.5, 0.5, 0.5, 0.45, 0.47, 0.52, 0.5, .5]\n  };\n  t.WHEELS = [["Wheel_1_0"], ["Wheel_2_0"], ["Wheel_3_0"], ["Wheel_4_0"], ["Wheel_5_0"], ["Wheel_6_0"], ["Wheel_7_0"], ["Wheel_8_0"], ["Wheel_9_0"], ["Wheel_10_0"]]; // 23 is new bike\n  return t;\n}();\nexports.AssetsList = y;\nvar g = function () {\n  function t() {\n    this.storage = {};\n  }\n  t.prototype.getByKey = function (t) {\n    return this.storage[t];\n  };\n  t.prototype.add = function (t, e) {\n    this.storage[t] = e;\n  };\n  t.prototype.dispose = function () {\n    for (var t in this.storage) {\n      var _this$storage, _t;\n      (_this$storage = this.storage)[_t = t] && (_this$storage[_t] = null);\n    }\n  };\n  Object.defineProperty(t, "instance", {\n    get: function get() {\n      if (t._instance === null) {\n        t._instance = new t();\n      }\n      return t._instance;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  t.currentAatlass = c.Atlases.Theme;\n  t._instance = null;\n  return t;\n}();\nexports.AssetsStorage = g;\nvar m = function (t) {\n  function e(e) {\n    var i = t.call(this, e) || this;\n    i.gamePadLayer = null;\n    i.bg = new r(i.game);\n    i.bg.interactive = false;\n    i.bg.scale.set(2);\n    i.race = new r(i.game);\n    i.race.interactive = false;\n    i.landscapeShapes = new r(i.game, i.race);\n    i.landscape = new r(i.game, i.race);\n    i.objects = new r(i.game, i.race);\n    i.front = new r(i.game, i.race);\n    i.gui = new r(i.game);\n    i.raceCamera = new n.RaceCamera();\n    i.raceCamera.setup(i.race, o["default"].GAME_W, o["default"].GAME_H, d.MaxGameCore.instance);\n    i.gamePadLayer = i.game.add.group();\n    u["default"].instance.init(i.gamePadLayer, i.game);\n    return i;\n  }\n  s(e, t);\n  e.prototype.start = function () {\n    t.prototype.start.call(this);\n    this.game.world.addChild(this.bg);\n    this.game.world.addChild(this.race);\n    this.game.world.addChild(this.gui);\n    this.game.world.addChild(this.gamePadLayer);\n    this.raceCamera.setup(this.race, o["default"].GAME_W, o["default"].GAME_H, d.MaxGameCore.instance);\n  };\n  e.prototype.add = function (t) {\n    if (t.type === a.ObjectTypes.BG) {\n      this.bg.addChild(t.graphic);\n    } else if (t.type === a.ObjectTypes.LANDSCAPE) {\n      this.landscape.addChild(t.graphic);\n    } else if (t.type === a.ObjectTypes.LANDSCAPE_SHAPE) {\n      this.landscapeShapes.addChild(t.graphic);\n    } else if (t.type === a.ObjectTypes.LANDSCAPE_BACK) {\n      this.landscape.addChildAt(t.graphic, 0);\n    } else if (t.type === a.ObjectTypes.CAR) {\n      this.objects.addChild(t.graphic);\n    } else if (t.type === a.ObjectTypes.OBJECT) {\n      this.objects.addChild(t.graphic);\n    } else if (t.type === a.ObjectTypes.BULLET) {\n      this.objects.addChild(t.graphic);\n    } else if (t.type === a.ObjectTypes.EFFECT) {\n      this.front.addChild(t.graphic);\n    } else if (t.type === a.ObjectTypes.CAR_PART) {\n      this.front.addChildAt(t.graphic, 0);\n    } else if (t.type === a.ObjectTypes.FRONT) {\n      this.front.addChild(t.graphic);\n    }\n  };\n  e.prototype.update = function (e, i, s, o) {\n    t.prototype.update.call(this, e, i, s, o);\n    if (s) {\n      var a = n.RacesData.TARGET_X;\n      var r = n.RacesData.TARGET_Y;\n      if (n.CameraZone.focusedOnPoint) {\n        this.raceCamera.focusOnPoint(a, r);\n      } else if (n.CameraZone.current) {\n        this.raceCamera.focusOnCameraZone(a, r);\n      } else {\n        this.raceCamera.focusOnCar(a, r, e);\n      }\n    }\n  };\n  e.prototype.release = function () {\n    this.raceCamera.release();\n    this.raceCamera = null;\n    this.car = null;\n    this.bg = null;\n    this.landscape = null;\n    this.landscapeShapes = null;\n    this.objects = null;\n    this.front = null;\n    this.gui = null;\n  };\n  return e;\n}(n.GameView);\nexports.MaxGameView = m;\nvar v = function () {\n  function t() {\n    this.complete = new h.Signal();\n  }\n  Object.defineProperty(t, "instance", {\n    get: function get() {\n      if (t._instance === null) {\n        t._instance = new t();\n      }\n      return t._instance;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  t.prototype.start = function () {\n    this.theme = n.RacesData.map.settings.theme % 3;\n    // console.log("this.theme", this.theme);\n    if (this.theme > 1) {\n      this.theme = 0;\n    }\n    var t = null;\n    var e = 0;\n    var i = "";\n    var s = g.instance;\n    var o = y.BG[this.theme];\n    s.add("Bg0", o[0]);\n    if (o[1]) {\n      s.add("Bg1", o[1]);\n    }\n    if (o[2]) {\n      s.add("Bg2", o[2]);\n    }\n    t = y.ROAD_LINE[this.theme];\n    e = 0;\n    for (; e < t.length; e++) {\n      i = t[e];\n      s.add("road_line" + e.toString(), i);\n    }\n    t = y.PILLAR_LINE[this.theme];\n    e = 0;\n    for (; e < t.length; e++) {\n      i = t[e];\n      s.add("pillar_line" + e.toString(), i);\n    }\n    i = y.ROAD_TILE[this.theme];\n    s.add("road_tile", i);\n    t = y.ROAD_SHAPE[this.theme];\n    e = 0;\n    for (; e < t.length; e++) {\n      i = t[e];\n      s.add("road" + e.toString(), i);\n    }\n    t = y.DECORS[this.theme];\n    e = 0;\n    for (; e < t.length; e++) {\n      i = t[e];\n      s.add(i, i);\n    }\n    t = y.OBJECTS[this.theme];\n    e = 0;\n    for (; e < t.length; e++) {\n      i = t[e];\n      this.addObject(i);\n    }\n    s.add("smoke_part", "smoke_part_anim");\n    s.add("ground_part", "ground_part_anim");\n    s.add("car_exp_anim", "CarExplode");\n    s.add("cloud_anim", "DestCloud");\n    s.add("SafePointAnim", "SafePointAnim");\n    s.add("Motor0", "Motor0");\n    s.add("Motor1", "Motor1");\n    s.add("glass_exp_anim", "GlassExplode");\n    this.addCar(n.CarsData.params, false);\n  };\n  t.prototype.addObject = function (t) {\n    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";\n    var i = t;\n    var s = n.CarsData.geomObj[i];\n    g.instance.add(i + "_data", s);\n    g.instance.add(i, i);\n    return s;\n  };\n  t.prototype.addCar = function (t, e) {\n    var i;\n    var s = g.instance;\n    var o = n.Inventory.instance.skin;\n    n.RacesData.data.skinId = o;\n    var a;\n    // newcar-tbg95\n    if (o > 9) {\n      a = "Wheel_".concat(o, "_0");\n    } else {\n      a = y.WHEELS[o][t.wheels];\n    }\n    console.log("a--fx", a);\n    i = a;\n    if (!s.getByKey(i + "b")) {\n      s.add(i + "b", a);\n      s.add(i + "f", a);\n    }\n    i = "car_wheel" + o.toString();\n    if (!s.getByKey(i)) {\n      s.add(i, a);\n    }\n    // s.add(a, a);\n    s.add("suspend_back", "suspend_back");\n    s.add("suspend_front", "suspend_front");\n    s.add("Car" + o.toString() + "FrameExploded", "Car" + o.toString() + "FrameExploded");\n    i = "bike_" + o.toString() + "_base";\n    // console.log("i", s.getByKey(i), o);\n    if (!s.getByKey(i)) {\n      s.add(i, i);\n    }\n    i = "driver_shin";\n    this.parsePart(i);\n    i = "driver_hip";\n    this.parsePart(i);\n    i = "driver_corpse";\n    this.parsePart(i);\n    i = "driver_arm";\n    this.parsePart(i);\n    i = "driver_forearm";\n    this.parsePart(i);\n    i = "driver_head";\n    this.parsePart(i);\n    this.complete.dispatch(this);\n  };\n  t.prototype.parsePart = function (t) {\n    var e = {\n      x: 0,\n      y: 0,\n      r: l["default"].TO_RAD * 0,\n      w: 1,\n      h: 1\n    };\n    g.instance.add(t, t);\n    return e;\n  };\n  t.prototype.dispose = function () {\n    this.complete.removeAll();\n  };\n  t._instance = null;\n  return t;\n}();\nexports.RaceAssetsLoader = v;\nvar b = function () {\n  function t() {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "bg0000";\n    this.nameTex = "";\n    this._bitmapData = null;\n    this._rect = new Phaser.Rectangle(0, 0, 1, 1);\n    this.nameTex = t + "0000";\n  }\n  Object.defineProperty(t.prototype, "bitmapData", {\n    get: function get() {\n      this._bitmapData = n.GraphicUtil.game.make.sprite(0, 0, n.GraphicUtil.currentAtlass, this.nameTex);\n      return this._bitmapData;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(t.prototype, "rect", {\n    get: function get() {\n      this._rect = new Phaser.Rectangle(0, 0, this._bitmapData.width, this._bitmapData.height);\n      return this._rect;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return t;\n}();\nexports.SpriteData = b;\n\n//# sourceURL=webpack://motox3m/./src/core/SpriteData.js?')},"./src/data/AtlasesData.js":(__unused_webpack_module,exports)=>{eval('//exports.__esModule = true;\nvar s = function () {\n  function t() {}\n  t.Garage = "garage";\n  t.Cars = "cars_game";\n  t.CarsNew = "cars_game_new";\n  t.NewCars = [\'bike9\', \'bike10\', \'bike11\', \'bike12\', "bike13", "bike14", "bike15", "bike16", "bike17", "bike18", "bike19", "bike20", "bike21", "bike22", "bike23", "bike24", "bike25", "bike26"];\n  t.Theme0 = "theme0";\n  t.Theme1 = "theme1";\n  t.Theme2 = "theme2";\n  t.Theme = "theme";\n  t.Theme3 = "theme3";\n  t.Xmas = "xmas";\n  t.Xmas1 = "xmas1";\n  t.Garage1 = "garage1";\n  t.preloadList = [];\n  // t.list = [t.Cars, t.Garage, t.CarsNew];\n  t.list = [t.Cars, t.Garage, t.CarsNew, t.Garage1];\n  t.fullList = [t.Theme, t.Theme0];\n  // t.fullList = [t.Theme];\n  return t;\n}();\nexports["default"] = s;\n\n//# sourceURL=webpack://motox3m/./src/data/AtlasesData.js?')},"./src/data/BgElVo.js":(__unused_webpack_module,exports)=>{eval("// BgElVo (Background Element Value Object) - Data structure for background elements\n// Stores position, dimension and texture data for background layer elements\n\n// Key features:\n// - Simple data container\n// - Position tracking\n// - Dimension storage\n// - Texture reference\n// - Phaser Point integration\n\n// Properties:\n// - width: Element width\n// - dx: X-axis offset/position\n// - texture: Reference to element texture\n// - point: Phaser.Point for Y position\n//   * x always 0\n//   * y from configuration\n\n// Usage example:\n// const bgElement = new BgElVo(\n//   {\n//     width: 800,\n//     x: 100,\n//     y: 300\n//   },\n//   'backgroundTexture'\n// );\n\n// Typically used for:\n// - Parallax backgrounds\n// - Background layer management\n// - Scrolling backgrounds\n// - Background element positioning\n//exports.__esModule = true;\nvar s = function () {\n  function t(t, e) {\n    this.width = t.width;\n    this.dx = t.x;\n    this.texture = e;\n    this.point = new Phaser.Point(0, t.y);\n  }\n  return t;\n}();\nexports.BgElVo = s;\n\n//# sourceURL=webpack://motox3m/./src/data/BgElVo.js?")},"./src/data/CarUpgrades.js":(__unused_webpack_module,exports)=>{eval("// CarUpgrades - Data class for tracking vehicle upgrade levels\n// Manages the upgrade state for different vehicle systems\n\n// Key features:\n// - Tracks four upgrade categories\n// - Simple state verification\n// - Zero-state checking\n// - Basic data structure\n\n// Properties:\n// - engine: Engine upgrade level (0-N)\n//   * Affects vehicle power and speed\n//\n// - wheel: Wheel upgrade level (0-N)\n//   * Affects handling and traction\n//\n// - health: Health upgrade level (0-N)\n//   * Affects vehicle durability\n//\n// - weapon: Weapon upgrade level (0-N)\n//   * Affects combat capabilities\n\n// Methods:\n// - isZero(): Check if all upgrades are at level 0\n//   * Returns true if no upgrades applied\n//   * Used for initial state verification\n\n// Usage example:\n// const upgrades = new CarUpgrades();\n// upgrades.engine = 2;  // Set engine to level 2\n// if (!upgrades.isZero()) {\n//   // Handle upgraded state\n// }\n//exports.__esModule = true;\nvar s = function () {\n  function t() {\n    this.engine = 0;\n    this.wheel = 0;\n    this.health = 0;\n    this.weapon = 0;\n  }\n  t.prototype.isZero = function () {\n    return this.engine === 0 && this.wheel === 0 && this.health === 0 && this.weapon === 0;\n  };\n  return t;\n}();\nexports.CarUpgrades = s;\n\n//# sourceURL=webpack://motox3m/./src/data/CarUpgrades.js?")},"./src/data/CarsData.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('//exports.__esModule = true; Cars/Bikes Data\nvar s = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar n = function () {\n  function t() {}\n  t.release = function () {\n    t.paramsList.splice(0, t.paramsList.length);\n    for (var e in t.geom) {\n      var _t$geom, _e;\n      (_t$geom = t.geom)[_e = e] && (_t$geom[_e] = null);\n    }\n  };\n  t.EDITED = -1;\n  t.paramsList = [];\n  t.geom = {};\n  t.geomObj = {};\n  t.cars = new s.RaceCars();\n  t.BASE_PHASE = 3;\n  t.MAX_PARTS = 3;\n  t.INVURNABLE_TIME = 2.5;\n  t.DEAD_TIME = 0.5;\n  t.FLIP = 0.5;\n  t.WHEELIE_PART = 0.1;\n  t.ITEM_MIN_DELAY = 0;\n  t.ITEM_DELTA_DELAY = 0;\n  t.BOMB_ITEM_DAMAGE = 2500;\n  t.BOMB_ITEM_RADIUS = 32;\n  t.RC_ITEM_DAMAGE = 2500;\n  t.RC_ITEM_RADIUS = 32;\n  t.prize_kill = 100;\n  t.BOSSES = [3, 5, 7, 9];\n  t.MAX_TORQUE_MULT = 3;\n  return t;\n}();\nexports.CarsData = n;\n\n//# sourceURL=webpack://motox3m/./src/data/CarsData.js?')},"./src/data/GameData.js":(__unused_webpack_module,exports)=>{eval("//exports.__esModule = true;\nvar s = function () {\n  function t() {}\n  t.raceId = 0;\n  t.currentLevel = null;\n  t.currentCar = null;\n  t.raceResult = 0;\n  t.carId = -1;\n  return t;\n}();\nexports.GameData = s;\n\n//# sourceURL=webpack://motox3m/./src/data/GameData.js?")},"./src/data/GeomData.js":(__unused_webpack_module,exports)=>{eval('var GeomData = function () {\n  function GeomData() {}\n  GeomData.WheelFront = {\n    "x": -34,\n    "y": 17,\n    "r": 0,\n    "g": ""\n  };\n  GeomData.WheelBack = {\n    "x": 47,\n    "y": 17,\n    "r": 0,\n    "g": ""\n  };\n  GeomData.SuspendFront = {\n    "x": 46,\n    "y": 16,\n    "r": 63.00018310546875,\n    "g": ""\n  };\n  GeomData.SuspendBack = {\n    "x": -6,\n    "y": 12,\n    "r": 169.69569396972656,\n    "g": ""\n  };\n  GeomData.Base = {\n    "x": 0,\n    "y": 0,\n    "r": 0,\n    "g": ""\n  };\n  GeomData.DriverCorpse = {\n    "x": -8.35,\n    "y": -33.75,\n    "r": 15.732131958007812,\n    "g": ""\n  };\n  GeomData.DriverHead = {\n    "x": -1.8,\n    "y": -59.5,\n    "r": 14.998931884765625,\n    "g": ""\n  };\n  GeomData.DriverForearm = {\n    "x": 8.8,\n    "y": -33.35,\n    "r": 11.00091552734375,\n    "g": ""\n  };\n  GeomData.DriverArm = {\n    "x": -4.25,\n    "y": -39.4,\n    "r": 44.99913024902344,\n    "g": ""\n  };\n  GeomData.DriverShin = {\n    "x": -1.8,\n    "y": -2.7,\n    "r": 3.0003509521484375,\n    "g": ""\n  };\n  GeomData.DriverHip = {\n    "x": -7.4,\n    "y": -18.5,\n    "r": 29.9998779296875,\n    "g": ""\n  };\n  return GeomData;\n}();\nexports["default"] = GeomData;\n\n//# sourceURL=webpack://motox3m/./src/data/GeomData.js?')},"./src/data/ImageData.js":(__unused_webpack_module,exports)=>{eval('//exports.__esModule = true;\nvar s = function () {\n  function t() {}\n  t.DBBike = "bikes_texture";\n  t.DBMenu = "menu_texture";\n  t.MapBg = "0bg_garage5";\n  t.MapBgXs = "0bg_garage_xs";\n  t.MapBgLeft = \'0bg_garage_l0000\';\n  t.MapBgRigt = \'0bg_garage_r0000\';\n  t.preloadList = [];\n  t.list = [t.DBMenu];\n  t.fullList = [t.DBBike, t.MapBg, t.MapBgLeft, t.MapBgRigt];\n  return t;\n}();\nexports["default"] = s;\n\n//# sourceURL=webpack://motox3m/./src/data/ImageData.js?')},"./src/data/Inventory.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('//exports.__esModule = true; skin bike inventory\nvar s = __webpack_require__(/*! @/src/states/GameState.js */ "./src/states/GameState.js");\nvar n = __webpack_require__(/*! @/src/data/RacesData.js */ "./src/data/RacesData.js");\nvar o = function () {\n  function t() {\n    this.save = null;\n    this.firstEnter = false;\n    this.inited = false;\n  }\n  Object.defineProperty(t, "instance", {\n    get: function get() {\n      if (t._instance == null) {\n        t._instance = new t();\n        t._instance.signalUnlock = new Phaser.Signal();\n      }\n      return t._instance;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  t.prototype.init = function () {\n    if (!this.inited) {\n      this.inited = true;\n      this.save = {};\n      this.save.skin = 1;\n      this.save.stars = 0;\n      var e = this.save[t.LAST_ENTER];\n      this.save[t.LAST_ENTER] = Date.now();\n      if (!e) {\n        this.firstEnter = true;\n      }\n      this.save[t.RACE_PREFIX + 1 + t.RACE_RESULT] = 0;\n    }\n  };\n  t.prototype.restore = function () {\n    /*var e = t.instance.save[t.RACE_PREFIX + 1 + t.RACE_RESULT];\r\n    var i = t.instance.save[t.RACE_PREFIX + 10 + t.RACE_RESULT];\r\n    if (e !== undefined) {\r\n      if (i === undefined) {\r\n        for (var s = 1; s <= 10; s++) {\r\n          // this.save[t.RACE_PREFIX + s.toString() + t.RACE_RESULT] = 0;\r\n        }\r\n      }\r\n      if (t.instance.save[t.RACE_PREFIX + 25 + t.RACE_RESULT] !== undefined) {\r\n        if (t.instance.save[t.RACE_PREFIX + 26 + t.RACE_RESULT] === undefined) {\r\n          t.instance.save[t.RACE_PREFIX + 26 + t.RACE_RESULT] = 0;\r\n        }\r\n      }\r\n    }*/\n  };\n  t.prototype.incStar = function () {\n    this.save.stars += 10;\n  };\n  t.prototype.reset = function () {\n    this.inited = false;\n    this.init();\n  };\n  t.prototype.getSkin = function () {\n    if (s["default"].isTrying) {\n      return s["default"].tryBike;\n    } else {\n      return this.skin;\n    }\n  };\n  t.prototype.setRaceResult = function (e, i, s) {\n    var raceKey = t.RACE_PREFIX + e.toString();\n    var o = this.save[raceKey + t.RACE_RESULT];\n    if (!o) {\n      if (e < n.RacesData.MAP_COUNT) {\n        this.save[t.RACE_PREFIX + (e + 1).toString() + t.RACE_RESULT] = 0;\n      }\n      this.save[raceKey + t.RACE_RESULT] = i;\n      this.save[raceKey + t.RACE_TIME] = s;\n      return true;\n    }\n    if (i > Number(o)) {\n      this.save[raceKey + t.RACE_RESULT] = i;\n    }\n    var a = this.save[raceKey + t.RACE_TIME];\n    var r = parseFloat(a || 100500);\n    if (s < r) {\n      this.save[raceKey + t.RACE_TIME] = s;\n      return true;\n    }\n    return false;\n  };\n  t.prototype.setScore = function (e, i) {\n    this.save[t.RACE_PREFIX + e.toString() + t.RACE_SCORE] = i;\n    return this.getTotalScore();\n  };\n  t.prototype.getTotalScore = function () {\n    var e = 0;\n    for (var i = 1; i <= n.RacesData.MAP_COUNT; i++) {\n      if (this.save[t.RACE_PREFIX + i.toString() + t.RACE_SCORE] !== undefined) {\n        e += this.save[t.RACE_PREFIX + i.toString() + t.RACE_SCORE];\n      }\n    }\n    return e;\n  };\n  t.prototype.getTotalStars = function () {\n    var e = 0;\n    for (var i = 1; i <= n.RacesData.MAP_COUNT; i++) {\n      if (this.save[t.RACE_PREFIX + i.toString() + t.RACE_RESULT] !== undefined) {\n        e += this.save[t.RACE_PREFIX + i.toString() + t.RACE_RESULT];\n      }\n    }\n    return e += this.save.stars;\n  };\n  t.prototype.unlockAll = function () {\n    for (var e = 1; e < 100; e++) {\n      console.log("unlocking", t.RACE_PREFIX + e.toString() + t.RACE_RESULT);\n      this.save[t.RACE_PREFIX + e.toString() + t.RACE_RESULT] = 3;\n    }\n    this.save[t.LAST_ENTER] = Date.now();\n    this.signalUnlock.dispatch();\n  };\n  Object.defineProperty(t.prototype, "skin", {\n    get: function get() {\n      return this.save.skin;\n    },\n    set: function set(t) {\n      this.save.skin = t;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  t.prototype.unlockSkin = function (t, e) {\n    return e > 0 && this.save["skin" + t] !== true && (this.save["skin" + t] = true, true);\n  };\n  t.LAST_ENTER = "l_e";\n  t.RACE_PREFIX = "r_";\n  t.RACE_RESULT = "_r";\n  t.RACE_SCORE = "_s";\n  t.RACE_TIME = "_t";\n  return t;\n}();\nexports.Inventory = o;\n\n//# sourceURL=webpack://motox3m/./src/data/Inventory.js?')},"./src/data/JSONData.js":(__unused_webpack_module,exports)=>{eval('//exports.__esModule = true;\nvar s = function () {\n  function t() {}\n  t.Car001 = "1_car";\n  t.Bike = "bike";\n  t.DBBike = "bikes_skeleton";\n  t.DBBike_Texture = "bikes_texture";\n  t.DBMenu = "menu_skeleton";\n  t.DBMenu_Texture = "menu_texture";\n  t.Objects = "objects";\n  t.Map = "map";\n  t.preloadList = [];\n  t.list = [t.Map, t.Objects, t.DBMenu, t.DBMenu_Texture, t.Car001];\n  t.fullList = [t.DBBike, t.DBBike_Texture, t.Bike];\n  t.fullListPivots = ["bike9_pivots", "bike10_pivots", "bike11_pivots", "bike12_pivots", "bike13_pivots", "bike14_pivots", "bike15_pivots", "bike16_pivots", "bike17_pivots", "bike18_pivots", "bike19_pivots", "bike20_pivots", "bike21_pivots", "bike22_pivots", "bike23_pivots", "bike24_pivots", "bike25_pivots", "bike26_pivots"];\n  t.levelsList = [];\n  return t;\n}();\nexports["default"] = s;\n\n//# sourceURL=webpack://motox3m/./src/data/JSONData.js?')},"./src/data/RaceCars.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('//exports.__esModule = true;\nvar s = __webpack_require__(/*! @/src/config/Game.js */ "./src/config/Game.js");\nvar n = __webpack_require__(/*! @/src/data/RacesData.js */ "./src/data/RacesData.js");\nvar o = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar a = function () {\n  function t() {\n    this.player = {};\n    // this.player2 = {}; // player 2\n    this.bots = [];\n    this.cars = [];\n  }\n  t.prototype.reset = function () {\n    this.player.x = s["default"].GAME_W * 0.4; // 0.5\n    this.player.y = s["default"].GAME_H * 0.5;\n    // this.player2.x = s.default.GAME_W * 0.5;\n    // this.player2.y = s.default.GAME_H * 0.5;\n    this.bots.splice(0, this.bots.length);\n    this.cars.splice(0, this.cars.length);\n  };\n  t.prototype.add = function (t) {\n    if (t.className === "PlayerWP") {\n      n.RacesData.data = new o.RaceData();\n      this.player.x = t.params.x;\n      this.player.y = t.params.y;\n      n.RacesData.data.startX = this.player.x;\n    }\n  };\n  t.prototype.setDrive = function (t) {\n    for (var e = 0; e < this.cars.length; e++) {\n      this.cars[e].drive = t;\n    }\n  };\n  t.COLORS = [1, 3, 3, 1, 3, 1, 1, 1, 1, 1];\n  return t;\n}();\nexports.RaceCars = a;\n\n//# sourceURL=webpack://motox3m/./src/data/RaceCars.js?')},"./src/data/RaceData.js":(__unused_webpack_module,exports)=>{eval("//exports.__esModule = true;\nvar s = function () {\n  function t() {\n    this.assetsReady = false;\n    this.restarted = false;\n    this.gravityY = 1400;\n    this.countdown = 0;\n    this.timer = 0;\n    this.startX = 0;\n    this.finishX = 0;\n    this.skinId = 1;\n    this.delayForMaks = 0.2;\n  }\n  t.prototype.reset = function () {\n    this.assetsReady = false;\n    this.restarted = false;\n    this.startX = this.finishX = 0;\n    this.restart();\n  };\n  t.prototype.restart = function () {\n    this.flip = 0;\n    this.delayForMaks = 0.2;\n  };\n  return t;\n}();\nexports.RaceData = s;\n\n//# sourceURL=webpack://motox3m/./src/data/RaceData.js?")},"./src/data/RacesData.js":(__unused_webpack_module,exports)=>{eval('//exports.__esModule = true;\nvar s = function () {\n  function t() {}\n  Object.defineProperty(t, "map", {\n    get: function get() {\n      return t._map;\n    },\n    set: function set(e) {\n      if (t._map !== e) {\n        t.data.reset();\n      }\n      t._map = e;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  t.EDITED = -1;\n  t.MAP_COUNT = 34;\n  // t.MAP_COUNT = 85;\n  t._map = {};\n  return t;\n}();\nexports.RacesData = s;\n\n//# sourceURL=webpack://motox3m/./src/data/RacesData.js?')},"./src/data/ShopCarVO.js":(__unused_webpack_module,exports)=>{eval("// ShopCarVO (Shop Car Value Object) - Simple data structure for shop car items\n// Stores basic car identification for shop system\n\n// Key features:\n// - Minimal data container\n// - Car identification\n// - Shop system integration\n// - Simple request tracking\n\n// Properties:\n// - req_id: Car request identifier (defaults to 1)\n//   * Used to track car requests in shop\n//   * Simple incrementing identifier\n\n// Usage example:\n// const shopCar = new ShopCarVO();\n// console.log(shopCar.req_id); // outputs: 1\n\n// Typically used for:\n// - Shop system car tracking\n// - Car purchase requests\n// - Shop inventory management\n// - Car unlocking system\n//exports.__esModule = true;\nvar s = function () {\n  function t() {\n    this.req_id = 1;\n  }\n  return t;\n}();\nexports.ShopCarVO = s;\n\n//# sourceURL=webpack://motox3m/./src/data/ShopCarVO.js?")},"./src/data/ShopData.js":(__unused_webpack_module,exports)=>{eval("// ShopData - Static data manager for shop car inventory\n// Manages the collection of available cars in the shop system\n\n// Key features:\n// - Static data management\n// - Car inventory tracking\n// - Simple array storage\n// - Count maintenance\n// - Singleton pattern\n\n// Static Properties:\n// - cars[]: Array of available cars in shop\n//   * Stores car data objects\n//   * Maintains shop inventory\n//\n// - carsCount: Number of cars in shop\n//   * Tracks total available cars\n//   * Used for inventory checks\n\n// Usage example:\n// // Access shop inventory\n// const availableCars = ShopData.cars;\n// const totalCars = ShopData.carsCount;\n// \n// // Check if shop has cars\n// if (ShopData.carsCount > 0) {\n//   // Handle shop inventory\n// }\n//exports.__esModule = true;\nvar s = function () {\n  function t() {}\n  t.cars = [];\n  t.carsCount = 0;\n  return t;\n}();\nexports.ShopData = s;\n\n//# sourceURL=webpack://motox3m/./src/data/ShopData.js?")},"./src/effects/FirePartClip.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// FirePartClip - Extends Phaser.Group\n// Creates animated fire/flame particle effects with physics and scaling\n\n// Key features:\n// - Animated fire particle effect\n// - Physics-based movement\n// - Automatic scaling over time\n// - Rotation animation\n// - Configurable initial scale\n\n// Properties:\n// - anim: Phaser animation instance\n// - initScale: Initial particle scale\n// - velY: Vertical velocity\n// - GRAVITY_Y: Vertical gravity (-350)\n// - angle: Rotation angle\n\n// Methods:\n// - emit(x, y): Emit fire particle at position\n//   * Sets position\n//   * Resets velocity\n//   * Makes particle visible\n//   * Starts animation\n//\n// - update2(delta): Update particle\n//   * Updates vertical position\n//   * Scales down over time\n//   * Applies gravity\n//   * Rotates particle\n//\n// - animationComplete(): Cleanup handler\n//   * Hides particle\n//   * Resets scale\n\n// Usage example:\n// const fire = new FirePartClip(1.5); // 1.5x initial scale\n// fire.emit(100, 100);\n// \n// // In update loop:\n// fire.update2(deltaTime);\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar o = function (t) {\n  function e() {\n    var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    var i = t.call(this, n.GraphicUtil.game) || this;\n    i.anim = null;\n    i.initScale = e;\n    var s = "hell_rider_head";\n    // console.log("s",  n.GraphicUtil.currentAtlass);\n    var o = i.game.add.sprite(0, 0, "theme", s + "0000");\n    o.animations.add(s, Phaser.Animation.generateFrameNames(s, 0, 10, "", 4));\n    o.anchor.set(0.5);\n    // console.log("o", o);\n    i.anim = o.animations.getAnimation(s);\n    i.anim.play(20);\n    i.anim.stop();\n    i.anim.onComplete.add(i.animationComplete, i);\n    i.addChild(o);\n    i.visible = false;\n    i.angle = Math.random() * 180;\n    return i;\n  }\n  s(e, t);\n  e.prototype.update2 = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (this.anim.isPlaying) {\n      this.y += this.velY * t;\n      this.scale.set(this.initScale - t * 10);\n      this.velY += e.GRAVITY_Y * t;\n      this.angle += 1;\n    }\n  };\n  e.prototype.animationComplete = function () {\n    this.visible = false;\n    this.scale.set(this.initScale);\n  };\n  e.prototype.emit = function (t, e) {\n    this.visible = true;\n    this.x = t;\n    this.y = e;\n    this.velX = 0;\n    this.velY = 0;\n    this.anim.play(20);\n  };\n  e.GRAVITY_Y = -350;\n  return e;\n}(Phaser.Group);\nexports.FirePartClip = o;\n\n//# sourceURL=webpack://motox3m/./src/effects/FirePartClip.js?')},"./src/effects/GeyserPartClip.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\nvar n = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar AtlasesData = (__webpack_require__(/*! @/src/data/AtlasesData.js */ "./src/data/AtlasesData.js")["default"]);\nvar o = function (t) {\n  function e(e, i) {\n    var s = t.call(this, n.GraphicUtil.game, 0, 0, AtlasesData.Theme, "particle_boost0000") || this;\n    s.scaleSpeed = 4;\n    s.alphaSpeed = 1;\n    s.velocity = e;\n    s.alphaSpeed = 0.9 / i;\n    s.scaleSpeed = 1.5 / i;\n    s.ttl = i;\n    s.anchor.set(0.5);\n    s.visible = false;\n    return s;\n  }\n  s(e, t);\n  e.prototype.update = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (this.visible) {\n      this.x += this.velX * t;\n      this.scale.x -= this.scaleSpeed * t;\n      this.timer += t;\n      if (this.timer >= this.ttl) {\n        this.visible = false;\n      }\n    }\n  };\n  e.prototype.emit = function (t, e) {\n    this.visible = true;\n    this.timer = 0;\n    this.x = t;\n    this.y = e;\n    this.velX = this.velocity * (0.95 + Math.random() * 0.1);\n    this.scale.x = 2;\n    this.alpha = 1;\n  };\n  return e;\n}(Phaser.Sprite);\nexports.GeyserPartClip = o;\n\n//# sourceURL=webpack://motox3m/./src/effects/GeyserPartClip.js?')},"./src/effects/GlassExplodeObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// GlassExplodeObject - Extends GameObject\n// Creates glass shattering explosion effects with object pooling\n\n// Key features:\n// - Object pooling for performance\n// - Animated glass explosion effect\n// - Callback support\n// - Auto-cleanup\n// - Reusable instances\n\n// Properties:\n// - graphic: Explosion animation sprite\n// - active: Effect active state\n// - completeCallback: Optional completion handler\n// - static pool: Array of reusable instances\n// - type: EFFECT object type\n\n// Methods:\n// - get(): Get instance from pool or create new\n// - activate(x, y, callback): Start explosion effect\n//   * Sets position\n//   * Makes visible\n//   * Sets completion callback\n//\n// - animComplete(): Handle animation completion\n//   * Deactivates effect\n//   * Calls completion callback\n//   * Returns to pool\n//\n// - restart(): Reset and return to pool\n// - update(delta): Update animation\n// - release(): Cleanup resources\n\n// Usage example:\n// const explosion = GlassExplodeObject.get();\n// explosion.activate(100, 100, () => {\n//   console.log(\'Explosion complete\');\n// });\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar o = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar a = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar r = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar h = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar l = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.create();\n    return e;\n  }\n  s(e, t);\n  e.get = function () {\n    if (e.pool.length > 0) {\n      return e.pool.pop();\n    } else {\n      return new e();\n    }\n  };\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.type = o.ObjectTypes.EFFECT;\n    this.graphic = a.GraphicUtil.createMovieClip(null, h.AssetsStorage.instance.getByKey("glass_exp_anim"), 30, false);\n    this.graphic.completeCallback = this.animComplete;\n    this.graphic.scaleX = this.graphic.scaleY = 2;\n    this.graphic.visible = false;\n    r.MaxGameCore.instance.add(this);\n  };\n  e.prototype.animComplete = function (t) {\n    this.active = false;\n    this.graphic.visible = false;\n    if (this.completeCallback != null) {\n      this.completeCallback();\n      this.completeCallback = null;\n    }\n    e.pool[e.pool.length] = this;\n  };\n  e.prototype.activate = function (t, e) {\n    var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    this.active = true;\n    this.graphic.x = t;\n    this.graphic.y = e;\n    this.graphic.visible = true;\n    this.completeCallback = i;\n  };\n  e.prototype.restart = function () {\n    if (this.active) {\n      this.graphic.visible = false;\n      this.active = false;\n      this.completeCallback = null;\n      e.pool[e.pool.length] = this;\n    }\n  };\n  e.prototype.update = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (this.active) {\n      this.graphic.update(t);\n    }\n  };\n  e.prototype.release = function () {\n    this.completeCallback = null;\n    t.prototype.release.call(this);\n  };\n  e.pool = [];\n  return e;\n}(n.GameObject);\nexports.GlassExplodeObject = l;\n\n//# sourceURL=webpack://motox3m/./src/effects/GlassExplodeObject.js?')},"./src/effects/GroundPartClip.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// GroundPartClip - Extends Phaser.Group\n// Creates ground debris particle effects with physics simulation\n\n// Key features:\n// - Animated ground particle effect\n// - Physics-based movement\n// - Configurable velocity\n// - Positive gravity (falls down)\n// - Auto-cleanup on animation complete\n\n// Properties:\n// - anim: Phaser animation instance\n// - velX: Horizontal velocity\n// - velY: Vertical velocity\n// - GRAVITY_Y: Vertical gravity (500, positive for downward)\n// - visible: Particle visibility state\n\n// Methods:\n// - emit(x, y, velocityX, velocityY): Emit particle\n//   * Sets position\n//   * Sets initial velocities\n//   * Makes particle visible\n//   * Starts animation\n//\n// - update2(delta): Update particle physics\n//   * Updates position based on velocity\n//   * Applies gravity\n//   * Only updates while animation playing\n//\n// - animationComplete(): Cleanup handler\n//   * Hides particle when animation ends\n\n// Usage example:\n// const debris = new GroundPartClip();\n// debris.emit(100, 100, 50, -100); // x, y, velX, velY\n// \n// // In update loop:\n// debris.update2(deltaTime);\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar o = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar a = function (t) {\n  function e() {\n    var e = t.call(this, n.GraphicUtil.game) || this;\n    e.anim = null;\n    var i = o.AssetsStorage.instance.getByKey("ground_part");\n    var s = e.game.add.sprite(0, 0, "theme", i + "0000");\n    s.animations.add(i, Phaser.Animation.generateFrameNames(i, 0, 28, "", 4));\n    s.anchor.set(0.5);\n    e.anim = s.animations.getAnimation(i);\n    e.anim.play(30);\n    e.anim.stop();\n    e.anim.onComplete.add(e.animationComplete, e);\n    e.addChild(s);\n    e.visible = false;\n    return e;\n  }\n  s(e, t);\n  e.prototype.update2 = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (this.anim.isPlaying) {\n      this.x += this.velX * t;\n      this.y += this.velY * t;\n      this.velY += e.GRAVITY_Y * t;\n    }\n  };\n  e.prototype.animationComplete = function () {\n    this.visible = false;\n  };\n  e.prototype.emit = function (t, e, i, s) {\n    this.visible = true;\n    this.x = t;\n    this.y = e;\n    this.velX = i;\n    this.velY = s;\n    this.anim.play(30);\n  };\n  e.GRAVITY_Y = 500;\n  return e;\n}(Phaser.Group);\nexports.GroundPartClip = a;\n\n//# sourceURL=webpack://motox3m/./src/effects/GroundPartClip.js?')},"./src/effects/SmokePartClip.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// SmokePartClip - Extends Phaser.Group\n// Creates individual smoke particle effects with physics and animation\n\n// Key features:\n// - Animated smoke particle effect\n// - Physics-based movement\n// - Particle pooling support\n// - Auto-cleanup on animation complete\n// - Configurable velocity and gravity\n\n// Properties:\n// - anim: Phaser animation instance\n// - velX: Horizontal velocity\n// - velY: Vertical velocity\n// - GRAVITY_Y: Vertical gravity (-500)\n// - BASE_VEL: Base emission velocity (-50)\n\n// Methods:\n// - emit(x, y, angle): Emit particle at position with direction\n//   * Sets position and initial velocity\n//   * Makes particle visible\n//   * Starts animation\n//\n// - update2(delta): Update particle physics\n//   * Updates position based on velocity\n//   * Applies gravity\n//   * Only updates while animation playing\n//\n// - animationComplete(): Cleanup handler\n//   * Hides particle when animation ends\n\n// Usage example:\n// const smoke = new SmokePartClip();\n// smoke.emit(100, 100, Math.PI/4); // 45 degree angle\n// \n// // In update loop:\n// smoke.update2(deltaTime);\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar o = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar a = function (t) {\n  function e() {\n    var e = t.call(this, n.GraphicUtil.game) || this;\n    e.anim = null;\n    var i = o.AssetsStorage.instance.getByKey("smoke_part");\n    var s = e.game.add.sprite(0, 0, n.GraphicUtil.currentAtlass, i + "0000");\n    s.animations.add(i, Phaser.Animation.generateFrameNames(i, 0, 28, "", 4));\n    s.anchor.set(0.5);\n    e.anim = s.animations.getAnimation(i);\n    e.anim.play(30);\n    e.anim.stop();\n    e.anim.onComplete.add(e.animationComplete, e);\n    e.addChild(s);\n    e.visible = false;\n    return e;\n  }\n  s(e, t);\n  e.prototype.update2 = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (this.anim.isPlaying) {\n      this.x += this.velX * t;\n      this.y += this.velY * t;\n      this.velY += e.GRAVITY_Y * t;\n    }\n  };\n  e.prototype.animationComplete = function () {\n    this.visible = false;\n  };\n  e.prototype.emit = function (t, i, s) {\n    this.visible = true;\n    this.x = t;\n    this.y = i;\n    this.velX = e.BASE_VEL * Math.cos(s);\n    this.velY = e.BASE_VEL * Math.sin(s);\n    this.anim.play(30);\n  };\n  e.GRAVITY_Y = -500;\n  e.BASE_VEL = -50;\n  return e;\n}(Phaser.Group);\nexports.SmokePartClip = a;\n\n//# sourceURL=webpack://motox3m/./src/effects/SmokePartClip.js?')},"./src/effects/TrailPart.js":function(__unused_webpack_module,exports,__webpack_require__){eval('n; // TrailPart - Visual component for vehicle trail effects\n// Extends Phaser.Sprite to create individual trail particles\n\n// Key features:\n// - Simple sprite-based trail particle\n// - Uses "Car4TrailPart" asset\n// - Minimal implementation\n// - Reusable trail components\n// - Integrated with vehicle system\n\n// Properties:\n// Inherited from Phaser.Sprite:\n// - x: Horizontal position\n// - y: Vertical position\n// - visible: Visibility state\n// - alpha: Transparency\n// - rotation: Rotation angle\n\n// Constructor:\n// - Creates sprite at (0,0)\n// - Loads trail particle texture\n// - Initializes base sprite properties\n\n// Usage example:\n// const trailPart = new TrailPart();\n// trailPart.x = 100;\n// trailPart.y = 100;\n// trailPart.alpha = 0.8;\nvar s;\nvar n = this && this.__extends || (s = Object.setPrototypeOf || {\n  __proto__: []\n} instanceof Array && function (t, e) {\n  t.__proto__ = e;\n} || function (t, e) {\n  for (var i in e) {\n    if (e.hasOwnProperty(i)) {\n      t[i] = e[i];\n    }\n  }\n}, function (t, e) {\n  function i() {\n    this.constructor = t;\n  }\n  s(t, e);\n  t.prototype = e === null ? Object.create(e) : (i.prototype = e.prototype, new i());\n});\nexports.__esModule = true;\nvar o = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar a = __webpack_require__(/*! @/src/lib/PhaserLib.js */ "./src/lib/PhaserLib.js");\nvar r = function (i) {\n  function t() {\n    var t = i.call(this, o.GraphicUtil.game) || this;\n    t.anim = null;\n    var e = t.game.add.sprite(0, 0, "theme3", "TrailCircle0000");\n    e.anchor.set(0.5);\n    t.addChild(e);\n    t.visible = false;\n    t.alpha = 0.3;\n    t.anim = t.game.add.tween(t);\n    t.anim.to({\n      alpha: 0\n    }, 500, a.Easing.Linear.None, false);\n    t.anim.onComplete.add(t.animationComplete, t);\n    return t;\n  }\n  n(t, i);\n  t.prototype.animationComplete = function () {\n    this.visible = false;\n    this.alpha = 0.3;\n  };\n  t.prototype.emit = function (t, e) {\n    this.visible = true;\n    this.x = t;\n    this.y = e;\n    this.anim.start();\n  };\n  return t;\n}(Phaser.Group);\nexports.TrailPart = r;\n\n//# sourceURL=webpack://motox3m/./src/effects/TrailPart.js?')},"./src/lib/CorePhaser.js":function(module,exports,__webpack_require__){eval('/* module decorator */ module = __webpack_require__.nmd(module);\nfunction _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},_typeof(o);}var i=__webpack_require__(/*! @/src/lib/Extra.js */ "./src/lib/Extra.js");/**\r\n* @author       Richard Davey <rich@photonstorm.com>\r\n* @copyright    2016 Photon Storm Ltd.\r\n* @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n*\r\n* @overview\r\n*\r\n* Phaser - http://phaser.io\r\n*\r\n* v2.6.4 "Kore Springs" - Built: Thu Nov 16 2017 13:53:52\r\n*\r\n* By Richard Davey http://www.photonstorm.com @photonstorm\r\n*\r\n* Phaser is a fun, free and fast 2D game framework for making HTML5 games\r\n* for desktop and mobile web browsers, supporting Canvas and WebGL rendering.\r\n*\r\n* Phaser uses Pixi.js for rendering, created by Mat Groves http://matgroves.com @Doormat23\r\n* Phaser uses p2.js for full-body physics, created by Stefan Hedman https://github.com/schteppe/p2.js @schteppe\r\n* Phaser contains a port of N+ Physics, converted by Richard Davey, original by http://www.metanetsoftware.com\r\n*\r\n* Many thanks to Adam Saltsman (@ADAMATOMIC) for releasing Flixel, from which both Phaser and my love of framework development originate.\r\n*\r\n* Follow development at http://phaser.io and on our forum\r\n*\r\n* "If you want your children to be intelligent,  read them fairy tales."\r\n* "If you want them to be more intelligent, read them more fairy tales."\r\n*                                                     -- Albert Einstein\r\n*//**\r\n* @author       Richard Davey <rich@photonstorm.com>\r\n* @copyright    2016 Photon Storm Ltd.\r\n* @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n*/(function(){var _Function$prototype,_Array$prototype;function s(t,e){this._scaleFactor=t;this._deltaMode=e;this.originalEvent=null;}var n=this;var o=o||{VERSION:"2.6.4",GAMES:[],AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,NONE:0,LEFT:1,RIGHT:2,UP:3,DOWN:4,SPRITE:0,BUTTON:1,IMAGE:2,GRAPHICS:3,TEXT:4,TILESPRITE:5,BITMAPTEXT:6,GROUP:7,RENDERTEXTURE:8,TILEMAP:9,TILEMAPLAYER:10,EMITTER:11,POLYGON:12,BITMAPDATA:13,CANVAS_FILTER:14,WEBGL_FILTER:15,ELLIPSE:16,SPRITEBATCH:17,RETROFONT:18,POINTER:19,ROPE:20,CIRCLE:21,RECTANGLE:22,LINE:23,MATRIX:24,POINT:25,ROUNDEDRECTANGLE:26,CREATURE:27,VIDEO:28,PENDING_ATLAS:-1,HORIZONTAL:0,VERTICAL:1,LANDSCAPE:0,PORTRAIT:1,ANGLE_UP:270,ANGLE_DOWN:90,ANGLE_LEFT:180,ANGLE_RIGHT:0,ANGLE_NORTH_EAST:315,ANGLE_NORTH_WEST:225,ANGLE_SOUTH_EAST:45,ANGLE_SOUTH_WEST:135,TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12,blendModes:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},scaleModes:{DEFAULT:0,LINEAR:0,NEAREST:1},PIXI:PIXI||{}};Math.trunc||(Math.trunc=function t(e){if(e<0){return Math.ceil(e);}else{return Math.floor(e);}});(_Function$prototype=Function.prototype).bind||(_Function$prototype.bind=function(){var t=Array.prototype.slice;return function(e){function i(){var o=n.concat(t.call(arguments));s.apply(this instanceof i?this:e,o);}var s=this;var n=t.call(arguments,1);if(typeof s!="function"){throw new TypeError();}i.prototype=function t(e){if(e){t.prototype=e;}if(!(this instanceof t)){return new t();}}(s.prototype);return i;};}());Array.isArray||(Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]";});(_Array$prototype=Array.prototype).forEach||(_Array$prototype.forEach=function(t){"use strict";if(this===undefined||this===null){throw new TypeError();}var e=Object(this);var i=e.length>>>0;if(typeof t!="function"){throw new TypeError();}var s=arguments.length>=2?arguments[1]:undefined;for(var n=0;n<i;n++){if(n in e){t.call(s,e[n],n,e);}}});if(typeof window.Uint32Array!="function"&&_typeof(window.Uint32Array)!="object"){var a=function a(t){var e=new Array();window[t]=function(t){if(typeof t=="number"){Array.call(this,t);this.length=t;for(var e=0;e<this.length;e++){this[e]=0;}}else{Array.call(this,t.length);this.length=t.length;for(var e=0;e<this.length;e++){this[e]=t[e];}}};window[t].prototype=e;window[t].constructor=window[t];};a("Uint32Array");a("Int16Array");}if(!window.console){window.console={};window.console.log=window.console.assert=function(){};window.console.warn=window.console.assert=function(){};}if(/firefox/i.test(navigator.userAgent)){window.oldGetComputedStyle=window.getComputedStyle;window.getComputedStyle=function(t,e){var i=window.oldGetComputedStyle(t,e);if(i===null){return{getPropertyValue:function getPropertyValue(){}};}else{return i;}};}/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Utils={reverseString:function reverseString(t){return t.split("").reverse().join("");},getProperty:function getProperty(t,e){var i=e.split(".");var s=i.pop();for(var n=i.length,o=1,a=i[0];o<n&&(t=t[a]);){a=i[o];o++;}if(t){return t[s];}else{return null;}},setProperty:function setProperty(t,e,i){var s=e.split(".");var n=s.pop();for(var o=s.length,a=1,r=s[0];a<o&&(t=t[r]);){r=s[a];a++;}if(t){t[n]=i;}return t;},chanceRoll:function chanceRoll(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:50;return t>0&&Math.random()*100<=t;},randomChoice:function randomChoice(t,e){if(Math.random()<0.5){return t;}else{return e;}},parseDimension:function parseDimension(t,e){var i=0;var s=0;if(typeof t=="string"){if(t.substr(-1)==="%"){i=parseInt(t,10)/100;s=e===0?window.innerWidth*i:window.innerHeight*i;}else{s=parseInt(t,10);}}else{s=t;}return s;},pad:function pad(t,e,i,s){if(e===undefined){var e=0;}if(i===undefined){var i=" ";}if(s===undefined){var s=3;}t=t.toString();var n=0;if(e+1>=t.length){switch(s){case 1:t=new Array(e+1-t.length).join(i)+t;break;case 3:var o=Math.ceil((n=e-t.length)/2);var a=n-o;t=new Array(a+1).join(i)+t+new Array(o+1).join(i);break;default:t+=new Array(e+1-t.length).join(i);}}return t;},isPlainObject:function isPlainObject(t){if(_typeof(t)!="object"||t.nodeType||t===t.window){return false;}try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf")){return false;}}catch(t){return false;}return true;},extend:function extend(){var t;var e;var i;var s;var n;var a;var r=arguments[0]||{};var h=1;var l=arguments.length;var c=false;if(typeof r=="boolean"){c=r;r=arguments[1]||{};h=2;}if(l===h){r=this;--h;}for(;h<l;h++){if((t=arguments[h])!=null){for(e in t){i=r[e];s=t[e];if(r!==s){if(c&&s&&(o.Utils.isPlainObject(s)||(n=Array.isArray(s)))){if(n){n=false;a=i&&Array.isArray(i)?i:[];}else{a=i&&o.Utils.isPlainObject(i)?i:{};}r[e]=o.Utils.extend(c,a,s);}else if(s!==undefined){r[e]=s;}}}}}return r;},mixinPrototype:function mixinPrototype(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;for(var s=Object.keys(e),n=0;n<s.length;n++){var o=s[n];var a=e[o];if(!!i||!(o in t)){if(!a||typeof a.get!="function"&&typeof a.set!="function"){t[o]=a;}else if(typeof a.clone=="function"){t[o]=a.clone();}else{Object.defineProperty(t,o,a);}}}},mixin:function mixin(t,e){if(!t||_typeof(t)!="object"){return e;}for(var i in t){var s=t[i];if(!s.childNodes&&!s.cloneNode){var n=_typeof(t[i]);if(t[i]&&n==="object"){if(_typeof(e[i])===n){e[i]=o.Utils.mixin(t[i],e[i]);}else{e[i]=o.Utils.mixin(t[i],new s.constructor());}}else{e[i]=t[i];}}}return e;}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Circle=function(t,e,i){t=t||0;e=e||0;i=i||0;this.x=t;this.y=e;this._diameter=i;this._radius=0;if(i>0){this._radius=i*0.5;}this.type=o.CIRCLE;};o.Circle.prototype={circumference:function circumference(){return Math.PI*this._radius*2;},random:function random(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new o.Point();var e=Math.PI*2*Math.random();var i=Math.random()+Math.random();var s=i>1?2-i:i;var n=s*Math.cos(e);var a=s*Math.sin(e);t.x=this.x+n*this.radius;t.y=this.y+a*this.radius;return t;},getBounds:function getBounds(){return new o.Rectangle(this.x-this.radius,this.y-this.radius,this.diameter,this.diameter);},setTo:function setTo(t,e,i){this.x=t;this.y=e;this._diameter=i;this._radius=i*0.5;return this;},copyFrom:function copyFrom(t){return this.setTo(t.x,t.y,t.diameter);},copyTo:function copyTo(t){t.x=this.x;t.y=this.y;t.diameter=this._diameter;return t;},distance:function distance(t,e){var i=o.Math.distance(this.x,this.y,t.x,t.y);if(e){return Math.round(i);}else{return i;}},clone:function clone(t){if(t===undefined||t===null){t=new o.Circle(this.x,this.y,this.diameter);}else{t.setTo(this.x,this.y,this.diameter);}return t;},contains:function contains(t,e){return o.Circle.contains(this,t,e);},circumferencePoint:function circumferencePoint(t,e,i){return o.Circle.circumferencePoint(this,t,e,i);},offset:function offset(t,e){this.x+=t;this.y+=e;return this;},offsetPoint:function offsetPoint(t){return this.offset(t.x,t.y);},toString:function toString(){return"[{Phaser.Circle (x="+this.x+" y="+this.y+" diameter="+this.diameter+" radius="+this.radius+")}]";}};o.Circle.prototype.constructor=o.Circle;Object.defineProperty(o.Circle.prototype,"diameter",{get:function get(){return this._diameter;},set:function set(t){if(t>0){this._diameter=t;this._radius=t*0.5;}}});Object.defineProperty(o.Circle.prototype,"radius",{get:function get(){return this._radius;},set:function set(t){if(t>0){this._radius=t;this._diameter=t*2;}}});Object.defineProperty(o.Circle.prototype,"left",{get:function get(){return this.x-this._radius;},set:function set(t){if(t>this.x){this._radius=0;this._diameter=0;}else{this.radius=this.x-t;}}});Object.defineProperty(o.Circle.prototype,"right",{get:function get(){return this.x+this._radius;},set:function set(t){if(t<this.x){this._radius=0;this._diameter=0;}else{this.radius=t-this.x;}}});Object.defineProperty(o.Circle.prototype,"top",{get:function get(){return this.y-this._radius;},set:function set(t){if(t>this.y){this._radius=0;this._diameter=0;}else{this.radius=this.y-t;}}});Object.defineProperty(o.Circle.prototype,"bottom",{get:function get(){return this.y+this._radius;},set:function set(t){if(t<this.y){this._radius=0;this._diameter=0;}else{this.radius=t-this.y;}}});Object.defineProperty(o.Circle.prototype,"area",{get:function get(){if(this._radius>0){return Math.PI*this._radius*this._radius;}else{return 0;}}});Object.defineProperty(o.Circle.prototype,"empty",{get:function get(){return this._diameter===0;},set:function set(t){if(t===true){this.setTo(0,0,0);}}});o.Circle.contains=function(t,e,i){if(t.radius>0&&e>=t.left&&e<=t.right&&i>=t.top&&i<=t.bottom){return(t.x-e)*(t.x-e)+(t.y-i)*(t.y-i)<=t.radius*t.radius;}return false;};o.Circle.equals=function(t,e){return t.x===e.x&&t.y===e.y&&t.diameter===e.diameter;};o.Circle.intersects=function(t,e){return o.Math.distance(t.x,t.y,e.x,e.y)<=t.radius+e.radius;};o.Circle.circumferencePoint=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:new o.Point();if(i===true){e=o.Math.degToRad(e);}s.x=t.x+t.radius*Math.cos(e);s.y=t.y+t.radius*Math.sin(e);return s;};o.Circle.intersectsRectangle=function(t,e){var i=Math.abs(t.x-e.x-e.halfWidth);if(i>e.halfWidth+t.radius){return false;}var s=Math.abs(t.y-e.y-e.halfHeight);if(s>e.halfHeight+t.radius){return false;}if(i<=e.halfWidth||s<=e.halfHeight){return true;}var n=i-e.halfWidth;var o=s-e.halfHeight;return n*n+o*o<=t.radius*t.radius;};PIXI.Circle=o.Circle;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @author       Chad Engler <chad@pantherdev.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Ellipse=function(t,e,i,s){t=t||0;e=e||0;i=i||0;s=s||0;this.x=t;this.y=e;this.width=i;this.height=s;this.type=o.ELLIPSE;};o.Ellipse.prototype={setTo:function setTo(t,e,i,s){this.x=t;this.y=e;this.width=i;this.height=s;return this;},getBounds:function getBounds(){return new o.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height);},copyFrom:function copyFrom(t){return this.setTo(t.x,t.y,t.width,t.height);},copyTo:function copyTo(t){t.x=this.x;t.y=this.y;t.width=this.width;t.height=this.height;return t;},clone:function clone(t){if(t===undefined||t===null){t=new o.Ellipse(this.x,this.y,this.width,this.height);}else{t.setTo(this.x,this.y,this.width,this.height);}return t;},contains:function contains(t,e){return o.Ellipse.contains(this,t,e);},random:function random(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new o.Point();var e=Math.random()*Math.PI*2;var i=Math.random();t.x=Math.sqrt(i)*Math.cos(e);t.y=Math.sqrt(i)*Math.sin(e);t.x=this.x+t.x*this.width/2;t.y=this.y+t.y*this.height/2;return t;},toString:function toString(){return"[{Phaser.Ellipse (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")}]";}};o.Ellipse.prototype.constructor=o.Ellipse;Object.defineProperty(o.Ellipse.prototype,"left",{get:function get(){return this.x;},set:function set(t){this.x=t;}});Object.defineProperty(o.Ellipse.prototype,"right",{get:function get(){return this.x+this.width;},set:function set(t){if(t<this.x){this.width=0;}else{this.width=t-this.x;}}});Object.defineProperty(o.Ellipse.prototype,"top",{get:function get(){return this.y;},set:function set(t){this.y=t;}});Object.defineProperty(o.Ellipse.prototype,"bottom",{get:function get(){return this.y+this.height;},set:function set(t){if(t<this.y){this.height=0;}else{this.height=t-this.y;}}});Object.defineProperty(o.Ellipse.prototype,"empty",{get:function get(){return this.width===0||this.height===0;},set:function set(t){if(t===true){this.setTo(0,0,0,0);}}});o.Ellipse.contains=function(t,e,i){if(t.width<=0||t.height<=0){return false;}var s=(e-t.x)/t.width-0.5;var n=(i-t.y)/t.height-0.5;s*=s;n*=n;return s+n<0.25;};PIXI.Ellipse=o.Ellipse;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Line=function(t,e,i,s){t=t||0;e=e||0;i=i||0;s=s||0;this.start=new o.Point(t,e);this.end=new o.Point(i,s);this.type=o.LINE;};o.Line.prototype={setTo:function setTo(t,e,i,s){this.start.setTo(t,e);this.end.setTo(i,s);return this;},fromSprite:function fromSprite(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(i){return this.setTo(t.center.x,t.center.y,e.center.x,e.center.y);}else{return this.setTo(t.x,t.y,e.x,e.y);}},fromAngle:function fromAngle(t,e,i,s){this.start.setTo(t,e);this.end.setTo(t+Math.cos(i)*s,e+Math.sin(i)*s);return this;},rotate:function rotate(t,e){var i=(this.start.x+this.end.x)/2;var s=(this.start.y+this.end.y)/2;this.start.rotate(i,s,t,e);this.end.rotate(i,s,t,e);return this;},rotateAround:function rotateAround(t,e,i,s){this.start.rotate(t,e,i,s);this.end.rotate(t,e,i,s);return this;},intersects:function intersects(t,e,i){return o.Line.intersectsPoints(this.start,this.end,t.start,t.end,e,i);},reflect:function reflect(t){return o.Line.reflect(this,t);},midPoint:function midPoint(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new o.Point();t.x=(this.start.x+this.end.x)/2;t.y=(this.start.y+this.end.y)/2;return t;},centerOn:function centerOn(t,e){var i=(this.start.x+this.end.x)/2;var s=(this.start.y+this.end.y)/2;var n=t-i;var o=e-s;this.start.add(n,o);this.end.add(n,o);},pointOnLine:function pointOnLine(t,e){return(t-this.start.x)*(this.end.y-this.start.y)==(this.end.x-this.start.x)*(e-this.start.y);},pointOnSegment:function pointOnSegment(t,e){var i=Math.min(this.start.x,this.end.x);var s=Math.max(this.start.x,this.end.x);var n=Math.min(this.start.y,this.end.y);var o=Math.max(this.start.y,this.end.y);return this.pointOnLine(t,e)&&t>=i&&t<=s&&e>=n&&e<=o;},random:function random(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new o.Point();var e=Math.random();t.x=this.start.x+e*(this.end.x-this.start.x);t.y=this.start.y+e*(this.end.y-this.start.y);return t;},coordinatesOnLine:function coordinatesOnLine(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var i=Math.round(this.start.x);var s=Math.round(this.start.y);var n=Math.round(this.end.x);var o=Math.round(this.end.y);var a=Math.abs(n-i);var r=Math.abs(o-s);var h=i<n?1:-1;var l=s<o?1:-1;var c=a-r;e.push([i,s]);var u=1;while(i!==n||s!==o){var d=c<<1;if(d>-r){c-=r;i+=h;}if(d<a){c+=a;s+=l;}if(u%t==0){e.push([i,s]);}u++;}return e;},clone:function clone(t){if(t===undefined||t===null){t=new o.Line(this.start.x,this.start.y,this.end.x,this.end.y);}else{t.setTo(this.start.x,this.start.y,this.end.x,this.end.y);}return t;}};Object.defineProperty(o.Line.prototype,"length",{get:function get(){return Math.sqrt((this.end.x-this.start.x)*(this.end.x-this.start.x)+(this.end.y-this.start.y)*(this.end.y-this.start.y));}});Object.defineProperty(o.Line.prototype,"angle",{get:function get(){return Math.atan2(this.end.y-this.start.y,this.end.x-this.start.x);}});Object.defineProperty(o.Line.prototype,"slope",{get:function get(){return(this.end.y-this.start.y)/(this.end.x-this.start.x);}});Object.defineProperty(o.Line.prototype,"perpSlope",{get:function get(){return-(this.end.x-this.start.x)/(this.end.y-this.start.y);}});Object.defineProperty(o.Line.prototype,"x",{get:function get(){return Math.min(this.start.x,this.end.x);}});Object.defineProperty(o.Line.prototype,"y",{get:function get(){return Math.min(this.start.y,this.end.y);}});Object.defineProperty(o.Line.prototype,"left",{get:function get(){return Math.min(this.start.x,this.end.x);}});Object.defineProperty(o.Line.prototype,"right",{get:function get(){return Math.max(this.start.x,this.end.x);}});Object.defineProperty(o.Line.prototype,"top",{get:function get(){return Math.min(this.start.y,this.end.y);}});Object.defineProperty(o.Line.prototype,"bottom",{get:function get(){return Math.max(this.start.y,this.end.y);}});Object.defineProperty(o.Line.prototype,"width",{get:function get(){return Math.abs(this.start.x-this.end.x);}});Object.defineProperty(o.Line.prototype,"height",{get:function get(){return Math.abs(this.start.y-this.end.y);}});Object.defineProperty(o.Line.prototype,"normalX",{get:function get(){return Math.cos(this.angle-1.5707963267948966);}});Object.defineProperty(o.Line.prototype,"normalY",{get:function get(){return Math.sin(this.angle-1.5707963267948966);}});Object.defineProperty(o.Line.prototype,"normalAngle",{get:function get(){return o.Math.wrap(this.angle-1.5707963267948966,-Math.PI,Math.PI);}});o.Line.intersectsPoints=function(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:new o.Point();var r=e.y-t.y;var h=s.y-i.y;var l=t.x-e.x;var c=i.x-s.x;var u=e.x*t.y-t.x*e.y;var d=s.x*i.y-i.x*s.y;var p=r*c-h*l;if(p===0){return null;}a.x=(l*d-c*u)/p;a.y=(h*u-r*d)/p;if(n){var f=(s.y-i.y)*(e.x-t.x)-(s.x-i.x)*(e.y-t.y);var y=((s.x-i.x)*(t.y-i.y)-(s.y-i.y)*(t.x-i.x))/f;var g=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/f;if(y>=0&&y<=1&&g>=0&&g<=1){return a;}else{return null;}}return a;};o.Line.intersects=function(t,e,i,s){return o.Line.intersectsPoints(t.start,t.end,e.start,e.end,i,s);};o.Line.intersectsRectangle=function(t,e){if(!o.Rectangle.intersects(t,e)){return false;}var i=t.start.x;var s=t.start.y;var n=t.end.x;var a=t.end.y;var r=e.x;var h=e.y;var l=e.right;var c=e.bottom;var u=0;if(i>=r&&i<=l&&s>=h&&s<=c||n>=r&&n<=l&&a>=h&&a<=c){return true;}if(i<r&&n>=r){if((u=s+(a-s)*(r-i)/(n-i))>h&&u<=c){return true;}}else if(i>l&&n<=l&&(u=s+(a-s)*(l-i)/(n-i))>=h&&u<=c){return true;}if(s<h&&a>=h){if((u=i+(n-i)*(h-s)/(a-s))>=r&&u<=l){return true;}}else if(s>c&&a<=c&&(u=i+(n-i)*(c-s)/(a-s))>=r&&u<=l){return true;}return false;};o.Line.reflect=function(t,e){return e.normalAngle*2-3.141592653589793-t.angle;};/**\r\n  * @author       Mat Groves http://matgroves.com/ @Doormat23\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Matrix=function(t,e,i,s,n,a){if(t===undefined||t===null){t=1;}if(e===undefined||e===null){e=0;}if(i===undefined||i===null){i=0;}if(s===undefined||s===null){s=1;}if(n===undefined||n===null){n=0;}if(a===undefined||a===null){a=0;}this.a=t;this.b=e;this.c=i;this.d=s;this.tx=n;this.ty=a;this.type=o.MATRIX;};o.Matrix.prototype={fromArray:function fromArray(t){return this.setTo(t[0],t[1],t[3],t[4],t[2],t[5]);},setTo:function setTo(t,e,i,s,n,o){this.a=t;this.b=e;this.c=i;this.d=s;this.tx=n;this.ty=o;return this;},clone:function clone(t){if(t===undefined||t===null){t=new o.Matrix(this.a,this.b,this.c,this.d,this.tx,this.ty);}else{t.a=this.a;t.b=this.b;t.c=this.c;t.d=this.d;t.tx=this.tx;t.ty=this.ty;}return t;},copyTo:function copyTo(t){t.copyFrom(this);return t;},copyFrom:function copyFrom(t){this.a=t.a;this.b=t.b;this.c=t.c;this.d=t.d;this.tx=t.tx;this.ty=t.ty;return this;},toArray:function toArray(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new PIXI.Float32Array(9);if(t){e[0]=this.a;e[1]=this.b;e[2]=0;e[3]=this.c;e[4]=this.d;e[5]=0;e[6]=this.tx;e[7]=this.ty;e[8]=1;}else{e[0]=this.a;e[1]=this.c;e[2]=this.tx;e[3]=this.b;e[4]=this.d;e[5]=this.ty;e[6]=0;e[7]=0;e[8]=1;}return e;},apply:function apply(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new o.Point();e.x=this.a*t.x+this.c*t.y+this.tx;e.y=this.b*t.x+this.d*t.y+this.ty;return e;},applyInverse:function applyInverse(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new o.Point();var i=1/(this.a*this.d+this.c*-this.b);var s=t.x;var n=t.y;e.x=this.d*i*s+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i;e.y=this.a*i*n+-this.b*i*s+(-this.ty*this.a+this.tx*this.b)*i;return e;},translate:function translate(t,e){this.tx+=t;this.ty+=e;return this;},scale:function scale(t,e){this.a*=t;this.d*=e;this.c*=t;this.b*=e;this.tx*=t;this.ty*=e;return this;},rotate:function rotate(t){var e=Math.cos(t);var i=Math.sin(t);var s=this.a;var n=this.c;var o=this.tx;this.a=s*e-this.b*i;this.b=s*i+this.b*e;this.c=n*e-this.d*i;this.d=n*i+this.d*e;this.tx=o*e-this.ty*i;this.ty=o*i+this.ty*e;return this;},append:function append(t){var e=this.a;var i=this.b;var s=this.c;var n=this.d;this.a=t.a*e+t.b*s;this.b=t.a*i+t.b*n;this.c=t.c*e+t.d*s;this.d=t.c*i+t.d*n;this.tx=t.tx*e+t.ty*s+this.tx;this.ty=t.tx*i+t.ty*n+this.ty;return this;},identity:function identity(){return this.setTo(1,0,0,1,0,0);}};o.identityMatrix=new o.Matrix();PIXI.Matrix=o.Matrix;PIXI.identityMatrix=o.identityMatrix;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Point=function(t,e){t=t||0;e=e||0;this.x=t;this.y=e;this.type=o.POINT;};o.Point.prototype={copyFrom:function copyFrom(t){return this.setTo(t.x,t.y);},invert:function invert(){return this.setTo(this.y,this.x);},setTo:function setTo(t,e){this.x=t||0;this.y=e||(e!==0?this.x:0);return this;},set:function set(t,e){this.x=t||0;this.y=e||(e!==0?this.x:0);return this;},add:function add(t,e){this.x+=t;this.y+=e;return this;},subtract:function subtract(t,e){this.x-=t;this.y-=e;return this;},multiply:function multiply(t,e){this.x*=t;this.y*=e;return this;},divide:function divide(t,e){this.x/=t;this.y/=e;return this;},clampX:function clampX(t,e){this.x=o.Math.clamp(this.x,t,e);return this;},clampY:function clampY(t,e){this.y=o.Math.clamp(this.y,t,e);return this;},clamp:function clamp(t,e){this.x=o.Math.clamp(this.x,t,e);this.y=o.Math.clamp(this.y,t,e);return this;},clone:function clone(t){if(t===undefined||t===null){t=new o.Point(this.x,this.y);}else{t.setTo(this.x,this.y);}return t;},copyTo:function copyTo(t){t.x=this.x;t.y=this.y;return t;},distance:function distance(t,e){return o.Point.distance(this,t,e);},equals:function equals(t){return t.x===this.x&&t.y===this.y;},angle:function angle(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e){return o.Math.radToDeg(Math.atan2(t.y-this.y,t.x-this.x));}else{return Math.atan2(t.y-this.y,t.x-this.x);}},rotate:function rotate(t,e,i,s,n){return o.Point.rotate(this,t,e,i,s,n);},getMagnitude:function getMagnitude(){return Math.sqrt(this.x*this.x+this.y*this.y);},getMagnitudeSq:function getMagnitudeSq(){return this.x*this.x+this.y*this.y;},setMagnitude:function setMagnitude(t){return this.normalize().multiply(t,t);},normalize:function normalize(){if(!this.isZero()){var t=this.getMagnitude();this.x/=t;this.y/=t;}return this;},isZero:function isZero(){return this.x===0&&this.y===0;},dot:function dot(t){return this.x*t.x+this.y*t.y;},cross:function cross(t){return this.x*t.y-this.y*t.x;},perp:function perp(){return this.setTo(-this.y,this.x);},rperp:function rperp(){return this.setTo(this.y,-this.x);},normalRightHand:function normalRightHand(){return this.setTo(this.y*-1,this.x);},floor:function floor(){return this.setTo(Math.floor(this.x),Math.floor(this.y));},ceil:function ceil(){return this.setTo(Math.ceil(this.x),Math.ceil(this.y));},toString:function toString(){return"[{Point (x="+this.x+" y="+this.y+")}]";}};o.Point.prototype.constructor=o.Point;o.Point.add=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new o.Point();i.x=t.x+e.x;i.y=t.y+e.y;return i;};o.Point.subtract=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new o.Point();i.x=t.x-e.x;i.y=t.y-e.y;return i;};o.Point.multiply=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new o.Point();i.x=t.x*e.x;i.y=t.y*e.y;return i;};o.Point.divide=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new o.Point();i.x=t.x/e.x;i.y=t.y/e.y;return i;};o.Point.equals=function(t,e){return t.x===e.x&&t.y===e.y;};o.Point.angle=function(t,e){return Math.atan2(t.y-e.y,t.x-e.x);};o.Point.negative=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new o.Point();return e.setTo(-t.x,-t.y);};o.Point.multiplyAdd=function(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:new o.Point();return s.setTo(t.x+e.x*i,t.y+e.y*i);};o.Point.interpolate=function(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:new o.Point();return s.setTo(t.x+(e.x-t.x)*i,t.y+(e.y-t.y)*i);};o.Point.perp=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new o.Point();return e.setTo(-t.y,t.x);};o.Point.rperp=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new o.Point();return e.setTo(t.y,-t.x);};o.Point.distance=function(t,e,i){var s=o.Math.distance(t.x,t.y,e.x,e.y);if(i){return Math.round(s);}else{return s;}};o.Point.project=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new o.Point();var s=t.dot(e)/e.getMagnitudeSq();if(s!==0){i.setTo(s*e.x,s*e.y);}return i;};o.Point.projectUnit=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new o.Point();var s=t.dot(e);if(s!==0){i.setTo(s*e.x,s*e.y);}return i;};o.Point.normalRightHand=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new o.Point();return e.setTo(t.y*-1,t.x);};o.Point.normalize=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new o.Point();var i=t.getMagnitude();if(i!==0){e.setTo(t.x/i,t.y/i);}return e;};o.Point.rotate=function(t,e,i,s,n,a){if(n){s=o.Math.degToRad(s);}if(a===undefined){t.subtract(e,i);var r=Math.sin(s);var h=Math.cos(s);var l=h*t.x-r*t.y;var c=r*t.x+h*t.y;t.x=l+e;t.y=c+i;}else{var u=s+Math.atan2(t.y-i,t.x-e);t.x=e+a*Math.cos(u);t.y=i+a*Math.sin(u);}return t;};o.Point.centroid=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new o.Point();if(Object.prototype.toString.call(t)!=="[object Array]"){throw new Error("Phaser.Point. Parameter \'points\' must be an array");}var i=t.length;if(i<1){throw new Error("Phaser.Point. Parameter \'points\' array must not be empty");}if(i===1){e.copyFrom(t[0]);return e;}for(var s=0;s<i;s++){o.Point.add(e,t[s],e);}e.divide(i,i);return e;};o.Point.parse=function(t,e,i){e=e||"x";i=i||"y";var s=new o.Point();if(t[e]){s.x=parseInt(t[e],10);}if(t[i]){s.y=parseInt(t[i],10);}return s;};PIXI.Point=o.Point;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @author       Adrien Brault <adrien.brault@gmail.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Polygon=function(){this.area=0;this._points=[];if(arguments.length>0){this.setTo.apply(this,arguments);}this.closed=true;this.flattened=false;this.type=o.POLYGON;};o.Polygon.prototype={toNumberArray:function toNumberArray(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];for(var e=0;e<this._points.length;e++){if(typeof this._points[e]=="number"){t.push(this._points[e]);t.push(this._points[e+1]);e++;}else{t.push(this._points[e].x);t.push(this._points[e].y);}}return t;},flatten:function flatten(){this._points=this.toNumberArray();this.flattened=true;return this;},clone:function clone(t){var e=this._points.slice();if(t===undefined||t===null){t=new o.Polygon(e);}else{t.setTo(e);}return t;},contains:function contains(t,e){var i=false;if(this.flattened){for(var s=-2,n=this._points.length-2;(s+=2)<this._points.length;n=s){var o=this._points[s];var a=this._points[s+1];var r=this._points[n];var h=this._points[n+1];if((a<=e&&e<h||h<=e&&e<a)&&t<(r-o)*(e-a)/(h-a)+o){i=!i;}}}else{for(var s=-1,n=this._points.length-1;++s<this._points.length;n=s){var o=this._points[s].x;var a=this._points[s].y;var r=this._points[n].x;var h=this._points[n].y;if((a<=e&&e<h||h<=e&&e<a)&&t<(r-o)*(e-a)/(h-a)+o){i=!i;}}}return i;},setTo:function setTo(t){this.area=0;this._points=[];if(arguments.length>0){if(!Array.isArray(t)){t=Array.prototype.slice.call(arguments);}var e=Number.MAX_VALUE;for(var i=0,s=t.length;i<s;i++){if(typeof t[i]=="number"){var n=new PIXI.Point(t[i],t[i+1]);i++;}else if(Array.isArray(t[i])){var n=new PIXI.Point(t[i][0],t[i][1]);}else{var n=new PIXI.Point(t[i].x,t[i].y);}this._points.push(n);if(n.y<e){e=n.y;}}this.calculateArea(e);}return this;},calculateArea:function calculateArea(t){var e;var i;var s;var n;for(var o=0,a=this._points.length;o<a;o++){e=this._points[o];i=o===a-1?this._points[0]:this._points[o+1];s=(e.y-t+(i.y-t))/2;n=e.x-i.x;this.area+=s*n;}return this.area;}};o.Polygon.prototype.constructor=o.Polygon;Object.defineProperty(o.Polygon.prototype,"points",{get:function get(){return this._points;},set:function set(t){if(t!=null){this.setTo(t);}else{this.setTo();}}});PIXI.Polygon=o.Polygon;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Rectangle=function(t,e,i,s){t=t||0;e=e||0;i=i||0;s=s||0;this.x=t;this.y=e;this.width=i;this.height=s;this.type=o.RECTANGLE;};o.Rectangle.prototype={offset:function offset(t,e){this.x+=t;this.y+=e;return this;},offsetPoint:function offsetPoint(t){return this.offset(t.x,t.y);},setTo:function setTo(t,e,i,s){this.x=t;this.y=e;this.width=i;this.height=s;return this;},scale:function scale(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:t;this.width*=t;this.height*=e;return this;},centerOn:function centerOn(t,e){this.centerX=t;this.centerY=e;return this;},floor:function floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);},floorAll:function floorAll(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.width=Math.floor(this.width);this.height=Math.floor(this.height);},ceil:function ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);},ceilAll:function ceilAll(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);},copyFrom:function copyFrom(t){return this.setTo(t.x,t.y,t.width,t.height);},copyTo:function copyTo(t){t.x=this.x;t.y=this.y;t.width=this.width;t.height=this.height;return t;},inflate:function inflate(t,e){return o.Rectangle.inflate(this,t,e);},size:function size(t){return o.Rectangle.size(this,t);},resize:function resize(t,e){this.width=t;this.height=e;return this;},clone:function clone(t){return o.Rectangle.clone(this,t);},contains:function contains(t,e){return o.Rectangle.contains(this,t,e);},containsRect:function containsRect(t){return o.Rectangle.containsRect(t,this);},equals:function equals(t){return o.Rectangle.equals(this,t);},intersection:function intersection(t,e){return o.Rectangle.intersection(this,t,e);},intersects:function intersects(t){return o.Rectangle.intersects(this,t);},intersectsRaw:function intersectsRaw(t,e,i,s,n){return o.Rectangle.intersectsRaw(this,t,e,i,s,n);},union:function union(t,e){return o.Rectangle.union(this,t,e);},random:function random(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new o.Point();t.x=this.randomX;t.y=this.randomY;return t;},getPoint:function getPoint(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new o.Point();switch(t){default:case o.TOP_LEFT:return e.set(this.x,this.y);case o.TOP_CENTER:return e.set(this.centerX,this.y);case o.TOP_RIGHT:return e.set(this.right,this.y);case o.LEFT_CENTER:return e.set(this.x,this.centerY);case o.CENTER:return e.set(this.centerX,this.centerY);case o.RIGHT_CENTER:return e.set(this.right,this.centerY);case o.BOTTOM_LEFT:return e.set(this.x,this.bottom);case o.BOTTOM_CENTER:return e.set(this.centerX,this.bottom);case o.BOTTOM_RIGHT:return e.set(this.right,this.bottom);}},toString:function toString(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.empty+")}]";}};Object.defineProperty(o.Rectangle.prototype,"halfWidth",{get:function get(){return Math.round(this.width/2);}});Object.defineProperty(o.Rectangle.prototype,"halfHeight",{get:function get(){return Math.round(this.height/2);}});Object.defineProperty(o.Rectangle.prototype,"bottom",{get:function get(){return this.y+this.height;},set:function set(t){if(t<=this.y){this.height=0;}else{this.height=t-this.y;}}});Object.defineProperty(o.Rectangle.prototype,"bottomLeft",{get:function get(){return new o.Point(this.x,this.bottom);},set:function set(t){this.x=t.x;this.bottom=t.y;}});Object.defineProperty(o.Rectangle.prototype,"bottomRight",{get:function get(){return new o.Point(this.right,this.bottom);},set:function set(t){this.right=t.x;this.bottom=t.y;}});Object.defineProperty(o.Rectangle.prototype,"left",{get:function get(){return this.x;},set:function set(t){if(t>=this.right){this.width=0;}else{this.width=this.right-t;}this.x=t;}});Object.defineProperty(o.Rectangle.prototype,"right",{get:function get(){return this.x+this.width;},set:function set(t){if(t<=this.x){this.width=0;}else{this.width=t-this.x;}}});Object.defineProperty(o.Rectangle.prototype,"volume",{get:function get(){return this.width*this.height;}});Object.defineProperty(o.Rectangle.prototype,"perimeter",{get:function get(){return this.width*2+this.height*2;}});Object.defineProperty(o.Rectangle.prototype,"centerX",{get:function get(){return this.x+this.halfWidth;},set:function set(t){this.x=t-this.halfWidth;}});Object.defineProperty(o.Rectangle.prototype,"centerY",{get:function get(){return this.y+this.halfHeight;},set:function set(t){this.y=t-this.halfHeight;}});Object.defineProperty(o.Rectangle.prototype,"randomX",{get:function get(){return this.x+Math.random()*this.width;}});Object.defineProperty(o.Rectangle.prototype,"randomY",{get:function get(){return this.y+Math.random()*this.height;}});Object.defineProperty(o.Rectangle.prototype,"top",{get:function get(){return this.y;},set:function set(t){if(t>=this.bottom){this.height=0;this.y=t;}else{this.height=this.bottom-t;}}});Object.defineProperty(o.Rectangle.prototype,"topLeft",{get:function get(){return new o.Point(this.x,this.y);},set:function set(t){this.x=t.x;this.y=t.y;}});Object.defineProperty(o.Rectangle.prototype,"topRight",{get:function get(){return new o.Point(this.x+this.width,this.y);},set:function set(t){this.right=t.x;this.y=t.y;}});Object.defineProperty(o.Rectangle.prototype,"empty",{get:function get(){return!this.width||!this.height;},set:function set(t){if(t===true){this.setTo(0,0,0,0);}}});o.Rectangle.prototype.constructor=o.Rectangle;o.Rectangle.inflate=function(t,e,i){t.x-=e;t.width+=e*2;t.y-=i;t.height+=i*2;return t;};o.Rectangle.inflatePoint=function(t,e){return o.Rectangle.inflate(t,e.x,e.y);};o.Rectangle.size=function(t,e){if(e===undefined||e===null){e=new o.Point(t.width,t.height);}else{e.setTo(t.width,t.height);}return e;};o.Rectangle.clone=function(t,e){if(e===undefined||e===null){e=new o.Rectangle(t.x,t.y,t.width,t.height);}else{e.setTo(t.x,t.y,t.width,t.height);}return e;};o.Rectangle.contains=function(t,e,i){return!(t.width<=0)&&!(t.height<=0)&&e>=t.x&&e<t.right&&i>=t.y&&i<t.bottom;};o.Rectangle.containsRaw=function(t,e,i,s,n,o){return n>=t&&n<t+i&&o>=e&&o<e+s;};o.Rectangle.containsPoint=function(t,e){return o.Rectangle.contains(t,e.x,e.y);};o.Rectangle.containsRect=function(t,e){return!(t.volume>e.volume)&&t.x>=e.x&&t.y>=e.y&&t.right<e.right&&t.bottom<e.bottom;};o.Rectangle.equals=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height;};o.Rectangle.sameDimensions=function(t,e){return t.width===e.width&&t.height===e.height;};o.Rectangle.intersection=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new o.Rectangle();if(o.Rectangle.intersects(t,e)){i.x=Math.max(t.x,e.x);i.y=Math.max(t.y,e.y);i.width=Math.min(t.right,e.right)-i.x;i.height=Math.min(t.bottom,e.bottom)-i.y;}return i;};o.Rectangle.intersects=function(t,e){return!(t.width<=0)&&!(t.height<=0)&&!(e.width<=0)&&!(e.height<=0)&&!(t.right<e.x)&&!(t.bottom<e.y)&&!(t.x>e.right)&&!(t.y>e.bottom);};o.Rectangle.intersectsRaw=function(t,e,i,s,n){var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;return!(e>t.right+o)&&!(i<t.left-o)&&!(s>t.bottom+o)&&!(n<t.top-o);};o.Rectangle.union=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new o.Rectangle();return i.setTo(Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.right,e.right)-Math.min(t.left,e.left),Math.max(t.bottom,e.bottom)-Math.min(t.top,e.top));};o.Rectangle.aabb=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new o.Rectangle();var i=Number.NEGATIVE_INFINITY;var s=Number.POSITIVE_INFINITY;var n=Number.NEGATIVE_INFINITY;var a=Number.POSITIVE_INFINITY;t.forEach(function(t){if(t.x>i){i=t.x;}if(t.x<s){s=t.x;}if(t.y>n){n=t.y;}if(t.y<a){a=t.y;}});e.setTo(s,a,i-s,n-a);return e;};PIXI.Rectangle=o.Rectangle;PIXI.EmptyRectangle=new o.Rectangle(0,0,0,0);/**\r\n  * @author       Mat Groves http://matgroves.com/\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.RoundedRectangle=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:20;this.x=t;this.y=e;this.width=i;this.height=s;this.radius=n||20;this.type=o.ROUNDEDRECTANGLE;};o.RoundedRectangle.prototype={clone:function clone(){return new o.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius);},contains:function contains(t,e){if(this.width<=0||this.height<=0){return false;}var i=this.x;if(t>=i&&t<=i+this.width){var s=this.y;if(e>=s&&e<=s+this.height){return true;}}return false;}};o.RoundedRectangle.prototype.constructor=o.RoundedRectangle;PIXI.RoundedRectangle=o.RoundedRectangle;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Camera=function(t,e,i,s,n,a){this.game=t;this.world=t.world;this.id=0;this.view=new o.Rectangle(i,s,n,a);this.bounds=new o.Rectangle(i,s,n,a);this.deadzone=null;this.visible=true;this.roundPx=true;this.atLimit={x:false,y:false};this.target=null;this.displayObject=null;this.scale=null;this.totalInView=0;this.lerp=new o.Point(1,1);this.onShakeComplete=new o.Signal();this.onFlashComplete=new o.Signal();this.onFadeComplete=new o.Signal();this.fx=null;this._targetPosition=new o.Point();this._edge=0;this._position=new o.Point();this._shake={intensity:0,duration:0,horizontal:false,vertical:false,shakeBounds:true,x:0,y:0};this._fxDuration=0;this._fxType=0;};o.Camera.FOLLOW_LOCKON=0;o.Camera.FOLLOW_PLATFORMER=1;o.Camera.FOLLOW_TOPDOWN=2;o.Camera.FOLLOW_TOPDOWN_TIGHT=3;o.Camera.SHAKE_BOTH=4;o.Camera.SHAKE_HORIZONTAL=5;o.Camera.SHAKE_VERTICAL=6;o.Camera.ENABLE_FX=true;o.Camera.prototype={boot:function boot(){this.displayObject=this.game.world;this.scale=this.game.world.scale;this.game.camera=this;if(o.Graphics&&o.Camera.ENABLE_FX){this.fx=new o.Graphics(this.game);this.game.stage.addChild(this.fx);}},preUpdate:function preUpdate(){this.totalInView=0;},follow:function follow(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:o.Camera.FOLLOW_LOCKON;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;this.target=t;this.lerp.set(i,s);var n;switch(e){case o.Camera.FOLLOW_PLATFORMER:var a=this.width/8;var r=this.height/3;this.deadzone=new o.Rectangle((this.width-a)/2,(this.height-r)/2-r*0.25,a,r);break;case o.Camera.FOLLOW_TOPDOWN:n=Math.max(this.width,this.height)/4;this.deadzone=new o.Rectangle((this.width-n)/2,(this.height-n)/2,n,n);break;case o.Camera.FOLLOW_TOPDOWN_TIGHT:n=Math.max(this.width,this.height)/8;this.deadzone=new o.Rectangle((this.width-n)/2,(this.height-n)/2,n,n);break;case o.Camera.FOLLOW_LOCKON:default:this.deadzone=null;}},unfollow:function unfollow(){this.target=null;},focusOn:function focusOn(t){this.setPosition(Math.round(t.x-this.view.halfWidth),Math.round(t.y-this.view.halfHeight));},focusOnXY:function focusOnXY(t,e){this.setPosition(Math.round(t-this.view.halfWidth),Math.round(e-this.view.halfHeight));},shake:function shake(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0.05;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:500;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:o.Camera.SHAKE_BOTH;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;return(!!i||!(this._shake.duration>0))&&(this._shake.intensity=t,this._shake.duration=e,this._shake.shakeBounds=n,this._shake.x=0,this._shake.y=0,this._shake.horizontal=s===o.Camera.SHAKE_BOTH||s===o.Camera.SHAKE_HORIZONTAL,this._shake.vertical=s===o.Camera.SHAKE_BOTH||s===o.Camera.SHAKE_VERTICAL,true);},flash:function flash(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:16777215;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:500;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return!!this.fx&&(!!i||!(this._fxDuration>0))&&(this.fx.clear(),this.fx.beginFill(t),this.fx.drawRect(0,0,this.width,this.height),this.fx.endFill(),this.fx.alpha=1,this._fxDuration=e,this._fxType=0,true);},fade:function fade(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:500;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return!!this.fx&&(!!i||!(this._fxDuration>0))&&(this.fx.clear(),this.fx.beginFill(t),this.fx.drawRect(0,0,this.width,this.height),this.fx.endFill(),this.fx.alpha=0,this._fxDuration=e,this._fxType=1,true);},update:function update(){if(this._fxDuration>0){this.updateFX();}if(this._shake.duration>0){this.updateShake();}if(this.bounds){this.checkBounds();}if(this.roundPx){this.view.floor();this._shake.x=Math.floor(this._shake.x);this._shake.y=Math.floor(this._shake.y);}this.displayObject.position.x=-this.view.x;this.displayObject.position.y=-this.view.y;},updateFX:function updateFX(){if(this._fxType===0){this.fx.alpha-=this.game.time.elapsedMS/this._fxDuration;if(this.fx.alpha<=0){this._fxDuration=0;this.fx.alpha=0;this.onFlashComplete.dispatch();}}else{this.fx.alpha+=this.game.time.elapsedMS/this._fxDuration;if(this.fx.alpha>=1){this._fxDuration=0;this.fx.alpha=1;this.onFadeComplete.dispatch();}}},updateShake:function updateShake(){this._shake.duration-=this.game.time.elapsedMS;if(this._shake.duration<=0){this.onShakeComplete.dispatch();this._shake.x=0;this._shake.y=0;}else{if(this._shake.horizontal){this._shake.x=this.game.rnd.frac()*this._shake.intensity*this.view.width*2-this._shake.intensity*this.view.width;}if(this._shake.vertical){this._shake.y=this.game.rnd.frac()*this._shake.intensity*this.view.height*2-this._shake.intensity*this.view.height;}}},updateTarget:function updateTarget(){this._targetPosition.x=this.view.x+this.target.worldPosition.x;this._targetPosition.y=this.view.y+this.target.worldPosition.y;if(this.deadzone){this._edge=this._targetPosition.x-this.view.x;if(this._edge<this.deadzone.left){this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.deadzone.left,this.lerp.x);}else if(this._edge>this.deadzone.right){this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.deadzone.right,this.lerp.x);}this._edge=this._targetPosition.y-this.view.y;if(this._edge<this.deadzone.top){this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.deadzone.top,this.lerp.y);}else if(this._edge>this.deadzone.bottom){this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.deadzone.bottom,this.lerp.y);}}else{this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.view.halfWidth,this.lerp.x);this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.view.halfHeight,this.lerp.y);}if(this.bounds){this.checkBounds();}if(this.roundPx){this.view.floor();}this.displayObject.position.x=-this.view.x;this.displayObject.position.y=-this.view.y;},setBoundsToWorld:function setBoundsToWorld(){if(this.bounds){this.bounds.copyFrom(this.game.world.bounds);}},checkBounds:function checkBounds(){this.atLimit.x=false;this.atLimit.y=false;var t=this.view.x+this._shake.x;var e=this.view.right+this._shake.x;var i=this.view.y+this._shake.y;var s=this.view.bottom+this._shake.y;if(t<=this.bounds.x*this.scale.x){this.atLimit.x=true;this.view.x=this.bounds.x*this.scale.x;if(!this._shake.shakeBounds){this._shake.x=0;}}if(e>=this.bounds.right*this.scale.x){this.atLimit.x=true;this.view.x=this.bounds.right*this.scale.x-this.width;if(!this._shake.shakeBounds){this._shake.x=0;}}if(i<=this.bounds.top*this.scale.y){this.atLimit.y=true;this.view.y=this.bounds.top*this.scale.y;if(!this._shake.shakeBounds){this._shake.y=0;}}if(s>=this.bounds.bottom*this.scale.y){this.atLimit.y=true;this.view.y=this.bounds.bottom*this.scale.y-this.height;if(!this._shake.shakeBounds){this._shake.y=0;}}},setPosition:function setPosition(t,e){this.view.x=t;this.view.y=e;if(this.bounds){this.checkBounds();}},setSize:function setSize(t,e){this.view.width=t;this.view.height=e;},reset:function reset(){this.target=null;this.view.x=0;this.view.y=0;this._shake.duration=0;this.resetFX();},resetFX:function resetFX(){this.fx.clear();this.fx.alpha=0;this._fxDuration=0;}};o.Camera.prototype.constructor=o.Camera;Object.defineProperty(o.Camera.prototype,"x",{get:function get(){return this.view.x;},set:function set(t){this.view.x=t;if(this.bounds){this.checkBounds();}}});Object.defineProperty(o.Camera.prototype,"y",{get:function get(){return this.view.y;},set:function set(t){this.view.y=t;if(this.bounds){this.checkBounds();}}});Object.defineProperty(o.Camera.prototype,"position",{get:function get(){this._position.set(this.view.x,this.view.y);return this._position;},set:function set(t){if(t.x!==undefined){this.view.x=t.x;}if(t.y!==undefined){this.view.y=t.y;}if(this.bounds){this.checkBounds();}}});Object.defineProperty(o.Camera.prototype,"width",{get:function get(){return this.view.width;},set:function set(t){this.view.width=t;}});Object.defineProperty(o.Camera.prototype,"height",{get:function get(){return this.view.height;},set:function set(t){this.view.height=t;}});Object.defineProperty(o.Camera.prototype,"shakeIntensity",{get:function get(){return this._shake.intensity;},set:function set(t){this._shake.intensity=t;}});/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.State=function(){this.game=null;this.key="";this.add=null;this.make=null;this.camera=null;this.cache=null;this.input=null;this.load=null;this.math=null;this.sound=null;this.scale=null;this.stage=null;this.state=null;this.time=null;this.tweens=null;this.world=null;this.particles=null;this.physics=null;this.rnd=null;};o.State.prototype={init:function init(){},preload:function preload(){},loadUpdate:function loadUpdate(){},loadRender:function loadRender(){},create:function create(){},update:function update(){},preRender:function preRender(){},render:function render(){},resize:function resize(){},paused:function paused(){},resumed:function resumed(){},pauseUpdate:function pauseUpdate(){},shutdown:function shutdown(){}};o.State.prototype.constructor=o.State;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.StateManager=function(t,e){this.game=t;this.states={};this._pendingState=null;if(e!==undefined&&e!==null){this._pendingState=e;}this._clearWorld=false;this._clearCache=false;this._created=false;this._args=[];this.current="";this.onStateChange=new o.Signal();this.onInitCallback=null;this.onPreloadCallback=null;this.onCreateCallback=null;this.onUpdateCallback=null;this.onRenderCallback=null;this.onResizeCallback=null;this.onPreRenderCallback=null;this.onLoadUpdateCallback=null;this.onLoadRenderCallback=null;this.onPausedCallback=null;this.onResumedCallback=null;this.onPauseUpdateCallback=null;this.onShutDownCallback=null;};o.StateManager.prototype={boot:function boot(){this.game.onPause.add(this.pause,this);this.game.onResume.add(this.resume,this);if(this._pendingState!==null&&typeof this._pendingState!="string"){this.add("default",this._pendingState,true);}},add:function add(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s;if(e instanceof o.State){s=e;}else if(_typeof(e)=="object"){s=e;s.game=this.game;}else if(typeof e=="function"){s=new e(this.game);}this.states[t]=s;if(i){if(this.game.isBooted){this.start(t);}else{this._pendingState=t;}}return s;},remove:function remove(t){if(this.current===t){this.callbackContext=null;this.onInitCallback=null;this.onShutDownCallback=null;this.onPreloadCallback=null;this.onLoadRenderCallback=null;this.onLoadUpdateCallback=null;this.onCreateCallback=null;this.onUpdateCallback=null;this.onPreRenderCallback=null;this.onRenderCallback=null;this.onResizeCallback=null;this.onPausedCallback=null;this.onResumedCallback=null;this.onPauseUpdateCallback=null;}delete this.states[t];},start:function start(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(this.checkState(t)){this._pendingState=t;this._clearWorld=e;this._clearCache=i;if(arguments.length>3){this._args=Array.prototype.splice.call(arguments,3);}}},restart:function restart(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;this._pendingState=this.current;this._clearWorld=t;this._clearCache=e;if(arguments.length>2){this._args=Array.prototype.slice.call(arguments,2);}},dummy:function dummy(){},preUpdate:function preUpdate(){if(this._pendingState&&this.game.isBooted){var t=this.current;this.clearCurrentState();this.setCurrentState(this._pendingState);this.onStateChange.dispatch(this.current,t);if(this.current!==this._pendingState){return;}this._pendingState=null;if(this.onPreloadCallback){this.game.load.reset(true);this.onPreloadCallback.call(this.callbackContext,this.game);if(this.game.load.totalQueuedFiles()===0&&this.game.load.totalQueuedPacks()===0){this.loadComplete();}else{this.game.load.start();}}else{this.loadComplete();}}},clearCurrentState:function clearCurrentState(){if(this.current){if(this.onShutDownCallback){this.onShutDownCallback.call(this.callbackContext,this.game);}this.game.tweens.removeAll();this.game.camera.reset();this.game.input.reset(true);this.game.physics.clear();this.game.time.removeAll();this.game.scale.reset(this._clearWorld);if(this.game.debug){this.game.debug.reset();}if(this._clearWorld){this.game.world.shutdown();if(this._clearCache){this.game.cache.destroy();}}}},checkState:function checkState(t){return!!this.states[t]&&(!!this.states[t].preload||!!this.states[t].create||!!this.states[t].update||!!this.states[t].render);},link:function link(t){this.states[t].game=this.game;this.states[t].add=this.game.add;this.states[t].make=this.game.make;this.states[t].camera=this.game.camera;this.states[t].cache=this.game.cache;this.states[t].input=this.game.input;this.states[t].load=this.game.load;this.states[t].math=this.game.math;this.states[t].sound=this.game.sound;this.states[t].scale=this.game.scale;this.states[t].state=this;this.states[t].stage=this.game.stage;this.states[t].time=this.game.time;this.states[t].tweens=this.game.tweens;this.states[t].world=this.game.world;this.states[t].particles=this.game.particles;this.states[t].rnd=this.game.rnd;this.states[t].physics=this.game.physics;this.states[t].key=t;},unlink:function unlink(t){if(this.states[t]){this.states[t].game=null;this.states[t].add=null;this.states[t].make=null;this.states[t].camera=null;this.states[t].cache=null;this.states[t].input=null;this.states[t].load=null;this.states[t].math=null;this.states[t].sound=null;this.states[t].scale=null;this.states[t].state=null;this.states[t].stage=null;this.states[t].time=null;this.states[t].tweens=null;this.states[t].world=null;this.states[t].particles=null;this.states[t].rnd=null;this.states[t].physics=null;}},setCurrentState:function setCurrentState(t){this.callbackContext=this.states[t];this.link(t);this.onInitCallback=this.states[t].init||this.dummy;this.onPreloadCallback=this.states[t].preload||null;this.onLoadRenderCallback=this.states[t].loadRender||null;this.onLoadUpdateCallback=this.states[t].loadUpdate||null;this.onCreateCallback=this.states[t].create||null;this.onUpdateCallback=this.states[t].update||null;this.onPreRenderCallback=this.states[t].preRender||null;this.onRenderCallback=this.states[t].render||null;this.onResizeCallback=this.states[t].resize||null;this.onPausedCallback=this.states[t].paused||null;this.onResumedCallback=this.states[t].resumed||null;this.onPauseUpdateCallback=this.states[t].pauseUpdate||null;this.onShutDownCallback=this.states[t].shutdown||this.dummy;if(this.current!==""){this.game.physics.reset();}this.current=t;this._created=false;this.onInitCallback.apply(this.callbackContext,this._args);if(t===this._pendingState){this._args=[];}this.game._kickstart=true;},getCurrentState:function getCurrentState(){return this.states[this.current];},loadComplete:function loadComplete(){if(this._created===false&&this.onLoadUpdateCallback){this.onLoadUpdateCallback.call(this.callbackContext,this.game);}if(this._created===false&&this.onCreateCallback){this._created=true;this.onCreateCallback.call(this.callbackContext,this.game);}else{this._created=true;}},pause:function pause(){if(this._created&&this.onPausedCallback){this.onPausedCallback.call(this.callbackContext,this.game);}},resume:function resume(){if(this._created&&this.onResumedCallback){this.onResumedCallback.call(this.callbackContext,this.game);}},update:function update(){if(this._created){if(this.onUpdateCallback){this.onUpdateCallback.call(this.callbackContext,this.game);}}else if(this.onLoadUpdateCallback){this.onLoadUpdateCallback.call(this.callbackContext,this.game);}},pauseUpdate:function pauseUpdate(){if(this._created){if(this.onPauseUpdateCallback){this.onPauseUpdateCallback.call(this.callbackContext,this.game);}}else if(this.onLoadUpdateCallback){this.onLoadUpdateCallback.call(this.callbackContext,this.game);}},preRender:function preRender(t){if(this._created&&this.onPreRenderCallback){this.onPreRenderCallback.call(this.callbackContext,this.game,t);}},resize:function resize(t,e){if(this.onResizeCallback){this.onResizeCallback.call(this.callbackContext,t,e);}},render:function render(){if(this._created){if(this.onRenderCallback){if(this.game.renderType===o.CANVAS){this.game.context.save();this.game.context.setTransform(1,0,0,1,0,0);this.onRenderCallback.call(this.callbackContext,this.game);this.game.context.restore();}else{this.onRenderCallback.call(this.callbackContext,this.game);}}}else if(this.onLoadRenderCallback){this.onLoadRenderCallback.call(this.callbackContext,this.game);}},destroy:function destroy(){this._clearWorld=true;this._clearCache=true;this.clearCurrentState();this.callbackContext=null;this.onInitCallback=null;this.onShutDownCallback=null;this.onPreloadCallback=null;this.onLoadRenderCallback=null;this.onLoadUpdateCallback=null;this.onCreateCallback=null;this.onUpdateCallback=null;this.onRenderCallback=null;this.onPausedCallback=null;this.onResumedCallback=null;this.onPauseUpdateCallback=null;this.game=null;this.states={};this._pendingState=null;this.current="";}};o.StateManager.prototype.constructor=o.StateManager;Object.defineProperty(o.StateManager.prototype,"created",{get:function get(){return this._created;}});/**\r\n  * @author       Miller Medeiros http://millermedeiros.github.com/js-signals/\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Signal=function(){};o.Signal.prototype={_bindings:null,_prevParams:null,memorize:false,_shouldPropagate:true,active:true,_boundDispatch:false,validateListener:function validateListener(t,e){if(typeof t!="function"){throw new Error("Phaser.Signal: listener is a required param of {fn}() and should be a Function.".replace("{fn}",e));}},_registerListener:function _registerListener(t,e,i,s,n){var a=this._indexOfListener(t,i);var r;if(a!==-1){r=this._bindings[a];if(r.isOnce()!==e){throw new Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":"")+"() the same listener without removing the relationship first.");}}else{r=new o.SignalBinding(this,t,e,i,s,n);this._addBinding(r);}if(this.memorize&&this._prevParams){r.execute(this._prevParams);}return r;},_addBinding:function _addBinding(t){this._bindings||(this._bindings=[]);var e=this._bindings.length;do{e--;}while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t);},_indexOfListener:function _indexOfListener(t,e){if(!this._bindings){return-1;}if(e===undefined){e=null;}for(var i=this._bindings.length,s;i--;){s=this._bindings[i];if(s._listener===t&&s.context===e){return i;}}return-1;},has:function has(t,e){return this._indexOfListener(t,e)!==-1;},add:function add(t,e,i){this.validateListener(t,"add");var s=[];if(arguments.length>3){for(var n=3;n<arguments.length;n++){s.push(arguments[n]);}}return this._registerListener(t,false,e,i,s);},addOnce:function addOnce(t,e,i){this.validateListener(t,"addOnce");var s=[];if(arguments.length>3){for(var n=3;n<arguments.length;n++){s.push(arguments[n]);}}return this._registerListener(t,true,e,i,s);},remove:function remove(t,e){this.validateListener(t,"remove");var i=this._indexOfListener(t,e);if(i!==-1){this._bindings[i]._destroy();this._bindings.splice(i,1);}return t;},removeAll:function removeAll(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(this._bindings){for(var e=this._bindings.length;e--;){if(t){if(this._bindings[e].context===t){this._bindings[e]._destroy();this._bindings.splice(e,1);}}else{this._bindings[e]._destroy();}}if(!t){this._bindings.length=0;}}},getNumListeners:function getNumListeners(){if(this._bindings){return this._bindings.length;}else{return 0;}},halt:function halt(){this._shouldPropagate=false;},dispatch:function dispatch(){if(this.active&&this._bindings){var t=Array.prototype.slice.call(arguments);var e=this._bindings.length;var i;if(this.memorize){this._prevParams=t;}if(e){i=this._bindings.slice();this._shouldPropagate=true;do{e--;}while(i[e]&&this._shouldPropagate&&i[e].execute(t)!==false);}}},forget:function forget(){this._prevParams&&(this._prevParams=null);},dispose:function dispose(){this.removeAll();this._bindings=null;this._prevParams&&(this._prevParams=null);},toString:function toString(){return"[Phaser.Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]";}};Object.defineProperty(o.Signal.prototype,"boundDispatch",{get:function get(){var t=this;return this._boundDispatch||(this._boundDispatch=function(){return t.dispatch.apply(t,arguments);});}});o.Signal.prototype.constructor=o.Signal;/**\r\n  * @author       Miller Medeiros http://millermedeiros.github.com/js-signals/\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.SignalBinding=function(t,e,i,s,n,o){this._listener=e;if(i){this._isOnce=true;}if(s!=null){this.context=s;}this._signal=t;if(n){this._priority=n;}if(o&&o.length){this._args=o;}};o.SignalBinding.prototype={context:null,_isOnce:false,_priority:0,_args:null,callCount:0,active:true,params:null,execute:function execute(t){var e;var i;if(this.active&&this._listener){i=this.params?this.params.concat(t):t;if(this._args){i=i.concat(this._args);}e=this._listener.apply(this.context,i);this.callCount++;if(this._isOnce){this.detach();}}return e;},detach:function detach(){if(this.isBound()){return this._signal.remove(this._listener,this.context);}else{return null;}},isBound:function isBound(){return!!this._signal&&!!this._listener;},isOnce:function isOnce(){return this._isOnce;},getListener:function getListener(){return this._listener;},getSignal:function getSignal(){return this._signal;},_destroy:function _destroy(){delete this._signal;delete this._listener;delete this.context;},toString:function toString(){return"[Phaser.SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]";}};o.SignalBinding.prototype.constructor=o.SignalBinding;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Filter=function(t,e,i){this.game=t;this.type=o.WEBGL_FILTER;this.passes=[this];this.shaders=[];this.dirty=true;this.padding=0;this.prevPoint=new o.Point();var s=new Date();this.uniforms={resolution:{type:"2f",value:{x:256,y:256}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:0,y:0}},date:{type:"4fv",value:[s.getFullYear(),s.getMonth(),s.getDate(),s.getHours()*60*60+s.getMinutes()*60+s.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:true}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:true}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:true}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:true}}};if(e){for(var n in e){this.uniforms[n]=e[n];}}this.fragmentSrc=i||"";};o.Filter.prototype={init:function init(){},setResolution:function setResolution(t,e){this.uniforms.resolution.value.x=t;this.uniforms.resolution.value.y=e;},update:function update(t){if(t!==undefined){var e=t.x/this.game.width;var i=1-t.y/this.game.height;if(e!==this.prevPoint.x||i!==this.prevPoint.y){this.uniforms.mouse.value.x=e.toFixed(2);this.uniforms.mouse.value.y=i.toFixed(2);this.prevPoint.set(e,i);}}this.uniforms.time.value=this.game.time.totalElapsedSeconds();},addToWorld:function addToWorld(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;if(i!==undefined&&i!==null){this.width=i;}else{i=this.width;}if(s!==undefined&&s!==null){this.height=s;}else{s=this.height;}var a=this.game.add.image(t,e,"__default");a.width=i;a.height=s;a.anchor.set(n,o);a.filters=[this];return a;},destroy:function destroy(){this.game=null;}};o.Filter.prototype.constructor=o.Filter;Object.defineProperty(o.Filter.prototype,"width",{get:function get(){return this.uniforms.resolution.value.x;},set:function set(t){this.uniforms.resolution.value.x=t;}});Object.defineProperty(o.Filter.prototype,"height",{get:function get(){return this.uniforms.resolution.value.y;},set:function set(t){this.uniforms.resolution.value.y=t;}});/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Plugin=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.game=t;this.parent=e;this.active=false;this.visible=false;this.hasPreUpdate=false;this.hasUpdate=false;this.hasPostUpdate=false;this.hasRender=false;this.hasPostRender=false;};o.Plugin.prototype={preUpdate:function preUpdate(){},update:function update(){},render:function render(){},postRender:function postRender(){},destroy:function destroy(){this.game=null;this.parent=null;this.active=false;this.visible=false;}};o.Plugin.prototype.constructor=o.Plugin;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.PluginManager=function(t){this.game=t;this.plugins=[];this._len=0;this._i=0;};o.PluginManager.prototype={add:function add(t){var e=Array.prototype.slice.call(arguments,1);var i=false;if(typeof t=="function"){t=new t(this.game,this);}else{t.game=this.game;t.parent=this;}if(typeof t.preUpdate=="function"){t.hasPreUpdate=true;i=true;}if(typeof t.update=="function"){t.hasUpdate=true;i=true;}if(typeof t.postUpdate=="function"){t.hasPostUpdate=true;i=true;}if(typeof t.render=="function"){t.hasRender=true;i=true;}if(typeof t.postRender=="function"){t.hasPostRender=true;i=true;}if(i){if(t.hasPreUpdate||t.hasUpdate||t.hasPostUpdate){t.active=true;}if(t.hasRender||t.hasPostRender){t.visible=true;}this._len=this.plugins.push(t);if(typeof t.init=="function"){t.init.apply(t,e);}return t;}else{return null;}},remove:function remove(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this._i=this._len;while(this._i--){if(this.plugins[this._i]===t){if(e){t.destroy();}this.plugins.splice(this._i,1);this._len--;return;}}},removeAll:function removeAll(){for(this._i=this._len;this._i--;){this.plugins[this._i].destroy();}this.plugins.length=0;this._len=0;},preUpdate:function preUpdate(){for(this._i=this._len;this._i--;){if(this.plugins[this._i].active&&this.plugins[this._i].hasPreUpdate){this.plugins[this._i].preUpdate();}}},update:function update(){for(this._i=this._len;this._i--;){if(this.plugins[this._i].active&&this.plugins[this._i].hasUpdate){this.plugins[this._i].update();}}},postUpdate:function postUpdate(){for(this._i=this._len;this._i--;){if(this.plugins[this._i].active&&this.plugins[this._i].hasPostUpdate){this.plugins[this._i].postUpdate();}}},render:function render(){for(this._i=this._len;this._i--;){if(this.plugins[this._i].visible&&this.plugins[this._i].hasRender){this.plugins[this._i].render();}}},postRender:function postRender(){for(this._i=this._len;this._i--;){if(this.plugins[this._i].visible&&this.plugins[this._i].hasPostRender){this.plugins[this._i].postRender();}}},destroy:function destroy(){this.removeAll();this.game=null;}};o.PluginManager.prototype.constructor=o.PluginManager;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Stage=function(t){this.game=t;PIXI.DisplayObjectContainer.call(this);this.name="_stage_root";this.disableVisibilityChange=false;this.exists=true;this.worldTransform=new PIXI.Matrix();this.stage=this;this.currentRenderOrderID=0;this._hiddenVar="hidden";this._onChange=null;this._bgColor={r:0,g:0,b:0,a:0,color:0,rgba:"#000000"};if(!this.game.transparent){this._bgColor.a=1;}if(t.config){this.parseConfig(t.config);}};o.Stage.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);o.Stage.prototype.constructor=o.Stage;o.Stage.prototype.parseConfig=function(t){if(t.disableVisibilityChange){this.disableVisibilityChange=t.disableVisibilityChange;}if(t.backgroundColor){this.setBackgroundColor(t.backgroundColor);}};o.Stage.prototype.boot=function(){o.DOM.getOffset(this.game.canvas,this.offset);o.Canvas.setUserSelect(this.game.canvas,"none");o.Canvas.setTouchAction(this.game.canvas,"none");this.checkVisibility();};o.Stage.prototype.preUpdate=function(){this.currentRenderOrderID=0;for(var t=0;t<this.children.length;t++){this.children[t].preUpdate();}};o.Stage.prototype.update=function(){for(var t=this.children.length;t--;){this.children[t].update();}};o.Stage.prototype.postUpdate=function(){this.game.camera.update();if(this.game.camera.target){this.game.camera.target.postUpdate();this.updateTransform();this.game.camera.updateTarget();}for(var t=0;t<this.children.length;t++){this.children[t].postUpdate();}this.updateTransform();};o.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0;t<this.children.length;t++){this.children[t].updateTransform();}};o.Stage.prototype.checkVisibility=function(){if(document.hidden!==undefined){this._hiddenVar="visibilitychange";}else if(document.webkitHidden!==undefined){this._hiddenVar="webkitvisibilitychange";}else if(document.mozHidden!==undefined){this._hiddenVar="mozvisibilitychange";}else if(document.msHidden!==undefined){this._hiddenVar="msvisibilitychange";}else{this._hiddenVar=null;}var t=this;this._onChange=function(e){return t.visibilityChange(e);};if(this._hiddenVar){document.addEventListener(this._hiddenVar,this._onChange,false);}window.onblur=this._onChange;window.onfocus=this._onChange;window.onpagehide=this._onChange;window.onpageshow=this._onChange;if(this.game.device.cocoonJSApp){CocoonJS.App.onSuspended.addEventListener(function(){o.Stage.prototype.visibilityChange.call(t,{type:"pause"});});CocoonJS.App.onActivated.addEventListener(function(){o.Stage.prototype.visibilityChange.call(t,{type:"resume"});});}};o.Stage.prototype.visibilityChange=function(t){if(t.type==="pagehide"||t.type==="blur"||t.type==="pageshow"||t.type==="focus"){if(t.type==="pagehide"||t.type==="blur"){this.game.focusLoss(t);}else if(t.type==="pageshow"||t.type==="focus"){this.game.focusGain(t);}return;}if(!this.disableVisibilityChange){if(document.hidden||document.mozHidden||document.msHidden||document.webkitHidden||t.type==="pause"){this.game.gamePaused(t);}else{this.game.gameResumed(t);}}};o.Stage.prototype.setBackgroundColor=function(t){if(!this.game.transparent){o.Color.valueToColor(t,this._bgColor);o.Color.updateColor(this._bgColor);this._bgColor.r/=255;this._bgColor.g/=255;this._bgColor.b/=255;this._bgColor.a=1;}};o.Stage.prototype.destroy=function(){if(this._hiddenVar){document.removeEventListener(this._hiddenVar,this._onChange,false);}window.onpagehide=null;window.onpageshow=null;window.onblur=null;window.onfocus=null;};Object.defineProperty(o.Stage.prototype,"backgroundColor",{get:function get(){return this._bgColor.color;},set:function set(t){this.setBackgroundColor(t);}});Object.defineProperty(o.Stage.prototype,"smoothed",{get:function get(){return PIXI.scaleModes.DEFAULT===PIXI.scaleModes.LINEAR;},set:function set(t){PIXI.scaleModes.DEFAULT=t?PIXI.scaleModes.LINEAR:PIXI.scaleModes.NEAREST;}});/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Group=function(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:o.Physics.ARCADE;this.game=t;if(e===undefined){e=t.world;}this.name=i||"group";this.z=0;PIXI.DisplayObjectContainer.call(this);if(s){this.game.stage.addChild(this);this.z=this.game.stage.children.length;}else if(e){e.addChild(this);this.z=e.children.length;}this.type=o.GROUP;this.physicsType=o.GROUP;this.alive=true;this.exists=true;this.ignoreDestroy=false;this.pendingDestroy=false;this.classType=o.Sprite;this.cursor=null;this.inputEnableChildren=false;this.onChildInputDown=new o.Signal();this.onChildInputUp=new o.Signal();this.onChildInputOver=new o.Signal();this.onChildInputOut=new o.Signal();this.enableBody=n;this.enableBodyDebug=false;this.physicsBodyType=a;this.physicsSortDirection=null;this.onDestroy=new o.Signal();this.cursorIndex=0;this.fixedToCamera=false;this.cameraOffset=new o.Point();this.hash=[];this._sortProperty="z";};o.Group.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);o.Group.prototype.constructor=o.Group;o.Group.RETURN_NONE=0;o.Group.RETURN_TOTAL=1;o.Group.RETURN_CHILD=2;o.Group.RETURN_ALL=3;o.Group.SORT_ASCENDING=-1;o.Group.SORT_DESCENDING=1;o.Group.prototype.add=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=arguments.length>2?arguments[2]:undefined;if(t.parent===this){return t;}else{if(t.body&&t.parent&&t.parent.hash){t.parent.removeFromHash(t);}if(i===undefined){t.z=this.children.length;this.addChild(t);}else{this.addChildAt(t,i);this.updateZ();}if(this.enableBody&&t.hasOwnProperty("body")&&t.body===null){this.game.physics.enable(t,this.physicsBodyType);}else if(t.body){this.addToHash(t);}if(!!this.inputEnableChildren&&(!t.input||!!t.inputEnabled)){t.inputEnabled=true;}if(!e&&t.events){t.events.onAddedToGroup$dispatch(t,this);}if(this.cursor===null){this.cursor=t;}return t;}};o.Group.prototype.addAt=function(t,e,i){this.add(t,i,e);};o.Group.prototype.addToHash=function(t){if(t.parent===this){if(this.hash.indexOf(t)===-1){this.hash.push(t);return true;}}return false;};o.Group.prototype.removeFromHash=function(t){if(t){var e=this.hash.indexOf(t);if(e!==-1){this.hash.splice(e,1);return true;}}return false;};o.Group.prototype.addMultiple=function(t,e){if(t instanceof o.Group){t.moveAll(this,e);}else if(Array.isArray(t)){for(var i=0;i<t.length;i++){this.add(t[i],e);}}return t;};o.Group.prototype.getAt=function(t){if(t<0||t>=this.children.length){return-1;}else{return this.getChildAt(t);}};o.Group.prototype.create=function(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var o=arguments.length>5?arguments[5]:undefined;var a=new this.classType(this.game,t,e,i,s);a.exists=n;a.visible=n;a.alive=n;return this.add(a,false,o);};o.Group.prototype.createMultiple=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(!Array.isArray(e)){e=[e];}if(!Array.isArray(i)){i=[i];}var n=this;var o=[];e.forEach(function(e){i.forEach(function(i){for(var a=0;a<t;a++){o.push(n.create(0,0,e,i,s));}});});return o;};o.Group.prototype.updateZ=function(){for(var t=this.children.length;t--;){this.children[t].z=t;}};o.Group.prototype.align=function(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:o.TOP_LEFT;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;if(this.children.length===0||a>this.children.length||t===-1&&e===-1){return false;}var r=new o.Rectangle(0,0,i,s);var h=t*i;var l=e*s;for(var c=a;c<this.children.length;c++){var u=this.children[c];if(u.alignIn){u.alignIn(r,n);if(t===-1){r.y+=s;if(r.y===l){r.x+=i;r.y=0;}}else if(e===-1){r.x+=i;if(r.x===h){r.x=0;r.y+=s;}}else{r.x+=i;if(r.x===h&&(r.x=0,r.y+=s,r.y===l)){return true;}}}}return true;};o.Group.prototype.resetCursor=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(t>this.children.length-1){t=0;}if(this.cursor){this.cursorIndex=t;this.cursor=this.children[this.cursorIndex];return this.cursor;}};o.Group.prototype.next=function(){if(this.cursor){if(this.cursorIndex>=this.children.length-1){this.cursorIndex=0;}else{this.cursorIndex++;}this.cursor=this.children[this.cursorIndex];return this.cursor;}};o.Group.prototype.previous=function(){if(this.cursor){if(this.cursorIndex===0){this.cursorIndex=this.children.length-1;}else{this.cursorIndex--;}this.cursor=this.children[this.cursorIndex];return this.cursor;}};o.Group.prototype.swap=function(t,e){this.swapChildren(t,e);this.updateZ();};o.Group.prototype.bringToTop=function(t){if(t.parent===this&&this.getIndex(t)<this.children.length){this.remove(t,false,true);this.add(t,true);}return t;};o.Group.prototype.sendToBack=function(t){if(t.parent===this&&this.getIndex(t)>0){this.remove(t,false,true);this.addAt(t,0,true);}return t;};o.Group.prototype.moveUp=function(t){if(t.parent===this&&this.getIndex(t)<this.children.length-1){var e=this.getIndex(t);var i=this.getAt(e+1);if(i){this.swap(t,i);}}return t;};o.Group.prototype.moveDown=function(t){if(t.parent===this&&this.getIndex(t)>0){var e=this.getIndex(t);var i=this.getAt(e-1);if(i){this.swap(t,i);}}return t;};o.Group.prototype.xy=function(t,e,i){if(t<0||t>this.children.length){return-1;}this.getChildAt(t).x=e;this.getChildAt(t).y=i;};o.Group.prototype.reverse=function(){this.children.reverse();this.updateZ();};o.Group.prototype.getIndex=function(t){return this.children.indexOf(t);};o.Group.prototype.getByName=function(t){for(var e=0;e<this.children.length;e++){if(this.children[e].name===t){return this.children[e];}}return null;};o.Group.prototype.replace=function(t,e){var i=this.getIndex(t);if(i!==-1){if(e.parent){if(e.parent instanceof o.Group){e.parent.remove(e);}else{e.parent.removeChild(e);}}this.remove(t);this.addAt(e,i);return t;}};o.Group.prototype.hasProperty=function(t,e){var i=e.length;return i===1&&e[0]in t||i===2&&e[0]in t&&e[1]in t[e[0]]||i===3&&e[0]in t&&e[1]in t[e[0]]&&e[2]in t[e[0]][e[1]]||i===4&&e[0]in t&&e[1]in t[e[0]]&&e[2]in t[e[0]][e[1]]&&e[3]in t[e[0]][e[1]][e[2]];};o.Group.prototype.setProperty=function(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;s=s||0;if(!this.hasProperty(t,e)&&(!n||s>0)){return false;}var o=e.length;if(o===1){if(s===0){t[e[0]]=i;}else if(s===1){t[e[0]]+=i;}else if(s===2){t[e[0]]-=i;}else if(s===3){t[e[0]]*=i;}else if(s===4){t[e[0]]/=i;}}else if(o===2){if(s===0){t[e[0]][e[1]]=i;}else if(s===1){t[e[0]][e[1]]+=i;}else if(s===2){t[e[0]][e[1]]-=i;}else if(s===3){t[e[0]][e[1]]*=i;}else if(s===4){t[e[0]][e[1]]/=i;}}else if(o===3){if(s===0){t[e[0]][e[1]][e[2]]=i;}else if(s===1){t[e[0]][e[1]][e[2]]+=i;}else if(s===2){t[e[0]][e[1]][e[2]]-=i;}else if(s===3){t[e[0]][e[1]][e[2]]*=i;}else if(s===4){t[e[0]][e[1]][e[2]]/=i;}}else if(o===4){if(s===0){t[e[0]][e[1]][e[2]][e[3]]=i;}else if(s===1){t[e[0]][e[1]][e[2]][e[3]]+=i;}else if(s===2){t[e[0]][e[1]][e[2]][e[3]]-=i;}else if(s===3){t[e[0]][e[1]][e[2]][e[3]]*=i;}else if(s===4){t[e[0]][e[1]][e[2]][e[3]]/=i;}}return true;};o.Group.prototype.checkProperty=function(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;return(!!o.Utils.getProperty(t,e)||!s)&&o.Utils.getProperty(t,e)===i;};o.Group.prototype.set=function(t,e,i,s,n,o){var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;e=e.split(".");if(s===undefined){s=false;}if(n===undefined){n=false;}if((s===false||s&&t.alive)&&(n===false||n&&t.visible)){return this.setProperty(t,e,i,o,a);}};o.Group.prototype.setAll=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var n=arguments.length>4?arguments[4]:undefined;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;t=t.split(".");n=n||0;for(var a=0;a<this.children.length;a++){if((!i||i&&this.children[a].alive)&&(!s||s&&this.children[a].visible)){this.setProperty(this.children[a],t,e,n,o);}}};o.Group.prototype.setAllChildren=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var n=arguments.length>4?arguments[4]:undefined;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;n=n||0;for(var r=0;r<this.children.length;r++){if((!i||i&&this.children[r].alive)&&(!s||s&&this.children[r].visible)){if(this.children[r]instanceof o.Group){this.children[r].setAllChildren(t,e,i,s,n,a);}else{this.setProperty(this.children[r],t.split("."),e,n,a);}}}};o.Group.prototype.checkAll=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;for(var o=0;o<this.children.length;o++){if((!i||i&&this.children[o].alive)&&(!s||s&&this.children[o].visible)&&!this.checkProperty(this.children[o],t,e,n)){return false;}}return true;};o.Group.prototype.addAll=function(t,e,i,s){this.setAll(t,e,i,s,1);};o.Group.prototype.subAll=function(t,e,i,s){this.setAll(t,e,i,s,2);};o.Group.prototype.multiplyAll=function(t,e,i,s){this.setAll(t,e,i,s,3);};o.Group.prototype.divideAll=function(t,e,i,s){this.setAll(t,e,i,s,4);};o.Group.prototype.callAllExists=function(t,e){var i;if(arguments.length>2){i=[];for(var s=2;s<arguments.length;s++){i.push(arguments[s]);}}for(var s=0;s<this.children.length;s++){if(this.children[s].exists===e&&this.children[s][t]){this.children[s][t].apply(this.children[s],i);}}};o.Group.prototype.callbackFromArray=function(t,e,i){if(i===1){if(t[e[0]]){return t[e[0]];}}else if(i===2){if(t[e[0]][e[1]]){return t[e[0]][e[1]];}}else if(i===3){if(t[e[0]][e[1]][e[2]]){return t[e[0]][e[1]][e[2]];}}else if(i===4){if(t[e[0]][e[1]][e[2]][e[3]]){return t[e[0]][e[1]][e[2]][e[3]];}}else if(t[e]){return t[e];}return false;};o.Group.prototype.callAll=function(t,e){if(t!==undefined){t=t.split(".");var i=t.length;if(e===undefined||e===null||e===""){e=null;}else if(typeof e=="string"){e=e.split(".");var s=e.length;}var n;if(arguments.length>2){n=[];for(var o=2;o<arguments.length;o++){n.push(arguments[o]);}}var a=null;var r=null;for(var o=0;o<this.children.length;o++){a=this.callbackFromArray(this.children[o],t,i);if(e&&a){r=this.callbackFromArray(this.children[o],e,s);if(a){a.apply(r,n);}}else if(a){a.apply(this.children[o],n);}}}};o.Group.prototype.preUpdate=function(){if(this.pendingDestroy){this.destroy();return false;}if(!this.exists||!this.parent.exists){this.renderOrderID=-1;return false;}for(var t=0;t<this.children.length;t++){this.children[t].preUpdate();}return true;};o.Group.prototype.update=function(){for(var t=this.children.length;t--;){this.children[t].update();}};o.Group.prototype.postUpdate=function(){if(this.fixedToCamera){this.x=this.game.camera.view.x+this.cameraOffset.x;this.y=this.game.camera.view.y+this.cameraOffset.y;}for(var t=0;t<this.children.length;t++){this.children[t].postUpdate();}};o.Group.prototype.filter=function(t,e){for(var i=-1,s=this.children.length,n=[];++i<s;){var a=this.children[i];if((!e||e&&a.exists)&&t(a,i,this.children)){n.push(a);}}return new o.ArraySet(n);};o.Group.prototype.forEach=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(arguments.length<=3){for(var s=0;s<this.children.length;s++){if(!i||i&&this.children[s].exists){t.call(e,this.children[s]);}}}else{var n=[null];for(var s=3;s<arguments.length;s++){n.push(arguments[s]);}for(var s=0;s<this.children.length;s++){if(!i||i&&this.children[s].exists){n[0]=this.children[s];t.apply(e,n);}}}};o.Group.prototype.forEachExists=function(t,e){var i;if(arguments.length>2){i=[null];for(var s=2;s<arguments.length;s++){i.push(arguments[s]);}}this.iterate("exists",true,o.Group.RETURN_TOTAL,t,e,i);};o.Group.prototype.forEachAlive=function(t,e){var i;if(arguments.length>2){i=[null];for(var s=2;s<arguments.length;s++){i.push(arguments[s]);}}this.iterate("alive",true,o.Group.RETURN_TOTAL,t,e,i);};o.Group.prototype.forEachDead=function(t,e){var i;if(arguments.length>2){i=[null];for(var s=2;s<arguments.length;s++){i.push(arguments[s]);}}this.iterate("alive",false,o.Group.RETURN_TOTAL,t,e,i);};o.Group.prototype.sort=function(t,e){if(!(this.children.length<2)){if(t===undefined){t="z";}if(e===undefined){e=o.Group.SORT_ASCENDING;}this._sortProperty=t;if(e===o.Group.SORT_ASCENDING){this.children.sort(this.ascendingSortHandler.bind(this));}else{this.children.sort(this.descendingSortHandler.bind(this));}this.updateZ();}};o.Group.prototype.customSort=function(t,e){if(!(this.children.length<2)){this.children.sort(t.bind(e));this.updateZ();}};o.Group.prototype.ascendingSortHandler=function(t,e){if(t[this._sortProperty]<e[this._sortProperty]){return-1;}else if(t[this._sortProperty]>e[this._sortProperty]){return 1;}else if(t.z<e.z){return-1;}else{return 1;}};o.Group.prototype.descendingSortHandler=function(t,e){if(t[this._sortProperty]<e[this._sortProperty]){return 1;}else if(t[this._sortProperty]>e[this._sortProperty]){return-1;}else{return 0;}};o.Group.prototype.iterate=function(t,e,i,s,n,a){if(this.children.length===0){if(i===o.Group.RETURN_TOTAL){return 0;}if(i===o.Group.RETURN_ALL){return[];}}var r=0;if(i===o.Group.RETURN_ALL){var h=[];}for(var l=0;l<this.children.length;l++){if(this.children[l][t]===e){r++;if(s){if(a){a[0]=this.children[l];s.apply(n,a);}else{s.call(n,this.children[l]);}}if(i===o.Group.RETURN_CHILD){return this.children[l];}if(i===o.Group.RETURN_ALL){h.push(this.children[l]);}}}if(i===o.Group.RETURN_TOTAL){return r;}else if(i===o.Group.RETURN_ALL){return h;}else{return null;}};o.Group.prototype.getFirstExists=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=arguments.length>2?arguments[2]:undefined;var s=arguments.length>3?arguments[3]:undefined;var n=arguments.length>4?arguments[4]:undefined;var a=arguments.length>5?arguments[5]:undefined;if(typeof t!="boolean"){t=true;}var r=this.iterate("exists",t,o.Group.RETURN_CHILD);if(r===null&&e){return this.create(i,s,n,a);}else{return this.resetChild(r,i,s,n,a);}};o.Group.prototype.getFirstAlive=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var e=arguments.length>1?arguments[1]:undefined;var i=arguments.length>2?arguments[2]:undefined;var s=arguments.length>3?arguments[3]:undefined;var n=arguments.length>4?arguments[4]:undefined;var a=this.iterate("alive",true,o.Group.RETURN_CHILD);if(a===null&&t){return this.create(e,i,s,n);}else{return this.resetChild(a,e,i,s,n);}};o.Group.prototype.getFirstDead=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var e=arguments.length>1?arguments[1]:undefined;var i=arguments.length>2?arguments[2]:undefined;var s=arguments.length>3?arguments[3]:undefined;var n=arguments.length>4?arguments[4]:undefined;var a=this.iterate("alive",false,o.Group.RETURN_CHILD);if(a===null&&t){return this.create(e,i,s,n);}else{return this.resetChild(a,e,i,s,n);}};o.Group.prototype.resetChild=function(t,e,i,s,n){if(t===null){return null;}else{if(e===undefined){e=null;}if(i===undefined){i=null;}if(e!==null&&i!==null){t.reset(e,i);}if(s!==undefined){t.loadTexture(s,n);}return t;}};o.Group.prototype.getTop=function(){if(this.children.length>0){return this.children[this.children.length-1];}};o.Group.prototype.getBottom=function(){if(this.children.length>0){return this.children[0];}};o.Group.prototype.getClosestTo=function(t,e,i){var s=Number.MAX_VALUE;var n=0;var a=null;for(var r=0;r<this.children.length;r++){var h=this.children[r];if(h.exists&&(n=Math.abs(o.Point.distance(t,h)))<s&&(!e||e.call(i,h,n))){s=n;a=h;}}return a;};o.Group.prototype.getFurthestFrom=function(t,e,i){var s=0;var n=0;var a=null;for(var r=0;r<this.children.length;r++){var h=this.children[r];if(h.exists&&(n=Math.abs(o.Point.distance(t,h)))>s&&(!e||e.call(i,h,n))){s=n;a=h;}}return a;};o.Group.prototype.countLiving=function(){return this.iterate("alive",true,o.Group.RETURN_TOTAL);};o.Group.prototype.countDead=function(){return this.iterate("alive",false,o.Group.RETURN_TOTAL);};o.Group.prototype.getRandom=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.children.length;if(e===0){return null;}else{return o.ArrayUtils.getRandomItem(this.children,t,e);}};o.Group.prototype.getRandomExists=function(t,e){var i=this.getAll("exists",true,t,e);return this.game.rnd.pick(i);};o.Group.prototype.getAll=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:this.children.length;var n=[];for(var o=i;o<s;o++){var a=this.children[o];if(t&&a[t]===e){n.push(a);}}return n;};o.Group.prototype.remove=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(this.children.length===0||this.children.indexOf(t)===-1){return false;}if(!i&&!!t.events&&!t.destroyPhase){t.events.onRemovedFromGroup$dispatch(t,this);}var s=this.removeChild(t);this.removeFromHash(t);this.updateZ();if(this.cursor===t){this.next();}if(e&&s){s.destroy(true);}return true;};o.Group.prototype.moveAll=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(this.children.length>0&&t instanceof o.Group){do{t.add(this.children[0],e);}while(this.children.length>0);this.hash=[];this.cursor=null;}return t;};o.Group.prototype.removeAll=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(this.children.length!==0){do{if(!e&&this.children[0].events){this.children[0].events.onRemovedFromGroup$dispatch(this.children[0],this);}var s=this.removeChild(this.children[0]);this.removeFromHash(s);if(t&&s){s.destroy(true,i);}}while(this.children.length>0);this.hash=[];this.cursor=null;}};o.Group.prototype.removeBetween=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.children.length-1;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(this.children.length!==0){if(t>e||t<0||e>this.children.length){return false;}for(var n=e;n>=t;){if(!s&&this.children[n].events){this.children[n].events.onRemovedFromGroup$dispatch(this.children[n],this);}var o=this.removeChild(this.children[n]);this.removeFromHash(o);if(i&&o){o.destroy(true);}if(this.cursor===this.children[n]){this.cursor=null;}n--;}this.updateZ();}};o.Group.prototype.destroy=function(t,e){if(this.game!==null&&!this.ignoreDestroy){if(t===undefined){t=true;}if(e===undefined){e=false;}this.onDestroy.dispatch(this,t,e);this.removeAll(t);this.cursor=null;this.filters=null;this.pendingDestroy=false;if(!e){if(this.parent){this.parent.removeChild(this);}this.game=null;this.exists=false;}}};Object.defineProperty(o.Group.prototype,"total",{get:function get(){return this.iterate("exists",true,o.Group.RETURN_TOTAL);}});Object.defineProperty(o.Group.prototype,"length",{get:function get(){return this.children.length;}});Object.defineProperty(o.Group.prototype,"angle",{get:function get(){return o.Math.radToDeg(this.rotation);},set:function set(t){this.rotation=o.Math.degToRad(t);}});Object.defineProperty(o.Group.prototype,"centerX",{get:function get(){return this.getBounds(this.parent).centerX;},set:function set(t){var e=this.getBounds(this.parent);var i=this.x-e.x;this.x=t+i-e.halfWidth;}});Object.defineProperty(o.Group.prototype,"centerY",{get:function get(){return this.getBounds(this.parent).centerY;},set:function set(t){var e=this.getBounds(this.parent);var i=this.y-e.y;this.y=t+i-e.halfHeight;}});Object.defineProperty(o.Group.prototype,"left",{get:function get(){return this.getBounds(this.parent).left;},set:function set(t){var e=this.getBounds(this.parent);var i=this.x-e.x;this.x=t+i;}});Object.defineProperty(o.Group.prototype,"right",{get:function get(){return this.getBounds(this.parent).right;},set:function set(t){var e=this.getBounds(this.parent);var i=this.x-e.x;this.x=t+i-e.width;}});Object.defineProperty(o.Group.prototype,"top",{get:function get(){return this.getBounds(this.parent).top;},set:function set(t){var e=this.getBounds(this.parent);var i=this.y-e.y;this.y=t+i;}});Object.defineProperty(o.Group.prototype,"bottom",{get:function get(){return this.getBounds(this.parent).bottom;},set:function set(t){var e=this.getBounds(this.parent);var i=this.y-e.y;this.y=t+i-e.height;}});/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.World=function(t){o.Group.call(this,t,null,"__world",false);this.bounds=new o.Rectangle(0,0,t.width,t.height);this.camera=null;this._definedSize=false;this._width=t.width;this._height=t.height;this.game.state.onStateChange.add(this.stateChange,this);};o.World.prototype=Object.create(o.Group.prototype);o.World.prototype.constructor=o.World;o.World.prototype.boot=function(){this.camera=new o.Camera(this.game,0,0,0,this.game.width,this.game.height);this.game.stage.addChild(this);this.camera.boot();};o.World.prototype.stateChange=function(){this.x=0;this.y=0;this.camera.reset();};o.World.prototype.setBounds=function(t,e,i,s){this._definedSize=true;this._width=i;this._height=s;this.bounds.setTo(t,e,i,s);this.x=t;this.y=e;if(this.camera.bounds){this.camera.bounds.setTo(t,e,Math.max(i,this.game.width),Math.max(s,this.game.height));}this.game.physics.setBoundsToWorld();};o.World.prototype.resize=function(t,e){if(this._definedSize){if(t<this._width){t=this._width;}if(e<this._height){e=this._height;}}this.bounds.width=t;this.bounds.height=e;this.game.camera.setBoundsToWorld();this.game.physics.setBoundsToWorld();};o.World.prototype.shutdown=function(){this.destroy(true,true);};o.World.prototype.wrap=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;if(i){t.getBounds();if(s){if(t.x+t._currentBounds.width<this.bounds.x){t.x=this.bounds.right;}else if(t.x>this.bounds.right){t.x=this.bounds.left;}}if(n){if(t.y+t._currentBounds.height<this.bounds.top){t.y=this.bounds.bottom;}else if(t.y>this.bounds.bottom){t.y=this.bounds.top;}}}else{if(s&&t.x+e<this.bounds.x){t.x=this.bounds.right+e;}else if(s&&t.x-e>this.bounds.right){t.x=this.bounds.left-e;}if(n&&t.y+e<this.bounds.top){t.y=this.bounds.bottom+e;}else if(n&&t.y-e>this.bounds.bottom){t.y=this.bounds.top-e;}}};Object.defineProperty(o.World.prototype,"width",{get:function get(){return this.bounds.width;},set:function set(t){if(t<this.game.width){t=this.game.width;}this.bounds.width=t;this._width=t;this._definedSize=true;}});Object.defineProperty(o.World.prototype,"height",{get:function get(){return this.bounds.height;},set:function set(t){if(t<this.game.height){t=this.game.height;}this.bounds.height=t;this._height=t;this._definedSize=true;}});Object.defineProperty(o.World.prototype,"centerX",{get:function get(){return this.bounds.halfWidth+this.bounds.x;}});Object.defineProperty(o.World.prototype,"centerY",{get:function get(){return this.bounds.halfHeight+this.bounds.y;}});Object.defineProperty(o.World.prototype,"randomX",{get:function get(){if(this.bounds.x<0){return this.game.rnd.between(this.bounds.x,this.bounds.width-Math.abs(this.bounds.x));}else{return this.game.rnd.between(this.bounds.x,this.bounds.width);}}});Object.defineProperty(o.World.prototype,"randomY",{get:function get(){if(this.bounds.y<0){return this.game.rnd.between(this.bounds.y,this.bounds.height-Math.abs(this.bounds.y));}else{return this.game.rnd.between(this.bounds.y,this.bounds.height);}}});/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Game=function(t,e,i,s,n,a,r,h){this.id=o.GAMES.push(this)-1;this.config=null;this.physicsConfig=h;this.parent="";this.width=800;this.height=600;this.resolution=1;this._width=800;this._height=600;this.transparent=false;this.antialias=true;this.preserveDrawingBuffer=false;this.clearBeforeRender=true;this.renderer=null;this.renderType=o.AUTO;this.state=null;this.isBooted=false;this.isRunning=false;this.raf=null;this.add=null;this.make=null;this.cache=null;this.input=null;this.load=null;this.math=null;this.net=null;this.scale=null;this.sound=null;this.stage=null;this.time=null;this.tweens=null;this.world=null;this.physics=null;this.plugins=null;this.rnd=null;this.device=o.Device;this.camera=null;this.canvas=null;this.context=null;this.debug=null;this.particles=null;this.create=null;this.lockRender=false;this.stepping=false;this.pendingStep=false;this.stepCount=0;this.onPause=null;this.onResume=null;this.onBlur=null;this.onFocus=null;this._paused=false;this._codePaused=false;this.currentUpdateID=0;this.updatesThisFrame=1;this._deltaTime=0;this._lastCount=0;this._spiraling=0;this._kickstart=true;this.fpsProblemNotifier=new o.Signal();this.forceSingleUpdate=true;this._nextFpsNotification=0;if(arguments.length===1&&_typeof(arguments[0])=="object"){this.parseConfig(arguments[0]);}else{this.config={enableDebug:true};if(t!==undefined){this._width=t;}if(e!==undefined){this._height=e;}if(i!==undefined){this.renderType=i;}if(s!==undefined){this.parent=s;}if(a!==undefined){this.transparent=a;}if(r!==undefined){this.antialias=r;}this.rnd=new o.RandomDataGenerator([(Date.now()*Math.random()).toString()]);this.state=new o.StateManager(this,n);}this.device.whenReady(this.boot,this);return this;};o.Game.prototype={parseConfig:function parseConfig(t){this.config=t;if(t.enableDebug===undefined){this.config.enableDebug=true;}if(t.width){this._width=t.width;}if(t.height){this._height=t.height;}if(t.renderer){this.renderType=t.renderer;}if(t.parent){this.parent=t.parent;}if(t.transparent!==undefined){this.transparent=t.transparent;}if(t.antialias!==undefined){this.antialias=t.antialias;}if(t.resolution){this.resolution=t.resolution;}if(t.preserveDrawingBuffer!==undefined){this.preserveDrawingBuffer=t.preserveDrawingBuffer;}if(t.physicsConfig){this.physicsConfig=t.physicsConfig;}var e=[(Date.now()*Math.random()).toString()];if(t.seed){e=t.seed;}this.rnd=new o.RandomDataGenerator(e);var i=null;if(t.state){i=t.state;}this.state=new o.StateManager(this,i);},boot:function boot(){if(!this.isBooted){this.onPause=new o.Signal();this.onResume=new o.Signal();this.onBlur=new o.Signal();this.onFocus=new o.Signal();this.isBooted=true;PIXI.game=this;this.math=o.Math;this.scale=new o.ScaleManager(this,this._width,this._height);this.stage=new o.Stage(this);this.setUpRenderer();this.world=new o.World(this);this.add=new o.GameObjectFactory(this);this.make=new o.GameObjectCreator(this);this.cache=new o.Cache(this);this.load=new o.Loader(this);this.time=new o.Time(this);this.tweens=new o.TweenManager(this);this.input=new o.Input(this);this.sound=new o.SoundManager(this);this.physics=new o.Physics(this,this.physicsConfig);this.particles=new o.Particles(this);this.create=new o.Create(this);this.plugins=new o.PluginManager(this);this.net=new o.Net(this);this.time.boot();this.stage.boot();this.world.boot();this.scale.boot();this.input.boot();this.sound.boot();this.state.boot();if(this.config.enableDebug){this.debug=new o.Utils.Debug(this);this.debug.boot();}else{this.debug={preUpdate:function preUpdate(){},update:function update(){},reset:function reset(){}};}this.showDebugHeader();this.isRunning=true;if(this.config&&this.config.forceSetTimeOut){this.raf=new o.RequestAnimationFrame(this,this.config.forceSetTimeOut);}else{this.raf=new o.RequestAnimationFrame(this,false);}this._kickstart=true;if(window.focus&&(!window.PhaserGlobal||window.PhaserGlobal&&!window.PhaserGlobal.stopFocus)){window.focus();}this.raf.start();}},showDebugHeader:function showDebugHeader(){if(!window.PhaserGlobal||!window.PhaserGlobal.hideBanner){var t=o.VERSION;var e="Canvas";var i="HTML Audio";var s=1;if(this.renderType===o.WEBGL){e="WebGL";s++;}else if(this.renderType===o.HEADLESS){e="Headless";}if(this.device.webAudio){i="WebAudio";s++;}if(this.device.chrome){var n=["%c %c %c @orange-games/phaser v"+t+" | Pixi.js | "+e+" | "+i+"  %c %c %c http://phaser.io %c♥%c♥%c♥","background: #F47820","background: #ED873F","color: #ffffff; background: #DD6612;","background: #ED873F","background: #F47820","background: #ffffff"];for(var a=0;a<3;a++){if(a<s){n.push("color: #ff2424; background: #fff");}else{n.push("color: #959595; background: #fff");}}}else{window.console;}}},setUpRenderer:function setUpRenderer(){if(this.config.canvas){this.canvas=this.config.canvas;}else{this.canvas=o.Canvas.create(this,this.width,this.height,this.config.canvasID,true);}if(this.config.canvasStyle){this.canvas.style=this.config.canvasStyle;}else{this.canvas.style["-webkit-full-screen"]="width: 100%; height: 100%";}if(this.renderType===o.HEADLESS||this.renderType===o.CANVAS||this.renderType===o.AUTO&&!this.device.webGL){if(!this.device.canvas){throw new Error("Phaser.Game - Cannot create Canvas or WebGL context, aborting.");}this.renderType=o.CANVAS;this.renderer=new PIXI.CanvasRenderer(this);this.context=this.renderer.context;}else{this.renderType=o.WEBGL;this.renderer=new PIXI.WebGLRenderer(this);this.context=null;this.canvas.addEventListener("webglcontextlost",this.contextLost.bind(this),false);this.canvas.addEventListener("webglcontextrestored",this.contextRestored.bind(this),false);}if(this.device.cocoonJS){this.canvas.screencanvas=this.renderType===o.CANVAS;}if(this.renderType!==o.HEADLESS){this.stage.smoothed=this.antialias;o.Canvas.addToDOM(this.canvas,this.parent,false);o.Canvas.setTouchAction(this.canvas);}},contextLost:function contextLost(t){t.preventDefault();this.renderer.contextLost=true;},contextRestored:function contextRestored(){this.renderer.initContext();this.cache.clearGLTextures();this.renderer.contextLost=false;},update:function update(t){this.time.update(t);if(this._kickstart){this.updateLogic(this.time.desiredFpsMult);this.updateRender(this.time.slowMotion*this.time.desiredFps);this._kickstart=false;return;}if(this._spiraling>1&&!this.forceSingleUpdate){if(this.time.time>this._nextFpsNotification){this._nextFpsNotification=this.time.time+10000;this.fpsProblemNotifier.dispatch();}this._deltaTime=0;this._spiraling=0;this.updateRender(this.time.slowMotion*this.time.desiredFps);}else{var e=this.time.slowMotion*1000/this.time.desiredFps;this._deltaTime+=Math.max(Math.min(e*3,this.time.elapsed),0);var i=0;this.updatesThisFrame=Math.floor(this._deltaTime/e);if(this.forceSingleUpdate){this.updatesThisFrame=Math.min(1,this.updatesThisFrame);}while(this._deltaTime>=e&&(this._deltaTime-=e,this.currentUpdateID=i,this.updateLogic(this.time.desiredFpsMult),i++,!this.forceSingleUpdate||i!==1)){this.time.refresh();}if(i>this._lastCount){this._spiraling++;}else if(i<this._lastCount){this._spiraling=0;}this._lastCount=i;this.updateRender(this._deltaTime/e);}},updateLogic:function updateLogic(t){if(this._paused||this.pendingStep){this.scale.pauseUpdate();this.state.pauseUpdate();this.debug.preUpdate();}else{if(this.stepping){this.pendingStep=true;}this.scale.preUpdate();this.debug.preUpdate();this.camera.preUpdate();this.physics.preUpdate();this.state.preUpdate(t);this.plugins.preUpdate(t);this.stage.preUpdate();this.state.update();this.stage.update();this.tweens.update();this.sound.update();this.input.update();this.physics.update();this.particles.update();this.plugins.update();this.stage.postUpdate();this.plugins.postUpdate();}this.stage.updateTransform();},updateRender:function updateRender(t){if(!this.lockRender){this.state.preRender(t);if(this.renderType!==o.HEADLESS){this.renderer.render(this.stage);this.plugins.render(t);this.state.render(t);}this.plugins.postRender(t);}},enableStep:function enableStep(){this.stepping=true;this.pendingStep=false;this.stepCount=0;},disableStep:function disableStep(){this.stepping=false;this.pendingStep=false;},step:function step(){this.pendingStep=false;this.stepCount++;},destroy:function destroy(){this.raf.stop();this.state.destroy();this.sound.destroy();this.scale.destroy();this.stage.destroy();this.input.destroy();this.physics.destroy();this.plugins.destroy();this.state=null;this.sound=null;this.scale=null;this.stage=null;this.input=null;this.physics=null;this.plugins=null;this.cache=null;this.load=null;this.time=null;this.world=null;this.isBooted=false;this.renderer.destroy(false);o.Canvas.removeFromDOM(this.canvas);PIXI.defaultRenderer=null;o.GAMES[this.id]=null;},gamePaused:function gamePaused(t){if(!this._paused){this._paused=true;this.time.gamePaused();if(this.sound.muteOnPause){this.sound.setMute();}this.onPause.dispatch(t);if(this.device.cordova&&this.device.iOS){this.lockRender=true;}}},gameResumed:function gameResumed(t){if(this._paused&&!this._codePaused){this._paused=false;this.time.gameResumed();this.input.reset();if(this.sound.muteOnPause){this.sound.unsetMute();}this.onResume.dispatch(t);if(this.device.cordova&&this.device.iOS){this.lockRender=false;}}},focusLoss:function focusLoss(t){this.onBlur.dispatch(t);if(!this.stage.disableVisibilityChange){this.gamePaused(t);}},focusGain:function focusGain(t){this.onFocus.dispatch(t);if(!this.stage.disableVisibilityChange){this.gameResumed(t);}}};o.Game.prototype.constructor=o.Game;Object.defineProperty(o.Game.prototype,"paused",{get:function get(){return this._paused;},set:function set(t){if(t===true){if(this._paused===false){this._paused=true;this.sound.setMute();this.time.gamePaused();this.onPause.dispatch(this);}this._codePaused=true;}else{if(this._paused){this._paused=false;this.input.reset();this.sound.unsetMute();this.time.gameResumed();this.onResume.dispatch(this);}this._codePaused=false;}}});/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Input=function(t){this.game=t;this.hitCanvas=null;this.hitContext=null;this.moveCallbacks=[];this.customCandidateHandler=null;this.customCandidateHandlerContext=null;this.pollRate=0;this.enabled=true;this.multiInputOverride=o.Input.MOUSE_TOUCH_COMBINE;this.position=null;this.speed=null;this.circle=null;this.scale=null;this.maxPointers=-1;this.tapRate=200;this.doubleTapRate=300;this.holdRate=2000;this.justPressedRate=200;this.justReleasedRate=200;this.recordPointerHistory=false;this.recordRate=100;this.recordLimit=100;this.pointer1=null;this.pointer2=null;this.pointer3=null;this.pointer4=null;this.pointer5=null;this.pointer6=null;this.pointer7=null;this.pointer8=null;this.pointer9=null;this.pointer10=null;this.pointers=[];this.activePointer=null;this.mousePointer=null;this.mouse=null;this.keyboard=null;this.touch=null;this.mspointer=null;this.gamepad=null;this.resetLocked=false;this.onDown=null;this.onUp=null;this.onTap=null;this.onHold=null;this.minPriorityID=0;this.interactiveItems=new o.ArraySet();this._localPoint=new o.Point();this._pollCounter=0;this._oldPosition=null;this._x=0;this._y=0;};o.Input.MOUSE_OVERRIDES_TOUCH=0;o.Input.TOUCH_OVERRIDES_MOUSE=1;o.Input.MOUSE_TOUCH_COMBINE=2;o.Input.MAX_POINTERS=10;o.Input.prototype={boot:function boot(){this.mousePointer=new o.Pointer(this.game,0,o.PointerMode.CURSOR);this.addPointer();this.addPointer();this.mouse=new o.Mouse(this.game);this.touch=new o.Touch(this.game);this.mspointer=new o.MSPointer(this.game);if(o.Keyboard){this.keyboard=new o.Keyboard(this.game);}if(o.Gamepad){this.gamepad=new o.Gamepad(this.game);}this.onDown=new o.Signal();this.onUp=new o.Signal();this.onTap=new o.Signal();this.onHold=new o.Signal();this.scale=new o.Point(1,1);this.speed=new o.Point();this.position=new o.Point();this._oldPosition=new o.Point();this.circle=new o.Circle(0,0,44);this.activePointer=this.mousePointer;this.hitCanvas=PIXI.CanvasPool.create(this,1,1);this.hitContext=this.hitCanvas.getContext("2d");this.mouse.start();this.touch.start();this.mspointer.start();this.mousePointer.active=true;if(this.keyboard){this.keyboard.start();}var t=this;this._onClickTrampoline=function(e){t.onClickTrampoline(e);};this.game.canvas.addEventListener("click",this._onClickTrampoline,false);},destroy:function destroy(){this.mouse.stop();this.touch.stop();this.mspointer.stop();if(this.keyboard){this.keyboard.stop();}if(this.gamepad){this.gamepad.stop();}this.moveCallbacks=[];PIXI.CanvasPool.remove(this);this.game.canvas.removeEventListener("click",this._onClickTrampoline);},setInteractiveCandidateHandler:function setInteractiveCandidateHandler(t,e){this.customCandidateHandler=t;this.customCandidateHandlerContext=e;},addMoveCallback:function addMoveCallback(t,e){this.moveCallbacks.push({callback:t,context:e});},deleteMoveCallback:function deleteMoveCallback(t,e){for(var i=this.moveCallbacks.length;i--;){if(this.moveCallbacks[i].callback===t&&this.moveCallbacks[i].context===e){this.moveCallbacks.splice(i,1);return;}}},addPointer:function addPointer(){if(this.pointers.length>=o.Input.MAX_POINTERS){return null;}var t=this.pointers.length+1;var e=new o.Pointer(this.game,t,o.PointerMode.TOUCH);this.pointers.push(e);this["pointer"+t]=e;return e;},update:function update(){if(this.keyboard){this.keyboard.update();}if(this.pollRate>0&&this._pollCounter<this.pollRate){this._pollCounter++;return;}this.speed.x=this.position.x-this._oldPosition.x;this.speed.y=this.position.y-this._oldPosition.y;this._oldPosition.copyFrom(this.position);this.mousePointer.update();if(this.gamepad&&this.gamepad.active){this.gamepad.update();}for(var t=0;t<this.pointers.length;t++){this.pointers[t].update();}this._pollCounter=0;},reset:function reset(t){if(this.game.isBooted&&!this.resetLocked){if(t===undefined){t=false;}this.mousePointer.reset();if(this.keyboard){this.keyboard.reset(t);}if(this.gamepad){this.gamepad.reset();}for(var e=0;e<this.pointers.length;e++){this.pointers[e].reset();}if(this.game.canvas.style.cursor!=="none"){this.game.canvas.style.cursor="inherit";}if(t){this.onDown.dispose();this.onUp.dispose();this.onTap.dispose();this.onHold.dispose();this.onDown=new o.Signal();this.onUp=new o.Signal();this.onTap=new o.Signal();this.onHold=new o.Signal();this.moveCallbacks=[];}this._pollCounter=0;}},resetSpeed:function resetSpeed(t,e){this._oldPosition.setTo(t,e);this.speed.setTo(0,0);},startPointer:function startPointer(t){if(this.maxPointers>=0&&this.countActivePointers(this.maxPointers)>=this.maxPointers){return null;}if(!this.pointer1.active){return this.pointer1.start(t);}if(!this.pointer2.active){return this.pointer2.start(t);}for(var e=2;e<this.pointers.length;e++){var i=this.pointers[e];if(!i.active){return i.start(t);}}return null;},updatePointer:function updatePointer(t){if(this.pointer1.active&&this.pointer1.identifier===t.identifier){return this.pointer1.move(t);}if(this.pointer2.active&&this.pointer2.identifier===t.identifier){return this.pointer2.move(t);}for(var e=2;e<this.pointers.length;e++){var i=this.pointers[e];if(i.active&&i.identifier===t.identifier){return i.move(t);}}return null;},stopPointer:function stopPointer(t){if(this.pointer1.active&&this.pointer1.identifier===t.identifier){return this.pointer1.stop(t);}if(this.pointer2.active&&this.pointer2.identifier===t.identifier){return this.pointer2.stop(t);}for(var e=2;e<this.pointers.length;e++){var i=this.pointers[e];if(i.active&&i.identifier===t.identifier){return i.stop(t);}}return null;},countActivePointers:function countActivePointers(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.pointers.length;for(var e=t,i=0;i<this.pointers.length&&e>0;i++){if(this.pointers[i].active){e--;}}return t-e;},getPointer:function getPointer(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;for(var e=0;e<this.pointers.length;e++){var i=this.pointers[e];if(i.active===t){return i;}}return null;},getPointerFromIdentifier:function getPointerFromIdentifier(t){for(var e=0;e<this.pointers.length;e++){var i=this.pointers[e];if(i.identifier===t){return i;}}return null;},getPointerFromId:function getPointerFromId(t){for(var e=0;e<this.pointers.length;e++){var i=this.pointers[e];if(i.pointerId===t){return i;}}return null;},getLocalPosition:function getLocalPosition(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new o.Point();var s=t.worldTransform;var n=1/(s.a*s.d+s.c*-s.b);return i.setTo(s.d*n*e.x+-s.c*n*e.y+(s.ty*s.c-s.tx*s.d)*n,s.a*n*e.y+-s.b*n*e.x+(-s.ty*s.a+s.tx*s.b)*n);},hitTest:function hitTest(t,e,i){if(!t.worldVisible){return false;}this.getLocalPosition(t,e,this._localPoint);i.copyFrom(this._localPoint);if(t.hitArea&&t.hitArea.contains){return t.hitArea.contains(this._localPoint.x,this._localPoint.y);}if(t instanceof o.TileSprite){var s=t.width;var n=t.height;var a=-s*t.anchor.x;if(this._localPoint.x>=a&&this._localPoint.x<a+s){var r=-n*t.anchor.y;if(this._localPoint.y>=r&&this._localPoint.y<r+n){return true;}}}else if(t instanceof PIXI.Sprite){var s=t.texture.frame.width;var n=t.texture.frame.height;var a=-s*t.anchor.x;if(this._localPoint.x>=a&&this._localPoint.x<a+s){var r=-n*t.anchor.y;if(this._localPoint.y>=r&&this._localPoint.y<r+n){return true;}}}else if(t instanceof o.Graphics){for(var h=0;h<t.graphicsData.length;h++){var l=t.graphicsData[h];if(l.fill&&l.shape&&l.shape.contains(this._localPoint.x,this._localPoint.y)){return true;}}}for(var h=0;h<t.children.length;h++){if(this.hitTest(t.children[h],e,i)){return true;}}return false;},onClickTrampoline:function onClickTrampoline(){this.activePointer.processClickTrampolines();}};o.Input.prototype.constructor=o.Input;Object.defineProperty(o.Input.prototype,"x",{get:function get(){return this._x;},set:function set(t){this._x=Math.floor(t);}});Object.defineProperty(o.Input.prototype,"y",{get:function get(){return this._y;},set:function set(t){this._y=Math.floor(t);}});Object.defineProperty(o.Input.prototype,"pollLocked",{get:function get(){return this.pollRate>0&&this._pollCounter<this.pollRate;}});Object.defineProperty(o.Input.prototype,"totalInactivePointers",{get:function get(){return this.pointers.length-this.countActivePointers();}});Object.defineProperty(o.Input.prototype,"totalActivePointers",{get:function get(){return this.countActivePointers();}});Object.defineProperty(o.Input.prototype,"worldX",{get:function get(){return this.game.camera.view.x+this.x;}});Object.defineProperty(o.Input.prototype,"worldY",{get:function get(){return this.game.camera.view.y+this.y;}});/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Mouse=function(t){this.game=t;this.input=t.input;this.callbackContext=this.game;this.mouseDownCallback=null;this.mouseUpCallback=null;this.mouseOutCallback=null;this.mouseOverCallback=null;this.mouseWheelCallback=null;this.capture=false;this.button=-1;this.wheelDelta=0;this.enabled=true;this.locked=false;this.stopOnGameOut=false;this.pointerLock=new o.Signal();this.event=null;this._onMouseDown=null;this._onMouseMove=null;this._onMouseUp=null;this._onMouseOut=null;this._onMouseOver=null;this._onMouseWheel=null;this._wheelEvent=null;};o.Mouse.NO_BUTTON=-1;o.Mouse.LEFT_BUTTON=0;o.Mouse.MIDDLE_BUTTON=1;o.Mouse.RIGHT_BUTTON=2;o.Mouse.BACK_BUTTON=3;o.Mouse.FORWARD_BUTTON=4;o.Mouse.WHEEL_UP=1;o.Mouse.WHEEL_DOWN=-1;o.Mouse.prototype={start:function start(){if((!this.game.device.android||this.game.device.chrome!==false)&&this._onMouseDown===null){var t=this;this._onMouseDown=function(e){return t.onMouseDown(e);};this._onMouseMove=function(e){return t.onMouseMove(e);};this._onMouseUp=function(e){return t.onMouseUp(e);};this._onMouseUpGlobal=function(e){return t.onMouseUpGlobal(e);};this._onMouseOutGlobal=function(e){return t.onMouseOutGlobal(e);};this._onMouseOut=function(e){return t.onMouseOut(e);};this._onMouseOver=function(e){return t.onMouseOver(e);};this._onMouseWheel=function(e){return t.onMouseWheel(e);};var e=this.game.canvas;e.addEventListener("mousedown",this._onMouseDown,true);e.addEventListener("mousemove",this._onMouseMove,true);e.addEventListener("mouseup",this._onMouseUp,true);if(!this.game.device.cocoonJS){window.addEventListener("mouseup",this._onMouseUpGlobal,true);window.addEventListener("mouseout",this._onMouseOutGlobal,true);e.addEventListener("mouseover",this._onMouseOver,true);e.addEventListener("mouseout",this._onMouseOut,true);}var i=this.game.device.wheelEvent;if(i){e.addEventListener(i,this._onMouseWheel,true);if(i==="mousewheel"){this._wheelEvent=new s(-0.025,1);}else if(i==="DOMMouseScroll"){this._wheelEvent=new s(1,1);}}}},onMouseDown:function onMouseDown(t){this.event=t;if(this.capture){t.preventDefault();}if(this.mouseDownCallback){this.mouseDownCallback.call(this.callbackContext,t);}if(this.input.enabled&&this.enabled){t.identifier=0;this.input.mousePointer.start(t);}},onMouseMove:function onMouseMove(t){this.event=t;if(this.capture){t.preventDefault();}if(this.mouseMoveCallback){this.mouseMoveCallback.call(this.callbackContext,t);}if(this.input.enabled&&this.enabled){t.identifier=0;this.input.mousePointer.move(t);}},onMouseUp:function onMouseUp(t){this.event=t;if(this.capture){t.preventDefault();}if(this.mouseUpCallback){this.mouseUpCallback.call(this.callbackContext,t);}if(this.input.enabled&&this.enabled){t.identifier=0;this.input.mousePointer.stop(t);}},onMouseUpGlobal:function onMouseUpGlobal(t){if(!this.input.mousePointer.withinGame){if(this.mouseUpCallback){this.mouseUpCallback.call(this.callbackContext,t);}t.identifier=0;this.input.mousePointer.stop(t);}},onMouseOutGlobal:function onMouseOutGlobal(t){this.event=t;if(this.capture){t.preventDefault();}this.input.mousePointer.withinGame=false;if(this.input.enabled&&this.enabled){this.input.mousePointer.stop(t);this.input.mousePointer.leftButton.stop(t);this.input.mousePointer.rightButton.stop(t);}},onMouseOut:function onMouseOut(t){this.event=t;if(this.capture){t.preventDefault();}this.input.mousePointer.withinGame=false;if(this.mouseOutCallback){this.mouseOutCallback.call(this.callbackContext,t);}if(this.input.enabled&&this.enabled&&this.stopOnGameOut){t.identifier=0;this.input.mousePointer.stop(t);}},onMouseOver:function onMouseOver(t){this.event=t;if(this.capture){t.preventDefault();}this.input.mousePointer.withinGame=true;if(this.mouseOverCallback){this.mouseOverCallback.call(this.callbackContext,t);}},onMouseWheel:function onMouseWheel(t){if(this._wheelEvent){t=this._wheelEvent.bindEvent(t);}this.event=t;if(this.capture){t.preventDefault();}this.wheelDelta=o.Math.clamp(-t.deltaY,-1,1);if(this.mouseWheelCallback){this.mouseWheelCallback.call(this.callbackContext,t);}},requestPointerLock:function requestPointerLock(){if(this.game.device.pointerLock){var t=this.game.canvas;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock;t.requestPointerLock();var e=this;this._pointerLockChange=function(t){return e.pointerLockChange(t);};document.addEventListener("pointerlockchange",this._pointerLockChange,true);document.addEventListener("mozpointerlockchange",this._pointerLockChange,true);document.addEventListener("webkitpointerlockchange",this._pointerLockChange,true);}},pointerLockChange:function pointerLockChange(t){var e=this.game.canvas;if(document.pointerLockElement===e||document.mozPointerLockElement===e||document.webkitPointerLockElement===e){this.locked=true;this.pointerLock.dispatch(true,t);}else{this.locked=false;this.pointerLock.dispatch(false,t);}},releasePointerLock:function releasePointerLock(){document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock;document.exitPointerLock();document.removeEventListener("pointerlockchange",this._pointerLockChange,true);document.removeEventListener("mozpointerlockchange",this._pointerLockChange,true);document.removeEventListener("webkitpointerlockchange",this._pointerLockChange,true);},stop:function stop(){var t=this.game.canvas;t.removeEventListener("mousedown",this._onMouseDown,true);t.removeEventListener("mousemove",this._onMouseMove,true);t.removeEventListener("mouseup",this._onMouseUp,true);t.removeEventListener("mouseover",this._onMouseOver,true);t.removeEventListener("mouseout",this._onMouseOut,true);var e=this.game.device.wheelEvent;if(e){t.removeEventListener(e,this._onMouseWheel,true);}window.removeEventListener("mouseup",this._onMouseUpGlobal,true);window.removeEventListener("mouseout",this._onMouseOutGlobal,true);document.removeEventListener("pointerlockchange",this._pointerLockChange,true);document.removeEventListener("mozpointerlockchange",this._pointerLockChange,true);document.removeEventListener("webkitpointerlockchange",this._pointerLockChange,true);}};o.Mouse.prototype.constructor=o.Mouse;s.prototype={};s.prototype.constructor=s;s.prototype.bindEvent=function(t){if(!s._stubsGenerated&&t){var e=function e(t){return function(){var e=this.originalEvent[t];if(typeof e!="function"){return e;}else{return e.bind(this.originalEvent);}};};for(var i in t){if(!(i in s.prototype)){Object.defineProperty(s.prototype,i,{get:e(i)});}}s._stubsGenerated=true;}this.originalEvent=t;return this;};Object.defineProperties(s.prototype,{type:{value:"wheel"},deltaMode:{get:function get(){return this._deltaMode;}},deltaY:{get:function get(){return this._scaleFactor*(this.originalEvent.wheelDelta||this.originalEvent.detail)||0;}},deltaX:{get:function get(){return this._scaleFactor*this.originalEvent.wheelDeltaX||0;}},deltaZ:{value:0}});/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.MSPointer=function(t){this.game=t;this.input=t.input;this.callbackContext=this.game;this.pointerDownCallback=null;this.pointerMoveCallback=null;this.pointerUpCallback=null;this.capture=true;this.button=-1;this.event=null;this.enabled=true;this._onMSPointerDown=null;this._onMSPointerMove=null;this._onMSPointerUp=null;this._onMSPointerUpGlobal=null;this._onMSPointerOut=null;this._onMSPointerOver=null;};o.MSPointer.prototype={start:function start(){if(this._onMSPointerDown===null){var t=this;if(this.game.device.mspointer){this._onMSPointerDown=function(e){return t.onPointerDown(e);};this._onMSPointerMove=function(e){return t.onPointerMove(e);};this._onMSPointerUp=function(e){return t.onPointerUp(e);};this._onMSPointerUpGlobal=function(e){return t.onPointerUpGlobal(e);};this._onMSPointerOut=function(e){return t.onPointerOut(e);};this._onMSPointerOver=function(e){return t.onPointerOver(e);};var e=this.game.canvas;e.addEventListener("MSPointerDown",this._onMSPointerDown,false);e.addEventListener("MSPointerMove",this._onMSPointerMove,false);e.addEventListener("MSPointerUp",this._onMSPointerUp,false);e.addEventListener("pointerdown",this._onMSPointerDown,false);e.addEventListener("pointermove",this._onMSPointerMove,false);e.addEventListener("pointerup",this._onMSPointerUp,false);e.style["-ms-content-zooming"]="none";e.style["-ms-touch-action"]="none";if(!this.game.device.cocoonJS){window.addEventListener("MSPointerUp",this._onMSPointerUpGlobal,true);e.addEventListener("MSPointerOver",this._onMSPointerOver,true);e.addEventListener("MSPointerOut",this._onMSPointerOut,true);window.addEventListener("pointerup",this._onMSPointerUpGlobal,true);e.addEventListener("pointerover",this._onMSPointerOver,true);e.addEventListener("pointerout",this._onMSPointerOut,true);}}}},onPointerDown:function onPointerDown(t){this.event=t;if(this.capture){t.preventDefault();}if(this.pointerDownCallback){this.pointerDownCallback.call(this.callbackContext,t);}if(this.input.enabled&&this.enabled){t.identifier=t.pointerId;if(t.pointerType==="mouse"||t.pointerType===4){this.input.mousePointer.start(t);}else{this.input.startPointer(t);}}},onPointerMove:function onPointerMove(t){this.event=t;if(this.capture){t.preventDefault();}if(this.pointerMoveCallback){this.pointerMoveCallback.call(this.callbackContext,t);}if(this.input.enabled&&this.enabled){t.identifier=t.pointerId;if(t.pointerType==="mouse"||t.pointerType===4){this.input.mousePointer.move(t);}else{this.input.updatePointer(t);}}},onPointerUp:function onPointerUp(t){this.event=t;if(this.capture){t.preventDefault();}if(this.pointerUpCallback){this.pointerUpCallback.call(this.callbackContext,t);}if(this.input.enabled&&this.enabled){t.identifier=t.pointerId;if(t.pointerType==="mouse"||t.pointerType===4){this.input.mousePointer.stop(t);}else{this.input.stopPointer(t);}}},onPointerUpGlobal:function onPointerUpGlobal(t){if(t.pointerType!=="mouse"&&t.pointerType!==4||this.input.mousePointer.withinGame){var e=this.input.getPointerFromIdentifier(t.identifier);if(e&&e.withinGame){this.onPointerUp(t);}}else{this.onPointerUp(t);}},onPointerOut:function onPointerOut(t){this.event=t;if(this.capture){t.preventDefault();}if(t.pointerType==="mouse"||t.pointerType===4){this.input.mousePointer.withinGame=false;}else{var e=this.input.getPointerFromIdentifier(t.identifier);if(e){e.withinGame=false;}}if(this.input.mouse.mouseOutCallback){this.input.mouse.mouseOutCallback.call(this.input.mouse.callbackContext,t);}if(this.input.enabled&&this.enabled&&this.input.mouse.stopOnGameOut){t.identifier=0;if(e){e.stop(t);}else{this.input.mousePointer.stop(t);}}},onPointerOver:function onPointerOver(t){this.event=t;if(this.capture){t.preventDefault();}if(t.pointerType==="mouse"||t.pointerType===4){this.input.mousePointer.withinGame=true;}else{var e=this.input.getPointerFromIdentifier(t.identifier);if(e){e.withinGame=true;}}if(this.input.mouse.mouseOverCallback){this.input.mouse.mouseOverCallback.call(this.input.mouse.callbackContext,t);}},stop:function stop(){var t=this.game.canvas;t.removeEventListener("MSPointerDown",this._onMSPointerDown,false);t.removeEventListener("MSPointerMove",this._onMSPointerMove,false);t.removeEventListener("MSPointerUp",this._onMSPointerUp,false);t.removeEventListener("pointerdown",this._onMSPointerDown,false);t.removeEventListener("pointermove",this._onMSPointerMove,false);t.removeEventListener("pointerup",this._onMSPointerUp,false);window.removeEventListener("MSPointerUp",this._onMSPointerUpGlobal,true);t.removeEventListener("MSPointerOver",this._onMSPointerOver,true);t.removeEventListener("MSPointerOut",this._onMSPointerOut,true);window.removeEventListener("pointerup",this._onMSPointerUpGlobal,true);t.removeEventListener("pointerover",this._onMSPointerOver,true);t.removeEventListener("pointerout",this._onMSPointerOut,true);}};o.MSPointer.prototype.constructor=o.MSPointer;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @author       @karlmacklin <tacklemcclean@gmail.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.DeviceButton=function(t,e){this.parent=t;this.game=t.game;this.event=null;this.isDown=false;this.isUp=true;this.timeDown=0;this.timeUp=0;this.repeats=0;this.altKey=false;this.shiftKey=false;this.ctrlKey=false;this.value=0;this.buttonCode=e;this.onDown=new o.Signal();this.onUp=new o.Signal();this.onFloat=new o.Signal();};o.DeviceButton.prototype={start:function start(t,e){if(!this.isDown){this.isDown=true;this.isUp=false;this.timeDown=this.game.time.time;this.repeats=0;this.event=t;this.value=e;if(t){this.altKey=t.altKey;this.shiftKey=t.shiftKey;this.ctrlKey=t.ctrlKey;}this.onDown.dispatch(this,e);}},stop:function stop(t,e){if(!this.isUp){this.isDown=false;this.isUp=true;this.timeUp=this.game.time.time;this.event=t;this.value=e;if(t){this.altKey=t.altKey;this.shiftKey=t.shiftKey;this.ctrlKey=t.ctrlKey;}this.onUp.dispatch(this,e);}},padFloat:function padFloat(t){this.value=t;this.onFloat.dispatch(this,t);},justPressed:function justPressed(t){t=t||250;return this.isDown&&this.timeDown+t>this.game.time.time;},justReleased:function justReleased(t){t=t||250;return this.isUp&&this.timeUp+t>this.game.time.time;},reset:function reset(){this.isDown=false;this.isUp=true;this.timeDown=this.game.time.time;this.repeats=0;this.altKey=false;this.shiftKey=false;this.ctrlKey=false;},destroy:function destroy(){this.onDown.dispose();this.onUp.dispose();this.onFloat.dispose();this.parent=null;this.game=null;}};o.DeviceButton.prototype.constructor=o.DeviceButton;Object.defineProperty(o.DeviceButton.prototype,"duration",{get:function get(){if(this.isUp){return-1;}else{return this.game.time.time-this.timeDown;}}});/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Pointer=function(t,e,i){this.game=t;this.id=e;this.type=o.POINTER;this.exists=true;this.identifier=0;this.pointerId=null;this.pointerMode=i||o.PointerMode.CURSOR|o.PointerMode.CONTACT;this.target=null;this.button=null;this.leftButton=new o.DeviceButton(this,o.Pointer.LEFT_BUTTON);this.middleButton=new o.DeviceButton(this,o.Pointer.MIDDLE_BUTTON);this.rightButton=new o.DeviceButton(this,o.Pointer.RIGHT_BUTTON);this.backButton=new o.DeviceButton(this,o.Pointer.BACK_BUTTON);this.forwardButton=new o.DeviceButton(this,o.Pointer.FORWARD_BUTTON);this.eraserButton=new o.DeviceButton(this,o.Pointer.ERASER_BUTTON);this._holdSent=false;this._history=[];this._nextDrop=0;this._stateReset=false;this.withinGame=false;this.clientX=-1;this.clientY=-1;this.pageX=-1;this.pageY=-1;this.screenX=-1;this.screenY=-1;this.rawMovementX=0;this.rawMovementY=0;this.movementX=0;this.movementY=0;this.x=-1;this.y=-1;this.isMouse=e===0;this.isDown=false;this.isUp=true;this.timeDown=0;this.timeUp=0;this.previousTapTime=0;this.totalTouches=0;this.msSinceLastClick=Number.MAX_VALUE;this.targetObject=null;this.interactiveCandidates=[];this.active=false;this.dirty=false;this.position=new o.Point();this.positionDown=new o.Point();this.positionUp=new o.Point();this.circle=new o.Circle(0,0,44);this._clickTrampolines=null;this._trampolineTargetObject=null;};o.Pointer.NO_BUTTON=0;o.Pointer.LEFT_BUTTON=1;o.Pointer.RIGHT_BUTTON=2;o.Pointer.MIDDLE_BUTTON=4;o.Pointer.BACK_BUTTON=8;o.Pointer.FORWARD_BUTTON=16;o.Pointer.ERASER_BUTTON=32;o.Pointer.prototype={resetButtons:function resetButtons(){this.isDown=false;this.isUp=true;if(this.isMouse){this.leftButton.reset();this.middleButton.reset();this.rightButton.reset();this.backButton.reset();this.forwardButton.reset();this.eraserButton.reset();}},processButtonsDown:function processButtonsDown(t,e){if(o.Pointer.LEFT_BUTTON&t){this.leftButton.start(e);}if(o.Pointer.RIGHT_BUTTON&t){this.rightButton.start(e);}if(o.Pointer.MIDDLE_BUTTON&t){this.middleButton.start(e);}if(o.Pointer.BACK_BUTTON&t){this.backButton.start(e);}if(o.Pointer.FORWARD_BUTTON&t){this.forwardButton.start(e);}if(o.Pointer.ERASER_BUTTON&t){this.eraserButton.start(e);}},processButtonsUp:function processButtonsUp(t,e){if(t===o.Mouse.LEFT_BUTTON){this.leftButton.stop(e);}if(t===o.Mouse.RIGHT_BUTTON){this.rightButton.stop(e);}if(t===o.Mouse.MIDDLE_BUTTON){this.middleButton.stop(e);}if(t===o.Mouse.BACK_BUTTON){this.backButton.stop(e);}if(t===o.Mouse.FORWARD_BUTTON){this.forwardButton.stop(e);}if(t===5){this.eraserButton.stop(e);}},updateButtons:function updateButtons(t){this.button=t.button;var e=t.type.toLowerCase().substr(-4)==="down";if(t.buttons!==undefined){if(e){this.processButtonsDown(t.buttons,t);}else{this.processButtonsUp(t.button,t);}}else if(e){this.leftButton.start(t);}else{this.leftButton.stop(t);this.rightButton.stop(t);}if(t.buttons===1&&t.ctrlKey&&this.leftButton.isDown){this.leftButton.stop(t);this.rightButton.start(t);}this.isUp=true;this.isDown=false;if(this.leftButton.isDown||this.rightButton.isDown||this.middleButton.isDown||this.backButton.isDown||this.forwardButton.isDown||this.eraserButton.isDown){this.isUp=false;this.isDown=true;}},start:function start(t){var e=this.game.input;if(t.pointerId){this.pointerId=t.pointerId;}this.identifier=t.identifier;this.target=t.target;if(this.isMouse){this.updateButtons(t);}else{this.isDown=true;this.isUp=false;}this.active=true;this.withinGame=true;this.dirty=false;this._history=[];this._clickTrampolines=null;this._trampolineTargetObject=null;this.msSinceLastClick=this.game.time.time-this.timeDown;this.timeDown=this.game.time.time;this._holdSent=false;this.move(t,true);this.positionDown.setTo(this.x,this.y);if(e.multiInputOverride===o.Input.MOUSE_OVERRIDES_TOUCH||e.multiInputOverride===o.Input.MOUSE_TOUCH_COMBINE||e.multiInputOverride===o.Input.TOUCH_OVERRIDES_MOUSE&&e.totalActivePointers===0){e.x=this.x;e.y=this.y;e.position.setTo(this.x,this.y);e.onDown.dispatch(this,t);e.resetSpeed(this.x,this.y);}this._stateReset=false;this.totalTouches++;if(this.targetObject!==null){this.targetObject._touchedHandler(this);}return this;},update:function update(){var t=this.game.input;if(this.active){if(this.dirty){if(t.interactiveItems.total>0){this.processInteractiveObjects(false);}this.dirty=false;}if(this._holdSent===false&&this.duration>=t.holdRate){if(t.multiInputOverride===o.Input.MOUSE_OVERRIDES_TOUCH||t.multiInputOverride===o.Input.MOUSE_TOUCH_COMBINE||t.multiInputOverride===o.Input.TOUCH_OVERRIDES_MOUSE&&t.totalActivePointers===0){t.onHold.dispatch(this);}this._holdSent=true;}if(t.recordPointerHistory&&this.game.time.time>=this._nextDrop){this._nextDrop=this.game.time.time+t.recordRate;this._history.push({x:this.position.x,y:this.position.y});if(this._history.length>t.recordLimit){this._history.shift();}}}},move:function move(t,e){var i=this.game.input;if(!i.pollLocked){if(e===undefined){e=false;}if(t.button!==undefined){this.button=t.button;}if(e&&this.isMouse){this.updateButtons(t);}this.clientX=t.clientX;this.clientY=t.clientY;this.pageX=t.pageX;this.pageY=t.pageY;this.screenX=t.screenX;this.screenY=t.screenY;if(this.isMouse&&i.mouse.locked&&!e){this.rawMovementX=t.movementX||t.mozMovementX||t.webkitMovementX||0;this.rawMovementY=t.movementY||t.mozMovementY||t.webkitMovementY||0;this.movementX+=this.rawMovementX;this.movementY+=this.rawMovementY;}this.x=(this.pageX-this.game.scale.offset.x)*i.scale.x;this.y=(this.pageY-this.game.scale.offset.y)*i.scale.y;this.position.setTo(this.x,this.y);this.circle.x=this.x;this.circle.y=this.y;if(i.multiInputOverride===o.Input.MOUSE_OVERRIDES_TOUCH||i.multiInputOverride===o.Input.MOUSE_TOUCH_COMBINE||i.multiInputOverride===o.Input.TOUCH_OVERRIDES_MOUSE&&i.totalActivePointers===0){i.activePointer=this;i.x=this.x;i.y=this.y;i.position.setTo(i.x,i.y);i.circle.x=i.x;i.circle.y=i.y;}this.withinGame=this.game.scale.bounds.contains(this.pageX,this.pageY);if(this.game.paused){return this;}for(var s=i.moveCallbacks.length;s--;){i.moveCallbacks[s].callback.call(i.moveCallbacks[s].context,this,this.x,this.y,e);}if(this.targetObject!==null&&this.targetObject.isDragged===true){if(this.targetObject.update(this)===false){this.targetObject=null;}}else if(i.interactiveItems.total>0){this.processInteractiveObjects(e);}return this;}},processInteractiveObjects:function processInteractiveObjects(t){var e=0;var i=-1;var s=null;var n=this.game.input.interactiveItems.first;for(this.interactiveCandidates=[];n;){n.checked=false;if(n.validForInput(i,e,false)){n.checked=true;if(t&&n.checkPointerDown(this,true)||!t&&n.checkPointerOver(this,true)){e=n.sprite.renderOrderID;i=n.priorityID;s=n;this.interactiveCandidates.push(n);}}n=this.game.input.interactiveItems.next;}for(n=this.game.input.interactiveItems.first;n;){if(!n.checked&&n.validForInput(i,e,true)&&(t&&n.checkPointerDown(this,false)||!t&&n.checkPointerOver(this,false))){e=n.sprite.renderOrderID;i=n.priorityID;s=n;this.interactiveCandidates.push(n);}n=this.game.input.interactiveItems.next;}if(this.game.input.customCandidateHandler){s=this.game.input.customCandidateHandler.call(this.game.input.customCandidateHandlerContext,this,this.interactiveCandidates,s);}this.swapTarget(s,false);return this.targetObject!==null;},swapTarget:function swapTarget(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(t===null){if(this.targetObject){this.targetObject._pointerOutHandler(this,e);this.targetObject=null;}}else if(this.targetObject===null){this.targetObject=t;t._pointerOverHandler(this,e);}else if(this.targetObject===t){if(t.update(this)===false){this.targetObject=null;}}else{this.targetObject._pointerOutHandler(this,e);this.targetObject=t;this.targetObject._pointerOverHandler(this,e);}},leave:function leave(t){this.withinGame=false;this.move(t,false);},stop:function stop(t){var e=this.game.input;if(this._stateReset&&this.withinGame){t.preventDefault();return;}else{this.timeUp=this.game.time.time;if(e.multiInputOverride===o.Input.MOUSE_OVERRIDES_TOUCH||e.multiInputOverride===o.Input.MOUSE_TOUCH_COMBINE||e.multiInputOverride===o.Input.TOUCH_OVERRIDES_MOUSE&&e.totalActivePointers===0){e.onUp.dispatch(this,t);if(this.duration>=0&&this.duration<=e.tapRate){if(this.timeUp-this.previousTapTime<e.doubleTapRate){e.onTap.dispatch(this,true);}else{e.onTap.dispatch(this,false);}this.previousTapTime=this.timeUp;}}if(this.isMouse){this.updateButtons(t);}else{this.isDown=false;this.isUp=true;}if(this.id>0){this.active=false;}this.withinGame=this.game.scale.bounds.contains(t.pageX,t.pageY);this.pointerId=null;this.identifier=null;this.positionUp.setTo(this.x,this.y);if(this.isMouse===false){e.currentPointers--;}e.interactiveItems.callAll("_releasedHandler",this);if(this._clickTrampolines){this._trampolineTargetObject=this.targetObject;}this.targetObject=null;return this;}},justPressed:function justPressed(t){t=t||this.game.input.justPressedRate;return this.isDown===true&&this.timeDown+t>this.game.time.time;},justReleased:function justReleased(t){t=t||this.game.input.justReleasedRate;return this.isUp&&this.timeUp+t>this.game.time.time;},addClickTrampoline:function addClickTrampoline(t,e,i,s){if(this.isDown){for(var n=this._clickTrampolines=this._clickTrampolines||[],o=0;o<n.length;o++){if(n[o].name===t){n.splice(o,1);break;}}n.push({name:t,targetObject:this.targetObject,callback:e,callbackContext:i,callbackArgs:s});}},processClickTrampolines:function processClickTrampolines(){var t=this._clickTrampolines;if(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.targetObject===this._trampolineTargetObject){i.callback.apply(i.callbackContext,i.callbackArgs);}}this._clickTrampolines=null;this._trampolineTargetObject=null;}},reset:function reset(){if(this.isMouse===false){this.active=false;}this.pointerId=null;this.identifier=null;this.dirty=false;this.totalTouches=0;this._holdSent=false;this._history.length=0;this._stateReset=true;this.resetButtons();if(this.targetObject){this.targetObject._releasedHandler(this);}this.targetObject=null;},resetMovement:function resetMovement(){this.movementX=0;this.movementY=0;}};o.Pointer.prototype.constructor=o.Pointer;Object.defineProperty(o.Pointer.prototype,"duration",{get:function get(){if(this.isUp){return-1;}else{return this.game.time.time-this.timeDown;}}});Object.defineProperty(o.Pointer.prototype,"worldX",{get:function get(){return this.game.world.camera.x+this.x;}});Object.defineProperty(o.Pointer.prototype,"worldY",{get:function get(){return this.game.world.camera.y+this.y;}});o.PointerMode={CURSOR:1,CONTACT:2};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Touch=function(t){this.game=t;this.enabled=true;this.touchLockCallbacks=[];this.callbackContext=this.game;this.touchStartCallback=null;this.touchMoveCallback=null;this.touchEndCallback=null;this.touchEnterCallback=null;this.touchLeaveCallback=null;this.touchCancelCallback=null;this.preventDefault=true;this.event=null;this._onTouchStart=null;this._onTouchMove=null;this._onTouchEnd=null;this._onTouchEnter=null;this._onTouchLeave=null;this._onTouchCancel=null;this._onTouchMove=null;};o.Touch.prototype={start:function start(){if(this._onTouchStart===null){var t=this;if(this.game.device.touch){this._onTouchStart=function(e){return t.onTouchStart(e);};this._onTouchMove=function(e){return t.onTouchMove(e);};this._onTouchEnd=function(e){return t.onTouchEnd(e);};this._onTouchEnter=function(e){return t.onTouchEnter(e);};this._onTouchLeave=function(e){return t.onTouchLeave(e);};this._onTouchCancel=function(e){return t.onTouchCancel(e);};this.game.canvas.addEventListener("touchstart",this._onTouchStart,false);this.game.canvas.addEventListener("touchmove",this._onTouchMove,false);this.game.canvas.addEventListener("touchend",this._onTouchEnd,false);this.game.canvas.addEventListener("touchcancel",this._onTouchCancel,false);if(!this.game.device.cocoonJS){this.game.canvas.addEventListener("touchenter",this._onTouchEnter,false);this.game.canvas.addEventListener("touchleave",this._onTouchLeave,false);}}}},consumeDocumentTouches:function consumeDocumentTouches(){this._documentTouchMove=function(t){t.preventDefault();};document.addEventListener("touchmove",this._documentTouchMove,false);},addTouchLockCallback:function addTouchLockCallback(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;this.touchLockCallbacks.push({callback:t,context:e,onEnd:i});},removeTouchLockCallback:function removeTouchLockCallback(t,e){for(var i=this.touchLockCallbacks.length;i--;){if(this.touchLockCallbacks[i].callback===t&&this.touchLockCallbacks[i].context===e){this.touchLockCallbacks.splice(i,1);return true;}}return false;},onTouchStart:function onTouchStart(t){for(var e=this.touchLockCallbacks.length;e--;){var i=this.touchLockCallbacks[e];if(!i.onEnd&&i.callback.call(i.context,this,t)){this.touchLockCallbacks.splice(e,1);}}this.event=t;if(this.game.input.enabled&&this.enabled){if(this.touchStartCallback){this.touchStartCallback.call(this.callbackContext,t);}if(this.preventDefault){t.preventDefault();}for(var e=0;e<t.changedTouches.length;e++){this.game.input.startPointer(t.changedTouches[e]);}}},onTouchCancel:function onTouchCancel(t){this.event=t;if(this.touchCancelCallback){this.touchCancelCallback.call(this.callbackContext,t);}if(this.game.input.enabled&&this.enabled){if(this.preventDefault){t.preventDefault();}for(var e=0;e<t.changedTouches.length;e++){this.game.input.stopPointer(t.changedTouches[e]);}}},onTouchEnter:function onTouchEnter(t){this.event=t;if(this.touchEnterCallback){this.touchEnterCallback.call(this.callbackContext,t);}if(this.game.input.enabled&&this.enabled&&this.preventDefault){t.preventDefault();}},onTouchLeave:function onTouchLeave(t){this.event=t;if(this.touchLeaveCallback){this.touchLeaveCallback.call(this.callbackContext,t);}if(this.preventDefault){t.preventDefault();}},onTouchMove:function onTouchMove(t){this.event=t;if(this.touchMoveCallback){this.touchMoveCallback.call(this.callbackContext,t);}if(this.preventDefault){t.preventDefault();}for(var e=0;e<t.changedTouches.length;e++){this.game.input.updatePointer(t.changedTouches[e]);}},onTouchEnd:function onTouchEnd(t){for(var e=this.touchLockCallbacks.length;e--;){var i=this.touchLockCallbacks[e];if(i.onEnd&&i.callback.call(i.context,this,t)){this.touchLockCallbacks.splice(e,1);}}this.event=t;if(this.touchEndCallback){this.touchEndCallback.call(this.callbackContext,t);}if(this.preventDefault){t.preventDefault();}for(var e=0;e<t.changedTouches.length;e++){this.game.input.stopPointer(t.changedTouches[e]);}},stop:function stop(){if(this.game.device.touch){this.game.canvas.removeEventListener("touchstart",this._onTouchStart);this.game.canvas.removeEventListener("touchmove",this._onTouchMove);this.game.canvas.removeEventListener("touchend",this._onTouchEnd);this.game.canvas.removeEventListener("touchenter",this._onTouchEnter);this.game.canvas.removeEventListener("touchleave",this._onTouchLeave);this.game.canvas.removeEventListener("touchcancel",this._onTouchCancel);}}};o.Touch.prototype.constructor=o.Touch;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.InputHandler=function(t){this.sprite=t;this.game=t.game;this.enabled=false;this.checked=false;this.priorityID=0;this.useHandCursor=false;this._setHandCursor=false;this.isDragged=false;this.allowHorizontalDrag=true;this.allowVerticalDrag=true;this.bringToTop=false;this.snapOffset=null;this.snapOnDrag=false;this.snapOnRelease=false;this.snapX=0;this.snapY=0;this.snapOffsetX=0;this.snapOffsetY=0;this.pixelPerfectOver=false;this.pixelPerfectClick=false;this.pixelPerfectAlpha=255;this.draggable=false;this.boundsRect=null;this.boundsSprite=null;this.scaleLayer=false;this.dragOffset=new o.Point();this.dragFromCenter=false;this.dragStopBlocksInputUp=false;this.dragStartPoint=new o.Point();this.dragDistanceThreshold=0;this.dragTimeThreshold=0;this.downPoint=new o.Point();this.snapPoint=new o.Point();this._dragPoint=new o.Point();this._dragPhase=false;this._pendingDrag=false;this._dragTimePass=false;this._dragDistancePass=false;this._wasEnabled=false;this._tempPoint=new o.Point();this._pointerData=[];this._pointerData.push({id:0,x:0,y:0,camX:0,camY:0,isDown:false,isUp:false,isOver:false,isOut:false,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:false});};o.InputHandler.prototype={start:function start(t,e){t=t||0;if(e===undefined){e=false;}if(this.enabled===false){this.game.input.interactiveItems.add(this);this.useHandCursor=e;this.priorityID=t;for(var i=0;i<10;i++){this._pointerData[i]={id:i,x:0,y:0,isDown:false,isUp:false,isOver:false,isOut:false,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:false};}this.snapOffset=new o.Point();this.enabled=true;this._wasEnabled=true;}this.sprite.events.onAddedToGroup.add(this.addedToGroup,this);this.sprite.events.onRemovedFromGroup.add(this.removedFromGroup,this);return this.sprite;},addedToGroup:function addedToGroup(){if(!this._dragPhase){if(this._wasEnabled&&!this.enabled){this.start();}}},removedFromGroup:function removedFromGroup(){if(!this._dragPhase){if(this.enabled){this._wasEnabled=true;this.stop();}else{this._wasEnabled=false;}}},reset:function reset(){this.enabled=false;for(var t=0;t<10;t++){this._pointerData[t]={id:t,x:0,y:0,isDown:false,isUp:false,isOver:false,isOut:false,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:false};}},stop:function stop(){if(this.enabled!==false){this.enabled=false;this.game.input.interactiveItems.remove(this);}},destroy:function destroy(){if(this.sprite){if(this._setHandCursor){this.game.canvas.style.cursor="default";this._setHandCursor=false;}this.enabled=false;this.game.input.interactiveItems.remove(this);this._pointerData.length=0;this.boundsRect=null;this.boundsSprite=null;this.sprite=null;}},validForInput:function validForInput(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return!!this.enabled&&this.sprite.scale.x!==0&&this.sprite.scale.y!==0&&!(this.priorityID<this.game.input.minPriorityID)&&(!this.sprite.parent||!this.sprite.parent.ignoreChildInput)&&(!!i||!this.pixelPerfectClick&&!this.pixelPerfectOver)&&(this.priorityID>t||this.priorityID===t&&this.sprite.renderOrderID>e);},isPixelPerfect:function isPixelPerfect(){return this.pixelPerfectClick||this.pixelPerfectOver;},pointerX:function pointerX(t){t=t||0;return this._pointerData[t].x;},pointerY:function pointerY(t){t=t||0;return this._pointerData[t].y;},pointerDown:function pointerDown(t){t=t||0;return this._pointerData[t].isDown;},pointerUp:function pointerUp(t){t=t||0;return this._pointerData[t].isUp;},pointerTimeDown:function pointerTimeDown(t){t=t||0;return this._pointerData[t].timeDown;},pointerTimeUp:function pointerTimeUp(t){t=t||0;return this._pointerData[t].timeUp;},pointerOver:function pointerOver(t){if(!this.enabled){return false;}if(t===undefined){for(var e=0;e<10;e++){if(this._pointerData[e].isOver){return true;}}return false;}return this._pointerData[t].isOver;},pointerOut:function pointerOut(t){if(!this.enabled){return false;}if(t!==undefined){return this._pointerData[t].isOut;}for(var e=0;e<10;e++){if(this._pointerData[e].isOut){return true;}}},pointerTimeOver:function pointerTimeOver(t){t=t||0;return this._pointerData[t].timeOver;},pointerTimeOut:function pointerTimeOut(t){t=t||0;return this._pointerData[t].timeOut;},pointerDragged:function pointerDragged(t){t=t||0;return this._pointerData[t].isDragged;},checkPointerDown:function checkPointerDown(t,e){return!!t.isDown&&!!this.enabled&&!!this.sprite&&!!this.sprite.parent&&!!this.sprite.visible&&!!this.sprite.parent.visible&&this.sprite.worldScale.x!==0&&this.sprite.worldScale.y!==0&&!!this.game.input.hitTest(this.sprite,t,this._tempPoint)&&(e===undefined&&(e=false),!!e||!this.pixelPerfectClick||this.checkPixel(this._tempPoint.x,this._tempPoint.y));},checkPointerOver:function checkPointerOver(t,e){return!!this.enabled&&!!this.sprite&&!!this.sprite.parent&&!!this.sprite.visible&&!!this.sprite.parent.visible&&this.sprite.worldScale.x!==0&&this.sprite.worldScale.y!==0&&!!this.game.input.hitTest(this.sprite,t,this._tempPoint)&&(e===undefined&&(e=false),!!e||!this.pixelPerfectOver||this.checkPixel(this._tempPoint.x,this._tempPoint.y));},checkPixel:function checkPixel(t,e,i){if(this.sprite.texture.baseTexture.source){if(t===null&&e===null){this.game.input.getLocalPosition(this.sprite,i,this._tempPoint);var t=this._tempPoint.x;var e=this._tempPoint.y;}if(this.sprite.anchor.x!==0){t-=-this.sprite.texture.frame.width*this.sprite.anchor.x;}if(this.sprite.anchor.y!==0){e-=-this.sprite.texture.frame.height*this.sprite.anchor.y;}t+=this.sprite.texture.frame.x;e+=this.sprite.texture.frame.y;if(this.sprite.texture.trim&&(t-=this.sprite.texture.trim.x,e-=this.sprite.texture.trim.y,t<this.sprite.texture.crop.x||t>this.sprite.texture.crop.right||e<this.sprite.texture.crop.y||e>this.sprite.texture.crop.bottom)){this._dx=t;this._dy=e;return false;}this._dx=t;this._dy=e;this.game.input.hitContext.clearRect(0,0,1,1);this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source,t,e,1,1,0,0,1,1);if(this.game.input.hitContext.getImageData(0,0,1,1).data[3]>=this.pixelPerfectAlpha){return true;}}return false;},update:function update(t){if(this.sprite!==null&&this.sprite.parent!==undefined){if(this.enabled&&this.sprite.visible&&this.sprite.parent.visible){if(this._pendingDrag){this._dragDistancePass||(this._dragDistancePass=o.Math.distance(t.x,t.y,this.downPoint.x,this.downPoint.y)>=this.dragDistanceThreshold);if(this._dragDistancePass&&this._dragTimePass){this.startDrag(t);}return true;}else if(this.draggable&&this._draggedPointerID===t.id){return this.updateDrag(t,false);}else if(this._pointerData[t.id].isOver){if(this.checkPointerOver(t)){this._pointerData[t.id].x=t.x-this.sprite.x;this._pointerData[t.id].y=t.y-this.sprite.y;return true;}else{this._pointerOutHandler(t);return false;}}else{return undefined;}}else{this._pointerOutHandler(t);return false;}}},_pointerOverHandler:function _pointerOverHandler(t,e){if(this.sprite!==null){var i=this._pointerData[t.id];if(i.isOver===false||t.dirty){var s=i.isOver===false;i.isOver=true;i.isOut=false;i.timeOver=this.game.time.time;i.x=t.x-this.sprite.x;i.y=t.y-this.sprite.y;if(this.useHandCursor&&i.isDragged===false){this.game.canvas.style.cursor="pointer";this._setHandCursor=true;}if(!e&&s&&this.sprite&&this.sprite.events){this.sprite.events.onInputOver$dispatch(this.sprite,t);}if(this.sprite.parent&&this.sprite.parent.type===o.GROUP){this.sprite.parent.onChildInputOver.dispatch(this.sprite,t);}}}},_pointerOutHandler:function _pointerOutHandler(t,e){if(this.sprite!==null){var i=this._pointerData[t.id];i.isOver=false;i.isOut=true;i.timeOut=this.game.time.time;if(this.useHandCursor&&i.isDragged===false){this.game.canvas.style.cursor="default";this._setHandCursor=false;}if(!e&&this.sprite&&this.sprite.events){this.sprite.events.onInputOut$dispatch(this.sprite,t);if(this.sprite&&this.sprite.parent&&this.sprite.parent.type===o.GROUP){this.sprite.parent.onChildInputOut.dispatch(this.sprite,t);}}}},_touchedHandler:function _touchedHandler(t){if(this.sprite!==null){var e=this._pointerData[t.id];if(!e.isDown&&e.isOver){if(this.pixelPerfectClick&&!this.checkPixel(null,null,t)){return;}e.isDown=true;e.isUp=false;e.timeDown=this.game.time.time;this.downPoint.set(t.x,t.y);t.dirty=true;if(this.sprite&&this.sprite.events&&(this.sprite.events.onInputDown$dispatch(this.sprite,t),this.sprite&&this.sprite.parent&&this.sprite.parent.type===o.GROUP&&this.sprite.parent.onChildInputDown.dispatch(this.sprite,t),this.sprite===null)){return;}if(this.draggable&&this.isDragged===false){if(this.dragTimeThreshold===0&&this.dragDistanceThreshold===0){this.startDrag(t);}else{this._pendingDrag=true;this._dragDistancePass=this.dragDistanceThreshold===0;if(this.dragTimeThreshold>0){this._dragTimePass=false;this.game.time.events.add(this.dragTimeThreshold,this.dragTimeElapsed,this,t);}else{this._dragTimePass=true;}}}if(this.bringToTop){this.sprite.bringToTop();}}}},dragTimeElapsed:function dragTimeElapsed(t){this._dragTimePass=true;if(this._pendingDrag&&this.sprite&&this._dragDistancePass){this.startDrag(t);}},_releasedHandler:function _releasedHandler(t){if(this.sprite!==null){var e=this._pointerData[t.id];if(e.isDown&&t.isUp){e.isDown=false;e.isUp=true;e.timeUp=this.game.time.time;e.downDuration=e.timeUp-e.timeDown;var i=this.checkPointerOver(t);if(this.sprite&&this.sprite.events){if(!this.dragStopBlocksInputUp||!!this.dragStopBlocksInputUp&&(!this.draggable||!this.isDragged||this._draggedPointerID!==t.id)){this.sprite.events.onInputUp$dispatch(this.sprite,t,i);}if(this.sprite&&this.sprite.parent&&this.sprite.parent.type===o.GROUP){this.sprite.parent.onChildInputUp.dispatch(this.sprite,t,i);}i&&(i=this.checkPointerOver(t));}e.isOver=i;if(!i&&this.useHandCursor){this.game.canvas.style.cursor="default";this._setHandCursor=false;}t.dirty=true;this._pendingDrag=false;if(this.draggable&&this.isDragged&&this._draggedPointerID===t.id){this.stopDrag(t);}}}},updateDrag:function updateDrag(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(t.isUp){this.stopDrag(t);return false;}var i=this.globalToLocalX(t.x)+this._dragPoint.x+this.dragOffset.x;var s=this.globalToLocalY(t.y)+this._dragPoint.y+this.dragOffset.y;if(this.sprite.fixedToCamera){if(this.allowHorizontalDrag){this.sprite.cameraOffset.x=i;}if(this.allowVerticalDrag){this.sprite.cameraOffset.y=s;}if(this.boundsRect){this.checkBoundsRect();}if(this.boundsSprite){this.checkBoundsSprite();}if(this.snapOnDrag){this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX;this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY;this.snapPoint.set(this.sprite.cameraOffset.x,this.sprite.cameraOffset.y);}}else{var n=this.game.camera.x-this._pointerData[t.id].camX;var o=this.game.camera.y-this._pointerData[t.id].camY;if(this.allowHorizontalDrag){this.sprite.x=i+n;}if(this.allowVerticalDrag){this.sprite.y=s+o;}if(this.boundsRect){this.checkBoundsRect();}if(this.boundsSprite){this.checkBoundsSprite();}if(this.snapOnDrag){this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX;this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY;this.snapPoint.set(this.sprite.x,this.sprite.y);}}this.sprite.events.onDragUpdate.dispatch(this.sprite,t,i,s,this.snapPoint,e);return true;},justOver:function justOver(t,e){t=t||0;e=e||500;return this._pointerData[t].isOver&&this.overDuration(t)<e;},justOut:function justOut(t,e){t=t||0;e=e||500;return this._pointerData[t].isOut&&this.game.time.time-this._pointerData[t].timeOut<e;},justPressed:function justPressed(t,e){t=t||0;e=e||500;return this._pointerData[t].isDown&&this.downDuration(t)<e;},justReleased:function justReleased(t,e){t=t||0;e=e||500;return this._pointerData[t].isUp&&this.game.time.time-this._pointerData[t].timeUp<e;},overDuration:function overDuration(t){t=t||0;if(this._pointerData[t].isOver){return this.game.time.time-this._pointerData[t].timeOver;}else{return-1;}},downDuration:function downDuration(t){t=t||0;if(this._pointerData[t].isDown){return this.game.time.time-this._pointerData[t].timeDown;}else{return-1;}},enableDrag:function enableDrag(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:255;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;this._dragPoint=new o.Point();this.draggable=true;this.bringToTop=e;this.dragOffset=new o.Point();this.dragFromCenter=t;this.pixelPerfectClick=i;this.pixelPerfectAlpha=s;if(n){this.boundsRect=n;}if(a){this.boundsSprite=a;}},disableDrag:function disableDrag(){if(this._pointerData){for(var t=0;t<10;t++){this._pointerData[t].isDragged=false;}}this.draggable=false;this.isDragged=false;this._draggedPointerID=-1;this._pendingDrag=false;},startDrag:function startDrag(t){var e=this.sprite.x;var i=this.sprite.y;this.isDragged=true;this._draggedPointerID=t.id;this._pointerData[t.id].camX=this.game.camera.x;this._pointerData[t.id].camY=this.game.camera.y;this._pointerData[t.id].isDragged=true;if(this.sprite.fixedToCamera){if(this.dragFromCenter){var s=this.sprite.getBounds();this.sprite.cameraOffset.x=this.globalToLocalX(t.x)+(this.sprite.cameraOffset.x-s.centerX);this.sprite.cameraOffset.y=this.globalToLocalY(t.y)+(this.sprite.cameraOffset.y-s.centerY);}this._dragPoint.setTo(this.sprite.cameraOffset.x-t.x,this.sprite.cameraOffset.y-t.y);}else{if(this.dragFromCenter){var s=this.sprite.getBounds();this.sprite.x=this.globalToLocalX(t.x)+(this.sprite.x-s.centerX);this.sprite.y=this.globalToLocalY(t.y)+(this.sprite.y-s.centerY);}this._dragPoint.setTo(this.sprite.x-this.globalToLocalX(t.x),this.sprite.y-this.globalToLocalY(t.y));}this.updateDrag(t,true);if(this.bringToTop){this._dragPhase=true;this.sprite.bringToTop();}this.dragStartPoint.set(e,i);this.sprite.events.onDragStart$dispatch(this.sprite,t,e,i);this._pendingDrag=false;},globalToLocalX:function globalToLocalX(t){if(this.scaleLayer){t-=this.game.scale.grid.boundsFluid.x;t*=this.game.scale.grid.scaleFluidInversed.x;}return t;},globalToLocalY:function globalToLocalY(t){if(this.scaleLayer){t-=this.game.scale.grid.boundsFluid.y;t*=this.game.scale.grid.scaleFluidInversed.y;}return t;},stopDrag:function stopDrag(t){this.isDragged=false;this._draggedPointerID=-1;this._pointerData[t.id].isDragged=false;this._dragPhase=false;this._pendingDrag=false;if(this.snapOnRelease){if(this.sprite.fixedToCamera){this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX;this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY;}else{this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX;this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY;}}this.sprite.events.onDragStop$dispatch(this.sprite,t);if(this.checkPointerOver(t)===false){this._pointerOutHandler(t);}},setDragLock:function setDragLock(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.allowHorizontalDrag=t;this.allowVerticalDrag=e;},enableSnap:function enableSnap(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;this.snapX=t;this.snapY=e;this.snapOffsetX=n;this.snapOffsetY=o;this.snapOnDrag=i;this.snapOnRelease=s;},disableSnap:function disableSnap(){this.snapOnDrag=false;this.snapOnRelease=false;},checkBoundsRect:function checkBoundsRect(){if(this.sprite.fixedToCamera){if(this.sprite.cameraOffset.x<this.boundsRect.left){this.sprite.cameraOffset.x=this.boundsRect.left;}else if(this.sprite.cameraOffset.x+this.sprite.width>this.boundsRect.right){this.sprite.cameraOffset.x=this.boundsRect.right-this.sprite.width;}if(this.sprite.cameraOffset.y<this.boundsRect.top){this.sprite.cameraOffset.y=this.boundsRect.top;}else if(this.sprite.cameraOffset.y+this.sprite.height>this.boundsRect.bottom){this.sprite.cameraOffset.y=this.boundsRect.bottom-this.sprite.height;}}else{if(this.sprite.left<this.boundsRect.left){this.sprite.x=this.boundsRect.x+this.sprite.offsetX;}else if(this.sprite.right>this.boundsRect.right){this.sprite.x=this.boundsRect.right-(this.sprite.width-this.sprite.offsetX);}if(this.sprite.top<this.boundsRect.top){this.sprite.y=this.boundsRect.top+this.sprite.offsetY;}else if(this.sprite.bottom>this.boundsRect.bottom){this.sprite.y=this.boundsRect.bottom-(this.sprite.height-this.sprite.offsetY);}}},checkBoundsSprite:function checkBoundsSprite(){if(this.sprite.fixedToCamera&&this.boundsSprite.fixedToCamera){if(this.sprite.cameraOffset.x<this.boundsSprite.cameraOffset.x){this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x;}else if(this.sprite.cameraOffset.x+this.sprite.width>this.boundsSprite.cameraOffset.x+this.boundsSprite.width){this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x+this.boundsSprite.width-this.sprite.width;}if(this.sprite.cameraOffset.y<this.boundsSprite.cameraOffset.y){this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y;}else if(this.sprite.cameraOffset.y+this.sprite.height>this.boundsSprite.cameraOffset.y+this.boundsSprite.height){this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y+this.boundsSprite.height-this.sprite.height;}}else{if(this.sprite.left<this.boundsSprite.left){this.sprite.x=this.boundsSprite.left+this.sprite.offsetX;}else if(this.sprite.right>this.boundsSprite.right){this.sprite.x=this.boundsSprite.right-(this.sprite.width-this.sprite.offsetX);}if(this.sprite.top<this.boundsSprite.top){this.sprite.y=this.boundsSprite.top+this.sprite.offsetY;}else if(this.sprite.bottom>this.boundsSprite.bottom){this.sprite.y=this.boundsSprite.bottom-(this.sprite.height-this.sprite.offsetY);}}}};o.InputHandler.prototype.constructor=o.InputHandler;/**\r\n  * @author       @karlmacklin <tacklemcclean@gmail.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Gamepad=function(t){this.game=t;this._gamepadIndexMap={};this._rawPads=[];this._active=false;this.enabled=true;this._gamepadSupportAvailable=!!navigator.webkitGetGamepads||!!navigator.webkitGamepads||navigator.userAgent.indexOf("Firefox/")!==-1||!!navigator.getGamepads;this._prevRawGamepadTypes=[];this._prevTimestamps=[];this.callbackContext=this;this.onConnectCallback=null;this.onDisconnectCallback=null;this.onDownCallback=null;this.onUpCallback=null;this.onAxisCallback=null;this.onFloatCallback=null;this._ongamepadconnected=null;this._gamepaddisconnected=null;this._gamepads=[new o.SinglePad(t,this),new o.SinglePad(t,this),new o.SinglePad(t,this),new o.SinglePad(t,this)];};o.Gamepad.prototype={addCallbacks:function addCallbacks(t,e){if(e!==undefined){this.onConnectCallback=typeof e.onConnect=="function"?e.onConnect:this.onConnectCallback;this.onDisconnectCallback=typeof e.onDisconnect=="function"?e.onDisconnect:this.onDisconnectCallback;this.onDownCallback=typeof e.onDown=="function"?e.onDown:this.onDownCallback;this.onUpCallback=typeof e.onUp=="function"?e.onUp:this.onUpCallback;this.onAxisCallback=typeof e.onAxis=="function"?e.onAxis:this.onAxisCallback;this.onFloatCallback=typeof e.onFloat=="function"?e.onFloat:this.onFloatCallback;this.callbackContext=t;}},start:function start(){if(!this._active){this._active=true;var t=this;this._onGamepadConnected=function(e){return t.onGamepadConnected(e);};this._onGamepadDisconnected=function(e){return t.onGamepadDisconnected(e);};window.addEventListener("gamepadconnected",this._onGamepadConnected,false);window.addEventListener("gamepaddisconnected",this._onGamepadDisconnected,false);}},onGamepadConnected:function onGamepadConnected(t){var e=t.gamepad;this._rawPads.push(e);this._gamepads[e.index].connect(e);},onGamepadDisconnected:function onGamepadDisconnected(t){var e=t.gamepad;for(var i in this._rawPads){if(this._rawPads[i].index===e.index){this._rawPads.splice(i,1);}}this._gamepads[e.index].disconnect();},update:function update(){this._pollGamepads();this.pad1.pollStatus();this.pad2.pollStatus();this.pad3.pollStatus();this.pad4.pollStatus();},_pollGamepads:function _pollGamepads(){if(this._active){if(navigator.getGamepads){var t=navigator.getGamepads();}else if(navigator.webkitGetGamepads){var t=navigator.webkitGetGamepads();}else if(navigator.webkitGamepads){var t=navigator.webkitGamepads();}if(t){this._rawPads=[];for(var e=false,i=0;i<t.length&&(_typeof(t[i])!==this._prevRawGamepadTypes[i]&&(e=true,this._prevRawGamepadTypes[i]=_typeof(t[i])),t[i]&&this._rawPads.push(t[i]),i!==3);i++);for(var s=0;s<this._gamepads.length;s++){this._gamepads[s]._rawPad=this._rawPads[s];}if(e){var n={rawIndices:{},padIndices:{}};var o;for(var a=0;a<this._gamepads.length;a++){o=this._gamepads[a];if(o.connected){for(var r=0;r<this._rawPads.length;r++){if(this._rawPads[r].index===o.index){n.rawIndices[o.index]=true;n.padIndices[a]=true;}}}}for(var h=0;h<this._gamepads.length;h++){o=this._gamepads[h];if(!n.padIndices[h]){if(this._rawPads.length<1){o.disconnect();}for(var l=0;l<this._rawPads.length&&!n.padIndices[h];l++){var c=this._rawPads[l];if(c){if(n.rawIndices[c.index]){o.disconnect();continue;}o.connect(c);n.rawIndices[c.index]=true;n.padIndices[h]=true;}else{o.disconnect();}}}}}}}},setDeadZones:function setDeadZones(t){for(var e=0;e<this._gamepads.length;e++){this._gamepads[e].deadZone=t;}},stop:function stop(){this._active=false;window.removeEventListener("gamepadconnected",this._onGamepadConnected);window.removeEventListener("gamepaddisconnected",this._onGamepadDisconnected);},reset:function reset(){this.update();for(var t=0;t<this._gamepads.length;t++){this._gamepads[t].reset();}},justPressed:function justPressed(t,e){for(var i=0;i<this._gamepads.length;i++){if(this._gamepads[i].justPressed(t,e)===true){return true;}}return false;},justReleased:function justReleased(t,e){for(var i=0;i<this._gamepads.length;i++){if(this._gamepads[i].justReleased(t,e)===true){return true;}}return false;},isDown:function isDown(t){for(var e=0;e<this._gamepads.length;e++){if(this._gamepads[e].isDown(t)===true){return true;}}return false;},destroy:function destroy(){this.stop();for(var t=0;t<this._gamepads.length;t++){this._gamepads[t].destroy();}}};o.Gamepad.prototype.constructor=o.Gamepad;Object.defineProperty(o.Gamepad.prototype,"active",{get:function get(){return this._active;}});Object.defineProperty(o.Gamepad.prototype,"supported",{get:function get(){return this._gamepadSupportAvailable;}});Object.defineProperty(o.Gamepad.prototype,"padsConnected",{get:function get(){return this._rawPads.length;}});Object.defineProperty(o.Gamepad.prototype,"pad1",{get:function get(){return this._gamepads[0];}});Object.defineProperty(o.Gamepad.prototype,"pad2",{get:function get(){return this._gamepads[1];}});Object.defineProperty(o.Gamepad.prototype,"pad3",{get:function get(){return this._gamepads[2];}});Object.defineProperty(o.Gamepad.prototype,"pad4",{get:function get(){return this._gamepads[3];}});o.Gamepad.BUTTON_0=0;o.Gamepad.BUTTON_1=1;o.Gamepad.BUTTON_2=2;o.Gamepad.BUTTON_3=3;o.Gamepad.BUTTON_4=4;o.Gamepad.BUTTON_5=5;o.Gamepad.BUTTON_6=6;o.Gamepad.BUTTON_7=7;o.Gamepad.BUTTON_8=8;o.Gamepad.BUTTON_9=9;o.Gamepad.BUTTON_10=10;o.Gamepad.BUTTON_11=11;o.Gamepad.BUTTON_12=12;o.Gamepad.BUTTON_13=13;o.Gamepad.BUTTON_14=14;o.Gamepad.BUTTON_15=15;o.Gamepad.AXIS_0=0;o.Gamepad.AXIS_1=1;o.Gamepad.AXIS_2=2;o.Gamepad.AXIS_3=3;o.Gamepad.AXIS_4=4;o.Gamepad.AXIS_5=5;o.Gamepad.AXIS_6=6;o.Gamepad.AXIS_7=7;o.Gamepad.AXIS_8=8;o.Gamepad.AXIS_9=9;o.Gamepad.XBOX360_A=0;o.Gamepad.XBOX360_B=1;o.Gamepad.XBOX360_X=2;o.Gamepad.XBOX360_Y=3;o.Gamepad.XBOX360_LEFT_BUMPER=4;o.Gamepad.XBOX360_RIGHT_BUMPER=5;o.Gamepad.XBOX360_LEFT_TRIGGER=6;o.Gamepad.XBOX360_RIGHT_TRIGGER=7;o.Gamepad.XBOX360_BACK=8;o.Gamepad.XBOX360_START=9;o.Gamepad.XBOX360_STICK_LEFT_BUTTON=10;o.Gamepad.XBOX360_STICK_RIGHT_BUTTON=11;o.Gamepad.XBOX360_DPAD_LEFT=14;o.Gamepad.XBOX360_DPAD_RIGHT=15;o.Gamepad.XBOX360_DPAD_UP=12;o.Gamepad.XBOX360_DPAD_DOWN=13;o.Gamepad.XBOX360_STICK_LEFT_X=0;o.Gamepad.XBOX360_STICK_LEFT_Y=1;o.Gamepad.XBOX360_STICK_RIGHT_X=2;o.Gamepad.XBOX360_STICK_RIGHT_Y=3;o.Gamepad.PS3XC_X=0;o.Gamepad.PS3XC_CIRCLE=1;o.Gamepad.PS3XC_SQUARE=2;o.Gamepad.PS3XC_TRIANGLE=3;o.Gamepad.PS3XC_L1=4;o.Gamepad.PS3XC_R1=5;o.Gamepad.PS3XC_L2=6;o.Gamepad.PS3XC_R2=7;o.Gamepad.PS3XC_SELECT=8;o.Gamepad.PS3XC_START=9;o.Gamepad.PS3XC_STICK_LEFT_BUTTON=10;o.Gamepad.PS3XC_STICK_RIGHT_BUTTON=11;o.Gamepad.PS3XC_DPAD_UP=12;o.Gamepad.PS3XC_DPAD_DOWN=13;o.Gamepad.PS3XC_DPAD_LEFT=14;o.Gamepad.PS3XC_DPAD_RIGHT=15;o.Gamepad.PS3XC_STICK_LEFT_X=0;o.Gamepad.PS3XC_STICK_LEFT_Y=1;o.Gamepad.PS3XC_STICK_RIGHT_X=2;o.Gamepad.PS3XC_STICK_RIGHT_Y=3;/**\r\n  * @author       @karlmacklin <tacklemcclean@gmail.com>\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.SinglePad=function(t,e){this.game=t;this.index=null;this.connected=false;this.callbackContext=this;this.onConnectCallback=null;this.onDisconnectCallback=null;this.onDownCallback=null;this.onUpCallback=null;this.onAxisCallback=null;this.onFloatCallback=null;this.deadZone=0.26;this._padParent=e;this._rawPad=null;this._prevTimestamp=null;this._buttons=[];this._buttonsLen=0;this._axes=[];this._axesLen=0;};o.SinglePad.prototype={addCallbacks:function addCallbacks(t,e){if(e!==undefined){this.onConnectCallback=typeof e.onConnect=="function"?e.onConnect:this.onConnectCallback;this.onDisconnectCallback=typeof e.onDisconnect=="function"?e.onDisconnect:this.onDisconnectCallback;this.onDownCallback=typeof e.onDown=="function"?e.onDown:this.onDownCallback;this.onUpCallback=typeof e.onUp=="function"?e.onUp:this.onUpCallback;this.onAxisCallback=typeof e.onAxis=="function"?e.onAxis:this.onAxisCallback;this.onFloatCallback=typeof e.onFloat=="function"?e.onFloat:this.onFloatCallback;this.callbackContext=t;}},getButton:function getButton(t){if(this._buttons[t]){return this._buttons[t];}else{return null;}},pollStatus:function pollStatus(){if(this.connected&&this.game.input.enabled&&this.game.input.gamepad.enabled&&(!this._rawPad.timestamp||this._rawPad.timestamp!==this._prevTimestamp)){for(var t=0;t<this._buttonsLen;t++){var e=isNaN(this._rawPad.buttons[t])?this._rawPad.buttons[t].value:this._rawPad.buttons[t];if(e!==this._buttons[t].value){if(e===1){this.processButtonDown(t,e);}else if(e===0){this.processButtonUp(t,e);}else{this.processButtonFloat(t,e);}}}for(var i=0;i<this._axesLen;i++){var s=this._rawPad.axes[i];if(s>0&&s>this.deadZone||s<0&&s<-this.deadZone){this.processAxisChange(i,s);}else{this.processAxisChange(i,0);}}this._prevTimestamp=this._rawPad.timestamp;}},connect:function connect(t){var e=!this.connected;this.connected=true;this.index=t.index;this._rawPad=t;this._buttons=[];this._buttonsLen=t.buttons.length;this._axes=[];this._axesLen=t.axes.length;for(var i=0;i<this._axesLen;i++){this._axes[i]=t.axes[i];}for(var s in t.buttons){s=parseInt(s,10);this._buttons[s]=new o.DeviceButton(this,s);}if(e&&this._padParent.onConnectCallback){this._padParent.onConnectCallback.call(this._padParent.callbackContext,this.index);}if(e&&this.onConnectCallback){this.onConnectCallback.call(this.callbackContext);}},disconnect:function disconnect(){var t=this.connected;var e=this.index;this.connected=false;this.index=null;this._rawPad=undefined;for(var i=0;i<this._buttonsLen;i++){this._buttons[i].destroy();}this._buttons=[];this._buttonsLen=0;this._axes=[];this._axesLen=0;if(t&&this._padParent.onDisconnectCallback){this._padParent.onDisconnectCallback.call(this._padParent.callbackContext,e);}if(t&&this.onDisconnectCallback){this.onDisconnectCallback.call(this.callbackContext);}},destroy:function destroy(){this._rawPad=undefined;for(var t=0;t<this._buttonsLen;t++){this._buttons[t].destroy();}this._buttons=[];this._buttonsLen=0;this._axes=[];this._axesLen=0;this.onConnectCallback=null;this.onDisconnectCallback=null;this.onDownCallback=null;this.onUpCallback=null;this.onAxisCallback=null;this.onFloatCallback=null;},processAxisChange:function processAxisChange(t,e){if(this._axes[t]!==e){this._axes[t]=e;if(this._padParent.onAxisCallback){this._padParent.onAxisCallback.call(this._padParent.callbackContext,this,t,e);}if(this.onAxisCallback){this.onAxisCallback.call(this.callbackContext,this,t,e);}}},processButtonDown:function processButtonDown(t,e){if(this._buttons[t]){this._buttons[t].start(null,e);}if(this._padParent.onDownCallback){this._padParent.onDownCallback.call(this._padParent.callbackContext,t,e,this.index);}if(this.onDownCallback){this.onDownCallback.call(this.callbackContext,t,e);}},processButtonUp:function processButtonUp(t,e){if(this._padParent.onUpCallback){this._padParent.onUpCallback.call(this._padParent.callbackContext,t,e,this.index);}if(this.onUpCallback){this.onUpCallback.call(this.callbackContext,t,e);}if(this._buttons[t]){this._buttons[t].stop(null,e);}},processButtonFloat:function processButtonFloat(t,e){if(this._padParent.onFloatCallback){this._padParent.onFloatCallback.call(this._padParent.callbackContext,t,e,this.index);}if(this.onFloatCallback){this.onFloatCallback.call(this.callbackContext,t,e);}if(this._buttons[t]){this._buttons[t].padFloat(e);}},axis:function axis(t){return!!this._axes[t]&&this._axes[t];},isDown:function isDown(t){return!!this._buttons[t]&&this._buttons[t].isDown;},isUp:function isUp(t){return!!this._buttons[t]&&this._buttons[t].isUp;},justReleased:function justReleased(t,e){if(this._buttons[t]){return this._buttons[t].justReleased(e);}},justPressed:function justPressed(t,e){if(this._buttons[t]){return this._buttons[t].justPressed(e);}},buttonValue:function buttonValue(t){if(this._buttons[t]){return this._buttons[t].value;}else{return null;}},reset:function reset(){for(var t=0;t<this._axes.length;t++){this._axes[t]=0;}}};o.SinglePad.prototype.constructor=o.SinglePad;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Key=function(t,e){this.game=t;this._enabled=true;this.event=null;this.isDown=false;this.isUp=true;this.altKey=false;this.ctrlKey=false;this.shiftKey=false;this.timeDown=0;this.duration=0;this.timeUp=-2500;this.repeats=0;this.keyCode=e;this.onDown=new o.Signal();this.onHoldCallback=null;this.onHoldContext=null;this.onUp=new o.Signal();this._justDown=false;this._justUp=false;};o.Key.prototype={update:function update(){if(this._enabled&&this.isDown){this.duration=this.game.time.time-this.timeDown;this.repeats++;if(this.onHoldCallback){this.onHoldCallback.call(this.onHoldContext,this);}}},processKeyDown:function processKeyDown(t){if(this._enabled){this.event=t;if(!this.isDown){this.altKey=t.altKey;this.ctrlKey=t.ctrlKey;this.shiftKey=t.shiftKey;this.isDown=true;this.isUp=false;this.timeDown=this.game.time.time;this.duration=0;this.repeats=0;this._justDown=true;this.onDown.dispatch(this);}}},processKeyUp:function processKeyUp(t){if(this._enabled){this.event=t;if(!this.isUp){this.isDown=false;this.isUp=true;this.timeUp=this.game.time.time;this.duration=this.game.time.time-this.timeDown;this._justUp=true;this.onUp.dispatch(this);}}},reset:function reset(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;this.isDown=false;this.isUp=true;this.timeUp=this.game.time.time;this.duration=0;this._enabled=true;this._justDown=false;this._justUp=false;if(t){this.onDown.removeAll();this.onUp.removeAll();this.onHoldCallback=null;this.onHoldContext=null;}},downDuration:function downDuration(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:50;return this.isDown&&this.duration<t;},upDuration:function upDuration(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:50;return!this.isDown&&this.game.time.time-this.timeUp<t;}};Object.defineProperty(o.Key.prototype,"justDown",{get:function get(){var t=this._justDown;this._justDown=false;return t;}});Object.defineProperty(o.Key.prototype,"justUp",{get:function get(){var t=this._justUp;this._justUp=false;return t;}});Object.defineProperty(o.Key.prototype,"enabled",{get:function get(){return this._enabled;},set:function set(t){if((t=!!t)!==this._enabled){if(!t){this.reset(false);}this._enabled=t;}}});o.Key.prototype.constructor=o.Key;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Keyboard=function(t){this.game=t;this.enabled=true;this.event=null;this.pressEvent=null;this.callbackContext=this;this.onDownCallback=null;this.onPressCallback=null;this.onUpCallback=null;this._keys=[];this._capture=[];this._onKeyDown=null;this._onKeyPress=null;this._onKeyUp=null;this._i=0;this._k=0;};o.Keyboard.prototype={addCallbacks:function addCallbacks(t,e,i,s){this.callbackContext=t;if(e!==undefined&&e!==null){this.onDownCallback=e;}if(i!==undefined&&i!==null){this.onUpCallback=i;}if(s!==undefined&&s!==null){this.onPressCallback=s;}},addKey:function addKey(t){if(!this._keys[t]){this._keys[t]=new o.Key(this.game,t);this.addKeyCapture(t);}return this._keys[t];},addKeys:function addKeys(t){var e={};for(var i in t){e[i]=this.addKey(t[i]);}return e;},removeKey:function removeKey(t){if(this._keys[t]){this._keys[t]=null;this.removeKeyCapture(t);}},createCursorKeys:function createCursorKeys(){return this.addKeys({up:o.KeyCode.UP,down:o.KeyCode.DOWN,left:o.KeyCode.LEFT,right:o.KeyCode.RIGHT});},start:function start(){if(!this.game.device.cocoonJS&&this._onKeyDown===null){var t=this;this._onKeyDown=function(e){return t.processKeyDown(e);};this._onKeyUp=function(e){return t.processKeyUp(e);};this._onKeyPress=function(e){return t.processKeyPress(e);};window.addEventListener("keydown",this._onKeyDown,false);window.addEventListener("keyup",this._onKeyUp,false);window.addEventListener("keypress",this._onKeyPress,false);}},stop:function stop(){window.removeEventListener("keydown",this._onKeyDown);window.removeEventListener("keyup",this._onKeyUp);window.removeEventListener("keypress",this._onKeyPress);this._onKeyDown=null;this._onKeyUp=null;this._onKeyPress=null;},destroy:function destroy(){this.stop();this.clearCaptures();this._keys.length=0;this._i=0;},addKeyCapture:function addKeyCapture(t){if(_typeof(t)=="object"){for(var e in t){this._capture[t[e]]=true;}}else{this._capture[t]=true;}},removeKeyCapture:function removeKeyCapture(t){delete this._capture[t];},clearCaptures:function clearCaptures(){this._capture={};},update:function update(){for(this._i=this._keys.length;this._i--;){if(this._keys[this._i]){this._keys[this._i].update();}}},processKeyDown:function processKeyDown(t){this.event=t;if(this.game.input.enabled&&this.enabled){var _this$_keys;var e=t.keyCode;if(this._capture[e]){t.preventDefault();}(_this$_keys=this._keys)[e]||(_this$_keys[e]=new o.Key(this.game,e));this._keys[e].processKeyDown(t);this._k=e;if(this.onDownCallback){this.onDownCallback.call(this.callbackContext,t);}}},processKeyPress:function processKeyPress(t){this.pressEvent=t;if(this.game.input.enabled&&this.enabled&&this.onPressCallback){this.onPressCallback.call(this.callbackContext,String.fromCharCode(t.charCode),t);}},processKeyUp:function processKeyUp(t){this.event=t;if(this.game.input.enabled&&this.enabled){var _this$_keys2;var e=t.keyCode;if(this._capture[e]){t.preventDefault();}(_this$_keys2=this._keys)[e]||(_this$_keys2[e]=new o.Key(this.game,e));this._keys[e].processKeyUp(t);if(this.onUpCallback){this.onUpCallback.call(this.callbackContext,t);}}},reset:function reset(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;this.event=null;for(var e=this._keys.length;e--;){if(this._keys[e]){this._keys[e].reset(t);}}},downDuration:function downDuration(t,e){if(this._keys[t]){return this._keys[t].downDuration(e);}else{return null;}},upDuration:function upDuration(t,e){if(this._keys[t]){return this._keys[t].upDuration(e);}else{return null;}},isDown:function isDown(t){if(this._keys[t]){return this._keys[t].isDown;}else{return null;}}};Object.defineProperty(o.Keyboard.prototype,"lastChar",{get:function get(){if(this.event.charCode===32){return"";}else{return String.fromCharCode(this.pressEvent.charCode);}}});Object.defineProperty(o.Keyboard.prototype,"lastKey",{get:function get(){return this._keys[this._k];}});o.Keyboard.prototype.constructor=o.Keyboard;o.KeyCode={A:"A".charCodeAt(0),B:"B".charCodeAt(0),C:"C".charCodeAt(0),D:"D".charCodeAt(0),E:"E".charCodeAt(0),F:"F".charCodeAt(0),G:"G".charCodeAt(0),H:"H".charCodeAt(0),I:"I".charCodeAt(0),J:"J".charCodeAt(0),K:"K".charCodeAt(0),L:"L".charCodeAt(0),M:"M".charCodeAt(0),N:"N".charCodeAt(0),O:"O".charCodeAt(0),P:"P".charCodeAt(0),Q:"Q".charCodeAt(0),R:"R".charCodeAt(0),S:"S".charCodeAt(0),T:"T".charCodeAt(0),U:"U".charCodeAt(0),V:"V".charCodeAt(0),W:"W".charCodeAt(0),X:"X".charCodeAt(0),Y:"Y".charCodeAt(0),Z:"Z".charCodeAt(0),ZERO:"0".charCodeAt(0),ONE:"1".charCodeAt(0),TWO:"2".charCodeAt(0),THREE:"3".charCodeAt(0),FOUR:"4".charCodeAt(0),FIVE:"5".charCodeAt(0),SIX:"6".charCodeAt(0),SEVEN:"7".charCodeAt(0),EIGHT:"8".charCodeAt(0),NINE:"9".charCodeAt(0),NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_ENTER:108,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,COLON:186,EQUALS:187,COMMA:188,UNDERSCORE:189,PERIOD:190,QUESTION_MARK:191,TILDE:192,OPEN_BRACKET:219,BACKWARD_SLASH:220,CLOSED_BRACKET:221,QUOTES:222,BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,CAPS_LOCK:20,ESC:27,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS:43,MINUS:44,INSERT:45,DELETE:46,HELP:47,NUM_LOCK:144};for(var r in o.KeyCode){if(o.KeyCode.hasOwnProperty(r)&&!r.match(/[a-z]/)){o.Keyboard[r]=o.KeyCode[r];}}/**\r\n    * @author       Richard Davey <rich@photonstorm.com>\r\n    * @copyright    2016 Photon Storm Ltd.\r\n    * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n    */o.Component=function(){};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.Angle=function(){};o.Component.Angle.prototype={angle:{get:function get(){return o.Math.wrapAngle(o.Math.radToDeg(this.rotation));},set:function set(t){this.rotation=o.Math.degToRad(o.Math.wrapAngle(t));}}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.Animation=function(){};o.Component.Animation.prototype={play:function play(t,e,i,s){if(this.animations){return this.animations.play(t,e,i,s);}}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.AutoCull=function(){};o.Component.AutoCull.prototype={autoCull:false,inCamera:{get:function get(){if(!this.autoCull&&!this.checkWorldBounds){this._bounds.copyFrom(this.getBounds());this._bounds.x+=this.game.camera.view.x;this._bounds.y+=this.game.camera.view.y;}return this.game.world.camera.view.intersects(this._bounds);}}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.Bounds=function(){};o.Component.Bounds.prototype={offsetX:{get:function get(){return this.anchor.x*this.width;}},offsetY:{get:function get(){return this.anchor.y*this.height;}},centerX:{get:function get(){return this.x-this.offsetX+this.width*0.5;},set:function set(t){this.x=t+this.offsetX-this.width*0.5;}},centerY:{get:function get(){return this.y-this.offsetY+this.height*0.5;},set:function set(t){this.y=t+this.offsetY-this.height*0.5;}},left:{get:function get(){return this.x-this.offsetX;},set:function set(t){this.x=t+this.offsetX;}},right:{get:function get(){return this.x+this.width-this.offsetX;},set:function set(t){this.x=t-this.width+this.offsetX;}},top:{get:function get(){return this.y-this.offsetY;},set:function set(t){this.y=t+this.offsetY;}},bottom:{get:function get(){return this.y+this.height-this.offsetY;},set:function set(t){this.y=t-this.height+this.offsetY;}},alignIn:function alignIn(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;switch(e){default:case o.TOP_LEFT:this.left=t.left-i;this.top=t.top-s;break;case o.TOP_CENTER:this.centerX=t.centerX+i;this.top=t.top-s;break;case o.TOP_RIGHT:this.right=t.right+i;this.top=t.top-s;break;case o.LEFT_CENTER:this.left=t.left-i;this.centerY=t.centerY+s;break;case o.CENTER:this.centerX=t.centerX+i;this.centerY=t.centerY+s;break;case o.RIGHT_CENTER:this.right=t.right+i;this.centerY=t.centerY+s;break;case o.BOTTOM_LEFT:this.left=t.left-i;this.bottom=t.bottom+s;break;case o.BOTTOM_CENTER:this.centerX=t.centerX+i;this.bottom=t.bottom+s;break;case o.BOTTOM_RIGHT:this.right=t.right+i;this.bottom=t.bottom+s;}return this;},alignTo:function alignTo(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;switch(e){default:case o.TOP_LEFT:this.left=t.left-i;this.bottom=t.top-s;break;case o.TOP_CENTER:this.centerX=t.centerX+i;this.bottom=t.top-s;break;case o.TOP_RIGHT:this.right=t.right+i;this.bottom=t.top-s;break;case o.LEFT_TOP:this.right=t.left-i;this.top=t.top-s;break;case o.LEFT_CENTER:this.right=t.left-i;this.centerY=t.centerY+s;break;case o.LEFT_BOTTOM:this.right=t.left-i;this.bottom=t.bottom+s;break;case o.RIGHT_TOP:this.left=t.right+i;this.top=t.top-s;break;case o.RIGHT_CENTER:this.left=t.right+i;this.centerY=t.centerY+s;break;case o.RIGHT_BOTTOM:this.left=t.right+i;this.bottom=t.bottom+s;break;case o.BOTTOM_LEFT:this.left=t.left-i;this.top=t.bottom+s;break;case o.BOTTOM_CENTER:this.centerX=t.centerX+i;this.top=t.bottom+s;break;case o.BOTTOM_RIGHT:this.right=t.right+i;this.top=t.bottom+s;}return this;}};o.Group.prototype.alignIn=o.Component.Bounds.prototype.alignIn;o.Group.prototype.alignTo=o.Component.Bounds.prototype.alignTo;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.BringToTop=function(){};o.Component.BringToTop.prototype.bringToTop=function(){if(this.parent){this.parent.bringToTop(this);}return this;};o.Component.BringToTop.prototype.sendToBack=function(){if(this.parent){this.parent.sendToBack(this);}return this;};o.Component.BringToTop.prototype.moveUp=function(){if(this.parent){this.parent.moveUp(this);}return this;};o.Component.BringToTop.prototype.moveDown=function(){if(this.parent){this.parent.moveDown(this);}return this;};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.Core=function(){};o.Component.Core.install=function(t){o.Utils.mixinPrototype(this,o.Component.Core.prototype);this.components={};for(var e=0;e<t.length;e++){var i=t[e];var s=false;if(i==="Destroy"){s=true;}o.Utils.mixinPrototype(this,o.Component[i].prototype,s);this.components[i]=true;}};o.Component.Core.init=function(t,e,i,s,n){this.game=t;this.key=s;this.data={};this.position.set(e,i);this.world=new o.Point(e,i);this.previousPosition=new o.Point(e,i);this.events=new o.Events(this);this._bounds=new o.Rectangle();if(this.components.PhysicsBody){this.body=this.body;}if(this.components.Animation){this.animations=new o.AnimationManager(this);}if(this.components.LoadTexture&&s!==null){this.loadTexture(s,n);}if(this.components.FixedToCamera){this.cameraOffset=new o.Point(e,i);}};o.Component.Core.preUpdate=function(){if(this.pendingDestroy){this.destroy();return;}this.previousPosition.set(this.world.x,this.world.y);this.previousRotation=this.rotation;if(!this.exists||!this.parent.exists){this.renderOrderID=-1;return false;}this.world.setTo(this.game.camera.x+this.worldTransform.tx,this.game.camera.y+this.worldTransform.ty);if(this.visible){this.renderOrderID=this.game.stage.currentRenderOrderID++;}if(this.animations){this.animations.update();}if(this.body){this.body.preUpdate();}for(var t=0;t<this.children.length;t++){this.children[t].preUpdate();}return true;};o.Component.Core.prototype={game:null,name:"",data:{},components:{},z:0,events:undefined,animations:undefined,key:"",world:null,debug:false,previousPosition:null,previousRotation:0,renderOrderID:0,fresh:true,pendingDestroy:false,_bounds:null,_exists:true,exists:{get:function get(){return this._exists;},set:function set(t){if(t){this._exists=true;if(this.body&&this.body.type===o.Physics.P2JS){this.body.addToWorld();}this.visible=true;}else{this._exists=false;if(this.body&&this.body.type===o.Physics.P2JS){this.body.removeFromWorld();}this.visible=false;}}},update:function update(){},postUpdate:function postUpdate(){if(this.customRender){this.key.render();}if(this.components.PhysicsBody){o.Component.PhysicsBody.postUpdate.call(this);}if(this.components.FixedToCamera){o.Component.FixedToCamera.postUpdate.call(this);}for(var t=0;t<this.children.length;t++){this.children[t].postUpdate();}}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.Crop=function(){};o.Component.Crop.prototype={cropRect:null,_crop:null,crop:function crop(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(t){if(e&&this.cropRect!==null){this.cropRect.setTo(t.x,t.y,t.width,t.height);}else if(e&&this.cropRect===null){this.cropRect=new o.Rectangle(t.x,t.y,t.width,t.height);}else{this.cropRect=t;}this.updateCrop();}else{this._crop=null;this.cropRect=null;this.resetFrame();}},updateCrop:function updateCrop(){if(this.cropRect){var t=this.texture.crop.x;var e=this.texture.crop.y;var i=this.texture.crop.width;var s=this.texture.crop.height;this._crop=o.Rectangle.clone(this.cropRect,this._crop);this._crop.x+=this._frame.x;this._crop.y+=this._frame.y;var n=Math.max(this._frame.x,this._crop.x);var a=Math.max(this._frame.y,this._crop.y);var r=Math.min(this._frame.right,this._crop.right)-n;var h=Math.min(this._frame.bottom,this._crop.bottom)-a;this.texture.crop.x=n;this.texture.crop.y=a;this.texture.crop.width=r;this.texture.crop.height=h;this.texture.frame.width=Math.min(r,this.cropRect.width);this.texture.frame.height=Math.min(h,this.cropRect.height);this.texture.width=this.texture.frame.width;this.texture.height=this.texture.frame.height;this.texture._updateUvs();if(this.tint!==16777215&&(t!==n||e!==a||i!==r||s!==h)){this.texture.requiresReTint=true;}}}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.Delta=function(){};o.Component.Delta.prototype={deltaX:{get:function get(){return this.world.x-this.previousPosition.x;}},deltaY:{get:function get(){return this.world.y-this.previousPosition.y;}},deltaZ:{get:function get(){return this.rotation-this.previousRotation;}}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.Destroy=function(){};o.Component.Destroy.prototype={destroyPhase:false,destroy:function destroy(t,e){if(this.game!==null&&!this.destroyPhase){if(t===undefined){t=true;}if(e===undefined){e=false;}this.destroyPhase=true;if(this.events){this.events.onDestroy$dispatch(this);}if(this.parent){if(this.parent instanceof o.Group){this.parent.remove(this);}else{this.parent.removeChild(this);}}if(this.input){this.input.destroy();}if(this.animations){this.animations.destroy();}if(this.body){this.body.destroy();}if(this.events){this.events.destroy();}this.game.tweens.removeFrom(this);var i=this.children.length;if(t){while(i--){this.children[i].destroy(t);}}else{while(i--){this.removeChild(this.children[i]);}}if(this._crop){this._crop=null;this.cropRect=null;}this._frame&&(this._frame=null);if(o.Video&&this.key instanceof o.Video){this.key.onChangeSource.remove(this.resizeFrame,this);}if(o.BitmapText&&this._glyphs){this._glyphs=[];}this.alive=false;this.exists=false;this.visible=false;this.filters=null;this.mask=null;this.game=null;this.data={};this.renderable=false;if(this.transformCallback){this.transformCallback=null;this.transformCallbackContext=null;}this.hitArea=null;this.parent=null;this.stage=null;this.worldTransform=null;this.filterArea=null;this._bounds=null;this._currentBounds=null;this._mask=null;this._destroyCachedSprite();if(e){this.texture.destroy(true);}this.destroyPhase=false;this.pendingDestroy=false;}}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Events=function(t){this.parent=t;};o.Events.prototype={destroy:function destroy(){this._parent=null;if(this._onDestroy){this._onDestroy.dispose();}if(this._onAddedToGroup){this._onAddedToGroup.dispose();}if(this._onRemovedFromGroup){this._onRemovedFromGroup.dispose();}if(this._onRemovedFromWorld){this._onRemovedFromWorld.dispose();}if(this._onKilled){this._onKilled.dispose();}if(this._onRevived){this._onRevived.dispose();}if(this._onEnterBounds){this._onEnterBounds.dispose();}if(this._onOutOfBounds){this._onOutOfBounds.dispose();}if(this._onInputOver){this._onInputOver.dispose();}if(this._onInputOut){this._onInputOut.dispose();}if(this._onInputDown){this._onInputDown.dispose();}if(this._onInputUp){this._onInputUp.dispose();}if(this._onDragStart){this._onDragStart.dispose();}if(this._onDragUpdate){this._onDragUpdate.dispose();}if(this._onDragStop){this._onDragStop.dispose();}if(this._onAnimationStart){this._onAnimationStart.dispose();}if(this._onAnimationComplete){this._onAnimationComplete.dispose();}if(this._onAnimationLoop){this._onAnimationLoop.dispose();}},onAddedToGroup:null,onRemovedFromGroup:null,onRemovedFromWorld:null,onDestroy:null,onKilled:null,onRevived:null,onOutOfBounds:null,onEnterBounds:null,onInputOver:null,onInputOut:null,onInputDown:null,onInputUp:null,onDragStart:null,onDragUpdate:null,onDragStop:null,onAnimationStart:null,onAnimationComplete:null,onAnimationLoop:null};o.Events.prototype.constructor=o.Events;for(var h in o.Events.prototype){if(o.Events.prototype.hasOwnProperty(h)&&h.indexOf("on")===0&&o.Events.prototype[h]===null){(function(t,e){"use strict";Object.defineProperty(o.Events.prototype,t,{get:function get(){return this[e]||(this[e]=new o.Signal());}});o.Events.prototype[t+"$dispatch"]=function(){if(this[e]){return this[e].dispatch.apply(this[e],arguments);}else{return null;}};})(h,"_"+h);}}/**\r\n    * @author       Richard Davey <rich@photonstorm.com>\r\n    * @copyright    2016 Photon Storm Ltd.\r\n    * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n    */o.Component.FixedToCamera=function(){};o.Component.FixedToCamera.postUpdate=function(){if(this.fixedToCamera){this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x;this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y;}};o.Component.FixedToCamera.prototype={_fixedToCamera:false,fixedToCamera:{get:function get(){return this._fixedToCamera;},set:function set(t){if(t){this._fixedToCamera=true;this.cameraOffset.set(this.x,this.y);}else{this._fixedToCamera=false;}}},cameraOffset:new o.Point()};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.Health=function(){};o.Component.Health.prototype={health:1,maxHealth:100,damage:function damage(t){if(this.alive){this.health-=t;if(this.health<=0){this.kill();}}return this;},setHealth:function setHealth(t){this.health=t;if(this.health>this.maxHealth){this.health=this.maxHealth;}return this;},heal:function heal(t){if(this.alive){this.health+=t;if(this.health>this.maxHealth){this.health=this.maxHealth;}}return this;}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.InCamera=function(){};o.Component.InCamera.prototype={inCamera:{get:function get(){return this.game.world.camera.view.intersects(this._bounds);}}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.InputEnabled=function(){};o.Component.InputEnabled.prototype={input:null,inputEnabled:{get:function get(){return this.input&&this.input.enabled;},set:function set(t){if(t){if(this.input===null){this.input=new o.InputHandler(this);this.input.start();}else if(this.input&&!this.input.enabled){this.input.start();}}else if(this.input&&this.input.enabled){this.input.stop();}}}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.InWorld=function(){};o.Component.InWorld.preUpdate=function(){if(this.autoCull||this.checkWorldBounds){this._bounds.copyFrom(this.getBounds());this._bounds.x+=this.game.camera.view.x;this._bounds.y+=this.game.camera.view.y;if(this.autoCull){if(this.game.world.camera.view.intersects(this._bounds)){this.renderable=true;this.game.world.camera.totalInView++;}else{this.renderable=false;if(this.outOfCameraBoundsKill){this.kill();return false;}}}if(this.checkWorldBounds){if(this._outOfBoundsFired&&this.game.world.bounds.intersects(this._bounds)){this._outOfBoundsFired=false;this.events.onEnterBounds$dispatch(this);}else if(!this._outOfBoundsFired&&!this.game.world.bounds.intersects(this._bounds)&&(this._outOfBoundsFired=true,this.events.onOutOfBounds$dispatch(this),this.outOfBoundsKill)){this.kill();return false;}}}return true;};o.Component.InWorld.prototype={checkWorldBounds:false,outOfBoundsKill:false,outOfCameraBoundsKill:false,_outOfBoundsFired:false,inWorld:{get:function get(){return this.game.world.bounds.intersects(this.getBounds());}}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.LifeSpan=function(){};o.Component.LifeSpan.preUpdate=function(){return!(this.lifespan>0)||!(this.lifespan-=this.game.time.physicsElapsedMS,this.lifespan<=0)||(this.kill(),false);};o.Component.LifeSpan.prototype={alive:true,lifespan:0,revive:function revive(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:100;this.alive=true;this.exists=true;this.visible=true;if(typeof this.setHealth=="function"){this.setHealth(t);}if(this.events){this.events.onRevived$dispatch(this);}return this;},kill:function kill(){this.alive=false;this.exists=false;this.visible=false;if(this.events){this.events.onKilled$dispatch(this);}return this;}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.LoadTexture=function(){};o.Component.LoadTexture.prototype={customRender:false,_frame:null,loadTexture:function loadTexture(t,e,i){if(t===o.PENDING_ATLAS){t=e;e=0;}else{e=e||0;}if((i||i===undefined)&&this.animations){this.animations.stop();}this.key=t;this.customRender=false;var s=this.game.cache;var n=true;var a=!this.texture.baseTexture.scaleMode;if(o.RenderTexture&&t instanceof o.RenderTexture){this.key=t.key;this.setTexture(t);}else if(o.BitmapData&&t instanceof o.BitmapData){this.customRender=true;this.setTexture(t.texture);n=s.hasFrameData(t.key,o.Cache.BITMAPDATA)?!this.animations.loadFrameData(s.getFrameData(t.key,o.Cache.BITMAPDATA),e):!this.animations.loadFrameData(t.frameData,0);}else if(o.Video&&t instanceof o.Video){this.customRender=true;var r=t.texture.valid;this.setTexture(t.texture);this.setFrame(t.texture.frame.clone());t.onChangeSource.add(this.resizeFrame,this);this.texture.valid=r;}else if(o.Tilemap&&t instanceof o.TilemapLayer){this.setTexture(PIXI.Texture.fromCanvas(t.canvas));}else if(t instanceof PIXI.Texture){this.setTexture(t);}else{var h=s.getImage(t,true);this.key=h.key;this.setTexture(new PIXI.Texture(h.base));this.texture.baseTexture.skipRender=t==="__default";n=!this.animations.loadFrameData(h.frameData,e);}if(n){this._frame=o.Rectangle.clone(this.texture.frame);}if(!a){this.texture.baseTexture.scaleMode=1;}},setFrame:function setFrame(t){this._frame=t;this.texture.frame.x=t.x;this.texture.frame.y=t.y;this.texture.frame.width=t.width;this.texture.frame.height=t.height;this.texture.crop.x=t.x;this.texture.crop.y=t.y;this.texture.crop.width=t.width;this.texture.crop.height=t.height;if(t.trimmed){if(this.texture.trim){this.texture.trim.x=t.spriteSourceSizeX;this.texture.trim.y=t.spriteSourceSizeY;this.texture.trim.width=t.sourceSizeW;this.texture.trim.height=t.sourceSizeH;}else{this.texture.trim={x:t.spriteSourceSizeX,y:t.spriteSourceSizeY,width:t.sourceSizeW,height:t.sourceSizeH};}this.texture.width=t.sourceSizeW;this.texture.height=t.sourceSizeH;this.texture.frame.width=t.sourceSizeW;this.texture.frame.height=t.sourceSizeH;}else if(!t.trimmed&&this.texture.trim){this.texture.trim=null;}if(this.cropRect){this.updateCrop();}this.texture.requiresReTint=true;this.texture._updateUvs();if(this.tilingTexture){this.refreshTexture=true;}},resizeFrame:function resizeFrame(t,e,i){this.texture.frame.resize(e,i);this.texture.setFrame(this.texture.frame);},resetFrame:function resetFrame(){if(this._frame){this.setFrame(this._frame);}},frame:{get:function get(){return this.animations.frame;},set:function set(t){this.animations.frame=t;}},frameName:{get:function get(){return this.animations.frameName;},set:function set(t){this.animations.frameName=t;}}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.Overlap=function(){};o.Component.Overlap.prototype={overlap:function overlap(t){return o.Rectangle.intersects(this.getBounds(),t.getBounds());}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.PhysicsBody=function(){};o.Component.PhysicsBody.preUpdate=function(){if(this.fresh&&this.exists){this.world.setTo(this.parent.position.x+this.position.x,this.parent.position.y+this.position.y);this.worldTransform.tx=this.world.x;this.worldTransform.ty=this.world.y;this.previousPosition.set(this.world.x,this.world.y);this.previousRotation=this.rotation;if(this.body){this.body.preUpdate();}this.fresh=false;return false;}else{this.previousPosition.set(this.world.x,this.world.y);this.previousRotation=this.rotation;return!!this._exists&&!!this.parent.exists||(this.renderOrderID=-1,false);}};o.Component.PhysicsBody.postUpdate=function(){if(this.exists&&this.body){this.body.postUpdate();}};o.Component.PhysicsBody.prototype={body:null,x:{get:function get(){return this.position.x;},set:function set(t){this.position.x=t;if(this.body&&!this.body.dirty){this.body._reset=true;}}},y:{get:function get(){return this.position.y;},set:function set(t){this.position.y=t;if(this.body&&!this.body.dirty){this.body._reset=true;}}}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.Reset=function(){};o.Component.Reset.prototype.reset=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;this.world.set(t,e);this.position.set(t,e);this.fresh=true;this.exists=true;this.visible=true;this.renderable=true;if(this.components.InWorld){this._outOfBoundsFired=false;}if(this.components.LifeSpan){this.alive=true;this.health=i;}if(this.components.PhysicsBody&&this.body){this.body.reset(t,e,false,false);}return this;};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.ScaleMinMax=function(){};o.Component.ScaleMinMax.prototype={transformCallback:null,transformCallbackContext:this,scaleMin:null,scaleMax:null,checkTransform:function checkTransform(t){if(this.scaleMin){if(t.a<this.scaleMin.x){t.a=this.scaleMin.x;}if(t.d<this.scaleMin.y){t.d=this.scaleMin.y;}}if(this.scaleMax){if(t.a>this.scaleMax.x){t.a=this.scaleMax.x;}if(t.d>this.scaleMax.y){t.d=this.scaleMax.y;}}},setScaleMinMax:function setScaleMinMax(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:i=s=t;var i=arguments.length>2?arguments[2]:undefined;var s=arguments.length>3?arguments[3]:undefined;if(t===null){this.scaleMin=null;}else if(this.scaleMin){this.scaleMin.set(t,e);}else{this.scaleMin=new o.Point(t,e);}if(i===null){this.scaleMax=null;}else if(this.scaleMax){this.scaleMax.set(i,s);}else{this.scaleMax=new o.Point(i,s);}if(this.scaleMin===null){this.transformCallback=null;}else{this.transformCallback=this.checkTransform;this.transformCallbackContext=this;}}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Component.Smoothed=function(){};o.Component.Smoothed.prototype={smoothed:{get:function get(){return!this.texture.baseTexture.scaleMode;},set:function set(t){if(t){if(this.texture){this.texture.baseTexture.scaleMode=0;}}else if(this.texture){this.texture.baseTexture.scaleMode=1;}}}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.GameObjectFactory=function(t){this.game=t;this.world=this.game.world;};o.GameObjectFactory.prototype={existing:function existing(t){return this.world.add(t);},weapon:function weapon(t,e,i,s){var n=this.game.plugins.add(o.Weapon);n.createBullets(t,e,i,s);return n;},image:function image(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:this.world;return n.add(new o.Image(this.game,t,e,i,s));},sprite:function sprite(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:this.world;return n.create(t,e,i,s);},creature:function creature(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:this.world;var a=new o.Creature(this.game,t,e,i,s);n.add(a);return a;},tween:function tween(t){return this.game.tweens.create(t);},group:function group(t,e,i,s,n){return new o.Group(this.game,t,e,i,s,n);},physicsGroup:function physicsGroup(t,e,i,s){return new o.Group(this.game,e,i,s,true,t);},spriteBatch:function spriteBatch(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"group";var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return new o.SpriteBatch(this.game,t,e,i);},audio:function audio(t,e,i,s){return this.game.sound.add(t,e,i,s);},sound:function sound(t,e,i,s){return this.game.sound.add(t,e,i,s);},audioSprite:function audioSprite(t){return this.game.sound.addSprite(t);},tileSprite:function tileSprite(t,e,i,s,n,a){var r=arguments.length>6&&arguments[6]!==undefined?arguments[6]:this.world;return r.add(new o.TileSprite(this.game,t,e,i,s,n,a));},rope:function rope(t,e,i,s,n){var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:this.world;return a.add(new o.Rope(this.game,t,e,i,s,n));},text:function text(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:this.world;return n.add(new o.Text(this.game,t,e,i,s));},button:function button(t,e,i,s,n,a,r,h,l){var c=arguments.length>9&&arguments[9]!==undefined?arguments[9]:this.world;return c.add(new o.Button(this.game,t,e,i,s,n,a,r,h,l));},graphics:function graphics(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.world;return i.add(new o.Graphics(this.game,t,e));},emitter:function emitter(t,e,i){return this.game.particles.add(new o.Particles.Arcade.Emitter(this.game,t,e,i));},retroFont:function retroFont(t,e,i,s,n,a,r,h,l){return new o.RetroFont(this.game,t,e,i,s,n,a,r,h,l);},bitmapText:function bitmapText(t,e,i,s,n){var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:this.world;return a.add(new o.BitmapText(this.game,t,e,i,s,n));},tilemap:function tilemap(t,e,i,s,n){return new o.Tilemap(this.game,t,e,i,s,n);},renderTexture:function renderTexture(t,e,i,s){if(i===undefined||i===""){i=this.game.rnd.uuid();}if(s===undefined){s=false;}var n=new o.RenderTexture(this.game,t,e,i);if(s){this.game.cache.addRenderTexture(i,n);}return n;},video:function video(t,e){return new o.Video(this.game,t,e);},bitmapData:function bitmapData(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(i===undefined||i===""){i=this.game.rnd.uuid();}var n=new o.BitmapData(this.game,i,t,e);if(s){this.game.cache.addBitmapData(i,n);}return n;},filter:function filter(t){var e=Array.prototype.slice.call(arguments,1);var t=new o.Filter[t](this.game);t.init.apply(t,e);return t;},plugin:function plugin(t){return this.game.plugins.add(t);}};o.GameObjectFactory.prototype.constructor=o.GameObjectFactory;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.GameObjectCreator=function(t){this.game=t;this.world=this.game.world;};o.GameObjectCreator.prototype={image:function image(t,e,i,s){return new o.Image(this.game,t,e,i,s);},sprite:function sprite(t,e,i,s){return new o.Sprite(this.game,t,e,i,s);},tween:function tween(t){return new o.Tween(t,this.game,this.game.tweens);},group:function group(t,e,i,s,n){return new o.Group(this.game,t,e,i,s,n);},spriteBatch:function spriteBatch(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"group";var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return new o.SpriteBatch(this.game,t,e,i);},audio:function audio(t,e,i,s){return this.game.sound.add(t,e,i,s);},audioSprite:function audioSprite(t){return this.game.sound.addSprite(t);},sound:function sound(t,e,i,s){return this.game.sound.add(t,e,i,s);},tileSprite:function tileSprite(t,e,i,s,n,a){return new o.TileSprite(this.game,t,e,i,s,n,a);},rope:function rope(t,e,i,s,n){return new o.Rope(this.game,t,e,i,s,n);},text:function text(t,e,i,s){return new o.Text(this.game,t,e,i,s);},button:function button(t,e,i,s,n,a,r,h,l){return new o.Button(this.game,t,e,i,s,n,a,r,h,l);},graphics:function graphics(t,e){return new o.Graphics(this.game,t,e);},emitter:function emitter(t,e,i){return new o.Particles.Arcade.Emitter(this.game,t,e,i);},retroFont:function retroFont(t,e,i,s,n,a,r,h,l){return new o.RetroFont(this.game,t,e,i,s,n,a,r,h,l);},bitmapText:function bitmapText(t,e,i,s,n,a){return new o.BitmapText(this.game,t,e,i,s,n,a);},tilemap:function tilemap(t,e,i,s,n){return new o.Tilemap(this.game,t,e,i,s,n);},renderTexture:function renderTexture(t,e,i,s){if(i===undefined||i===""){i=this.game.rnd.uuid();}if(s===undefined){s=false;}var n=new o.RenderTexture(this.game,t,e,i);if(s){this.game.cache.addRenderTexture(i,n);}return n;},bitmapData:function bitmapData(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(i===undefined||i===""){i=this.game.rnd.uuid();}var n=new o.BitmapData(this.game,i,t,e);if(s){this.game.cache.addBitmapData(i,n);}return n;},filter:function filter(t){var e=Array.prototype.slice.call(arguments,1);var t=new o.Filter[t](this.game);t.init.apply(t,e);return t;}};o.GameObjectCreator.prototype.constructor=o.GameObjectCreator;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Sprite=function(t,e,i,s,n){e=e||0;i=i||0;s=s||null;n=n||null;this.type=o.SPRITE;this.physicsType=o.SPRITE;PIXI.Sprite.call(this,o.Cache.DEFAULT);o.Component.Core.init.call(this,t,e,i,s,n);};o.Sprite.prototype=Object.create(PIXI.Sprite.prototype);o.Sprite.prototype.constructor=o.Sprite;o.Component.Core.install.call(o.Sprite.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Crop","Delta","Destroy","FixedToCamera","Health","InCamera","InputEnabled","InWorld","LifeSpan","LoadTexture","Overlap","PhysicsBody","Reset","ScaleMinMax","Smoothed"]);o.Sprite.prototype.preUpdatePhysics=o.Component.PhysicsBody.preUpdate;o.Sprite.prototype.preUpdateLifeSpan=o.Component.LifeSpan.preUpdate;o.Sprite.prototype.preUpdateInWorld=o.Component.InWorld.preUpdate;o.Sprite.prototype.preUpdateCore=o.Component.Core.preUpdate;o.Sprite.prototype.preUpdate=function(){return!!this.preUpdatePhysics()&&!!this.preUpdateLifeSpan()&&!!this.preUpdateInWorld()&&this.preUpdateCore();};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Image=function(t,e,i,s,n){e=e||0;i=i||0;s=s||null;n=n||null;this.type=o.IMAGE;PIXI.Sprite.call(this,o.Cache.DEFAULT);o.Component.Core.init.call(this,t,e,i,s,n);};o.Image.prototype=Object.create(PIXI.Sprite.prototype);o.Image.prototype.constructor=o.Image;o.Component.Core.install.call(o.Image.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Crop","Destroy","FixedToCamera","InputEnabled","LifeSpan","LoadTexture","Overlap","Reset","ScaleMinMax","Smoothed"]);o.Image.prototype.preUpdateInWorld=o.Component.InWorld.preUpdate;o.Image.prototype.preUpdateCore=o.Component.Core.preUpdate;o.Image.prototype.preUpdate=function(){return!!this.preUpdateInWorld()&&this.preUpdateCore();};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Button=function(t,e,i,s,n,a,r,h,l,c){e=e||0;i=i||0;s=s||null;n=n||null;a=a||this;o.Image.call(this,t,e,i,s,h);this.type=o.BUTTON;this.physicsType=o.SPRITE;this._onOverFrame=null;this._onOutFrame=null;this._onDownFrame=null;this._onUpFrame=null;this.onOverSound=null;this.onOutSound=null;this.onDownSound=null;this.onUpSound=null;this.onOverSoundMarker="";this.onOutSoundMarker="";this.onDownSoundMarker="";this.onUpSoundMarker="";this.onInputOver=new o.Signal();this.onInputOut=new o.Signal();this.onInputDown=new o.Signal();this.onInputUp=new o.Signal();this.onOverMouseOnly=true;this.justReleasedPreventsOver=o.PointerMode.TOUCH;this.freezeFrames=false;this.forceOut=false;this.inputEnabled=true;this.input.start(0,true);this.input.useHandCursor=true;this.setFrames(r,h,l,c);if(n!==null){this.onInputUp.add(n,a);}this.events.onInputOver.add(this.onInputOverHandler,this);this.events.onInputOut.add(this.onInputOutHandler,this);this.events.onInputDown.add(this.onInputDownHandler,this);this.events.onInputUp.add(this.onInputUpHandler,this);this.events.onRemovedFromWorld.add(this.removedFromWorld,this);};o.Button.prototype=Object.create(o.Image.prototype);o.Button.prototype.constructor=o.Button;var l="Over";var c="Out";var u="Down";var d="Up";o.Button.prototype.clearFrames=function(){this.setFrames(null,null,null,null);};o.Button.prototype.removedFromWorld=function(){this.inputEnabled=false;};o.Button.prototype.setStateFrame=function(t,e,i){var s="_on"+t+"Frame";if(e!==null){this[s]=e;if(i){this.changeStateFrame(t);}}else{this[s]=null;}};o.Button.prototype.changeStateFrame=function(t){if(this.freezeFrames){return false;}var e="_on"+t+"Frame";var i=this[e];if(typeof i=="string"){this.frameName=i;return true;}else{return typeof i=="number"&&(this.frame=i,true);}};o.Button.prototype.setFrames=function(t,e,i,s){this.setStateFrame("Over",t,this.input.pointerOver());this.setStateFrame("Out",e,!this.input.pointerOver());this.setStateFrame("Down",i,this.input.pointerDown());this.setStateFrame("Up",s,this.input.pointerUp());};o.Button.prototype.setStateSound=function(t,e,i){var s="on"+t+"Sound";var n="on"+t+"SoundMarker";if(e instanceof o.Sound||e instanceof o.AudioSprite){this[s]=e;this[n]=typeof i=="string"?i:"";}else{this[s]=null;this[n]="";}};o.Button.prototype.playStateSound=function(t){var e="on"+t+"Sound";var i=this[e];if(i){var s="on"+t+"SoundMarker";var n=this[s];i.play(n);return true;}return false;};o.Button.prototype.setSounds=function(t,e,i,s,n,o,a,r){this.setStateSound("Over",t,e);this.setStateSound("Out",n,o);this.setStateSound("Down",i,s);this.setStateSound("Up",a,r);};o.Button.prototype.setOverSound=function(t,e){this.setStateSound("Over",t,e);};o.Button.prototype.setOutSound=function(t,e){this.setStateSound("Out",t,e);};o.Button.prototype.setDownSound=function(t,e){this.setStateSound("Down",t,e);};o.Button.prototype.setUpSound=function(t,e){this.setStateSound("Up",t,e);};o.Button.prototype.onInputOverHandler=function(t,e){if(!e.justReleased()||(this.justReleasedPreventsOver&e.pointerMode)!==e.pointerMode){this.changeStateFrame("Over");if(!this.onOverMouseOnly||!!e.isMouse){this.playStateSound("Over");if(this.onInputOver){this.onInputOver.dispatch(this,e);}}}};o.Button.prototype.onInputOutHandler=function(t,e){this.changeStateFrame("Out");this.playStateSound("Out");if(this.onInputOut){this.onInputOut.dispatch(this,e);}};o.Button.prototype.onInputDownHandler=function(t,e){this.changeStateFrame("Down");this.playStateSound("Down");if(this.onInputDown){this.onInputDown.dispatch(this,e);}};o.Button.prototype.onInputUpHandler=function(t,e,i){this.playStateSound("Up");if(this.onInputUp){this.onInputUp.dispatch(this,e,i);}if(!this.freezeFrames){if(this.forceOut===true||(this.forceOut&e.pointerMode)===e.pointerMode){this.changeStateFrame("Out");}else{var s=this.changeStateFrame("Up");if(!s){if(i){this.changeStateFrame("Over");}else{this.changeStateFrame("Out");}}}}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.SpriteBatch=function(t,e,i,s){if(e===undefined||e===null){e=t.world;}PIXI.SpriteBatch.call(this);o.Group.call(this,t,e,i,s);this.type=o.SPRITEBATCH;};o.SpriteBatch.prototype=o.Utils.extend(true,o.SpriteBatch.prototype,PIXI.SpriteBatch.prototype,o.Group.prototype);o.SpriteBatch.prototype.constructor=o.SpriteBatch;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.BitmapData=function(t,e,i,s,n){if(i===undefined||i===0){i=256;}if(s===undefined||s===0){s=256;}if(n===undefined){n=false;}this.game=t;this.key=e;this.width=i;this.height=s;this.canvas=o.Canvas.create(this,i,s,null,n);this.context=this.canvas.getContext("2d",{alpha:true});this.ctx=this.context;this.smoothProperty=t.renderType===o.CANVAS?t.renderer.renderSession.smoothProperty:o.Canvas.getSmoothingPrefix(this.context);this.imageData=this.context.getImageData(0,0,i,s);this.data=null;if(this.imageData){this.data=this.imageData.data;}this.pixels=null;if(this.data){if(this.imageData.data.buffer){this.buffer=this.imageData.data.buffer;this.pixels=new Uint32Array(this.buffer);}else if(window.ArrayBuffer){this.buffer=new ArrayBuffer(this.imageData.data.length);this.pixels=new Uint32Array(this.buffer);}else{this.pixels=this.imageData.data;}}this.baseTexture=new PIXI.BaseTexture(this.canvas);this.texture=new PIXI.Texture(this.baseTexture);this.frameData=new o.FrameData();this.textureFrame=this.frameData.addFrame(new o.Frame(0,0,0,i,s,"bitmapData"));this.texture.frame=this.textureFrame;this.type=o.BITMAPDATA;this.disableTextureUpload=false;this.dirty=false;this.cls=this.clear;this._image=null;this._pos=new o.Point();this._size=new o.Point();this._scale=new o.Point();this._rotate=0;this._alpha={prev:1,current:1};this._anchor=new o.Point();this._tempR=0;this._tempG=0;this._tempB=0;this._circle=new o.Circle();this._swapCanvas=undefined;};o.BitmapData.prototype={move:function move(t,e,i){if(t!==0){this.moveH(t,i);}if(e!==0){this.moveV(e,i);}return this;},moveH:function moveH(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(this._swapCanvas===undefined){this._swapCanvas=PIXI.CanvasPool.create(this,this.width,this.height);}var i=this._swapCanvas;var s=i.getContext("2d");var n=this.height;var o=this.canvas;s.clearRect(0,0,this.width,this.height);if(t<0){t=Math.abs(t);var a=this.width-t;if(e){s.drawImage(o,0,0,t,n,a,0,t,n);}s.drawImage(o,t,0,a,n,0,0,a,n);}else{var a=this.width-t;if(e){s.drawImage(o,a,0,t,n,0,0,t,n);}s.drawImage(o,0,0,a,n,t,0,a,n);}this.clear();return this.copy(this._swapCanvas);},moveV:function moveV(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(this._swapCanvas===undefined){this._swapCanvas=PIXI.CanvasPool.create(this,this.width,this.height);}var i=this._swapCanvas;var s=i.getContext("2d");var n=this.width;var o=this.canvas;s.clearRect(0,0,this.width,this.height);if(t<0){t=Math.abs(t);var a=this.height-t;if(e){s.drawImage(o,0,0,n,t,0,a,n,t);}s.drawImage(o,0,t,n,a,0,0,n,a);}else{var a=this.height-t;if(e){s.drawImage(o,0,a,n,t,0,0,n,t);}s.drawImage(o,0,0,n,a,0,t,n,a);}this.clear();return this.copy(this._swapCanvas);},add:function add(t){if(Array.isArray(t)){for(var e=0;e<t.length;e++){if(t[e].loadTexture){t[e].loadTexture(this);}}}else{t.loadTexture(this);}return this;},load:function load(t){if(typeof t=="string"){t=this.game.cache.getImage(t);}if(t){this.resize(t.width,t.height);this.cls();this.draw(t);this.update();return this;}},clear:function clear(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.width;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:this.height;this.context.clearRect(t,e,i,s);this.dirty=true;return this;},fill:function fill(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;this.context.fillStyle="rgba("+t+","+e+","+i+","+s+")";this.context.fillRect(0,0,this.width,this.height);this.dirty=true;return this;},generateTexture:function generateTexture(t){var e=new Image();e.src=this.canvas.toDataURL("image/png");var i=this.game.cache.addImage(t,"",e);return new PIXI.Texture(i.base);},resize:function resize(t,e){if(t!==this.width||e!==this.height){this.width=t;this.height=e;this.canvas.width=t;this.canvas.height=e;if(this._swapCanvas!==undefined){this._swapCanvas.width=t;this._swapCanvas.height=e;}this.baseTexture.width=t;this.baseTexture.height=e;this.textureFrame.width=t;this.textureFrame.height=e;this.texture.width=t;this.texture.height=e;this.texture.crop.width=t;this.texture.crop.height=e;this.update();this.dirty=true;}return this;},update:function update(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Math.max(1,this.width);var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:Math.max(1,this.height);this.imageData=this.context.getImageData(t,e,i,s);this.data=this.imageData.data;if(this.imageData.data.buffer){this.buffer=this.imageData.data.buffer;this.pixels=new Uint32Array(this.buffer);}else if(window.ArrayBuffer){this.buffer=new ArrayBuffer(this.imageData.data.length);this.pixels=new Uint32Array(this.buffer);}else{this.pixels=this.imageData.data;}return this;},processPixelRGB:function processPixelRGB(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:this.width;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:this.height;var r=i+n;for(var h=s+a,l=o.Color.createColor(),c={r:0,g:0,b:0,a:0},u=false,d=s;d<h;d++){for(var p=i;p<r;p++){o.Color.unpackPixel(this.getPixel32(p,d),l);if((c=t.call(e,l,p,d))!==false&&c!==null&&c!==undefined){this.setPixel32(p,d,c.r,c.g,c.b,c.a,false);u=true;}}}if(u){this.context.putImageData(this.imageData,0,0);this.dirty=true;}return this;},processPixel:function processPixel(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:this.width;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:this.height;var a=i+n;for(var r=s+o,h=0,l=0,c=false,u=s;u<r;u++){for(var d=i;d<a;d++){h=this.getPixel32(d,u);if((l=t.call(e,h,d,u))!==h){this.pixels[u*this.width+d]=l;c=true;}}}if(c){this.context.putImageData(this.imageData,0,0);this.dirty=true;}return this;},replaceRGB:function replaceRGB(t,e,i,s,n,a,r,h,l){var c=0;var u=0;var d=this.width;var p=this.height;var f=o.Color.packPixel(t,e,i,s);if(l!==undefined&&l instanceof o.Rectangle){c=l.x;u=l.y;d=l.width;p=l.height;}for(var y=0;y<p;y++){for(var g=0;g<d;g++){if(this.getPixel32(c+g,u+y)===f){this.setPixel32(c+g,u+y,n,a,r,h,false);}}}this.context.putImageData(this.imageData,0,0);this.dirty=true;return this;},setHSL:function setHSL(t,e,i,s){var n=t||t===0;var a=e||e===0;var r=i||i===0;if(n||a||r){if(s===undefined){s=new o.Rectangle(0,0,this.width,this.height);}var h=o.Color.createColor();for(var l=s.y;l<s.bottom;l++){for(var c=s.x;c<s.right;c++){o.Color.unpackPixel(this.getPixel32(c,l),h,true);if(n){h.h=t;}if(a){h.s=e;}if(r){h.l=i;}o.Color.HSLtoRGB(h.h,h.s,h.l,h);this.setPixel32(c,l,h.r,h.g,h.b,h.a,false);}}this.context.putImageData(this.imageData,0,0);this.dirty=true;return this;}},shiftHSL:function shiftHSL(t,e,i,s){if(t===undefined||t===null){t=false;}if(e===undefined||e===null){e=false;}if(i===undefined||i===null){i=false;}if(t||e||i){if(s===undefined){s=new o.Rectangle(0,0,this.width,this.height);}var n=o.Color.createColor();for(var a=s.y;a<s.bottom;a++){for(var r=s.x;r<s.right;r++){o.Color.unpackPixel(this.getPixel32(r,a),n,true);if(t){n.h=this.game.math.wrap(n.h+t,0,1);}if(e){n.s=this.game.math.clamp(n.s+e,0,1);}if(i){n.l=this.game.math.clamp(n.l+i,0,1);}o.Color.HSLtoRGB(n.h,n.s,n.l,n);this.setPixel32(r,a,n.r,n.g,n.b,n.a,false);}}this.context.putImageData(this.imageData,0,0);this.dirty=true;return this;}},setPixel32:function setPixel32(t,e,i,s,n,a){var r=arguments.length>6&&arguments[6]!==undefined?arguments[6]:true;if(t>=0&&t<=this.width&&e>=0&&e<=this.height){if(o.Device.LITTLE_ENDIAN){this.pixels[e*this.width+t]=a<<24|n<<16|s<<8|i;}else{this.pixels[e*this.width+t]=i<<24|s<<16|n<<8|a;}if(r){this.context.putImageData(this.imageData,0,0);this.dirty=true;}}return this;},setPixel:function setPixel(t,e,i,s,n,o){return this.setPixel32(t,e,i,s,n,255,o);},getPixel:function getPixel(t,e,i){i||(i=o.Color.createColor());var s=~~(t+e*this.width);s*=4;i.r=this.data[s];i.g=this.data[++s];i.b=this.data[++s];i.a=this.data[++s];return i;},getPixel32:function getPixel32(t,e){if(t>=0&&t<=this.width&&e>=0&&e<=this.height){return this.pixels[e*this.width+t];}},getPixelRGB:function getPixelRGB(t,e,i,s,n){return o.Color.unpackPixel(this.getPixel32(t,e),i,s,n);},getPixels:function getPixels(t){return this.context.getImageData(t.x,t.y,t.width,t.height);},getFirstPixel:function getFirstPixel(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var e=o.Color.createColor();var i=0;var s=0;var n=1;var a=false;if(t===1){n=-1;s=this.height;}else if(t===3){n=-1;i=this.width;}do{o.Color.unpackPixel(this.getPixel32(i,s),e);if(t===0||t===1){if(++i===this.width){i=0;if((s+=n)>=this.height||s<=0){a=true;}}}else if(t===2||t===3){if(++s===this.height){s=0;if((i+=n)>=this.width||i<=0){a=true;}}}}while(e.a===0&&!a);e.x=i;e.y=s;return e;},getBounds:function getBounds(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new o.Rectangle();t.x=this.getFirstPixel(2).x;if(t.x===this.width){return t.setTo(0,0,0,0);}else{t.y=this.getFirstPixel(0).y;t.width=this.getFirstPixel(3).x-t.x+1;t.height=this.getFirstPixel(1).y-t.y+1;return t;}},addToWorld:function addToWorld(t,e,i,s,n,o){n=n||1;o=o||1;var a=this.game.add.image(t,e,this);a.anchor.set(i,s);a.scale.set(n,o);return a;},copy:function copy(t,e,i,s,n,a,r,h,l,c,u,d,p,f,y,g,m){if(t===undefined||t===null){t=this;}if(t instanceof o.RenderTexture||t instanceof PIXI.RenderTexture){t=t.getCanvas();}this._image=t;if(t instanceof o.Sprite||t instanceof o.Image||t instanceof o.Text||t instanceof PIXI.Sprite){this._pos.set(t.texture.crop.x,t.texture.crop.y);this._size.set(t.texture.crop.width,t.texture.crop.height);this._scale.set(t.scale.x,t.scale.y);this._anchor.set(t.anchor.x,t.anchor.y);this._rotate=t.rotation;this._alpha.current=t.alpha;if(t.texture instanceof o.RenderTexture||t.texture instanceof PIXI.RenderTexture){this._image=t.texture.getCanvas();}else{this._image=t.texture.baseTexture.source;}if(a===undefined||a===null){a=t.x;}if(r===undefined||r===null){r=t.y;}if(t.texture.trim){a+=t.texture.trim.x-t.anchor.x*t.texture.trim.width;r+=t.texture.trim.y-t.anchor.y*t.texture.trim.height;}if(t.tint!==16777215){if(t.cachedTint!==t.tint){t.cachedTint=t.tint;t.tintedTexture=PIXI.CanvasTinter.getTintedTexture(t,t.tint);}this._image=t.tintedTexture;this._pos.set(0);}}else{this._pos.set(0);this._scale.set(1);this._anchor.set(0);this._rotate=0;this._alpha.current=1;if(t instanceof o.BitmapData){this._image=t.canvas;}else if(typeof t=="string"){if((t=this.game.cache.getImage(t))===null){return;}this._image=t;}this._size.set(this._image.width,this._image.height);}if(e===undefined||e===null){e=0;}if(i===undefined||i===null){i=0;}if(s){this._size.x=s;}if(n){this._size.y=n;}if(a===undefined||a===null){a=e;}if(r===undefined||r===null){r=i;}if(h===undefined||h===null){h=this._size.x;}if(l===undefined||l===null){l=this._size.y;}if(typeof c=="number"){this._rotate=c;}if(typeof u=="number"){this._anchor.x=u;}if(typeof d=="number"){this._anchor.y=d;}if(typeof p=="number"){this._scale.x=p;}if(typeof f=="number"){this._scale.y=f;}if(typeof y=="number"){this._alpha.current=y;}if(g===undefined){g=null;}if(m===undefined){m=false;}if(!(this._alpha.current<=0)&&this._scale.x!==0&&this._scale.y!==0&&this._size.x!==0&&this._size.y!==0){var v=this.context;this._alpha.prev=v.globalAlpha;v.save();v.globalAlpha=this._alpha.current;if(g){this.op=g;}if(m){a|=0;r|=0;}v.translate(a,r);v.scale(this._scale.x,this._scale.y);v.rotate(this._rotate);v.drawImage(this._image,this._pos.x+e,this._pos.y+i,this._size.x,this._size.y,-h*this._anchor.x,-l*this._anchor.y,h,l);v.restore();v.globalAlpha=this._alpha.prev;this.dirty=true;return this;}},copyTransform:function copyTransform(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!t.hasOwnProperty("worldTransform")||!t.worldVisible||t.worldAlpha===0){return this;}var s=t.worldTransform;this._pos.set(t.texture.crop.x,t.texture.crop.y);this._size.set(t.texture.crop.width,t.texture.crop.height);if(s.a===0||s.d===0||this._size.x===0||this._size.y===0){return this;}if(t.texture instanceof o.RenderTexture||t.texture instanceof PIXI.RenderTexture){this._image=t.texture.getCanvas();}else{this._image=t.texture.baseTexture.source;}var n=s.tx;var a=s.ty;if(t.texture.trim){n+=t.texture.trim.x-t.anchor.x*t.texture.trim.width;a+=t.texture.trim.y-t.anchor.y*t.texture.trim.height;}if(t.tint!==16777215){if(t.cachedTint!==t.tint){t.cachedTint=t.tint;t.tintedTexture=PIXI.CanvasTinter.getTintedTexture(t,t.tint);}this._image=t.tintedTexture;this._pos.set(0);}if(i){n|=0;a|=0;}var r=this.context;this._alpha.prev=r.globalAlpha;r.save();r.globalAlpha=this._alpha.current;if(e){this.op=e;}r[this.smoothProperty]=t.texture.baseTexture.scaleMode===PIXI.scaleModes.LINEAR;r.setTransform(s.a,s.b,s.c,s.d,n,a);r.drawImage(this._image,this._pos.x,this._pos.y,this._size.x,this._size.y,-this._size.x*t.anchor.x,-this._size.y*t.anchor.y,this._size.x,this._size.y);r.restore();r.globalAlpha=this._alpha.prev;this.dirty=true;return this;},copyRect:function copyRect(t,e,i,s,n,o,a){return this.copy(t,e.x,e.y,e.width,e.height,i,s,e.width,e.height,0,0,0,1,1,n,o,a);},draw:function draw(t,e,i,s,n,o,a){return this.copy(t,null,null,null,null,e,i,s,n,null,null,null,null,null,null,o,a);},drawGroup:function drawGroup(t,e,i){if(t.total>0){t.forEachExists(this.drawGroupProxy,this,e,i);}return this;},drawGroupProxy:function drawGroupProxy(t,e,i){if(t.hasOwnProperty("texture")){this.copyTransform(t,e,i);}if(t.type===o.GROUP&&t.exists){this.drawGroup(t,e,i);}else if(t.hasOwnProperty("children")&&t.children.length>0){for(var s=0;s<t.children.length;s++){if(t.children[s].exists){this.copyTransform(t.children[s],e,i);}}}},drawFull:function drawFull(t,e,i){if(t.worldVisible===false||t.worldAlpha===0||t.hasOwnProperty("exists")&&t.exists===false){return this;}if(t.type!==o.GROUP&&t.type!==o.EMITTER&&t.type!==o.BITMAPTEXT){if(t.type===o.GRAPHICS){var s=t.getBounds();this.ctx.save();this.ctx.translate(s.x,s.y);PIXI.CanvasGraphics.renderGraphics(t,this.ctx);this.ctx.restore();}else{this.copy(t,null,null,null,null,t.worldPosition.x,t.worldPosition.y,null,null,t.worldRotation,null,null,t.worldScale.x,t.worldScale.y,t.worldAlpha,e,i);}}if(t.children){for(var n=0;n<t.children.length;n++){this.drawFull(t.children[n],e,i);}}return this;},shadow:function shadow(t,e,i,s){var n=this.context;if(t===undefined||t===null){n.shadowColor="rgba(0,0,0,0)";}else{n.shadowColor=t;n.shadowBlur=e||5;n.shadowOffsetX=i||10;n.shadowOffsetY=s||10;}return this;},alphaMask:function alphaMask(t,e,i,s){if(s===undefined||s===null){this.draw(e).blendSourceAtop();}else{this.draw(e,s.x,s.y,s.width,s.height).blendSourceAtop();}if(i===undefined||i===null){this.draw(t).blendReset();}else{this.draw(t,i.x,i.y,i.width,i.height).blendReset();}return this;},extract:function extract(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:255;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:e;var r=arguments.length>7&&arguments[7]!==undefined?arguments[7]:i;var h=arguments.length>8&&arguments[8]!==undefined?arguments[8]:s;if(o){t.resize(this.width,this.height);}this.processPixelRGB(function(o,l,c){if(o.r===e&&o.g===i&&o.b===s){t.setPixel32(l,c,a,r,h,n,false);}return false;},this);t.context.putImageData(t.imageData,0,0);t.dirty=true;return t;},rect:function rect(t,e,i,s,n){if(n!==undefined){this.context.fillStyle=n;}this.context.fillRect(t,e,i,s);return this;},text:function text(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"14px Courier";var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:"rgb(255,255,255)";var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:true;var a=this.context;var r=a.font;a.font=s;if(o){a.fillStyle="rgb(0,0,0)";a.fillText(t,e+1,i+1);}a.fillStyle=n;a.fillText(t,e,i);a.font=r;return this;},circle:function circle(t,e,i,s){var n=this.context;if(s!==undefined){n.fillStyle=s;}n.beginPath();n.arc(t,e,i,0,Math.PI*2,false);n.closePath();n.fill();return this;},line:function line(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:"#fff";var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:1;var a=this.context;a.beginPath();a.moveTo(t,e);a.lineTo(i,s);a.lineWidth=o;a.strokeStyle=n;a.stroke();a.closePath();return this;},textureLine:function textureLine(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"repeat-x";if(typeof e!="string"||(e=this.game.cache.getImage(e))){var s=t.length;if(i==="no-repeat"&&s>e.width){s=e.width;}var n=this.context;n.fillStyle=n.createPattern(e,i);this._circle=new o.Circle(t.start.x,t.start.y,e.height);this._circle.circumferencePoint(t.angle-1.5707963267948966,false,this._pos);n.save();n.translate(this._pos.x,this._pos.y);n.rotate(t.angle);n.fillRect(0,0,s,e.height);n.restore();this.dirty=true;return this;}},render:function render(){if(!this.disableTextureUpload&&this.dirty){this.baseTexture.dirty();this.dirty=false;}return this;},destroy:function destroy(){this.frameData.destroy();this.texture.destroy(true);PIXI.CanvasPool.remove(this);},blendReset:function blendReset(){this.op="source-over";return this;},blendSourceOver:function blendSourceOver(){this.op="source-over";return this;},blendSourceIn:function blendSourceIn(){this.op="source-in";return this;},blendSourceOut:function blendSourceOut(){this.op="source-out";return this;},blendSourceAtop:function blendSourceAtop(){this.op="source-atop";return this;},blendDestinationOver:function blendDestinationOver(){this.op="destination-over";return this;},blendDestinationIn:function blendDestinationIn(){this.op="destination-in";return this;},blendDestinationOut:function blendDestinationOut(){this.op="destination-out";return this;},blendDestinationAtop:function blendDestinationAtop(){this.op="destination-atop";return this;},blendXor:function blendXor(){this.op="xor";return this;},blendAdd:function blendAdd(){this.op="lighter";return this;},blendMultiply:function blendMultiply(){this.op="multiply";return this;},blendScreen:function blendScreen(){this.op="screen";return this;},blendOverlay:function blendOverlay(){this.op="overlay";return this;},blendDarken:function blendDarken(){this.op="darken";return this;},blendLighten:function blendLighten(){this.op="lighten";return this;},blendColorDodge:function blendColorDodge(){this.op="color-dodge";return this;},blendColorBurn:function blendColorBurn(){this.op="color-burn";return this;},blendHardLight:function blendHardLight(){this.op="hard-light";return this;},blendSoftLight:function blendSoftLight(){this.op="soft-light";return this;},blendDifference:function blendDifference(){this.op="difference";return this;},blendExclusion:function blendExclusion(){this.op="exclusion";return this;},blendHue:function blendHue(){this.op="hue";return this;},blendSaturation:function blendSaturation(){this.op="saturation";return this;},blendColor:function blendColor(){this.op="color";return this;},blendLuminosity:function blendLuminosity(){this.op="luminosity";return this;}};Object.defineProperty(o.BitmapData.prototype,"smoothed",{get:function get(){o.Canvas.getSmoothingEnabled(this.context);},set:function set(t){o.Canvas.setSmoothingEnabled(this.context,t);}});Object.defineProperty(o.BitmapData.prototype,"op",{get:function get(){return this.context.globalCompositeOperation;},set:function set(t){this.context.globalCompositeOperation=t;}});o.BitmapData.getTransform=function(t,e,i,s,n,o){if(typeof t!="number"){t=0;}if(typeof e!="number"){e=0;}if(typeof i!="number"){i=1;}if(typeof s!="number"){s=1;}if(typeof n!="number"){n=0;}if(typeof o!="number"){o=0;}return{sx:i,sy:s,scaleX:i,scaleY:s,skewX:n,skewY:o,translateX:t,translateY:e,tx:t,ty:e};};o.BitmapData.prototype.constructor=o.BitmapData;PIXI.Graphics=function(){PIXI.DisplayObjectContainer.call(this);this.renderable=true;this.fillAlpha=1;this.lineWidth=0;this.lineColor=0;this.graphicsData=[];this.tint=16777215;this.blendMode=PIXI.blendModes.NORMAL;this.currentPath=null;this._webGL=[];this.isMask=false;this.boundsPadding=0;this._localBounds=new PIXI.Rectangle(0,0,1,1);this.dirty=true;this._boundsDirty=false;this.webGLDirty=false;this.cachedSpriteDirty=false;};PIXI.Graphics.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);PIXI.Graphics.prototype.constructor=PIXI.Graphics;PIXI.Graphics.prototype.lineStyle=function(t,e,i){this.lineWidth=t||0;this.lineColor=e||0;this.lineAlpha=i===undefined?1:i;if(this.currentPath){if(this.currentPath.shape.points.length){this.drawShape(new PIXI.Polygon(this.currentPath.shape.points.slice(-2)));}else{this.currentPath.lineWidth=this.lineWidth;this.currentPath.lineColor=this.lineColor;this.currentPath.lineAlpha=this.lineAlpha;}}return this;};PIXI.Graphics.prototype.moveTo=function(t,e){this.drawShape(new PIXI.Polygon([t,e]));return this;};PIXI.Graphics.prototype.lineTo=function(t,e){if(!this.currentPath){this.moveTo(0,0);}this.currentPath.shape.points.push(t,e);this.dirty=true;this._boundsDirty=true;return this;};PIXI.Graphics.prototype.quadraticCurveTo=function(t,e,i,s){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0];}}else{this.moveTo(0,0);}var n;var o;var a=20;var r=this.currentPath.shape.points;if(r.length===0){this.moveTo(0,0);}var h=r[r.length-2];var l=r[r.length-1];var c=0;for(var u=1;u<=a;++u){c=u/a;n=h+(t-h)*c;o=l+(e-l)*c;r.push(n+(t+(i-t)*c-n)*c,o+(e+(s-e)*c-o)*c);}this.dirty=true;this._boundsDirty=true;return this;};PIXI.Graphics.prototype.bezierCurveTo=function(t,e,i,s,n,o){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0];}}else{this.moveTo(0,0);}for(var a=20,r,h,l,c,u,d=this.currentPath.shape.points,p=d[d.length-2],f=d[d.length-1],y=0,g=1;g<=a;++g){y=g/a;r=1-y;h=r*r;l=h*r;c=y*y;u=c*y;d.push(l*p+h*3*y*t+r*3*c*i+u*n,l*f+h*3*y*e+r*3*c*s+u*o);}this.dirty=true;this._boundsDirty=true;return this;};PIXI.Graphics.prototype.arcTo=function(t,e,i,s,n){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points.push(t,e);}}else{this.moveTo(t,e);}var o=this.currentPath.shape.points;var a=o[o.length-2];var r=o[o.length-1];var h=r-e;var l=a-t;var c=s-e;var u=i-t;var d=Math.abs(h*u-l*c);if(d<1e-8||n===0){if(o[o.length-2]!==t||o[o.length-1]!==e){o.push(t,e);}}else{var p=h*h+l*l;var f=c*c+u*u;var y=h*c+l*u;var g=n*Math.sqrt(p)/d;var m=n*Math.sqrt(f)/d;var v=g*y/p;var b=m*y/f;var x=g*u+m*l;var _=g*c+m*h;var w=l*(m+v);var C=h*(m+v);var P=u*(g+b);var T=c*(g+b);var S=Math.atan2(C-_,w-x);var A=Math.atan2(T-_,P-x);this.arc(x+t,_+e,n,S,A,l*c>u*h);}this.dirty=true;this._boundsDirty=true;return this;};PIXI.Graphics.prototype.arc=function(t,e,i,s,n,o,a){if(s===n){return this;}if(o===undefined){o=false;}if(a===undefined){a=40;}if(!o&&n<=s){n+=Math.PI*2;}else if(o&&s<=n){s+=Math.PI*2;}var r=o?(s-n)*-1:n-s;var h=Math.ceil(Math.abs(r)/(Math.PI*2))*a;if(r===0){return this;}var l=t+Math.cos(s)*i;var c=e+Math.sin(s)*i;if(o&&this.filling){this.moveTo(t,e);}else{this.moveTo(l,c);}var u=this.currentPath.shape.points;var d=r/(h*2);var p=d*2;var f=Math.cos(d);var y=Math.sin(d);for(var g=h-1,m=g%1/g,v=0;v<=g;v++){var b=v+m*v;var x=d+s+p*b;var _=Math.cos(x);var w=-Math.sin(x);u.push((f*_+y*w)*i+t,(f*-w+y*_)*i+e);}this.dirty=true;this._boundsDirty=true;return this;};PIXI.Graphics.prototype.beginFill=function(t,e){this.filling=true;this.fillColor=t||0;this.fillAlpha=e===undefined?1:e;if(this.currentPath&&this.currentPath.shape.points.length<=2){this.currentPath.fill=this.filling;this.currentPath.fillColor=this.fillColor;this.currentPath.fillAlpha=this.fillAlpha;}return this;};PIXI.Graphics.prototype.endFill=function(){this.filling=false;this.fillColor=null;this.fillAlpha=1;return this;};PIXI.Graphics.prototype.drawRect=function(t,e,i,s){this.drawShape(new PIXI.Rectangle(t,e,i,s));return this;};PIXI.Graphics.prototype.drawRoundedRect=function(t,e,i,s,n){this.drawShape(new PIXI.RoundedRectangle(t,e,i,s,n));return this;};PIXI.Graphics.prototype.drawCircle=function(t,e,i){this.drawShape(new PIXI.Circle(t,e,i));return this;};PIXI.Graphics.prototype.drawEllipse=function(t,e,i,s){this.drawShape(new PIXI.Ellipse(t,e,i,s));return this;};PIXI.Graphics.prototype.drawPolygon=function(t){if(t instanceof o.Polygon||t instanceof PIXI.Polygon){t=t.points;}var e=t;if(!Array.isArray(e)){e=new Array(arguments.length);for(var i=0;i<e.length;++i){e[i]=arguments[i];}}this.drawShape(new o.Polygon(e));return this;};PIXI.Graphics.prototype.clear=function(){this.lineWidth=0;this.filling=false;this.dirty=true;this._boundsDirty=true;this.clearDirty=true;this.graphicsData=[];this.updateLocalBounds();return this;};PIXI.Graphics.prototype.generateTexture=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:PIXI.scaleModes.DEFAULT;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var s=this.getBounds();s.width+=i;s.height+=i;var n=new PIXI.CanvasBuffer(s.width*t,s.height*t);var o=PIXI.Texture.fromCanvas(n.canvas,e);o.baseTexture.resolution=t;n.context.scale(t,t);n.context.translate(-s.x,-s.y);PIXI.CanvasGraphics.renderGraphics(this,n.context);return o;};PIXI.Graphics.prototype._renderWebGL=function(t){if(this.visible!==false&&this.alpha!==0&&this.isMask!==true){if(this._cacheAsBitmap){if(this.dirty||this.cachedSpriteDirty){this._generateCachedSprite();this.updateCachedSpriteTexture();this.cachedSpriteDirty=false;this.dirty=false;}this._cachedSprite.worldAlpha=this.worldAlpha;PIXI.Sprite.prototype._renderWebGL.call(this._cachedSprite,t);return;}t.spriteBatch.stop();t.blendModeManager.setBlendMode(this.blendMode);if(this._mask){t.maskManager.pushMask(this._mask,t);}if(this._filters){t.filterManager.pushFilter(this._filterBlock);}if(this.blendMode!==t.spriteBatch.currentBlendMode){t.spriteBatch.currentBlendMode=this.blendMode;var e=PIXI.blendModesWebGL[t.spriteBatch.currentBlendMode];t.spriteBatch.gl.blendFunc(e[0],e[1]);}if(this.webGLDirty){this.dirty=true;this.webGLDirty=false;}PIXI.WebGLGraphics.renderGraphics(this,t);if(this.children.length){t.spriteBatch.start();for(var i=0;i<this.children.length;i++){this.children[i]._renderWebGL(t);}t.spriteBatch.stop();}if(this._filters){t.filterManager.popFilter();}if(this._mask){t.maskManager.popMask(this.mask,t);}t.drawCount++;t.spriteBatch.start();}};PIXI.Graphics.prototype._renderCanvas=function(t){if(this.visible!==false&&this.alpha!==0&&this.isMask!==true){if(this._prevTint!==this.tint){this.dirty=true;this._prevTint=this.tint;}if(this._cacheAsBitmap){if(this.dirty||this.cachedSpriteDirty){this._generateCachedSprite();this.updateCachedSpriteTexture();this.cachedSpriteDirty=false;this.dirty=false;}this._cachedSprite.alpha=this.alpha;PIXI.Sprite.prototype._renderCanvas.call(this._cachedSprite,t);return;}var e=t.context;var i=this.worldTransform;if(this.blendMode!==t.currentBlendMode){t.currentBlendMode=this.blendMode;e.globalCompositeOperation=PIXI.blendModesCanvas[t.currentBlendMode];}if(this._mask){t.maskManager.pushMask(this._mask,t);}var s=t.resolution;var n=i.tx*t.resolution+t.shakeX;var o=i.ty*t.resolution+t.shakeY;e.setTransform(i.a*s,i.b*s,i.c*s,i.d*s,n,o);PIXI.CanvasGraphics.renderGraphics(this,e);for(var a=0;a<this.children.length;a++){this.children[a]._renderCanvas(t);}if(this._mask){t.maskManager.popMask(t);}}};PIXI.Graphics.prototype.getBounds=function(t){if(!this._currentBounds){if(!this.renderable){return PIXI.EmptyRectangle;}if(this.dirty){this.updateLocalBounds();this.webGLDirty=true;this.cachedSpriteDirty=true;this.dirty=false;}var e=this._localBounds;var i=e.x;var s=e.width+e.x;var n=e.y;var o=e.height+e.y;var a=t||this.worldTransform;var r=a.a;var h=a.b;var l=a.c;var c=a.d;var u=a.tx;var d=a.ty;var p=r*s+l*o+u;var f=c*o+h*s+d;var y=r*i+l*o+u;var g=c*o+h*i+d;var m=r*i+l*n+u;var v=c*n+h*i+d;var b=r*s+l*n+u;var x=c*n+h*s+d;var _=p;var w=f;var C=p;var P=f;C=y<C?y:C;C=m<C?m:C;C=b<C?b:C;P=g<P?g:P;P=v<P?v:P;P=x<P?x:P;_=y>_?y:_;_=m>_?m:_;_=b>_?b:_;w=g>w?g:w;w=v>w?v:w;w=x>w?x:w;this._bounds.x=C;this._bounds.width=_-C;this._bounds.y=P;this._bounds.height=w-P;this._currentBounds=this._bounds;}return this._currentBounds;};PIXI.Graphics.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=PIXI.identityMatrix;for(var e=0;e<this.children.length;e++){this.children[e].updateTransform();}var i=this.getBounds();this.worldTransform=t;e=0;for(;e<this.children.length;e++){this.children[e].updateTransform();}return i;};PIXI.Graphics.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,tempPoint);for(var e=this.graphicsData,i=0;i<e.length;i++){var s=e[i];if(s.fill&&s.shape&&s.shape.contains(tempPoint.x,tempPoint.y)){return true;}}return false;};PIXI.Graphics.prototype.updateLocalBounds=function(){var t=Infinity;var e=-Infinity;var i=Infinity;var s=-Infinity;if(this.graphicsData.length){var n;var a;var r;var h;var l;var c;for(var u=0;u<this.graphicsData.length;u++){var d=this.graphicsData[u];var p=d.type;var f=d.lineWidth;n=d.shape;if(p===PIXI.Graphics.RECT||p===PIXI.Graphics.RREC){r=n.x-f/2;h=n.y-f/2;l=n.width+f;c=n.height+f;t=r<t?r:t;e=r+l>e?r+l:e;i=h<i?h:i;s=h+c>s?h+c:s;}else if(p===PIXI.Graphics.CIRC){r=n.x;h=n.y;l=n.radius+f/2;c=n.radius+f/2;t=r-l<t?r-l:t;e=r+l>e?r+l:e;i=h-c<i?h-c:i;s=h+c>s?h+c:s;}else if(p===PIXI.Graphics.ELIP){r=n.x;h=n.y;l=n.width+f/2;c=n.height+f/2;t=r-l<t?r-l:t;e=r+l>e?r+l:e;i=h-c<i?h-c:i;s=h+c>s?h+c:s;}else{a=n.points;for(var y=0;y<a.length;y++){if(a[y]instanceof o.Point){r=a[y].x;h=a[y].y;}else{r=a[y];h=a[y+1];if(y<a.length-1){y++;}}t=r-f<t?r-f:t;e=r+f>e?r+f:e;i=h-f<i?h-f:i;s=h+f>s?h+f:s;}}}}else{t=0;e=0;i=0;s=0;}var g=this.boundsPadding;this._localBounds.x=t-g;this._localBounds.width=e-t+g*2;this._localBounds.y=i-g;this._localBounds.height=s-i+g*2;};PIXI.Graphics.prototype._generateCachedSprite=function(){var t=this.getLocalBounds();if(this._cachedSprite){this._cachedSprite.buffer.resize(t.width,t.height);}else{var e=new PIXI.CanvasBuffer(t.width,t.height);var i=PIXI.Texture.fromCanvas(e.canvas);this._cachedSprite=new PIXI.Sprite(i);this._cachedSprite.buffer=e;this._cachedSprite.worldTransform=this.worldTransform;}this._cachedSprite.anchor.x=-t.x/t.width;this._cachedSprite.anchor.y=-t.y/t.height;this._cachedSprite.buffer.context.translate(-t.x,-t.y);this.worldAlpha=1;PIXI.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context);this._cachedSprite.alpha=this.alpha;};PIXI.Graphics.prototype.updateCachedSpriteTexture=function(){var t=this._cachedSprite;var e=t.texture;var i=t.buffer.canvas;e.baseTexture.width=i.width;e.baseTexture.height=i.height;e.crop.width=e.frame.width=i.width;e.crop.height=e.frame.height=i.height;t._width=i.width;t._height=i.height;e.baseTexture.dirty();};PIXI.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(true);this._cachedSprite=null;};PIXI.Graphics.prototype.drawShape=function(t){if(this.currentPath&&this.currentPath.shape.points.length<=2){this.graphicsData.pop();}this.currentPath=null;if(t instanceof o.Polygon){t=t.clone();t.flatten();}var e=new PIXI.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);this.graphicsData.push(e);if(e.type===PIXI.Graphics.POLY){e.shape.closed=this.filling;this.currentPath=e;}this.dirty=true;this._boundsDirty=true;return e;};Object.defineProperty(PIXI.Graphics.prototype,"cacheAsBitmap",{get:function get(){return this._cacheAsBitmap;},set:function set(t){this._cacheAsBitmap=t;if(this._cacheAsBitmap){this._generateCachedSprite();}else{this.destroyCachedSprite();}this.dirty=true;this.webGLDirty=true;}});PIXI.GraphicsData=function(t,e,i,s,n,o,a){this.lineWidth=t;this.lineColor=e;this.lineAlpha=i;this._lineTint=e;this.fillColor=s;this.fillAlpha=n;this._fillTint=s;this.fill=o;this.shape=a;this.type=a.type;};PIXI.GraphicsData.prototype.constructor=PIXI.GraphicsData;PIXI.GraphicsData.prototype.clone=function(){return new GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape);};PIXI.EarCut={};PIXI.EarCut.Triangulate=function(t,e,i){i=i||2;var s=e&&e.length;var n=s?e[0]*i:t.length;var o=PIXI.EarCut.linkedList(t,0,n,i,true);var a=[];if(!o){return a;}var r;var h;var l;var c;var u;var d;var p;if(s){o=PIXI.EarCut.eliminateHoles(t,e,o,i);}if(t.length>i*80){r=l=t[0];h=c=t[1];for(var f=i;f<n;f+=i){u=t[f];d=t[f+1];if(u<r){r=u;}if(d<h){h=d;}if(u>l){l=u;}if(d>c){c=d;}}p=Math.max(l-r,c-h);}PIXI.EarCut.earcutLinked(o,a,i,r,h,p);return a;};PIXI.EarCut.linkedList=function(t,e,i,s,n){var o=0;var a;var r;var h;a=e;r=i-s;for(;a<i;a+=s){o+=(t[r]-t[a])*(t[a+1]+t[r+1]);r=a;}if(n===o>0){for(a=e;a<i;a+=s){h=PIXI.EarCut.insertNode(a,t[a],t[a+1],h);}}else{for(a=i-s;a>=e;a-=s){h=PIXI.EarCut.insertNode(a,t[a],t[a+1],h);}}return h;};PIXI.EarCut.filterPoints=function(t,e){if(!t){return t;}e||(e=t);var i=t;var s;do{s=false;if(i.steiner||!PIXI.EarCut.equals(i,i.next)&&PIXI.EarCut.area(i.prev,i,i.next)!==0){i=i.next;}else{PIXI.EarCut.removeNode(i);if((i=e=i.prev)===i.next){return null;}s=true;}}while(s||i!==e);return e;};PIXI.EarCut.earcutLinked=function(t,e,i,s,n,o,a){if(t){if(!a&&o){PIXI.EarCut.indexCurve(t,s,n,o);}var r=t;var h;var l;while(t.prev!==t.next){h=t.prev;l=t.next;if(o?PIXI.EarCut.isEarHashed(t,s,n,o):PIXI.EarCut.isEar(t)){e.push(h.i/i);e.push(t.i/i);e.push(l.i/i);PIXI.EarCut.removeNode(t);t=l.next;r=l.next;}else if((t=l)===r){if(a){if(a===1){t=PIXI.EarCut.cureLocalIntersections(t,e,i);PIXI.EarCut.earcutLinked(t,e,i,s,n,o,2);}else if(a===2){PIXI.EarCut.splitEarcut(t,e,i,s,n,o);}}else{PIXI.EarCut.earcutLinked(PIXI.EarCut.filterPoints(t),e,i,s,n,o,1);}break;}}}};PIXI.EarCut.isEar=function(t){var e=t.prev;var i=t;var s=t.next;if(PIXI.EarCut.area(e,i,s)>=0){return false;}for(var n=t.next.next;n!==t.prev;){if(PIXI.EarCut.pointInTriangle(e.x,e.y,i.x,i.y,s.x,s.y,n.x,n.y)&&PIXI.EarCut.area(n.prev,n,n.next)>=0){return false;}n=n.next;}return true;};PIXI.EarCut.isEarHashed=function(t,e,i,s){var n=t.prev;var o=t;var a=t.next;if(PIXI.EarCut.area(n,o,a)>=0){return false;}var r=n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x;var h=n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y;var l=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x;var c=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y;var u=PIXI.EarCut.zOrder(r,h,e,i,s);for(var d=PIXI.EarCut.zOrder(l,c,e,i,s),p=t.nextZ;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&PIXI.EarCut.pointInTriangle(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&PIXI.EarCut.area(p.prev,p,p.next)>=0){return false;}p=p.nextZ;}for(p=t.prevZ;p&&p.z>=u;){if(p!==t.prev&&p!==t.next&&PIXI.EarCut.pointInTriangle(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&PIXI.EarCut.area(p.prev,p,p.next)>=0){return false;}p=p.prevZ;}return true;};PIXI.EarCut.cureLocalIntersections=function(t,e,i){var s=t;do{var n=s.prev;var o=s.next.next;if(PIXI.EarCut.intersects(n,s,s.next,o)&&PIXI.EarCut.locallyInside(n,o)&&PIXI.EarCut.locallyInside(o,n)){e.push(n.i/i);e.push(s.i/i);e.push(o.i/i);PIXI.EarCut.removeNode(s);PIXI.EarCut.removeNode(s.next);s=t=o;}s=s.next;}while(s!==t);return s;};PIXI.EarCut.splitEarcut=function(t,e,i,s,n,o){var a=t;do{for(var r=a.next.next;r!==a.prev;){if(a.i!==r.i&&PIXI.EarCut.isValidDiagonal(a,r)){var h=PIXI.EarCut.splitPolygon(a,r);a=PIXI.EarCut.filterPoints(a,a.next);h=PIXI.EarCut.filterPoints(h,h.next);PIXI.EarCut.earcutLinked(a,e,i,s,n,o);PIXI.EarCut.earcutLinked(h,e,i,s,n,o);return;}r=r.next;}a=a.next;}while(a!==t);};PIXI.EarCut.eliminateHoles=function(t,e,i,s){var n=[];var o;var a;var r;var h;var l;o=0;a=e.length;for(;o<a;o++){r=e[o]*s;h=o<a-1?e[o+1]*s:t.length;l=PIXI.EarCut.linkedList(t,r,h,s,false);if(l===l.next){l.steiner=true;}n.push(PIXI.EarCut.getLeftmost(l));}n.sort(compareX);o=0;for(;o<n.length;o++){PIXI.EarCut.eliminateHole(n[o],i);i=PIXI.EarCut.filterPoints(i,i.next);}return i;};PIXI.EarCut.compareX=function(t,e){return t.x-e.x;};PIXI.EarCut.eliminateHole=function(t,e){if(e=PIXI.EarCut.findHoleBridge(t,e)){var i=PIXI.EarCut.splitPolygon(e,t);PIXI.EarCut.filterPoints(i,i.next);}};PIXI.EarCut.findHoleBridge=function(t,e){var i=e;var s=t.x;var n=t.y;var o=-Infinity;var a;do{if(n<=i.y&&n>=i.next.y){var r=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(r<=s&&r>o){o=r;a=i.x<i.next.x?i:i.next;}}i=i.next;}while(i!==e);if(!a){return null;}if(t.x===a.x){return a.prev;}var h=a;var l=Infinity;var c;for(i=a.next;i!==h;){if(s>=i.x&&i.x>=a.x&&PIXI.EarCut.pointInTriangle(n<a.y?s:o,n,a.x,a.y,n<a.y?o:s,n,i.x,i.y)&&((c=Math.abs(n-i.y)/(s-i.x))<l||c===l&&i.x>a.x)&&PIXI.EarCut.locallyInside(i,t)){a=i;l=c;}i=i.next;}return a;};PIXI.EarCut.indexCurve=function(t,e,i,s){var n=t;do{if(n.z===null){n.z=PIXI.EarCut.zOrder(n.x,n.y,e,i,s);}n.prevZ=n.prev;n.nextZ=n.next;n=n.next;}while(n!==t);n.prevZ.nextZ=null;n.prevZ=null;PIXI.EarCut.sortLinked(n);};PIXI.EarCut.sortLinked=function(t){var e;var i;var s;var n;var o;var a;var r;var h;var l=1;do{i=t;t=null;o=null;a=0;while(i){a++;s=i;r=0;e=0;for(;e<l&&(r++,s=s.nextZ);e++);for(h=l;r>0||h>0&&s;){if(r===0){n=s;s=s.nextZ;h--;}else if(h!==0&&s){if(i.z<=s.z){n=i;i=i.nextZ;r--;}else{n=s;s=s.nextZ;h--;}}else{n=i;i=i.nextZ;r--;}if(o){o.nextZ=n;}else{t=n;}n.prevZ=o;o=n;}i=s;}o.nextZ=null;l*=2;}while(a>1);return t;};PIXI.EarCut.zOrder=function(t,e,i,s,n){t=(t-i)*32767/n;e=(e-s)*32767/n;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;e=(e|e<<1)&1431655765;return t|e<<1;};PIXI.EarCut.getLeftmost=function(t){var e=t;var i=t;do{if(e.x<i.x){i=e;}e=e.next;}while(e!==t);return i;};PIXI.EarCut.pointInTriangle=function(t,e,i,s,n,o,a,r){return(n-a)*(e-r)-(t-a)*(o-r)>=0&&(t-a)*(s-r)-(i-a)*(e-r)>=0&&(i-a)*(o-r)-(n-a)*(s-r)>=0;};PIXI.EarCut.isValidDiagonal=function(t,e){return PIXI.EarCut.equals(t,e)||t.next.i!==e.i&&t.prev.i!==e.i&&!PIXI.EarCut.intersectsPolygon(t,e)&&PIXI.EarCut.locallyInside(t,e)&&PIXI.EarCut.locallyInside(e,t)&&PIXI.EarCut.middleInside(t,e);};PIXI.EarCut.area=function(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y);};PIXI.EarCut.equals=function(t,e){return t.x===e.x&&t.y===e.y;};PIXI.EarCut.intersects=function(t,e,i,s){return PIXI.EarCut.area(t,e,i)>0!=PIXI.EarCut.area(t,e,s)>0&&PIXI.EarCut.area(i,s,t)>0!=PIXI.EarCut.area(i,s,e)>0;};PIXI.EarCut.intersectsPolygon=function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&PIXI.EarCut.intersects(i,i.next,t,e)){return true;}i=i.next;}while(i!==t);return false;};PIXI.EarCut.locallyInside=function(t,e){if(PIXI.EarCut.area(t.prev,t,t.next)<0){return PIXI.EarCut.area(t,e,t.next)>=0&&PIXI.EarCut.area(t,t.prev,e)>=0;}else{return PIXI.EarCut.area(t,e,t.prev)<0||PIXI.EarCut.area(t,t.next,e)<0;}};PIXI.EarCut.middleInside=function(t,e){var i=t;var s=false;var n=(t.x+e.x)/2;var o=(t.y+e.y)/2;do{if(i.y>o!=i.next.y>o&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x){s=!s;}i=i.next;}while(i!==t);return s;};PIXI.EarCut.splitPolygon=function(t,e){var i=new PIXI.EarCut.Node(t.i,t.x,t.y);var s=new PIXI.EarCut.Node(e.i,e.x,e.y);var n=t.next;var o=e.prev;t.next=e;e.prev=t;i.next=n;n.prev=i;s.next=i;i.prev=s;o.next=s;s.prev=o;return s;};PIXI.EarCut.insertNode=function(t,e,i,s){var n=new PIXI.EarCut.Node(t,e,i);if(s){n.next=s.next;n.prev=s;s.next.prev=n;s.next=n;}else{n.prev=n;n.next=n;}return n;};PIXI.EarCut.removeNode=function(t){t.next.prev=t.prev;t.prev.next=t.next;if(t.prevZ){t.prevZ.nextZ=t.nextZ;}if(t.nextZ){t.nextZ.prevZ=t.prevZ;}};PIXI.EarCut.Node=function(t,e,i){this.i=t;this.x=e;this.y=i;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false;};PIXI.WebGLGraphics=function(){};PIXI.WebGLGraphics.stencilBufferLimit=6;PIXI.WebGLGraphics.renderGraphics=function(t,e){var i=e.gl;var s=e.projection;var n=e.offset;var o=e.shaderManager.primitiveShader;var a;if(t.dirty){PIXI.WebGLGraphics.updateGraphics(t,i);}for(var r=t._webGL[i.id],h=0;h<r.data.length;h++){if(r.data[h].mode===1){a=r.data[h];e.stencilManager.pushStencil(t,a,e);i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,(a.indices.length-4)*2);e.stencilManager.popStencil(t,a,e);}else{a=r.data[h];e.shaderManager.setShader(o);o=e.shaderManager.primitiveShader;i.uniformMatrix3fv(o.translationMatrix,false,t.worldTransform.toArray(true));i.uniform1f(o.flipY,1);i.uniform2f(o.projectionVector,s.x,-s.y);i.uniform2f(o.offsetVector,-n.x,-n.y);i.uniform3fv(o.tintColor,PIXI.hex2rgb(t.tint));i.uniform1f(o.alpha,t.worldAlpha);i.bindBuffer(i.ARRAY_BUFFER,a.buffer);i.vertexAttribPointer(o.aVertexPosition,2,i.FLOAT,false,24,0);i.vertexAttribPointer(o.colorAttribute,4,i.FLOAT,false,24,8);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,a.indexBuffer);i.drawElements(i.TRIANGLE_STRIP,a.indices.length,i.UNSIGNED_SHORT,0);}}};PIXI.WebGLGraphics.updateGraphics=function(t,e){var i=t._webGL[e.id];i||(i=t._webGL[e.id]={lastIndex:0,data:[],gl:e});t.dirty=false;var s;if(t.clearDirty){t.clearDirty=false;s=0;for(;s<i.data.length;s++){var n=i.data[s];n.reset();PIXI.WebGLGraphics.graphicsDataPool.push(n);}i.data=[];i.lastIndex=0;}var o;for(s=i.lastIndex;s<t.graphicsData.length;s++){var a=t.graphicsData[s];if(a.type===PIXI.Graphics.POLY){a.points=a.shape.points.slice();if(a.shape.closed){if(a.points[0]!==a.points[a.points.length-2]||a.points[1]!==a.points[a.points.length-1]){a.points.push(a.points[0],a.points[1]);}}if(a.fill&&a.points.length>=PIXI.WebGLGraphics.stencilBufferLimit){if(a.points.length<PIXI.WebGLGraphics.stencilBufferLimit*2){o=PIXI.WebGLGraphics.switchMode(i,0);var r=PIXI.WebGLGraphics.buildPoly(a,o);if(!r){o=PIXI.WebGLGraphics.switchMode(i,1);PIXI.WebGLGraphics.buildComplexPoly(a,o);}}else{o=PIXI.WebGLGraphics.switchMode(i,1);PIXI.WebGLGraphics.buildComplexPoly(a,o);}}if(a.lineWidth>0){o=PIXI.WebGLGraphics.switchMode(i,0);PIXI.WebGLGraphics.buildLine(a,o);}}else{o=PIXI.WebGLGraphics.switchMode(i,0);if(a.type===PIXI.Graphics.RECT){PIXI.WebGLGraphics.buildRectangle(a,o);}else if(a.type===PIXI.Graphics.CIRC||a.type===PIXI.Graphics.ELIP){PIXI.WebGLGraphics.buildCircle(a,o);}else if(a.type===PIXI.Graphics.RREC){PIXI.WebGLGraphics.buildRoundedRectangle(a,o);}}i.lastIndex++;}for(s=0;s<i.data.length;s++){o=i.data[s];if(o.dirty){o.upload();}}};PIXI.WebGLGraphics.switchMode=function(t,e){var i;if(t.data.length){i=t.data[t.data.length-1];if(i.mode!==e||e===1){i=PIXI.WebGLGraphics.graphicsDataPool.pop()||new PIXI.WebGLGraphicsData(t.gl);i.mode=e;t.data.push(i);}}else{i=PIXI.WebGLGraphics.graphicsDataPool.pop()||new PIXI.WebGLGraphicsData(t.gl);i.mode=e;t.data.push(i);}i.dirty=true;return i;};PIXI.WebGLGraphics.buildRectangle=function(t,e){var i=t.shape;var s=i.x;var n=i.y;var o=i.width;var a=i.height;if(t.fill){var r=PIXI.hex2rgb(t.fillColor);var h=t.fillAlpha;var l=r[0]*h;var c=r[1]*h;var u=r[2]*h;var d=e.points;var p=e.indices;var f=d.length/6;d.push(s,n);d.push(l,c,u,h);d.push(s+o,n);d.push(l,c,u,h);d.push(s,n+a);d.push(l,c,u,h);d.push(s+o,n+a);d.push(l,c,u,h);p.push(f,f,f+1,f+2,f+3,f+3);}if(t.lineWidth){var y=t.points;t.points=[s,n,s+o,n,s+o,n+a,s,n+a,s,n];PIXI.WebGLGraphics.buildLine(t,e);t.points=y;}};PIXI.WebGLGraphics.buildRoundedRectangle=function(t,e){var i=t.shape;var s=i.x;var n=i.y;var o=i.width;var a=i.height;var r=i.radius;var h=[];h.push(s,n+r);h=h.concat(PIXI.WebGLGraphics.quadraticBezierCurve(s,n+a-r,s,n+a,s+r,n+a));h=h.concat(PIXI.WebGLGraphics.quadraticBezierCurve(s+o-r,n+a,s+o,n+a,s+o,n+a-r));h=h.concat(PIXI.WebGLGraphics.quadraticBezierCurve(s+o,n+r,s+o,n,s+o-r,n));h=h.concat(PIXI.WebGLGraphics.quadraticBezierCurve(s+r,n,s,n,s,n+r));if(t.fill){var l=PIXI.hex2rgb(t.fillColor);var c=t.fillAlpha;var u=l[0]*c;var d=l[1]*c;var p=l[2]*c;var f=e.points;var y=e.indices;var g=f.length/6;var m=PIXI.EarCut.Triangulate(h,null,2);var v=0;for(v=0;v<m.length;v+=3){y.push(m[v]+g);y.push(m[v]+g);y.push(m[v+1]+g);y.push(m[v+2]+g);y.push(m[v+2]+g);}for(v=0;v<h.length;v++){f.push(h[v],h[++v],u,d,p,c);}}if(t.lineWidth){var b=t.points;t.points=h;PIXI.WebGLGraphics.buildLine(t,e);t.points=b;}};PIXI.WebGLGraphics.quadraticBezierCurve=function(t,e,i,s,n,o){function a(t,e,i){return t+(e-t)*i;}var r;var h;var l;var c;var u;var d;for(var p=20,f=[],y=0,g=0;g<=p;g++){y=g/p;r=a(t,i,y);h=a(e,s,y);l=a(i,n,y);c=a(s,o,y);u=a(r,l,y);d=a(h,c,y);f.push(u,d);}return f;};PIXI.WebGLGraphics.buildCircle=function(t,e){var i=t.shape;var s=i.x;var n=i.y;var o;var a;if(t.type===PIXI.Graphics.CIRC){o=i.radius;a=i.radius;}else{o=i.width;a=i.height;}var r=40;var h=Math.PI*2/40;var l=0;if(t.fill){var c=PIXI.hex2rgb(t.fillColor);var u=t.fillAlpha;var d=c[0]*u;var p=c[1]*u;var f=c[2]*u;var y=e.points;var g=e.indices;var m=y.length/6;g.push(m);l=0;for(;l<41;l++){y.push(s,n,d,p,f,u);y.push(s+Math.sin(h*l)*o,n+Math.cos(h*l)*a,d,p,f,u);g.push(m++,m++);}g.push(m-1);}if(t.lineWidth){var v=t.points;t.points=[];l=0;for(;l<41;l++){t.points.push(s+Math.sin(h*l)*o,n+Math.cos(h*l)*a);}PIXI.WebGLGraphics.buildLine(t,e);t.points=v;}};PIXI.WebGLGraphics.buildLine=function(t,e){var i=0;var s=t.points;if(s.length!==0){if(t.lineWidth%2){for(i=0;i<s.length;i++){s[i]+=0.5;}}var n=new PIXI.Point(s[0],s[1]);var o=new PIXI.Point(s[s.length-2],s[s.length-1]);if(n.x===o.x&&n.y===o.y){s=s.slice();s.pop();s.pop();o=new PIXI.Point(s[s.length-2],s[s.length-1]);var a=o.x+(n.x-o.x)*0.5;var r=o.y+(n.y-o.y)*0.5;s.unshift(a,r);s.push(a,r);}var h=e.points;var l=e.indices;var c=s.length/2;var u=s.length;var d=h.length/6;var p=t.lineWidth/2;var f=PIXI.hex2rgb(t.lineColor);var y=t.lineAlpha;var g=f[0]*y;var m=f[1]*y;var v=f[2]*y;var b;var x;var _;var w;var C;var P;var T;var S;var A;var E;var I;var M;var R;var O;var B;var L;var k;var D;var F;var G;var U;var N;var j;_=s[0];w=s[1];C=s[2];P=s[3];A=-(w-P);E=_-C;j=Math.sqrt(A*A+E*E);A/=j;E/=j;A*=p;E*=p;h.push(_-A,w-E,g,m,v,y);h.push(_+A,w+E,g,m,v,y);i=1;for(;i<c-1;i++){_=s[(i-1)*2];w=s[(i-1)*2+1];C=s[i*2];P=s[i*2+1];T=s[(i+1)*2];S=s[(i+1)*2+1];A=-(w-P);E=_-C;j=Math.sqrt(A*A+E*E);A/=j;E/=j;A*=p;E*=p;I=-(P-S);M=C-T;j=Math.sqrt(I*I+M*M);I/=j;M/=j;I*=p;M*=p;B=-E+w-(-E+P);L=-A+C-(-A+_);k=(-A+_)*(-E+P)-(-A+C)*(-E+w);D=-M+S-(-M+P);F=-I+C-(-I+T);G=(-I+T)*(-M+P)-(-I+C)*(-M+S);U=B*F-D*L;if(Math.abs(U)<0.1){U+=10.1;h.push(C-A,P-E,g,m,v,y);h.push(C+A,P+E,g,m,v,y);}else{b=(L*G-F*k)/U;x=(D*k-B*G)/U;N=(b-C)*(b-C)+(x-P)+(x-P);if(N>19600){R=A-I;O=E-M;j=Math.sqrt(R*R+O*O);R/=j;O/=j;R*=p;O*=p;h.push(C-R,P-O);h.push(g,m,v,y);h.push(C+R,P+O);h.push(g,m,v,y);h.push(C-R,P-O);h.push(g,m,v,y);u++;}else{h.push(b,x);h.push(g,m,v,y);h.push(C-(b-C),P-(x-P));h.push(g,m,v,y);}}}_=s[(c-2)*2];w=s[(c-2)*2+1];C=s[(c-1)*2];P=s[(c-1)*2+1];A=-(w-P);E=_-C;j=Math.sqrt(A*A+E*E);A/=j;E/=j;A*=p;E*=p;h.push(C-A,P-E);h.push(g,m,v,y);h.push(C+A,P+E);h.push(g,m,v,y);l.push(d);i=0;for(;i<u;i++){l.push(d++);}l.push(d-1);}};PIXI.WebGLGraphics.buildComplexPoly=function(t,e){var i=t.points.slice();if(!(i.length<6)){var s=e.indices;e.points=i;e.alpha=t.fillAlpha;e.color=PIXI.hex2rgb(t.fillColor);var n=Infinity;var o=-Infinity;var a=Infinity;var r=-Infinity;var h;var l;for(var c=0;c<i.length;c+=2){h=i[c];l=i[c+1];n=h<n?h:n;o=h>o?h:o;a=l<a?l:a;r=l>r?l:r;}i.push(n,a,o,a,o,r,n,r);var u=i.length/2;for(c=0;c<u;c++){s.push(c);}}};PIXI.WebGLGraphics.buildPoly=function(t,e){var i=t.points;if(!(i.length<6)){var s=e.points;var n=e.indices;var o=i.length/2;var a=PIXI.hex2rgb(t.fillColor);var r=t.fillAlpha;var h=a[0]*r;var l=a[1]*r;var c=a[2]*r;var u=PIXI.EarCut.Triangulate(i,null,2);if(!u){return false;}var d=s.length/6;var p=0;for(p=0;p<u.length;p+=3){n.push(u[p]+d);n.push(u[p]+d);n.push(u[p+1]+d);n.push(u[p+2]+d);n.push(u[p+2]+d);}for(p=0;p<o;p++){s.push(i[p*2],i[p*2+1],h,l,c,r);}return true;}};PIXI.WebGLGraphics.graphicsDataPool=[];PIXI.WebGLGraphicsData=function(t){this.gl=t;this.color=[0,0,0];this.points=[];this.indices=[];this.buffer=t.createBuffer();this.indexBuffer=t.createBuffer();this.mode=1;this.alpha=1;this.dirty=true;};PIXI.WebGLGraphicsData.prototype.reset=function(){this.points=[];this.indices=[];};PIXI.WebGLGraphicsData.prototype.upload=function(){var t=this.gl;this.glPoints=new PIXI.Float32Array(this.points);t.bindBuffer(t.ARRAY_BUFFER,this.buffer);t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW);this.glIndicies=new PIXI.Uint16Array(this.indices);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndicies,t.STATIC_DRAW);this.dirty=false;};PIXI.CanvasGraphics=function(){};PIXI.CanvasGraphics.renderGraphics=function(t,e){var i=t.worldAlpha;if(t.dirty){this.updateGraphicsTint(t);t.dirty=false;}for(var s=0;s<t.graphicsData.length;s++){var n=t.graphicsData[s];var o=n.shape;var a=n._fillTint;var r=n._lineTint;e.lineWidth=n.lineWidth;if(n.type===PIXI.Graphics.POLY){e.beginPath();var h=o.points;e.moveTo(h[0],h[1]);for(var l=1;l<h.length/2;l++){e.lineTo(h[l*2],h[l*2+1]);}if(o.closed){e.lineTo(h[0],h[1]);}if(h[0]===h[h.length-2]&&h[1]===h[h.length-1]){e.closePath();}if(n.fill){e.globalAlpha=n.fillAlpha*i;e.fillStyle="#"+("00000"+(a|0).toString(16)).substr(-6);e.fill();}if(n.lineWidth){e.globalAlpha=n.lineAlpha*i;e.strokeStyle="#"+("00000"+(r|0).toString(16)).substr(-6);e.stroke();}}else if(n.type===PIXI.Graphics.RECT){if(n.fillColor||n.fillColor===0){e.globalAlpha=n.fillAlpha*i;e.fillStyle="#"+("00000"+(a|0).toString(16)).substr(-6);e.fillRect(o.x,o.y,o.width,o.height);}if(n.lineWidth){e.globalAlpha=n.lineAlpha*i;e.strokeStyle="#"+("00000"+(r|0).toString(16)).substr(-6);e.strokeRect(o.x,o.y,o.width,o.height);}}else if(n.type===PIXI.Graphics.CIRC){e.beginPath();e.arc(o.x,o.y,o.radius,0,Math.PI*2);e.closePath();if(n.fill){e.globalAlpha=n.fillAlpha*i;e.fillStyle="#"+("00000"+(a|0).toString(16)).substr(-6);e.fill();}if(n.lineWidth){e.globalAlpha=n.lineAlpha*i;e.strokeStyle="#"+("00000"+(r|0).toString(16)).substr(-6);e.stroke();}}else if(n.type===PIXI.Graphics.ELIP){var c=o.width*2;var u=o.height*2;var d=o.x-c/2;var p=o.y-u/2;e.beginPath();var f=0.5522848;var y=c/2*f;var g=u/2*f;var m=d+c;var v=p+u;var b=d+c/2;var x=p+u/2;e.moveTo(d,x);e.bezierCurveTo(d,x-g,b-y,p,b,p);e.bezierCurveTo(b+y,p,m,x-g,m,x);e.bezierCurveTo(m,x+g,b+y,v,b,v);e.bezierCurveTo(b-y,v,d,x+g,d,x);e.closePath();if(n.fill){e.globalAlpha=n.fillAlpha*i;e.fillStyle="#"+("00000"+(a|0).toString(16)).substr(-6);e.fill();}if(n.lineWidth){e.globalAlpha=n.lineAlpha*i;e.strokeStyle="#"+("00000"+(r|0).toString(16)).substr(-6);e.stroke();}}else if(n.type===PIXI.Graphics.RREC){var _=o.x;var w=o.y;var C=o.width;var P=o.height;var T=o.radius;var S=Math.min(C,P)/2|0;T=T>S?S:T;e.beginPath();e.moveTo(_,w+T);e.lineTo(_,w+P-T);e.quadraticCurveTo(_,w+P,_+T,w+P);e.lineTo(_+C-T,w+P);e.quadraticCurveTo(_+C,w+P,_+C,w+P-T);e.lineTo(_+C,w+T);e.quadraticCurveTo(_+C,w,_+C-T,w);e.lineTo(_+T,w);e.quadraticCurveTo(_,w,_,w+T);e.closePath();if(n.fillColor||n.fillColor===0){e.globalAlpha=n.fillAlpha*i;e.fillStyle="#"+("00000"+(a|0).toString(16)).substr(-6);e.fill();}if(n.lineWidth){e.globalAlpha=n.lineAlpha*i;e.strokeStyle="#"+("00000"+(r|0).toString(16)).substr(-6);e.stroke();}}}};PIXI.CanvasGraphics.renderGraphicsMask=function(t,e){var i=t.graphicsData.length;if(i!==0){e.beginPath();for(var s=0;s<i;s++){var n=t.graphicsData[s];var o=n.shape;if(n.type===PIXI.Graphics.POLY){var a=o.points;e.moveTo(a[0],a[1]);for(var r=1;r<a.length/2;r++){e.lineTo(a[r*2],a[r*2+1]);}if(a[0]===a[a.length-2]&&a[1]===a[a.length-1]){e.closePath();}}else if(n.type===PIXI.Graphics.RECT){e.rect(o.x,o.y,o.width,o.height);e.closePath();}else if(n.type===PIXI.Graphics.CIRC){e.arc(o.x,o.y,o.radius,0,Math.PI*2);e.closePath();}else if(n.type===PIXI.Graphics.ELIP){var h=o.width*2;var l=o.height*2;var c=o.x-h/2;var u=o.y-l/2;var d=0.5522848;var p=h/2*d;var f=l/2*d;var y=c+h;var g=u+l;var m=c+h/2;var v=u+l/2;e.moveTo(c,v);e.bezierCurveTo(c,v-f,m-p,u,m,u);e.bezierCurveTo(m+p,u,y,v-f,y,v);e.bezierCurveTo(y,v+f,m+p,g,m,g);e.bezierCurveTo(m-p,g,c,v+f,c,v);e.closePath();}else if(n.type===PIXI.Graphics.RREC){var b=o.x;var x=o.y;var _=o.width;var w=o.height;var C=o.radius;var P=Math.min(_,w)/2|0;C=C>P?P:C;e.moveTo(b,x+C);e.lineTo(b,x+w-C);e.quadraticCurveTo(b,x+w,b+C,x+w);e.lineTo(b+_-C,x+w);e.quadraticCurveTo(b+_,x+w,b+_,x+w-C);e.lineTo(b+_,x+C);e.quadraticCurveTo(b+_,x,b+_-C,x);e.lineTo(b+C,x);e.quadraticCurveTo(b,x,b,x+C);e.closePath();}}}};PIXI.CanvasGraphics.updateGraphicsTint=function(t){if(t.tint!==16777215){var e=(t.tint>>16&255)/255;var i=(t.tint>>8&255)/255;var s=(t.tint&255)/255;for(var n=0;n<t.graphicsData.length;n++){var o=t.graphicsData[n];var a=o.fillColor|0;var r=o.lineColor|0;o._fillTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(a&255)/255*s*255;o._lineTint=((r>>16&255)/255*e*255<<16)+((r>>8&255)/255*i*255<<8)+(r&255)/255*s*255;}}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Graphics=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this.type=o.GRAPHICS;this.physicsType=o.SPRITE;this.anchor=new o.Point();PIXI.Graphics.call(this);o.Component.Core.init.call(this,t,e,i,"",null);};o.Graphics.prototype=Object.create(PIXI.Graphics.prototype);o.Graphics.prototype.constructor=o.Graphics;o.Component.Core.install.call(o.Graphics.prototype,["Angle","AutoCull","Bounds","Destroy","FixedToCamera","InputEnabled","InWorld","LifeSpan","PhysicsBody","Reset"]);o.Graphics.prototype.preUpdatePhysics=o.Component.PhysicsBody.preUpdate;o.Graphics.prototype.preUpdateLifeSpan=o.Component.LifeSpan.preUpdate;o.Graphics.prototype.preUpdateInWorld=o.Component.InWorld.preUpdate;o.Graphics.prototype.preUpdateCore=o.Component.Core.preUpdate;o.Graphics.prototype.preUpdate=function(){return!!this.preUpdatePhysics()&&!!this.preUpdateLifeSpan()&&!!this.preUpdateInWorld()&&this.preUpdateCore();};o.Graphics.prototype.postUpdate=function(){o.Component.PhysicsBody.postUpdate.call(this);o.Component.FixedToCamera.postUpdate.call(this);if(this._boundsDirty){this.updateLocalBounds();this._boundsDirty=false;}for(var t=0;t<this.children.length;t++){this.children[t].postUpdate();}};o.Graphics.prototype.destroy=function(t){this.clear();o.Component.Destroy.prototype.destroy.call(this,t);};o.Graphics.prototype.drawTriangle=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=new o.Polygon(t);if(e){var s=new o.Point(this.game.camera.x-t[0].x,this.game.camera.y-t[0].y);var n=new o.Point(t[1].x-t[0].x,t[1].y-t[0].y);var a=new o.Point(t[1].x-t[2].x,t[1].y-t[2].y);var r=a.cross(n);if(s.dot(r)>0){this.drawPolygon(i);}}else{this.drawPolygon(i);}};o.Graphics.prototype.drawTriangles=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=new o.Point();var n=new o.Point();var a=new o.Point();var r=[];var h;if(e){if(t[0]instanceof o.Point){for(h=0;h<e.length/3;h++){r.push(t[e[h*3]]);r.push(t[e[h*3+1]]);r.push(t[e[h*3+2]]);if(r.length===3){this.drawTriangle(r,i);r=[];}}}else{for(h=0;h<e.length;h++){s.x=t[e[h]*2];s.y=t[e[h]*2+1];r.push(s.copyTo({}));if(r.length===3){this.drawTriangle(r,i);r=[];}}}}else if(t[0]instanceof o.Point){for(h=0;h<t.length/3;h++){this.drawTriangle([t[h*3],t[h*3+1],t[h*3+2]],i);}}else{for(h=0;h<t.length/6;h++){s.x=t[h*6+0];s.y=t[h*6+1];n.x=t[h*6+2];n.y=t[h*6+3];a.x=t[h*6+4];a.y=t[h*6+5];this.drawTriangle([s,n,a],i);}}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.RenderTexture=function(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:o.scaleModes.DEFAULT;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:1;this.game=t;this.key=s;this.type=o.RENDERTEXTURE;this._tempMatrix=new PIXI.Matrix();PIXI.RenderTexture.call(this,e,i,this.game.renderer,n,a);this.render=o.RenderTexture.prototype.render;};o.RenderTexture.prototype=Object.create(PIXI.RenderTexture.prototype);o.RenderTexture.prototype.constructor=o.RenderTexture;o.RenderTexture.prototype.renderXY=function(t,e,i,s){t.updateTransform();this._tempMatrix.copyFrom(t.worldTransform);this._tempMatrix.tx=e;this._tempMatrix.ty=i;if(this.renderer.type===PIXI.WEBGL_RENDERER){this.renderWebGL(t,this._tempMatrix,s);}else{this.renderCanvas(t,this._tempMatrix,s);}};o.RenderTexture.prototype.renderRawXY=function(t,e,i,s){this._tempMatrix.identity().translate(e,i);if(this.renderer.type===PIXI.WEBGL_RENDERER){this.renderWebGL(t,this._tempMatrix,s);}else{this.renderCanvas(t,this._tempMatrix,s);}};o.RenderTexture.prototype.render=function(t,e,i){if(e===undefined||e===null){this._tempMatrix.copyFrom(t.worldTransform);}else{this._tempMatrix.copyFrom(e);}if(this.renderer.type===PIXI.WEBGL_RENDERER){this.renderWebGL(t,this._tempMatrix,i);}else{this.renderCanvas(t,this._tempMatrix,i);}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Text=function(t,e,i,s,n){e=e||0;i=i||0;s=s===undefined||s===null?"":s.toString();n=o.Utils.extend({},n);this.type=o.TEXT;this.physicsType=o.SPRITE;this.padding=new o.Point();this.textBounds=null;this.canvas=PIXI.CanvasPool.create(this);this.context=this.canvas.getContext("2d");this.colors=[];this.strokeColors=[];this.fontStyles=[];this.fontWeights=[];this.autoRound=false;this.useAdvancedWrap=false;this._res=t.renderer.resolution;this._text=s;this._fontComponents=null;this._lineSpacing=0;this._charCount=0;this._width=0;this._height=0;o.Sprite.call(this,t,e,i,PIXI.Texture.fromCanvas(this.canvas));this.setStyle(n);if(s!==""){this.updateText();}};o.Text.prototype=Object.create(o.Sprite.prototype);o.Text.prototype.constructor=o.Text;o.Text.prototype.preUpdate=function(){return!!this.preUpdatePhysics()&&!!this.preUpdateLifeSpan()&&!!this.preUpdateInWorld()&&this.preUpdateCore();};o.Text.prototype.update=function(){};o.Text.prototype.destroy=function(t){this.texture.destroy(true);o.Component.Destroy.prototype.destroy.call(this,t);};o.Text.prototype.setShadow=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"rgba(0, 0, 0, 1)";var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:true;this.style.shadowOffsetX=t;this.style.shadowOffsetY=e;this.style.shadowColor=i;this.style.shadowBlur=s;this.style.shadowStroke=n;this.style.shadowFill=o;this.dirty=true;return this;};o.Text.prototype.setStyle=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;t=t||{};t.font=t.font||"bold 20pt Arial";t.backgroundColor=t.backgroundColor||null;t.fill=t.fill||"black";t.align=t.align||"left";t.boundsAlignH=t.boundsAlignH||"left";t.boundsAlignV=t.boundsAlignV||"top";t.stroke=t.stroke||"black";t.strokeThickness=t.strokeThickness||0;t.wordWrap=t.wordWrap||false;t.wordWrapWidth=t.wordWrapWidth||100;t.maxLines=t.maxLines||0;t.shadowOffsetX=t.shadowOffsetX||0;t.shadowOffsetY=t.shadowOffsetY||0;t.shadowColor=t.shadowColor||"rgba(0,0,0,0)";t.shadowBlur=t.shadowBlur||0;t.tabs=t.tabs||0;var i=this.fontToComponents(t.font);if(t.fontStyle){i.fontStyle=t.fontStyle;}if(t.fontVariant){i.fontVariant=t.fontVariant;}if(t.fontWeight){i.fontWeight=t.fontWeight;}if(t.fontSize){if(typeof t.fontSize=="number"){t.fontSize=t.fontSize+"px";}i.fontSize=t.fontSize;}this._fontComponents=i;t.font=this.componentsToFont(this._fontComponents);this.style=t;this.dirty=true;if(e){this.updateText();}return this;};o.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this._res;this.context.font=this.style.font;var t=this.text;if(this.style.wordWrap){t=this.runWordWrap(this.text);}var e=t.split(/(?:\\r\\n|\\r|\\n)/);var i=this.style.tabs;var s=[];var n=0;var o=this.determineFontProperties(this.style.font);var a=e.length;if(this.style.maxLines>0&&this.style.maxLines<e.length){a=this.style.maxLines;}this._charCount=0;for(var r=0;r<a;r++){if(i===0){var h=this.style.strokeThickness+this.padding.x;if(this.colors.length>0||this.strokeColors.length>0||this.fontWeights.length>0||this.fontStyles.length>0){h+=this.measureLine(e[r]);}else{h+=this.context.measureText(e[r]).width;}if(this.style.wordWrap){h-=this.context.measureText(" ").width;}}else{var l=e[r].split(/(?:\\t)/);var h=this.padding.x+this.style.strokeThickness;if(Array.isArray(i)){var c=0;for(var u=0;u<l.length;u++){var d=0;d=this.colors.length>0||this.strokeColors.length>0||this.fontWeights.length>0||this.fontStyles.length>0?this.measureLine(l[u]):Math.ceil(this.context.measureText(l[u]).width);if(u>0){c+=i[u-1];}h=c+d;}}else{for(var u=0;u<l.length;u++){if(this.colors.length>0||this.strokeColors.length>0||this.fontWeights.length>0||this.fontStyles.length>0){h+=this.measureLine(l[u]);}else{h+=Math.ceil(this.context.measureText(l[u]).width);}var p=this.game.math.snapToCeil(h,i)-h;h+=p;}}}s[r]=Math.ceil(h);n=Math.max(n,s[r]);}this.canvas.width=n*this._res;var f=o.fontSize+this.style.strokeThickness+this.padding.y;var y=f*a;var g=this._lineSpacing;if(g<0&&Math.abs(g)>f){g=-f;}if(g!==0){y+=g>0?g*e.length:g*(e.length-1);}this.canvas.height=y*this._res;this.context.scale(this._res,this._res);if(navigator.isCocoonJS){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);}if(this.style.backgroundColor){this.context.fillStyle=this.style.backgroundColor;this.context.fillRect(0,0,this.canvas.width,this.canvas.height);}this.context.fillStyle=this.style.fill;this.context.font=this.style.font;this.context.strokeStyle=this.style.stroke;this.context.textBaseline="alphabetic";this.context.lineWidth=this.style.strokeThickness;this.context.lineCap="round";this.context.lineJoin="round";var m;var v;this._charCount=0;r=0;for(;r<a;r++){m=this.style.strokeThickness/2;v=this.style.strokeThickness/2+r*f+o.ascent;if(r>0){v+=g*r;}if(this.style.align==="right"){m+=n-s[r];}else if(this.style.align==="center"){m+=(n-s[r])/2;}if(this.autoRound){m=Math.round(m);v=Math.round(v);}if(this.colors.length>0||this.strokeColors.length>0||this.fontWeights.length>0||this.fontStyles.length>0){this.updateLine(e[r],m,v);}else{if(this.style.stroke&&this.style.strokeThickness){this.updateShadow(this.style.shadowStroke);if(i===0){this.context.strokeText(e[r],m,v);}else{this.renderTabLine(e[r],m,v,false);}}if(this.style.fill){this.updateShadow(this.style.shadowFill);if(i===0){this.context.fillText(e[r],m,v);}else{this.renderTabLine(e[r],m,v,true);}}}}this.updateTexture();this.dirty=false;};o.Text.prototype.renderTabLine=function(t,e,i,s){var n=t.split(/(?:\\t)/);var o=this.style.tabs;var a=0;if(Array.isArray(o)){var r=0;for(var h=0;h<n.length;h++){if(h>0){r+=o[h-1];}a=e+r;if(s){this.context.fillText(n[h],a,i);}else{this.context.strokeText(n[h],a,i);}}}else{for(var h=0;h<n.length;h++){var l=Math.ceil(this.context.measureText(n[h]).width);a=this.game.math.snapToCeil(e,o);if(s){this.context.fillText(n[h],a,i);}else{this.context.strokeText(n[h],a,i);}e=a+l;}}};o.Text.prototype.updateShadow=function(t){if(t){this.context.shadowOffsetX=this.style.shadowOffsetX;this.context.shadowOffsetY=this.style.shadowOffsetY;this.context.shadowColor=this.style.shadowColor;this.context.shadowBlur=this.style.shadowBlur;}else{this.context.shadowOffsetX=0;this.context.shadowOffsetY=0;this.context.shadowColor=0;this.context.shadowBlur=0;}};o.Text.prototype.measureLine=function(t){var e=0;for(var i=0;i<t.length;i++){var s=t[i];if(this.fontWeights.length>0||this.fontStyles.length>0){var n=this.fontToComponents(this.context.font);if(this.fontStyles[this._charCount]){n.fontStyle=this.fontStyles[this._charCount];}if(this.fontWeights[this._charCount]){n.fontWeight=this.fontWeights[this._charCount];}this.context.font=this.componentsToFont(n);}if(this.style.stroke&&this.style.strokeThickness){if(this.strokeColors[this._charCount]){this.context.strokeStyle=this.strokeColors[this._charCount];}this.updateShadow(this.style.shadowStroke);}if(this.style.fill){if(this.colors[this._charCount]){this.context.fillStyle=this.colors[this._charCount];}this.updateShadow(this.style.shadowFill);}e+=this.context.measureText(s).width;this._charCount++;}return Math.ceil(e);};o.Text.prototype.updateLine=function(t,e,i){for(var s=0;s<t.length;s++){var n=t[s];if(this.fontWeights.length>0||this.fontStyles.length>0){var o=this.fontToComponents(this.context.font);if(this.fontStyles[this._charCount]){o.fontStyle=this.fontStyles[this._charCount];}if(this.fontWeights[this._charCount]){o.fontWeight=this.fontWeights[this._charCount];}this.context.font=this.componentsToFont(o);}if(this.style.stroke&&this.style.strokeThickness){if(this.strokeColors[this._charCount]){this.context.strokeStyle=this.strokeColors[this._charCount];}this.updateShadow(this.style.shadowStroke);this.context.strokeText(n,e,i);}if(this.style.fill){if(this.colors[this._charCount]){this.context.fillStyle=this.colors[this._charCount];}this.updateShadow(this.style.shadowFill);this.context.fillText(n,e,i);}e+=this.context.measureText(n).width;this._charCount++;}};o.Text.prototype.clearColors=function(){this.colors=[];this.strokeColors=[];this.dirty=true;return this;};o.Text.prototype.clearFontValues=function(){this.fontStyles=[];this.fontWeights=[];this.dirty=true;return this;};o.Text.prototype.addColor=function(t,e){this.colors[e]=t;this.dirty=true;return this;};o.Text.prototype.addStrokeColor=function(t,e){this.strokeColors[e]=t;this.dirty=true;return this;};o.Text.prototype.addFontStyle=function(t,e){this.fontStyles[e]=t;this.dirty=true;return this;};o.Text.prototype.addFontWeight=function(t,e){this.fontWeights[e]=t;this.dirty=true;return this;};o.Text.prototype.precalculateWordWrap=function(t){this.texture.baseTexture.resolution=this._res;this.context.font=this.style.font;return this.runWordWrap(t).split(/(?:\\r\\n|\\r|\\n)/);};o.Text.prototype.runWordWrap=function(t){if(this.useAdvancedWrap){return this.advancedWordWrap(t);}else{return this.basicWordWrap(t);}};o.Text.prototype.advancedWordWrap=function(t){var e=this.context;var i=this.style.wordWrapWidth;var s="";var n=t.replace(/ +/gi," ").split(/\\r?\\n/gi);for(var o=n.length,a=0;a<o;a++){var r=n[a];var h="";r=r.replace(/^ *|\\s*$/gi,"");if(e.measureText(r).width<i){s+=r+"\\n";}else{var l=i;for(var c=r.split(" "),u=0;u<c.length;u++){var d=c[u];var p=d+" ";var f=e.measureText(p).width;if(f>l){if(u===0){for(var y=p;y.length&&(y=y.slice(0,-1),!((f=e.measureText(y).width)<=l)););if(!y.length){throw new Error("This text\'s wordWrapWidth setting is less than a single character!");}var g=d.substr(y.length);c[u]=g;h+=y;}var m=c[u].length?u:u+1;var v=c.slice(m).join(" ").replace(/[ \\n]*$/gi,"");n[a+1]=v+" "+(n[a+1]||"");o=n.length;break;}h+=p;l-=f;}s+=h.replace(/[ \\n]*$/gi,"")+"\\n";}}return s=s.replace(/[\\s|\\n]*$/gi,"");};o.Text.prototype.basicWordWrap=function(t){var e="";for(var i=t.split("\\n"),s=0;s<i.length;s++){var n=this.style.wordWrapWidth;for(var o=i[s].split(" "),a=0;a<o.length;a++){var r=this.context.measureText(o[a]).width;var h=r+this.context.measureText(" ").width;if(h>n){if(a>0){e+="\\n";}e+=o[a]+" ";n=this.style.wordWrapWidth-r;}else{n-=h;e+=o[a]+" ";}}if(s<i.length-1){e+="\\n";}}return e;};o.Text.prototype.updateFont=function(t){var e=this.componentsToFont(t);if(this.style.font!==e){this.style.font=e;this.dirty=true;if(this.parent){this.updateTransform();}}};o.Text.prototype.fontToComponents=function(t){var e=t.match(/^\\s*(?:\\b(normal|italic|oblique|inherit)?\\b)\\s*(?:\\b(normal|small-caps|inherit)?\\b)\\s*(?:\\b(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit)?\\b)\\s*(?:\\b(xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller|0|\\d*(?:[.]\\d*)?(?:%|[a-z]{2,5}))?\\b)\\s*(.*)\\s*$/);if(e){var i=e[5].trim();if(!/^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(i)&&!/[\'",]/.exec(i)){i="\'"+i+"\'";}return{font:t,fontStyle:e[1]||"normal",fontVariant:e[2]||"normal",fontWeight:e[3]||"normal",fontSize:e[4]||"medium",fontFamily:i};}return{font:t};};o.Text.prototype.componentsToFont=function(t){var e=[];var i;i=t.fontStyle;if(i&&i!=="normal"){e.push(i);}i=t.fontVariant;if(i&&i!=="normal"){e.push(i);}i=t.fontWeight;if(i&&i!=="normal"){e.push(i);}i=t.fontSize;if(i&&i!=="medium"){e.push(i);}i=t.fontFamily;if(i){e.push(i);}if(!e.length){e.push(t.font);}return e.join(" ");};o.Text.prototype.setText=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;this.text=t.toString()||"";if(e){this.updateText();}else{this.dirty=true;}return this;};o.Text.prototype.parseList=function(t){if(!Array.isArray(t)){return this;}var e="";for(var i=0;i<t.length;i++){if(Array.isArray(t[i])){e+=t[i].join("\\t");if(i<t.length-1){e+="\\n";}}else{e+=t[i];if(i<t.length-1){e+="\\t";}}}this.text=e;this.dirty=true;return this;};o.Text.prototype.setTextBounds=function(t,e,i,s){if(t===undefined){this.textBounds=null;}else{if(this.textBounds){this.textBounds.setTo(t,e,i,s);}else{this.textBounds=new o.Rectangle(t,e,i,s);}if(this.style.wordWrapWidth>i){this.style.wordWrapWidth=i;}}this.updateTexture();return this;};o.Text.prototype.updateTexture=function(){var t=this.texture.baseTexture;var e=this.texture.crop;var i=this.texture.frame;var s=this.canvas.width;var n=this.canvas.height;t.width=s;t.height=n;e.width=s;e.height=n;i.width=s;i.height=n;this.texture.width=s;this.texture.height=n;this._width=s;this._height=n;if(this.textBounds){var o=this.textBounds.x;var a=this.textBounds.y;if(this.style.boundsAlignH==="right"){o+=this.textBounds.width-this.canvas.width/this.resolution;}else if(this.style.boundsAlignH==="center"){o+=this.textBounds.halfWidth-this.canvas.width/this.resolution/2;}if(this.style.boundsAlignV==="bottom"){a+=this.textBounds.height-this.canvas.height/this.resolution;}else if(this.style.boundsAlignV==="middle"){a+=this.textBounds.halfHeight-this.canvas.height/this.resolution/2;}this.pivot.x=-o;this.pivot.y=-a;}this.renderable=s!==0&&n!==0;this.texture.requiresReTint=true;this.texture.baseTexture.dirty();};o.Text.prototype._renderWebGL=function(t){if(this.dirty){this.updateText();this.dirty=false;}PIXI.Sprite.prototype._renderWebGL.call(this,t);};o.Text.prototype._renderCanvas=function(t){if(this.dirty){this.updateText();this.dirty=false;}PIXI.Sprite.prototype._renderCanvas.call(this,t);};o.Text.prototype.determineFontProperties=function(t){var e=o.Text.fontPropertiesCache[t];if(!e){e={};var i=o.Text.fontPropertiesCanvas;var s=o.Text.fontPropertiesContext;s.font=t;var n=Math.ceil(s.measureText("|MÉq").width);var a=Math.ceil(s.measureText("|MÉq").width);var r=a*2;a=a*1.4|0;i.width=n;i.height=r;s.fillStyle="#f00";s.fillRect(0,0,n,r);s.font=t;s.textBaseline="alphabetic";s.fillStyle="#000";s.fillText("|MÉq",0,a);if(!s.getImageData(0,0,n,r)){e.ascent=a;e.descent=a+6;e.fontSize=e.ascent+e.descent;o.Text.fontPropertiesCache[t]=e;return e;}var h=s.getImageData(0,0,n,r).data;var l=h.length;var c=n*4;var u;var d;var p=0;var f=false;for(u=0;u<a;u++){for(d=0;d<c;d+=4){if(h[p+d]!==255){f=true;break;}}if(f){break;}p+=c;}e.ascent=a-u;p=l-c;f=false;u=r;for(;u>a;u--){for(d=0;d<c;d+=4){if(h[p+d]!==255){f=true;break;}}if(f){break;}p-=c;}e.descent=u-a;e.descent+=6;e.fontSize=e.ascent+e.descent;o.Text.fontPropertiesCache[t]=e;}return e;};o.Text.prototype.getBounds=function(t){if(this.dirty){this.updateText();this.dirty=false;}return PIXI.Sprite.prototype.getBounds.call(this,t);};Object.defineProperty(o.Text.prototype,"text",{get:function get(){return this._text;},set:function set(t){if(t!==this._text){this._text=t.toString()||"";this.dirty=true;if(this.parent){this.updateTransform();}}}});Object.defineProperty(o.Text.prototype,"cssFont",{get:function get(){return this.componentsToFont(this._fontComponents);},set:function set(t){t=t||"bold 20pt Arial";this._fontComponents=this.fontToComponents(t);this.updateFont(this._fontComponents);}});Object.defineProperty(o.Text.prototype,"font",{get:function get(){return this._fontComponents.fontFamily;},set:function set(t){t=t||"Arial";t=t.trim();if(!/^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(t)&&!/[\'",]/.exec(t)){t="\'"+t+"\'";}this._fontComponents.fontFamily=t;this.updateFont(this._fontComponents);}});Object.defineProperty(o.Text.prototype,"fontSize",{get:function get(){var t=this._fontComponents.fontSize;if(t&&/(?:^0$|px$)/.exec(t)){return parseInt(t,10);}else{return t;}},set:function set(t){t=t||"0";if(typeof t=="number"){t+="px";}this._fontComponents.fontSize=t;this.updateFont(this._fontComponents);}});Object.defineProperty(o.Text.prototype,"fontWeight",{get:function get(){return this._fontComponents.fontWeight||"normal";},set:function set(t){t=t||"normal";this._fontComponents.fontWeight=t;this.updateFont(this._fontComponents);}});Object.defineProperty(o.Text.prototype,"fontStyle",{get:function get(){return this._fontComponents.fontStyle||"normal";},set:function set(t){t=t||"normal";this._fontComponents.fontStyle=t;this.updateFont(this._fontComponents);}});Object.defineProperty(o.Text.prototype,"fontVariant",{get:function get(){return this._fontComponents.fontVariant||"normal";},set:function set(t){t=t||"normal";this._fontComponents.fontVariant=t;this.updateFont(this._fontComponents);}});Object.defineProperty(o.Text.prototype,"fill",{get:function get(){return this.style.fill;},set:function set(t){if(t!==this.style.fill){this.style.fill=t;this.dirty=true;}}});Object.defineProperty(o.Text.prototype,"align",{get:function get(){return this.style.align;},set:function set(t){if(t!==this.style.align){this.style.align=t;this.dirty=true;}}});Object.defineProperty(o.Text.prototype,"resolution",{get:function get(){return this._res;},set:function set(t){if(t!==this._res){this._res=t;this.dirty=true;}}});Object.defineProperty(o.Text.prototype,"tabs",{get:function get(){return this.style.tabs;},set:function set(t){if(t!==this.style.tabs){this.style.tabs=t;this.dirty=true;}}});Object.defineProperty(o.Text.prototype,"boundsAlignH",{get:function get(){return this.style.boundsAlignH;},set:function set(t){if(t!==this.style.boundsAlignH){this.style.boundsAlignH=t;this.dirty=true;}}});Object.defineProperty(o.Text.prototype,"boundsAlignV",{get:function get(){return this.style.boundsAlignV;},set:function set(t){if(t!==this.style.boundsAlignV){this.style.boundsAlignV=t;this.dirty=true;}}});Object.defineProperty(o.Text.prototype,"stroke",{get:function get(){return this.style.stroke;},set:function set(t){if(t!==this.style.stroke){this.style.stroke=t;this.dirty=true;}}});Object.defineProperty(o.Text.prototype,"strokeThickness",{get:function get(){return this.style.strokeThickness;},set:function set(t){if(t!==this.style.strokeThickness){this.style.strokeThickness=t;this.dirty=true;}}});Object.defineProperty(o.Text.prototype,"wordWrap",{get:function get(){return this.style.wordWrap;},set:function set(t){if(t!==this.style.wordWrap){this.style.wordWrap=t;this.dirty=true;}}});Object.defineProperty(o.Text.prototype,"wordWrapWidth",{get:function get(){return this.style.wordWrapWidth;},set:function set(t){if(t!==this.style.wordWrapWidth){this.style.wordWrapWidth=t;this.dirty=true;}}});Object.defineProperty(o.Text.prototype,"lineSpacing",{get:function get(){return this._lineSpacing;},set:function set(t){if(t!==this._lineSpacing){this._lineSpacing=parseFloat(t);this.dirty=true;if(this.parent){this.updateTransform();}}}});Object.defineProperty(o.Text.prototype,"shadowOffsetX",{get:function get(){return this.style.shadowOffsetX;},set:function set(t){if(t!==this.style.shadowOffsetX){this.style.shadowOffsetX=t;this.dirty=true;}}});Object.defineProperty(o.Text.prototype,"shadowOffsetY",{get:function get(){return this.style.shadowOffsetY;},set:function set(t){if(t!==this.style.shadowOffsetY){this.style.shadowOffsetY=t;this.dirty=true;}}});Object.defineProperty(o.Text.prototype,"shadowColor",{get:function get(){return this.style.shadowColor;},set:function set(t){if(t!==this.style.shadowColor){this.style.shadowColor=t;this.dirty=true;}}});Object.defineProperty(o.Text.prototype,"shadowBlur",{get:function get(){return this.style.shadowBlur;},set:function set(t){if(t!==this.style.shadowBlur){this.style.shadowBlur=t;this.dirty=true;}}});Object.defineProperty(o.Text.prototype,"shadowStroke",{get:function get(){return this.style.shadowStroke;},set:function set(t){if(t!==this.style.shadowStroke){this.style.shadowStroke=t;this.dirty=true;}}});Object.defineProperty(o.Text.prototype,"shadowFill",{get:function get(){return this.style.shadowFill;},set:function set(t){if(t!==this.style.shadowFill){this.style.shadowFill=t;this.dirty=true;}}});Object.defineProperty(o.Text.prototype,"width",{get:function get(){if(this.dirty){this.updateText();this.dirty=false;}return this.scale.x*this.texture.frame.width;},set:function set(t){this.scale.x=t/this.texture.frame.width;this._width=t;}});Object.defineProperty(o.Text.prototype,"height",{get:function get(){if(this.dirty){this.updateText();this.dirty=false;}return this.scale.y*this.texture.frame.height;},set:function set(t){this.scale.y=t/this.texture.frame.height;this._height=t;}});o.Text.fontPropertiesCache={};o.Text.fontPropertiesCanvas=document.createElement("canvas");o.Text.fontPropertiesContext=o.Text.fontPropertiesCanvas.getContext("2d");/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.BitmapText=function(t,e,i,s,n,a,r){e=e||0;i=i||0;s=s||"";n=n||"";a=a||32;r=r||"left";PIXI.DisplayObjectContainer.call(this);this.type=o.BITMAPTEXT;this.physicsType=o.SPRITE;this.textWidth=0;this.textHeight=0;this.anchor=new o.Point();this._prevAnchor=new o.Point();this._glyphs=[];this._maxWidth=0;this._text=n.toString()||"";this._data=t.cache.getBitmapFont(s);this._font=s;this._fontSize=a;this._align=r;this._tint=16777215;this.updateText();this.dirty=false;o.Component.Core.init.call(this,t,e,i,"",null);};o.BitmapText.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);o.BitmapText.prototype.constructor=o.BitmapText;o.Component.Core.install.call(o.BitmapText.prototype,["Angle","AutoCull","Bounds","Destroy","FixedToCamera","InputEnabled","InWorld","LifeSpan","PhysicsBody","Reset"]);o.BitmapText.prototype.preUpdatePhysics=o.Component.PhysicsBody.preUpdate;o.BitmapText.prototype.preUpdateLifeSpan=o.Component.LifeSpan.preUpdate;o.BitmapText.prototype.preUpdateInWorld=o.Component.InWorld.preUpdate;o.BitmapText.prototype.preUpdateCore=o.Component.Core.preUpdate;o.BitmapText.prototype.preUpdate=function(){return!!this.preUpdatePhysics()&&!!this.preUpdateLifeSpan()&&!!this.preUpdateInWorld()&&this.preUpdateCore();};o.BitmapText.prototype.postUpdate=function(){o.Component.PhysicsBody.postUpdate.call(this);o.Component.FixedToCamera.postUpdate.call(this);if(this.body&&this.body.type===o.Physics.ARCADE){if(this.textWidth!==this.body.sourceWidth||this.textHeight!==this.body.sourceHeight){this.body.setSize(this.textWidth,this.textHeight);}}};o.BitmapText.prototype.setText=function(t){this.text=t;};o.BitmapText.prototype.scanLine=function(t,e,i){var s=0;var n=0;var o=-1;var a=0;var r=null;var h=this._maxWidth>0?this._maxWidth:null;var l=[];for(var c=0;c<i.length;c++){var u=c===i.length-1;if(/(?:\\r\\n|\\r|\\n)/.test(i.charAt(c))){return{width:n,text:i.substr(0,c),end:u,chars:l};}var d=i.charCodeAt(c);var p=t.chars[d];var f=0;if(p===undefined){d=32;p=t.chars[d];}var y=r&&p.kerning[r]?p.kerning[r]:0;if(/(\\s)/.test(i.charAt(c))){o=c;a=n;}f=(y+p.texture.width+p.xOffset)*e;if(h&&n+f>=h&&o>-1){return{width:a||n,text:i.substr(0,c-(c-o)),end:u,chars:l};}n+=(p.xAdvance+y)*e;l.push(s+(p.xOffset+y)*e);s+=(p.xAdvance+y)*e;r=d;}return{width:n,text:i,end:u,chars:l};};o.BitmapText.prototype.cleanText=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var i=this._data.font;if(!i){return"";}var s=/\\r\\n|\\n\\r|\\n|\\r/g;for(var n=t.replace(s,"\\n").split("\\n"),o=0;o<n.length;o++){var a="";for(var r=n[o],h=0;h<r.length;h++){a=i.chars[r.charCodeAt(h)]?a.concat(r[h]):a.concat(e);}n[o]=a;}return n.join("\\n");};o.BitmapText.prototype.updateText=function(){var t=this._data.font;if(t){var e=this.text;var i=this._fontSize/t.size;var s=[];var n=0;this.textWidth=0;do{var o=this.scanLine(t,i,e);o.y=n;s.push(o);if(o.width>this.textWidth){this.textWidth=o.width;}n+=t.lineHeight*i;e=e.substr(o.text.length+1);}while(o.end===false);this.textHeight=n;var a=0;var r=0;var h=this.textWidth*this.anchor.x;var l=this.textHeight*this.anchor.y;for(var c=0;c<s.length;c++){var o=s[c];if(this._align==="right"){r=this.textWidth-o.width;}else if(this._align==="center"){r=(this.textWidth-o.width)/2;}for(var u=0;u<o.text.length;u++){var d=o.text.charCodeAt(u);var p=t.chars[d];if(p===undefined){d=32;p=t.chars[d];}var f=this._glyphs[a];if(f){f.texture=p.texture;}else{f=new PIXI.Sprite(p.texture);f.name=o.text[u];this._glyphs.push(f);}f.position.x=o.chars[u]+r-h;f.position.y=o.y+p.yOffset*i-l;f.scale.set(i);f.tint=this.tint;f.texture.requiresReTint=true;if(!f.parent){this.addChild(f);}a++;}}for(c=a;c<this._glyphs.length;c++){this.removeChild(this._glyphs[c]);}}};o.BitmapText.prototype.purgeGlyphs=function(){var t=this._glyphs.length;var e=[];for(var i=0;i<this._glyphs.length;i++){if(this._glyphs[i].parent!==this){this._glyphs[i].destroy();}else{e.push(this._glyphs[i]);}}this._glyphs=[];this._glyphs=e;this.updateText();return t-e.length;};o.BitmapText.prototype.updateTransform=function(){if(!!this.dirty||!this.anchor.equals(this._prevAnchor)){this.updateText();this.dirty=false;this._prevAnchor.copyFrom(this.anchor);}PIXI.DisplayObjectContainer.prototype.updateTransform.call(this);};Object.defineProperty(o.BitmapText.prototype,"align",{get:function get(){return this._align;},set:function set(t){if(t!==this._align&&(t==="left"||t==="center"||t==="right")){this._align=t;this.updateText();}}});Object.defineProperty(o.BitmapText.prototype,"tint",{get:function get(){return this._tint;},set:function set(t){if(t!==this._tint){this._tint=t;this.updateText();}}});Object.defineProperty(o.BitmapText.prototype,"font",{get:function get(){return this._font;},set:function set(t){if(t!==this._font){this._font=t.trim();this._data=this.game.cache.getBitmapFont(this._font);this.updateText();}}});Object.defineProperty(o.BitmapText.prototype,"fontSize",{get:function get(){return this._fontSize;},set:function set(t){if((t=parseInt(t,10))!==this._fontSize&&t>0){this._fontSize=t;this.updateText();}}});Object.defineProperty(o.BitmapText.prototype,"text",{get:function get(){return this._text;},set:function set(t){if(t!==this._text){this._text=t.toString()||"";this.updateText();}}});Object.defineProperty(o.BitmapText.prototype,"maxWidth",{get:function get(){return this._maxWidth;},set:function set(t){if(t!==this._maxWidth){this._maxWidth=t;this.updateText();}}});Object.defineProperty(o.BitmapText.prototype,"smoothed",{get:function get(){return!this._data.base.scaleMode;},set:function set(t){this._data.base.scaleMode=t?0:1;}});/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.RetroFont=function(t,e,i,s,n,a,r,h,l,c){if(!t.cache.checkImageKey(e)){return false;}if(a===undefined||a===null){a=t.cache.getImage(e).width/i;}this.characterWidth=i;this.characterHeight=s;this.characterSpacingX=r||0;this.characterSpacingY=h||0;this.characterPerRow=a;this.offsetX=l||0;this.offsetY=c||0;this.align="left";this.multiLine=false;this.autoUpperCase=true;this.customSpacingX=0;this.customSpacingY=0;this.fixedWidth=0;this.fontSet=t.cache.getImage(e);this._text="";this.grabData=[];this.frameData=new o.FrameData();var u=this.offsetX;var d=this.offsetY;var p=0;for(var f=0;f<n.length;f++){var y=this.frameData.addFrame(new o.Frame(f,u,d,this.characterWidth,this.characterHeight));this.grabData[n.charCodeAt(f)]=y.index;p++;if(p===this.characterPerRow){p=0;u=this.offsetX;d+=this.characterHeight+this.characterSpacingY;}else{u+=this.characterWidth+this.characterSpacingX;}}t.cache.updateFrameData(e,this.frameData);this.stamp=new o.Image(t,0,0,e,0);o.RenderTexture.call(this,t,100,100,"",o.scaleModes.NEAREST);this.type=o.RETROFONT;};o.RetroFont.prototype=Object.create(o.RenderTexture.prototype);o.RetroFont.prototype.constructor=o.RetroFont;o.RetroFont.ALIGN_LEFT="left";o.RetroFont.ALIGN_RIGHT="right";o.RetroFont.ALIGN_CENTER="center";o.RetroFont.TEXT_SET1=" !\\"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";o.RetroFont.TEXT_SET2=" !\\"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ";o.RetroFont.TEXT_SET3="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ";o.RetroFont.TEXT_SET4="ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789";o.RetroFont.TEXT_SET5="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() \'!?-*:0123456789";o.RetroFont.TEXT_SET6="ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\\"(),-.\' ";o.RetroFont.TEXT_SET7="AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\\")28FLRX-\'39";o.RetroFont.TEXT_SET8="0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ";o.RetroFont.TEXT_SET9="ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,\'\\"?!";o.RetroFont.TEXT_SET10="ABCDEFGHIJKLMNOPQRSTUVWXYZ";o.RetroFont.TEXT_SET11="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\\"-+!?()\':;0123456789";o.RetroFont.prototype.setFixedWidth=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"left";this.fixedWidth=t;this.align=e;};o.RetroFont.prototype.setText=function(t,e,i,s,n,o){this.multiLine=e||false;this.customSpacingX=i||0;this.customSpacingY=s||0;this.align=n||"left";this.autoUpperCase=!o;if(t.length>0){this.text=t;}};o.RetroFont.prototype.buildRetroFontText=function(){var t=0;var e=0;this.clear();if(this.multiLine){var i=this._text.split("\\n");if(this.fixedWidth>0){this.resize(this.fixedWidth,i.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,true);}else{this.resize(this.getLongestLine()*(this.characterWidth+this.customSpacingX),i.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,true);}for(var s=0;s<i.length;s++){t=0;if(this.align===o.RetroFont.ALIGN_RIGHT){t=this.width-i[s].length*(this.characterWidth+this.customSpacingX);}else if(this.align===o.RetroFont.ALIGN_CENTER){t=this.width/2-i[s].length*(this.characterWidth+this.customSpacingX)/2;t+=this.customSpacingX/2;}if(t<0){t=0;}this.pasteLine(i[s],t,e,this.customSpacingX);e+=this.characterHeight+this.customSpacingY;}}else{if(this.fixedWidth>0){this.resize(this.fixedWidth,this.characterHeight,true);}else{this.resize(this._text.length*(this.characterWidth+this.customSpacingX),this.characterHeight,true);}t=0;if(this.align===o.RetroFont.ALIGN_RIGHT){t=this.width-this._text.length*(this.characterWidth+this.customSpacingX);}else if(this.align===o.RetroFont.ALIGN_CENTER){t=this.width/2-this._text.length*(this.characterWidth+this.customSpacingX)/2;t+=this.customSpacingX/2;}if(t<0){t=0;}this.pasteLine(this._text,t,0,this.customSpacingX);}this.requiresReTint=true;};o.RetroFont.prototype.pasteLine=function(t,e,i,s){for(var n=0;n<t.length;n++){if(t.charAt(n)===" "){e+=this.characterWidth+s;}else if(this.grabData[t.charCodeAt(n)]>=0&&(this.stamp.frame=this.grabData[t.charCodeAt(n)],this.renderXY(this.stamp,e,i,false),(e+=this.characterWidth+s)>this.width)){break;}}};o.RetroFont.prototype.getLongestLine=function(){var t=0;if(this._text.length>0){for(var e=this._text.split("\\n"),i=0;i<e.length;i++){if(e[i].length>t){t=e[i].length;}}}return t;};o.RetroFont.prototype.removeUnsupportedCharacters=function(t){var e="";for(var i=0;i<this._text.length;i++){var s=this._text[i];var n=s.charCodeAt(0);if(this.grabData[n]>=0||!t&&s==="\\n"){e=e.concat(s);}}return e;};o.RetroFont.prototype.updateOffset=function(t,e){if(this.offsetX!==t||this.offsetY!==e){var i=t-this.offsetX;var s=e-this.offsetY;var n=this.game.cache.getFrameData(this.stamp.key).getFrames();for(var o=n.length;o--;){n[o].x+=i;n[o].y+=s;}this.buildRetroFontText();}};Object.defineProperty(o.RetroFont.prototype,"text",{get:function get(){return this._text;},set:function set(t){var e;if((e=this.autoUpperCase?t.toUpperCase():t)!==this._text){this._text=e;this.removeUnsupportedCharacters(this.multiLine);this.buildRetroFontText();}}});Object.defineProperty(o.RetroFont.prototype,"smoothed",{get:function get(){return this.stamp.smoothed;},set:function set(t){this.stamp.smoothed=t;this.buildRetroFontText();}});/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd, Richard Davey\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Rope=function(t,e,i,s,n,a){this.points=[];this.points=a;this._hasUpdateAnimation=false;this._updateAnimationCallback=null;e=e||0;i=i||0;s=s||null;n=n||null;this.type=o.ROPE;PIXI.Rope.call(this,o.Cache.DEFAULT,this.points);o.Component.Core.init.call(this,t,e,i,s,n);};o.Rope.prototype=Object.create(PIXI.Rope.prototype);o.Rope.prototype.constructor=o.Rope;o.Component.Core.install.call(o.Rope.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Crop","Delta","Destroy","FixedToCamera","InWorld","LifeSpan","LoadTexture","Overlap","PhysicsBody","Reset","ScaleMinMax","Smoothed"]);o.Rope.prototype.preUpdatePhysics=o.Component.PhysicsBody.preUpdate;o.Rope.prototype.preUpdateLifeSpan=o.Component.LifeSpan.preUpdate;o.Rope.prototype.preUpdateInWorld=o.Component.InWorld.preUpdate;o.Rope.prototype.preUpdateCore=o.Component.Core.preUpdate;o.Rope.prototype.preUpdate=function(){return!!this.preUpdatePhysics()&&!!this.preUpdateLifeSpan()&&!!this.preUpdateInWorld()&&this.preUpdateCore();};o.Rope.prototype.update=function(){if(this._hasUpdateAnimation){this.updateAnimation.call(this);}};o.Rope.prototype.reset=function(t,e){o.Component.Reset.prototype.reset.call(this,t,e);return this;};Object.defineProperty(o.Rope.prototype,"updateAnimation",{get:function get(){return this._updateAnimation;},set:function set(t){if(t&&typeof t=="function"){this._hasUpdateAnimation=true;this._updateAnimation=t;}else{this._hasUpdateAnimation=false;this._updateAnimation=null;}}});Object.defineProperty(o.Rope.prototype,"segments",{get:function get(){var t=[];var e;var i;var s;var n;var a;var r;var h;var l;for(var c=0;c<this.points.length;c++){e=c*4;i=this.vertices[e]*this.scale.x;s=this.vertices[e+1]*this.scale.y;n=this.vertices[e+4]*this.scale.x;a=this.vertices[e+3]*this.scale.y;r=o.Math.difference(i,n);h=o.Math.difference(s,a);i+=this.world.x;s+=this.world.y;l=new o.Rectangle(i,s,r,h);t.push(l);}return t;}});/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.TileSprite=function(t,e,i,s,n,a,r){e=e||0;i=i||0;s=s||256;n=n||256;a=a||null;r=r||null;this.type=o.TILESPRITE;this.physicsType=o.SPRITE;this._scroll=new o.Point();var h=t.cache.getImage("__default",true);PIXI.TilingSprite.call(this,new PIXI.Texture(h.base),s,n);o.Component.Core.init.call(this,t,e,i,a,r);};o.TileSprite.prototype=Object.create(PIXI.TilingSprite.prototype);o.TileSprite.prototype.constructor=o.TileSprite;o.Component.Core.install.call(o.TileSprite.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Destroy","FixedToCamera","Health","InCamera","InputEnabled","InWorld","LifeSpan","LoadTexture","Overlap","PhysicsBody","Reset","Smoothed"]);o.TileSprite.prototype.preUpdatePhysics=o.Component.PhysicsBody.preUpdate;o.TileSprite.prototype.preUpdateLifeSpan=o.Component.LifeSpan.preUpdate;o.TileSprite.prototype.preUpdateInWorld=o.Component.InWorld.preUpdate;o.TileSprite.prototype.preUpdateCore=o.Component.Core.preUpdate;o.TileSprite.prototype.preUpdate=function(){if(this._scroll.x!==0){this.tilePosition.x+=this._scroll.x*this.game.time.physicsElapsed;}if(this._scroll.y!==0){this.tilePosition.y+=this._scroll.y*this.game.time.physicsElapsed;}return!!this.preUpdatePhysics()&&!!this.preUpdateLifeSpan()&&!!this.preUpdateInWorld()&&this.preUpdateCore();};o.TileSprite.prototype.autoScroll=function(t,e){this._scroll.set(t,e);};o.TileSprite.prototype.stopScroll=function(){this._scroll.set(0,0);};o.TileSprite.prototype.destroy=function(t){o.Component.Destroy.prototype.destroy.call(this,t);PIXI.TilingSprite.prototype.destroy.call(this);};o.TileSprite.prototype.reset=function(t,e){o.Component.Reset.prototype.reset.call(this,t,e);this.tilePosition.x=0;this.tilePosition.y=0;return this;};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Device=function(){this.deviceReadyAt=0;this.initialized=false;this.desktop=false;this.iOS=false;this.iOSVersion=0;this.cocoonJS=false;this.cocoonJSApp=false;this.cordova=false;this.node=false;this.nodeWebkit=false;this.electron=false;this.ejecta=false;this.crosswalk=false;this.android=false;this.chromeOS=false;this.linux=false;this.macOS=false;this.windows=false;this.windowsPhone=false;this.canvas=false;this.canvasBitBltShift=null;this.webGL=false;this.file=false;this.fileSystem=false;this.localStorage=false;this.worker=false;this.css3D=false;this.pointerLock=false;this.typedArray=false;this.vibration=false;this.getUserMedia=true;this.quirksMode=false;this.touch=false;this.mspointer=false;this.wheelEvent=null;this.arora=false;this.chrome=false;this.chromeVersion=0;this.epiphany=false;this.firefox=false;this.firefoxVersion=0;this.ie=false;this.ieVersion=0;this.trident=false;this.tridentVersion=0;this.edge=false;this.mobileSafari=false;this.midori=false;this.opera=false;this.safari=false;this.safariVersion=0;this.webApp=false;this.silk=false;this.audioData=false;this.webAudio=false;this.ogg=false;this.opus=false;this.mp3=false;this.wav=false;this.m4a=false;this.webm=false;this.dolby=false;this.oggVideo=false;this.h264Video=false;this.mp4Video=false;this.webmVideo=false;this.vp9Video=false;this.hlsVideo=false;this.iPhone=false;this.iPhone4=false;this.iPad=false;this.pixelRatio=0;this.littleEndian=false;this.LITTLE_ENDIAN=false;this.support32bit=false;this.fullscreen=false;this.requestFullscreen="";this.cancelFullscreen="";this.fullscreenKeyboard=false;};o.Device=new o.Device();o.Device.onInitialized=new o.Signal();o.Device.whenReady=function(t,e,i){var s=this._readyCheck;if(this.deviceReadyAt||!s){t.call(e,this);}else if(s._monitor||i){s._queue=s._queue||[];s._queue.push([t,e]);}else{s._monitor=s.bind(this);s._queue=s._queue||[];s._queue.push([t,e]);var n=window.cordova!==undefined;var o=navigator.isCocoonJS;if(document.readyState==="complete"||document.readyState==="interactive"){window.setTimeout(s._monitor,0);}else if(n&&!o){document.addEventListener("deviceready",s._monitor,false);}else{document.addEventListener("DOMContentLoaded",s._monitor,false);window.addEventListener("load",s._monitor,false);}}};o.Device._readyCheck=function(){var t=this._readyCheck;if(document.body){if(!this.deviceReadyAt){this.deviceReadyAt=Date.now();document.removeEventListener("deviceready",t._monitor);document.removeEventListener("DOMContentLoaded",t._monitor);window.removeEventListener("load",t._monitor);this._initialize();this.initialized=true;this.onInitialized.dispatch(this);for(var e;e=t._queue.shift();){var i=e[0];var s=e[1];i.call(s,this);}this._readyCheck=null;this._initialize=null;this.onInitialized=null;}}else{window.setTimeout(t._monitor,20);}};o.Device._initialize=function(){function t(){var t=navigator.userAgent;if(/Playstation Vita/.test(t)){d.vita=true;}else if(/Kindle/.test(t)||/\\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)){d.kindle=true;}else if(/Android/.test(t)){d.android=true;}else if(/CrOS/.test(t)){d.chromeOS=true;}else if(/iP[ao]d|iPhone/i.test(t)){d.iOS=true;navigator.appVersion.match(/OS (\\d+)/);d.iOSVersion=parseInt(RegExp.$1,10);}else if(/Linux/.test(t)){d.linux=true;}else if(/Mac OS/.test(t)){d.macOS=true;}else if(/Windows/.test(t)){d.windows=true;}if(/Windows Phone/i.test(t)||/IEMobile/i.test(t)){d.android=false;d.iOS=false;d.macOS=false;d.windows=true;d.windowsPhone=true;}var e=/Silk/.test(t);if(d.windows||d.macOS||d.linux&&!e||d.chromeOS){d.desktop=true;}if(d.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t)){d.desktop=false;}}function e(){d.canvas=!!window.CanvasRenderingContext2D||d.cocoonJS;try{d.localStorage=!!localStorage.getItem;}catch(t){d.localStorage=false;}d.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob;d.fileSystem=!!window.requestFileSystem;var t={stencil:true};d.webGL=function(){try{var e=document.createElement("canvas");e.screencanvas=false;return!!window.WebGLRenderingContext&&(e.getContext("webgl",t)||e.getContext("experimental-webgl",t));}catch(t){return false;}}();d.webGL=!!d.webGL;d.worker=!!window.Worker;d.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document;d.quirksMode=document.compatMode!=="CSS1Compat";navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia;window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL;d.getUserMedia=d.getUserMedia&&!!navigator.getUserMedia&&!!window.URL;if(d.firefox&&d.firefoxVersion<21){d.getUserMedia=false;}if(!d.iOS&&(d.ie||d.firefox||d.chrome)){d.canvasBitBltShift=true;}if(d.safari||d.mobileSafari){d.canvasBitBltShift=false;}}function s(){if("ontouchstart"in document.documentElement||window.navigator.maxTouchPoints&&window.navigator.maxTouchPoints>=1){d.touch=true;}if(window.navigator.msPointerEnabled||window.navigator.pointerEnabled){d.mspointer=true;}if(!d.cocoonJS){if("onwheel"in window||d.ie&&"WheelEvent"in window){d.wheelEvent="wheel";}else if("onmousewheel"in window){d.wheelEvent="mousewheel";}else if(d.firefox&&"MouseScrollEvent"in window){d.wheelEvent="DOMMouseScroll";}}}function n(){for(var t=["requestFullscreen","requestFullScreen","webkitRequestFullscreen","webkitRequestFullScreen","msRequestFullscreen","msRequestFullScreen","mozRequestFullScreen","mozRequestFullscreen"],e=document.createElement("div"),i=0;i<t.length;i++){if(e[t[i]]){d.fullscreen=true;d.requestFullscreen=t[i];break;}}var s=["cancelFullScreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","msCancelFullScreen","msExitFullscreen","mozCancelFullScreen","mozExitFullscreen"];if(d.fullscreen){for(var i=0;i<s.length;i++){if(document[s[i]]){d.cancelFullscreen=s[i];break;}}}if(window.Element&&Element.ALLOW_KEYBOARD_INPUT){d.fullscreenKeyboard=true;}}function o(){var t=navigator.userAgent;if(/Arora/.test(t)){d.arora=true;}else if(/Edge\\/\\d+/.test(t)){d.edge=true;}else if(/Chrome\\/(\\d+)/.test(t)&&!d.windowsPhone){d.chrome=true;d.chromeVersion=parseInt(RegExp.$1,10);}else if(/Epiphany/.test(t)){d.epiphany=true;}else if(/Firefox\\D+(\\d+)/.test(t)){d.firefox=true;d.firefoxVersion=parseInt(RegExp.$1,10);}else if(/AppleWebKit/.test(t)&&d.iOS){d.mobileSafari=true;}else if(/MSIE (\\d+\\.\\d+);/.test(t)){d.ie=true;d.ieVersion=parseInt(RegExp.$1,10);}else if(/Midori/.test(t)){d.midori=true;}else if(/Opera/.test(t)){d.opera=true;}else if(/Safari\\/(\\d+)/.test(t)&&!d.windowsPhone){d.safari=true;if(/Version\\/(\\d+)\\./.test(t)){d.safariVersion=parseInt(RegExp.$1,10);}}else if(/Trident\\/(\\d+\\.\\d+)(.*)rv:(\\d+\\.\\d+)/.test(t)){d.ie=true;d.trident=true;d.tridentVersion=parseInt(RegExp.$1,10);d.ieVersion=parseInt(RegExp.$3,10);}if(/Silk/.test(t)){d.silk=true;}if(navigator.standalone){d.webApp=true;}if(window.cordova!==undefined){d.cordova=true;}if(i!==undefined){d.node=true;}if(d.node&&_typeof(i.versions)=="object"){d.nodeWebkit=!!i.versions["node-webkit"];d.electron=!!i.versions.electron;}if(navigator.isCocoonJS){d.cocoonJS=true;}if(d.cocoonJS){try{d.cocoonJSApp=typeof CocoonJS!="undefined";}catch(t){d.cocoonJSApp=false;}}if(window.ejecta!==undefined){d.ejecta=true;}if(/Crosswalk/.test(t)){d.crosswalk=true;}}function a(){var t=document.createElement("video");var e=false;try{if(e=!!t.canPlayType){if(t.canPlayType("video/ogg; codecs=\\"theora\\"").replace(/^no$/,"")){d.oggVideo=true;}if(t.canPlayType("video/mp4; codecs=\\"avc1.42E01E\\"").replace(/^no$/,"")){d.h264Video=true;d.mp4Video=true;}if(t.canPlayType("video/webm; codecs=\\"vp8, vorbis\\"").replace(/^no$/,"")){d.webmVideo=true;}if(t.canPlayType("video/webm; codecs=\\"vp9\\"").replace(/^no$/,"")){d.vp9Video=true;}if(t.canPlayType("application/x-mpegURL; codecs=\\"avc1.42E01E\\"").replace(/^no$/,"")){d.hlsVideo=true;}}}catch(t){}}function r(){d.audioData=!!window.Audio;d.webAudio=!!window.AudioContext||!!window.webkitAudioContext;var t=document.createElement("audio");var e=false;try{if((e=!!t.canPlayType)&&(t.canPlayType("audio/ogg; codecs=\\"vorbis\\"").replace(/^no$/,"")&&(d.ogg=true),(t.canPlayType("audio/ogg; codecs=\\"opus\\"").replace(/^no$/,"")||t.canPlayType("audio/opus;").replace(/^no$/,""))&&(d.opus=true),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(d.mp3=true),t.canPlayType("audio/wav; codecs=\\"1\\"").replace(/^no$/,"")&&(d.wav=true),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(d.m4a=true),t.canPlayType("audio/webm; codecs=\\"vorbis\\"").replace(/^no$/,"")&&(d.webm=true),t.canPlayType("audio/mp4;codecs=\\"ec-3\\"")!=="")){if(d.edge){d.dolby=true;}else if(d.safari&&d.safariVersion>=9&&/Mac OS X (\\d+)_(\\d+)/.test(navigator.userAgent)){var i=parseInt(RegExp.$1,10);var s=parseInt(RegExp.$2,10);if(i===10&&s>=11||i>10){d.dolby=true;}}}}catch(t){}}function h(){var t=new ArrayBuffer(4);var e=new Uint8Array(t);var i=new Uint32Array(t);e[0]=161;e[1]=178;e[2]=195;e[3]=212;return i[0]===3569595041||i[0]!==2712847316&&null;}function l(){if(Uint8ClampedArray===undefined){return false;}var t=PIXI.CanvasPool.create(this,1,1);var e=t.getContext("2d");if(!e){return false;}var i=e.createImageData(1,1);PIXI.CanvasPool.remove(this);return i.data instanceof Uint8ClampedArray;}function c(){d.pixelRatio=window.devicePixelRatio||1;d.iPhone=navigator.userAgent.toLowerCase().indexOf("iphone")!==-1;d.iPhone4=d.pixelRatio===2&&d.iPhone;d.iPad=navigator.userAgent.toLowerCase().indexOf("ipad")!==-1;if(typeof Int8Array!="undefined"){d.typedArray=true;}else{d.typedArray=false;}if(typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"){d.littleEndian=h();d.LITTLE_ENDIAN=d.littleEndian;}d.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&d.littleEndian!==null&&l();navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate;if(navigator.vibrate){d.vibration=true;}}function u(){var t=document.createElement("p");var e;var i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(t,null);for(var s in i){if(t.style[s]!==undefined){t.style[s]="translate3d(1px,1px,1px)";e=window.getComputedStyle(t).getPropertyValue(i[s]);}}document.body.removeChild(t);d.css3D=e!==undefined&&e.length>0&&e!=="none";}var d=this;t();o();r();a();u();c();e();n();s();};o.Device.canPlayAudio=function(t){return t==="mp3"&&!!this.mp3||t==="ogg"&&(!!this.ogg||!!this.opus)||t==="m4a"&&!!this.m4a||t==="opus"&&!!this.opus||t==="wav"&&!!this.wav||t==="webm"&&!!this.webm||t==="mp4"&&!!this.dolby;};o.Device.canPlayVideo=function(t){return t==="webm"&&(!!this.webmVideo||!!this.vp9Video)||t==="mp4"&&(!!this.mp4Video||!!this.h264Video)||(t==="ogg"||t==="ogv")&&!!this.oggVideo||t==="mpeg"&&!!this.hlsVideo;};o.Device.isConsoleOpen=function(){return!!window.console&&!!window.console.firebug||!!window.console&&!(console.clear,!console.profiles)&&console.profiles.length>0;};o.Device.isAndroidStockBrowser=function(){var t=window.navigator.userAgent.match(/Android.*AppleWebKit\\/([\\d.]+)/);return t&&t[1]<537;};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Canvas={create:function create(t,e,i,s,n){e=e||256;i=i||256;var o=n?document.createElement("canvas"):PIXI.CanvasPool.create(t,e,i);if(typeof s=="string"&&s!==""){o.id=s;}o.width=e;o.height=i;o.style.display="block";return o;},setBackgroundColor:function setBackgroundColor(t,e){e=e||"rgb(0,0,0)";t.style.backgroundColor=e;return t;},setTouchAction:function setTouchAction(t,e){e=e||"none";t.style.msTouchAction=e;t.style["ms-touch-action"]=e;t.style["touch-action"]=e;return t;},setUserSelect:function setUserSelect(t,e){e=e||"none";t.style["-webkit-touch-callout"]=e;t.style["-webkit-user-select"]=e;t.style["-khtml-user-select"]=e;t.style["-moz-user-select"]=e;t.style["-ms-user-select"]=e;t.style["user-select"]=e;t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)";return t;},addToDOM:function addToDOM(t,e,i){var s;if(i===undefined){i=true;}if(e){if(typeof e=="string"){s=document.getElementById(e);}else if(_typeof(e)=="object"&&e.nodeType===1){s=e;}}s||(s=document.body);if(i&&s.style){s.style.overflow="hidden";}s.appendChild(t);return t;},removeFromDOM:function removeFromDOM(t){if(t.parentNode){t.parentNode.removeChild(t);}},setTransform:function setTransform(t,e,i,s,n,o,a){t.setTransform(s,o,a,n,e,i);return t;},setSmoothingEnabled:function setSmoothingEnabled(t,e){var i=o.Canvas.getSmoothingPrefix(t);if(i){t[i]=e;}return t;},getSmoothingPrefix:function getSmoothingPrefix(t){var e=["i","webkitI","msI","mozI","oI"];for(var i in e){var s=e[i]+"mageSmoothingEnabled";if(s in t){return s;}}return null;},getSmoothingEnabled:function getSmoothingEnabled(t){var e=o.Canvas.getSmoothingPrefix(t);if(e){return t[e];}},setImageRenderingCrisp:function setImageRenderingCrisp(t){for(var e=["optimizeSpeed","crisp-edges","-moz-crisp-edges","-webkit-optimize-contrast","optimize-contrast","pixelated"],i=0;i<e.length;i++){t.style["image-rendering"]=e[i];}t.style.msInterpolationMode="nearest-neighbor";return t;},setImageRenderingBicubic:function setImageRenderingBicubic(t){t.style["image-rendering"]="auto";t.style.msInterpolationMode="bicubic";return t;}};/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.RequestAnimationFrame=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;this.game=t;this.isRunning=false;this.forceSetTimeOut=e;for(var i=["ms","moz","webkit","o"],s=0;s<i.length&&!window.requestAnimationFrame;s++){window.requestAnimationFrame=window[i[s]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[i[s]+"CancelAnimationFrame"];}this._isSetTimeOut=false;this._onLoop=null;this._timeOutID=null;};o.RequestAnimationFrame.prototype={start:function start(){this.isRunning=true;var t=this;if(!window.requestAnimationFrame||this.forceSetTimeOut){this._isSetTimeOut=true;this._onLoop=function(){return t.updateSetTimeout();};this._timeOutID=window.setTimeout(this._onLoop,0);}else{this._isSetTimeOut=false;this._onLoop=function(e){return t.updateRAF(e);};this._timeOutID=window.requestAnimationFrame(this._onLoop);}},updateRAF:function updateRAF(t){if(this.isRunning){this.game.update(Math.floor(t));this._timeOutID=window.requestAnimationFrame(this._onLoop);}},updateSetTimeout:function updateSetTimeout(){if(this.isRunning){this.game.update(Date.now());this._timeOutID=window.setTimeout(this._onLoop,this.game.time.timeToCall);}},stop:function stop(){if(this._isSetTimeOut){clearTimeout(this._timeOutID);}else{window.cancelAnimationFrame(this._timeOutID);}this.isRunning=false;},isSetTimeOut:function isSetTimeOut(){return this._isSetTimeOut;},isRAF:function isRAF(){return this._isSetTimeOut===false;}};o.RequestAnimationFrame.prototype.constructor=o.RequestAnimationFrame;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Math={PI2:Math.PI*2,between:function between(t,e){return Math.floor(Math.random()*(e-t+1)+t);},fuzzyEqual:function fuzzyEqual(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0.0001;return Math.abs(t-e)<i;},fuzzyLessThan:function fuzzyLessThan(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0.0001;return t<e+i;},fuzzyGreaterThan:function fuzzyGreaterThan(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0.0001;return t>e-i;},fuzzyCeil:function fuzzyCeil(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0.0001;return Math.ceil(t-e);},fuzzyFloor:function fuzzyFloor(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0.0001;return Math.floor(t+e);},average:function average(){var t=0;for(var e=arguments.length,i=0;i<e;i++){t+=+arguments[i];}return t/e;},shear:function shear(t){return t%1;},snapTo:function snapTo(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(e===0){return t;}else{t-=i;t=e*Math.round(t/e);return i+t;}},snapToFloor:function snapToFloor(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(e===0){return t;}else{t-=i;t=e*Math.floor(t/e);return i+t;}},snapToCeil:function snapToCeil(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(e===0){return t;}else{t-=i;t=e*Math.ceil(t/e);return i+t;}},roundTo:function roundTo(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:10;var s=Math.pow(i,-e);return Math.round(t*s)/s;},floorTo:function floorTo(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:10;var s=Math.pow(i,-e);return Math.floor(t*s)/s;},ceilTo:function ceilTo(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:10;var s=Math.pow(i,-e);return Math.ceil(t*s)/s;},rotateToAngle:function rotateToAngle(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0.05;if(t===e){return t;}else{if(Math.abs(e-t)<=i||Math.abs(e-t)>=o.Math.PI2-i){t=e;}else{if(Math.abs(e-t)>Math.PI){if(e<t){e+=o.Math.PI2;}else{e-=o.Math.PI2;}}if(e>t){t+=i;}else if(e<t){t-=i;}}return t;}},getShortestAngle:function getShortestAngle(t,e){var i=e-t;if(i===0){return 0;}else{return i-Math.floor((i- -180)/360)*360;}},angleBetween:function angleBetween(t,e,i,s){return Math.atan2(s-e,i-t);},angleBetweenY:function angleBetweenY(t,e,i,s){return Math.atan2(i-t,s-e);},angleBetweenPoints:function angleBetweenPoints(t,e){return Math.atan2(e.y-t.y,e.x-t.x);},angleBetweenPointsY:function angleBetweenPointsY(t,e){return Math.atan2(e.x-t.x,e.y-t.y);},reverseAngle:function reverseAngle(t){return this.normalizeAngle(t+Math.PI,true);},normalizeAngle:function normalizeAngle(t){t%=Math.PI*2;if(t>=0){return t;}else{return t+Math.PI*2;}},maxAdd:function maxAdd(t,e,i){return Math.min(t+e,i);},minSub:function minSub(t,e,i){return Math.max(t-e,i);},wrap:function wrap(t,e,i){var s=i-e;if(s<=0){return 0;}var n=(t-e)%s;if(n<0){n+=s;}return n+e;},wrapValue:function wrapValue(t,e,i){var s;t=Math.abs(t);e=Math.abs(e);i=Math.abs(i);return s=(t+e)%i;},isOdd:function isOdd(t){return!!(t&1);},isEven:function isEven(t){return!(t&1);},min:function min(){if(arguments.length===1&&_typeof(arguments[0])=="object"){var t=arguments[0];}else{var t=arguments;}for(var e=1,i=0,s=t.length;e<s;e++){if(t[e]<t[i]){i=e;}}return t[i];},max:function max(){if(arguments.length===1&&_typeof(arguments[0])=="object"){var t=arguments[0];}else{var t=arguments;}for(var e=1,i=0,s=t.length;e<s;e++){if(t[e]>t[i]){i=e;}}return t[i];},minProperty:function minProperty(t){if(arguments.length===2&&_typeof(arguments[1])=="object"){var e=arguments[1];}else{var e=arguments.slice(1);}for(var i=1,s=0,n=e.length;i<n;i++){if(e[i][t]<e[s][t]){s=i;}}return e[s][t];},maxProperty:function maxProperty(t){if(arguments.length===2&&_typeof(arguments[1])=="object"){var e=arguments[1];}else{var e=arguments.slice(1);}for(var i=1,s=0,n=e.length;i<n;i++){if(e[i][t]>e[s][t]){s=i;}}return e[s][t];},wrapAngle:function wrapAngle(t,e){if(e){return this.wrap(t,-Math.PI,Math.PI);}else{return this.wrap(t,-180,180);}},linearInterpolation:function linearInterpolation(t,e){var i=t.length-1;var s=i*e;var n=Math.floor(s);if(e<0){return this.linear(t[0],t[1],s);}else if(e>1){return this.linear(t[i],t[i-1],i-s);}else{return this.linear(t[n],t[n+1>i?i:n+1],s-n);}},bezierInterpolation:function bezierInterpolation(t,e){var i=0;for(var s=t.length-1,n=0;n<=s;n++){i+=Math.pow(1-e,s-n)*Math.pow(e,n)*t[n]*this.bernstein(s,n);}return i;},catmullRomInterpolation:function catmullRomInterpolation(t,e){var i=t.length-1;var s=i*e;var n=Math.floor(s);if(t[0]===t[i]){if(e<0){n=Math.floor(s=i*(1+e));}return this.catmullRom(t[(n-1+i)%i],t[n],t[(n+1)%i],t[(n+2)%i],s-n);}else if(e<0){return t[0]-(this.catmullRom(t[0],t[0],t[1],t[1],-s)-t[0]);}else if(e>1){return t[i]-(this.catmullRom(t[i],t[i],t[i-1],t[i-1],s-i)-t[i]);}else{return this.catmullRom(t[n?n-1:0],t[n],t[i<n+1?i:n+1],t[i<n+2?i:n+2],s-n);}},linear:function linear(t,e,i){return(e-t)*i+t;},bernstein:function bernstein(t,e){return this.factorial(t)/this.factorial(e)/this.factorial(t-e);},factorial:function factorial(t){if(t===0){return 1;}var e=t;while(--t){e*=t;}return e;},catmullRom:function catmullRom(t,e,i,s,n){var o=(i-t)*0.5;var a=(s-e)*0.5;var r=n*n;return(e*2-i*2+o+a)*(n*r)+(e*-3+i*3-o*2-a)*r+o*n+e;},difference:function difference(t,e){return Math.abs(t-e);},roundAwayFromZero:function roundAwayFromZero(t){if(t>0){return Math.ceil(t);}else{return Math.floor(t);}},sinCosGenerator:function sinCosGenerator(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var n=e;var o=i;var a=s*Math.PI/t;var r=[];var h=[];for(var l=0;l<t;l++){o-=n*a;n+=o*a;r[l]=o;h[l]=n;}return{sin:h,cos:r,length:t};},distance:function distance(t,e,i,s){var n=t-i;var o=e-s;return Math.sqrt(n*n+o*o);},distanceSq:function distanceSq(t,e,i,s){var n=t-i;var o=e-s;return n*n+o*o;},distancePow:function distancePow(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:2;return Math.sqrt(Math.pow(i-t,n)+Math.pow(s-e,n));},clamp:function clamp(t,e,i){if(t<e){return e;}else if(i<t){return i;}else{return t;}},clampBottom:function clampBottom(t,e){if(t<e){return e;}else{return t;}},within:function within(t,e,i){return Math.abs(t-e)<=i;},mapLinear:function mapLinear(t,e,i,s,n){return s+(t-e)*(n-s)/(i-e);},smoothstep:function smoothstep(t,e,i){return(t=Math.max(0,Math.min(1,(t-e)/(i-e))))*t*(3-t*2);},smootherstep:function smootherstep(t,e,i){return(t=Math.max(0,Math.min(1,(t-e)/(i-e))))*t*t*(t*(t*6-15)+10);},sign:function sign(t){if(t<0){return-1;}else if(t>0){return 1;}else{return 0;}},percent:function percent(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(t>e||i>e){return 1;}else if(t<i||i>t){return 0;}else{return(t-i)/e;}}};var p=Math.PI/180;var f=180/Math.PI;/**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n   * @author       Timo Hausmann\r\n   * @author       Richard Davey <rich@photonstorm.com>\r\n   * @copyright    2016 Photon Storm Ltd.\r\n   * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n   *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n   * @author       Jeremy Dowell <jeremy@codevinsky.com>\r\n   * @author       Richard Davey <rich@photonstorm.com>\r\n   * @copyright    2016 Photon Storm Ltd.\r\n   * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n   *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Georgios Kaleadis https://github.com/georgiee\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       George https://github.com/georgiee\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  *//**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */o.Math.degToRad=function t(e){return e*p;};o.Math.radToDeg=function t(e){return e*f;};o.RandomDataGenerator=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];this.c=1;this.s0=0;this.s1=0;this.s2=0;if(typeof t=="string"){this.state(t);}else{this.sow(t);}};o.RandomDataGenerator.prototype={rnd:function rnd(){var t=this.s0*2091639+this.c*2.3283064365386963e-10;this.c=t|0;this.s0=this.s1;this.s1=this.s2;this.s2=t-this.c;return this.s2;},sow:function sow(t){this.s0=this.hash(" ");this.s1=this.hash(this.s0);this.s2=this.hash(this.s1);this.c=1;if(t){for(var e=0;e<t.length&&t[e]!=null;e++){var i=t[e];this.s0-=this.hash(i);this.s0+=~~(this.s0<0);this.s1-=this.hash(i);this.s1+=~~(this.s1<0);this.s2-=this.hash(i);this.s2+=~~(this.s2<0);}}},hash:function hash(t){var e;var i;var s;s=4022871197;t=t.toString();i=0;for(;i<t.length;i++){s+=t.charCodeAt(i);e=s*0.02519603282416938;s=e>>>0;e-=s;e*=s;s=e>>>0;e-=s;s+=e*4294967296;}return(s>>>0)*2.3283064365386963e-10;},integer:function integer(){return this.rnd.apply(this)*4294967296;},frac:function frac(){return this.rnd.apply(this)+(this.rnd.apply(this)*2097152|0)*1.1102230246251565e-16;},real:function real(){return this.integer()+this.frac();},integerInRange:function integerInRange(t,e){return Math.floor(this.realInRange(0,e-t+1)+t);},between:function between(t,e){return this.integerInRange(t,e);},realInRange:function realInRange(t,e){return this.frac()*(e-t)+t;},normal:function normal(){return 1-this.frac()*2;},uuid:function uuid(){var t="";var e="";for(e=t="";t++<36;e+=~t%5|t*3&4?(t^15?this.frac()*(t^20?16:4)^8:4).toString(16):"-");return e;},pick:function pick(t){return t[this.integerInRange(0,t.length-1)];},sign:function sign(){return this.pick([-1,1]);},weightedPick:function weightedPick(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+0.5)];},timestamp:function timestamp(t,e){return this.realInRange(t||946684800000,e||1577862000000);},angle:function angle(){return this.integerInRange(-180,180);},state:function state(t){if(typeof t=="string"&&t.match(/^!rnd/)){t=t.split(",");this.c=parseFloat(t[1]);this.s0=parseFloat(t[2]);this.s1=parseFloat(t[3]);this.s2=parseFloat(t[4]);}return["!rnd",this.c,this.s0,this.s1,this.s2].join(",");}};o.RandomDataGenerator.prototype.constructor=o.RandomDataGenerator;o.QuadTree=function(t,e,i,s,n,o,a){this.maxObjects=10;this.maxLevels=4;this.level=0;this.bounds={};this.objects=[];this.nodes=[];this._empty=[];this.reset(t,e,i,s,n,o,a);};o.QuadTree.prototype={reset:function reset(t,e,i,s,n,o,a){this.maxObjects=n||10;this.maxLevels=o||4;this.level=a||0;this.bounds={x:Math.round(t),y:Math.round(e),width:i,height:s,subWidth:Math.floor(i/2),subHeight:Math.floor(s/2),right:Math.round(t)+Math.floor(i/2),bottom:Math.round(e)+Math.floor(s/2)};this.objects.length=0;this.nodes.length=0;},populate:function populate(t){t.forEach(this.populateHandler,this,true);},populateHandler:function populateHandler(t){if(t.body&&t.exists){this.insert(t.body);}},split:function split(){this.nodes[0]=new o.QuadTree(this.bounds.right,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1);this.nodes[1]=new o.QuadTree(this.bounds.x,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1);this.nodes[2]=new o.QuadTree(this.bounds.x,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1);this.nodes[3]=new o.QuadTree(this.bounds.right,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1);},insert:function insert(t){var e=0;var i;if(this.nodes[0]!=null&&(i=this.getIndex(t))!==-1){this.nodes[i].insert(t);return;}this.objects.push(t);if(this.objects.length>this.maxObjects&&this.level<this.maxLevels){for(this.nodes[0]==null&&this.split();e<this.objects.length;){i=this.getIndex(this.objects[e]);if(i!==-1){this.nodes[i].insert(this.objects.splice(e,1)[0]);}else{e++;}}}},getIndex:function getIndex(t){var e=-1;if(t.x<this.bounds.right&&t.right<this.bounds.right){if(t.y<this.bounds.bottom&&t.bottom<this.bounds.bottom){e=1;}else if(t.y>this.bounds.bottom){e=2;}}else if(t.x>this.bounds.right){if(t.y<this.bounds.bottom&&t.bottom<this.bounds.bottom){e=0;}else if(t.y>this.bounds.bottom){e=3;}}return e;},retrieve:function retrieve(t){if(t instanceof o.Rectangle){var e=this.objects;var i=this.getIndex(t);}else{if(!t.body){return this._empty;}var e=this.objects;var i=this.getIndex(t.body);}if(this.nodes[0]){if(i!==-1){e=e.concat(this.nodes[i].retrieve(t));}else{e=e.concat(this.nodes[0].retrieve(t));e=e.concat(this.nodes[1].retrieve(t));e=e.concat(this.nodes[2].retrieve(t));e=e.concat(this.nodes[3].retrieve(t));}}return e;},clear:function clear(){this.objects.length=0;for(var t=this.nodes.length;t--;){this.nodes[t].clear();this.nodes.splice(t,1);}this.nodes.length=0;}};o.QuadTree.prototype.constructor=o.QuadTree;o.Net=function(t){this.game=t;};o.Net.prototype={getHostName:function getHostName(){if(window.location&&window.location.hostname){return window.location.hostname;}else{return null;}},checkDomainName:function checkDomainName(t){return window.location.hostname.indexOf(t)!==-1;},updateQueryString:function updateQueryString(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=arguments.length>3?arguments[3]:undefined;if(s===undefined||s===""){s=window.location.href;}var n="";var o=new RegExp("([?|&])"+t+"=.*?(&|#|$)(.*)","gi");if(o.test(s)){n=e!==undefined&&e!==null?s.replace(o,"$1"+t+"="+e+"$2$3"):s.replace(o,"$1$3").replace(/(&|\\?)$/,"");}else if(e!==undefined&&e!==null){var a=s.indexOf("?")!==-1?"&":"?";var r=s.split("#");s=r[0]+a+t+"="+e;if(r[1]){s+="#"+r[1];}n=s;}else{n=s;}if(!i){return n;}window.location.href=n;},getQueryString:function getQueryString(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var e={};var i=location.search.substring(1).split("&");for(var s in i){var n=i[s].split("=");if(n.length>1){if(t&&t===this.decodeURI(n[0])){return this.decodeURI(n[1]);}e[this.decodeURI(n[0])]=this.decodeURI(n[1]);}}return e;},decodeURI:function decodeURI(t){return decodeURIComponent(t.replace(/\\+/g," "));}};o.Net.prototype.constructor=o.Net;o.TweenManager=function(t){this.game=t;this.frameBased=false;this._tweens=[];this._add=[];this.easeMap={Power0:o.Easing.Power0,Power1:o.Easing.Power1,Power2:o.Easing.Power2,Power3:o.Easing.Power3,Power4:o.Easing.Power4,Linear:o.Easing.Linear.None,Quad:o.Easing.Quadratic.Out,Cubic:o.Easing.Cubic.Out,Quart:o.Easing.Quartic.Out,Quint:o.Easing.Quintic.Out,Sine:o.Easing.Sinusoidal.Out,Expo:o.Easing.Exponential.Out,Circ:o.Easing.Circular.Out,Elastic:o.Easing.Elastic.Out,Back:o.Easing.Back.Out,Bounce:o.Easing.Bounce.Out,"Quad.easeIn":o.Easing.Quadratic.In,"Cubic.easeIn":o.Easing.Cubic.In,"Quart.easeIn":o.Easing.Quartic.In,"Quint.easeIn":o.Easing.Quintic.In,"Sine.easeIn":o.Easing.Sinusoidal.In,"Expo.easeIn":o.Easing.Exponential.In,"Circ.easeIn":o.Easing.Circular.In,"Elastic.easeIn":o.Easing.Elastic.In,"Back.easeIn":o.Easing.Back.In,"Bounce.easeIn":o.Easing.Bounce.In,"Quad.easeOut":o.Easing.Quadratic.Out,"Cubic.easeOut":o.Easing.Cubic.Out,"Quart.easeOut":o.Easing.Quartic.Out,"Quint.easeOut":o.Easing.Quintic.Out,"Sine.easeOut":o.Easing.Sinusoidal.Out,"Expo.easeOut":o.Easing.Exponential.Out,"Circ.easeOut":o.Easing.Circular.Out,"Elastic.easeOut":o.Easing.Elastic.Out,"Back.easeOut":o.Easing.Back.Out,"Bounce.easeOut":o.Easing.Bounce.Out,"Quad.easeInOut":o.Easing.Quadratic.InOut,"Cubic.easeInOut":o.Easing.Cubic.InOut,"Quart.easeInOut":o.Easing.Quartic.InOut,"Quint.easeInOut":o.Easing.Quintic.InOut,"Sine.easeInOut":o.Easing.Sinusoidal.InOut,"Expo.easeInOut":o.Easing.Exponential.InOut,"Circ.easeInOut":o.Easing.Circular.InOut,"Elastic.easeInOut":o.Easing.Elastic.InOut,"Back.easeInOut":o.Easing.Back.InOut,"Bounce.easeInOut":o.Easing.Bounce.InOut};this.game.onPause.add(this._pauseAll,this);this.game.onResume.add(this._resumeAll,this);};o.TweenManager.prototype={getAll:function getAll(){return this._tweens;},removeAll:function removeAll(){for(var t=0;t<this._tweens.length;t++){this._tweens[t].pendingDelete=true;}this._add=[];},removeFrom:function removeFrom(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i;var s;if(Array.isArray(t)){i=0;s=t.length;for(;i<s;i++){this.removeFrom(t[i]);}}else if(t.type===o.GROUP&&e){for(var i=0,s=t.children.length;i<s;i++){this.removeFrom(t.children[i]);}}else{i=0;s=this._tweens.length;for(;i<s;i++){if(t===this._tweens[i].target){this.remove(this._tweens[i]);}}i=0;s=this._add.length;for(;i<s;i++){if(t===this._add[i].target){this.remove(this._add[i]);}}}},add:function add(t){t._manager=this;this._add.push(t);},create:function create(t){return new o.Tween(t,this.game,this);},remove:function remove(t){var e=this._tweens.indexOf(t);if(e!==-1){this._tweens[e].pendingDelete=true;}else if((e=this._add.indexOf(t))!==-1){this._add[e].pendingDelete=true;}},update:function update(){var t=this._add.length;var e=this._tweens.length;if(e===0&&t===0){return false;}for(var i=0;i<e;){if(this._tweens[i].update(this.game.time.time)){i++;}else{this._tweens.splice(i,1);e--;}}if(t>0){this._tweens=this._tweens.concat(this._add);this._add.length=0;}return true;},isTweening:function isTweening(t){return this._tweens.some(function(e){return e.target===t;});},_pauseAll:function _pauseAll(){for(var t=this._tweens.length-1;t>=0;t--){this._tweens[t]._pause();}},_resumeAll:function _resumeAll(){for(var t=this._tweens.length-1;t>=0;t--){this._tweens[t]._resume();}},pauseAll:function pauseAll(){for(var t=this._tweens.length-1;t>=0;t--){this._tweens[t].pause();}},resumeAll:function resumeAll(){for(var t=this._tweens.length-1;t>=0;t--){this._tweens[t].resume(true);}}};o.TweenManager.prototype.constructor=o.TweenManager;o.Tween=function(t,e,i){this.game=e;this.target=t;this.manager=i;this.timeline=[];this.reverse=false;this.timeScale=1;this.repeatCounter=0;this.pendingDelete=false;this.onStart=new o.Signal();this.onLoop=new o.Signal();this.onRepeat=new o.Signal();this.onChildComplete=new o.Signal();this.onComplete=new o.Signal();this.isRunning=false;this.current=0;this.properties={};this.chainedTween=null;this.isPaused=false;this.frameBased=i.frameBased;this._onUpdateCallback=null;this._onUpdateCallbackContext=null;this._pausedTime=0;this._codePaused=false;this._hasStarted=false;};o.Tween.prototype={to:function to(t,e,i,s,n,a,r){if(e===undefined||e<=0){e=1000;}if(i===undefined||i===null){i=o.Easing.Default;}if(s===undefined){s=false;}if(n===undefined){n=0;}if(a===undefined){a=0;}if(r===undefined){r=false;}if(typeof i=="string"&&this.manager.easeMap[i]){i=this.manager.easeMap[i];}if(this.isRunning){return this;}else{this.timeline.push(new o.TweenData(this).to(t,e,i,n,a,r));if(s){this.start();}return this;}},from:function from(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1000;var i=arguments.length>2?arguments[2]:undefined;var s=arguments.length>3?arguments[3]:undefined;var n=arguments.length>4?arguments[4]:undefined;var a=arguments.length>5?arguments[5]:undefined;var r=arguments.length>6?arguments[6]:undefined;if(i===undefined||i===null){i=o.Easing.Default;}if(s===undefined){s=false;}if(n===undefined){n=0;}if(a===undefined){a=0;}if(r===undefined){r=false;}if(typeof i=="string"&&this.manager.easeMap[i]){i=this.manager.easeMap[i];}if(this.isRunning){return this;}else{this.timeline.push(new o.TweenData(this).from(t,e,i,n,a,r));if(s){this.start();}return this;}},start:function start(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(this.game===null||this.target===null||this.timeline.length===0||this.isRunning){return this;}for(var e=0;e<this.timeline.length;e++){for(var i in this.timeline[e].vEnd){this.properties[i]=this.target[i]||0;if(!Array.isArray(this.properties[i])){this.properties[i]*=1;}}}for(var e=0;e<this.timeline.length;e++){this.timeline[e].loadValues();}this.manager.add(this);this.isRunning=true;if(t<0||t>this.timeline.length-1){t=0;}this.current=t;this.timeline[this.current].start();return this;},stop:function stop(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.isRunning=false;this._onUpdateCallback=null;this._onUpdateCallbackContext=null;if(t){this.onComplete.dispatch(this.target,this);this._hasStarted=false;if(this.chainedTween){this.chainedTween.start();}}this.manager.remove(this);return this;},updateTweenData:function updateTweenData(t,e,i){if(this.timeline.length===0){return this;}if(i===undefined){i=0;}if(i===-1){for(var s=0;s<this.timeline.length;s++){this.timeline[s][t]=e;}}else{this.timeline[i][t]=e;}return this;},delay:function delay(t,e){return this.updateTweenData("delay",t,e);},repeat:function repeat(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2?arguments[2]:undefined;this.updateTweenData("repeatCounter",t,i);return this.updateTweenData("repeatDelay",e,i);},repeatDelay:function repeatDelay(t,e){return this.updateTweenData("repeatDelay",t,e);},yoyo:function yoyo(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2?arguments[2]:undefined;this.updateTweenData("yoyo",t,i);return this.updateTweenData("yoyoDelay",e,i);},yoyoDelay:function yoyoDelay(t,e){return this.updateTweenData("yoyoDelay",t,e);},easing:function easing(t,e){if(typeof t=="string"&&this.manager.easeMap[t]){t=this.manager.easeMap[t];}return this.updateTweenData("easingFunction",t,e);},interpolation:function interpolation(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:o.Math;var i=arguments.length>2?arguments[2]:undefined;this.updateTweenData("interpolationFunction",t,i);return this.updateTweenData("interpolationContext",e,i);},repeatAll:function repeatAll(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;this.repeatCounter=t;return this;},chain:function chain(){for(var t=arguments.length;t--;){if(t>0){arguments[t-1].chainedTween=arguments[t];}else{this.chainedTween=arguments[t];}}return this;},loop:function loop(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;this.repeatCounter=t?-1:0;return this;},onUpdateCallback:function onUpdateCallback(t,e){this._onUpdateCallback=t;this._onUpdateCallbackContext=e;return this;},pause:function pause(){this.isPaused=true;this._codePaused=true;this._pausedTime=this.game.time.time;},_pause:function _pause(){if(!this._codePaused){this.isPaused=true;this._pausedTime=this.game.time.time;}},resume:function resume(){if(this.isPaused){this.isPaused=false;this._codePaused=false;for(var t=0;t<this.timeline.length;t++){if(!this.timeline[t].isRunning){this.timeline[t].startTime+=this.game.time.time-this._pausedTime;}}}},_resume:function _resume(){if(!this._codePaused){this.resume();}},update:function update(t){if(this.pendingDelete||!this.target){return false;}if(this.isPaused){return true;}var e=this.timeline[this.current].update(t);if(e===o.TweenData.PENDING){return true;}if(e===o.TweenData.RUNNING){if(!this._hasStarted){this.onStart.dispatch(this.target,this);this._hasStarted=true;}if(this._onUpdateCallback!==null){this._onUpdateCallback.call(this._onUpdateCallbackContext,this,this.timeline[this.current].value,this.timeline[this.current]);}return this.isRunning;}if(e===o.TweenData.LOOPED){if(this.timeline[this.current].repeatCounter===-1){this.onLoop.dispatch(this.target,this);}else{this.onRepeat.dispatch(this.target,this);}return true;}if(e===o.TweenData.COMPLETE){var i=false;if(this.reverse){if(--this.current<0){this.current=this.timeline.length-1;i=true;}}else if(++this.current===this.timeline.length){this.current=0;i=true;}if(i){if(this.repeatCounter===-1){this.timeline[this.current].start();this.onLoop.dispatch(this.target,this);return true;}else if(this.repeatCounter>0){this.repeatCounter--;this.timeline[this.current].start();this.onRepeat.dispatch(this.target,this);return true;}else{this.isRunning=false;this.onComplete.dispatch(this.target,this);this._hasStarted=false;if(this.chainedTween){this.chainedTween.start();}return false;}}else{this.onChildComplete.dispatch(this.target,this);this.timeline[this.current].start();return true;}}},generateData:function generateData(t,e){if(this.game===null||this.target===null){return null;}if(t===undefined){t=60;}if(e===undefined){e=[];}for(var i=0;i<this.timeline.length;i++){for(var s in this.timeline[i].vEnd){this.properties[s]=this.target[s]||0;if(!Array.isArray(this.properties[s])){this.properties[s]*=1;}}}for(var i=0;i<this.timeline.length;i++){this.timeline[i].loadValues();}for(var i=0;i<this.timeline.length;i++){e=e.concat(this.timeline[i].generateData(t));}return e;}};Object.defineProperty(o.Tween.prototype,"totalDuration",{get:function get(){var t=0;for(var e=0;e<this.timeline.length;e++){t+=this.timeline[e].duration;}return t;}});o.Tween.prototype.constructor=o.Tween;o.TweenData=function(t){this.parent=t;this.game=t.game;this.vStart={};this.vStartCache={};this.vEnd={};this.vEndCache={};this.duration=1000;this.percent=0;this.value=0;this.repeatCounter=0;this.repeatDelay=0;this.repeatTotal=0;this.interpolate=false;this.yoyo=false;this.yoyoDelay=0;this.inReverse=false;this.delay=0;this.dt=0;this.startTime=null;this.easingFunction=o.Easing.Default;this.interpolationFunction=o.Math.linearInterpolation;this.interpolationContext=o.Math;this.isRunning=false;this.isFrom=false;};o.TweenData.PENDING=0;o.TweenData.RUNNING=1;o.TweenData.LOOPED=2;o.TweenData.COMPLETE=3;o.TweenData.prototype={to:function to(t,e,i,s,n,o){this.vEnd=t;this.duration=e;this.easingFunction=i;this.delay=s;this.repeatTotal=n;this.yoyo=o;this.isFrom=false;return this;},from:function from(t,e,i,s,n,o){this.vEnd=t;this.duration=e;this.easingFunction=i;this.delay=s;this.repeatTotal=n;this.yoyo=o;this.isFrom=true;return this;},start:function start(){this.startTime=this.game.time.time+this.delay;if(this.parent.reverse){this.dt=this.duration;}else{this.dt=0;}if(this.delay>0){this.isRunning=false;}else{this.isRunning=true;}if(this.isFrom){for(var t in this.vStartCache){this.vStart[t]=this.vEndCache[t];this.vEnd[t]=this.vStartCache[t];this.parent.target[t]=this.vStart[t];}}this.value=0;this.yoyoCounter=0;this.repeatCounter=this.repeatTotal;return this;},loadValues:function loadValues(){for(var t in this.parent.properties){this.vStart[t]=this.parent.properties[t];if(Array.isArray(this.vEnd[t])){if(this.vEnd[t].length===0){continue;}if(this.percent===0){this.vEnd[t]=[this.vStart[t]].concat(this.vEnd[t]);}}if(this.vEnd[t]!==undefined){if(typeof this.vEnd[t]=="string"){this.vEnd[t]=this.vStart[t]+parseFloat(this.vEnd[t],10);}this.parent.properties[t]=this.vEnd[t];}else{this.vEnd[t]=this.vStart[t];}this.vStartCache[t]=this.vStart[t];this.vEndCache[t]=this.vEnd[t];}return this;},update:function update(t){if(this.isRunning){if(t<this.startTime){return o.TweenData.RUNNING;}}else{if(!(t>=this.startTime)){return o.TweenData.PENDING;}this.isRunning=true;}var e=this.parent.frameBased?this.game.time.physicsElapsedMS:this.game.time.elapsedMS;if(this.parent.reverse){this.dt-=e*this.parent.timeScale;this.dt=Math.max(this.dt,0);}else{this.dt+=e*this.parent.timeScale;this.dt=Math.min(this.dt,this.duration);}this.percent=this.dt/this.duration;this.value=this.easingFunction(this.percent);for(var i in this.vEnd){var s=this.vStart[i];var n=this.vEnd[i];if(Array.isArray(n)){this.parent.target[i]=this.interpolationFunction.call(this.interpolationContext,n,this.value);}else{this.parent.target[i]=s+(n-s)*this.value;}}if(!this.parent.reverse&&this.percent===1||this.parent.reverse&&this.percent===0){return this.repeat();}else{return o.TweenData.RUNNING;}},generateData:function generateData(t){if(this.parent.reverse){this.dt=this.duration;}else{this.dt=0;}var e=[];var i=false;var s=1/t*1000;do{if(this.parent.reverse){this.dt-=s;this.dt=Math.max(this.dt,0);}else{this.dt+=s;this.dt=Math.min(this.dt,this.duration);}this.percent=this.dt/this.duration;this.value=this.easingFunction(this.percent);var n={};for(var o in this.vEnd){var a=this.vStart[o];var r=this.vEnd[o];if(Array.isArray(r)){n[o]=this.interpolationFunction(r,this.value);}else{n[o]=a+(r-a)*this.value;}}e.push(n);if(!this.parent.reverse&&this.percent===1||this.parent.reverse&&this.percent===0){i=true;}}while(!i);if(this.yoyo){var h=e.slice();h.reverse();e=e.concat(h);}return e;},repeat:function repeat(){if(this.yoyo){if(this.inReverse&&this.repeatCounter===0){for(var t in this.vStartCache){this.vStart[t]=this.vStartCache[t];this.vEnd[t]=this.vEndCache[t];}this.inReverse=false;return o.TweenData.COMPLETE;}this.inReverse=!this.inReverse;}else if(this.repeatCounter===0){return o.TweenData.COMPLETE;}if(this.inReverse){for(var t in this.vStartCache){this.vStart[t]=this.vEndCache[t];this.vEnd[t]=this.vStartCache[t];}}else{for(var t in this.vStartCache){this.vStart[t]=this.vStartCache[t];this.vEnd[t]=this.vEndCache[t];}if(this.repeatCounter>0){this.repeatCounter--;}}this.startTime=this.game.time.time;if(this.yoyo&&this.inReverse){this.startTime+=this.yoyoDelay;}else if(!this.inReverse){this.startTime+=this.repeatDelay;}if(this.parent.reverse){this.dt=this.duration;}else{this.dt=0;}return o.TweenData.LOOPED;}};o.TweenData.prototype.constructor=o.TweenData;o.Easing={Linear:{None:function None(t){return t;}},Quadratic:{In:function In(t){return t*t;},Out:function Out(t){return t*(2-t);},InOut:function InOut(t){if((t*=2)<1){return t*0.5*t;}else{return(--t*(t-2)-1)*-0.5;}}},Cubic:{In:function In(t){return t*t*t;},Out:function Out(t){return--t*t*t+1;},InOut:function InOut(t){if((t*=2)<1){return t*0.5*t*t;}else{return((t-=2)*t*t+2)*0.5;}}},Quartic:{In:function In(t){return t*t*t*t;},Out:function Out(t){return 1- --t*t*t*t;},InOut:function InOut(t){if((t*=2)<1){return t*0.5*t*t*t;}else{return((t-=2)*t*t*t-2)*-0.5;}}},Quintic:{In:function In(t){return t*t*t*t*t;},Out:function Out(t){return--t*t*t*t*t+1;},InOut:function InOut(t){if((t*=2)<1){return t*0.5*t*t*t*t;}else{return((t-=2)*t*t*t*t+2)*0.5;}}},Sinusoidal:{In:function In(t){if(t===0){return 0;}else if(t===1){return 1;}else{return 1-Math.cos(t*Math.PI/2);}},Out:function Out(t){if(t===0){return 0;}else if(t===1){return 1;}else{return Math.sin(t*Math.PI/2);}},InOut:function InOut(t){if(t===0){return 0;}else if(t===1){return 1;}else{return(1-Math.cos(Math.PI*t))*0.5;}}},Exponential:{In:function In(t){if(t===0){return 0;}else{return Math.pow(1024,t-1);}},Out:function Out(t){if(t===1){return 1;}else{return 1-Math.pow(2,t*-10);}},InOut:function InOut(t){if(t===0){return 0;}else if(t===1){return 1;}else if((t*=2)<1){return Math.pow(1024,t-1)*0.5;}else{return(2-Math.pow(2,(t-1)*-10))*0.5;}}},Circular:{In:function In(t){return 1-Math.sqrt(1-t*t);},Out:function Out(t){return Math.sqrt(1- --t*t);},InOut:function InOut(t){if((t*=2)<1){return(Math.sqrt(1-t*t)-1)*-0.5;}else{return(Math.sqrt(1-(t-=2)*t)+1)*0.5;}}},Elastic:{In:function In(t){var e;var i=0.1;var s=0.4;if(t===0){return 0;}else if(t===1){return 1;}else{if(!i||i<1){i=1;e=0.1;}else{e=s*Math.asin(1/i)/(Math.PI*2);}return-i*Math.pow(2,(t-=1)*10)*Math.sin((t-e)*(Math.PI*2)/s);}},Out:function Out(t){var e;var i=0.1;var s=0.4;if(t===0){return 0;}else if(t===1){return 1;}else{if(!i||i<1){i=1;e=0.1;}else{e=s*Math.asin(1/i)/(Math.PI*2);}return i*Math.pow(2,t*-10)*Math.sin((t-e)*(Math.PI*2)/s)+1;}},InOut:function InOut(t){var e;var i=0.1;var s=0.4;if(t===0){return 0;}else if(t===1){return 1;}else{if(!i||i<1){i=1;e=0.1;}else{e=s*Math.asin(1/i)/(Math.PI*2);}if((t*=2)<1){return i*Math.pow(2,(t-=1)*10)*Math.sin((t-e)*(Math.PI*2)/s)*-0.5;}else{return i*Math.pow(2,(t-=1)*-10)*Math.sin((t-e)*(Math.PI*2)/s)*0.5+1;}}}},Back:{In:function In(t){var e=1.70158;return t*t*((e+1)*t-e);},Out:function Out(t){var e=1.70158;return--t*t*((e+1)*t+e)+1;},InOut:function InOut(t){var e=2.5949095;if((t*=2)<1){return t*t*((e+1)*t-e)*0.5;}else{return((t-=2)*t*((e+1)*t+e)+2)*0.5;}}},Bounce:{In:function In(t){return 1-o.Easing.Bounce.Out(1-t);},Out:function Out(t){if(t<1/2.75){return t*7.5625*t;}else if(t<2/2.75){return(t-=1.5/2.75)*7.5625*t+0.75;}else if(t<2.5/2.75){return(t-=2.25/2.75)*7.5625*t+0.9375;}else{return(t-=2.625/2.75)*7.5625*t+0.984375;}},InOut:function InOut(t){if(t<0.5){return o.Easing.Bounce.In(t*2)*0.5;}else{return o.Easing.Bounce.Out(t*2-1)*0.5+0.5;}}}};o.Easing.Default=o.Easing.Linear.None;o.Easing.Power0=o.Easing.Linear.None;o.Easing.Power1=o.Easing.Quadratic.Out;o.Easing.Power2=o.Easing.Cubic.Out;o.Easing.Power3=o.Easing.Quartic.Out;o.Easing.Power4=o.Easing.Quintic.Out;o.Time=function(t){this.game=t;this.time=0;this.prevTime=0;this.now=0;this.elapsed=0;this.elapsedMS=0;this.physicsElapsed=1/60;this.physicsElapsedMS=1/60*1000;this.desiredFpsMult=1/60;this._desiredFps=60;this.suggestedFps=this.desiredFps;this.slowMotion=1;this.advancedTiming=false;this.frames=0;this.fps=0;this.fpsMin=1000;this.fpsMax=0;this.msMin=1000;this.msMax=0;this.pauseDuration=0;this.timeToCall=0;this.timeExpected=0;this.events=new o.Timer(this.game,false);this._frameCount=0;this._elapsedAccumulator=0;this._started=0;this._timeLastSecond=0;this._pauseStarted=0;this._justResumed=false;this._timers=[];};o.Time.prototype={boot:function boot(){this._started=Date.now();this.time=Date.now();this.events.start();this.timeExpected=this.time;},add:function add(t){this._timers.push(t);return t;},create:function create(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var e=new o.Timer(this.game,t);this._timers.push(e);return e;},removeAll:function removeAll(){for(var t=0;t<this._timers.length;t++){this._timers[t].destroy();}this._timers=[];this.events.removeAll();},refresh:function refresh(){var t=this.time;this.time=Date.now();this.elapsedMS=this.time-t;},update:function update(t){var e=this.time;this.time=Date.now();this.elapsedMS=this.time-e;this.prevTime=this.now;this.now=t;this.elapsed=this.now-this.prevTime;if(this.game.raf._isSetTimeOut){this.timeToCall=Math.floor(Math.max(0,1000/this._desiredFps-(this.timeExpected-t)));this.timeExpected=t+this.timeToCall;}if(this.advancedTiming){this.updateAdvancedTiming();}if(!this.game.paused){this.events.update(this.time);if(this._timers.length){this.updateTimers();}}},updateTimers:function updateTimers(){for(var t=0,e=this._timers.length;t<e;){if(this._timers[t].update(this.time)){t++;}else{this._timers.splice(t,1);e--;}}},updateAdvancedTiming:function updateAdvancedTiming(){this._frameCount++;this._elapsedAccumulator+=this.elapsed;if(this._frameCount>=this._desiredFps*2){this.suggestedFps=Math.floor(200/(this._elapsedAccumulator/this._frameCount))*5;this._frameCount=0;this._elapsedAccumulator=0;}this.msMin=Math.min(this.msMin,this.elapsed);this.msMax=Math.max(this.msMax,this.elapsed);this.frames++;if(this.now>this._timeLastSecond+1000){this.fps=Math.round(this.frames*1000/(this.now-this._timeLastSecond));this.fpsMin=Math.min(this.fpsMin,this.fps);this.fpsMax=Math.max(this.fpsMax,this.fps);this._timeLastSecond=this.now;this.frames=0;}},gamePaused:function gamePaused(){this._pauseStarted=Date.now();this.events.pause();for(var t=this._timers.length;t--;){this._timers[t]._pause();}},gameResumed:function gameResumed(){this.time=Date.now();this.pauseDuration=this.time-this._pauseStarted;this.events.resume();for(var t=this._timers.length;t--;){this._timers[t]._resume();}},totalElapsedSeconds:function totalElapsedSeconds(){return(this.time-this._started)*0.001;},elapsedSince:function elapsedSince(t){return this.time-t;},elapsedSecondsSince:function elapsedSecondsSince(t){return(this.time-t)*0.001;},reset:function reset(){this._started=this.time;this.removeAll();}};Object.defineProperty(o.Time.prototype,"desiredFps",{get:function get(){return this._desiredFps;},set:function set(t){this._desiredFps=t;this.physicsElapsed=1/t;this.physicsElapsedMS=this.physicsElapsed*1000;this.desiredFpsMult=1/t;}});o.Time.prototype.constructor=o.Time;o.Timer=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.game=t;this.running=false;this.autoDestroy=e;this.expired=false;this.elapsed=0;this.events=[];this.onComplete=new o.Signal();this.nextTick=0;this.timeCap=1000;this.paused=false;this._codePaused=false;this._started=0;this._pauseStarted=0;this._pauseTotal=0;this._now=Date.now();this._len=0;this._marked=0;this._i=0;this._diff=0;this._newTick=0;};o.Timer.MINUTE=60000;o.Timer.SECOND=1000;o.Timer.HALF=500;o.Timer.QUARTER=250;o.Timer.prototype={create:function create(t,e,i,s,n,a){t=Math.round(t);var r=t;if(this._now===0){r+=this.game.time.time;}else{r+=this._now;}var h=new o.TimerEvent(this,t,r,i,e,s,n,a);this.events.push(h);this.order();this.expired=false;return h;},add:function add(t,e,i){return this.create(t,false,0,e,i,Array.prototype.slice.call(arguments,3));},repeat:function repeat(t,e,i,s){return this.create(t,false,e,i,s,Array.prototype.slice.call(arguments,4));},loop:function loop(t,e,i){return this.create(t,true,0,e,i,Array.prototype.slice.call(arguments,3));},start:function start(t){if(!this.running){this._started=this.game.time.time+(t||0);this.running=true;for(var e=0;e<this.events.length;e++){this.events[e].tick=this.events[e].delay+this._started;}}},stop:function stop(t){this.running=false;if(t===undefined){t=true;}if(t){this.events.length=0;}},remove:function remove(t){for(var e=0;e<this.events.length;e++){if(this.events[e]===t){this.events[e].pendingDelete=true;return true;}}return false;},order:function order(){if(this.events.length>0){this.events.sort(this.sortHandler);this.nextTick=this.events[0].tick;}},sortHandler:function sortHandler(t,e){if(t.tick<e.tick){return-1;}else if(t.tick>e.tick){return 1;}else{return 0;}},clearPendingEvents:function clearPendingEvents(){for(this._i=this.events.length;this._i--;){if(this.events[this._i].pendingDelete){this.events.splice(this._i,1);}}this._len=this.events.length;this._i=0;},update:function update(t){if(this.paused){return true;}this.elapsed=t-this._now;this._now=t;if(this.elapsed>this.timeCap){this.adjustEvents(t-this.elapsed);}this._marked=0;this.clearPendingEvents();if(this.running&&this._now>=this.nextTick&&this._len>0){while(this._i<this._len&&this.running&&this._now>=this.events[this._i].tick&&!this.events[this._i].pendingDelete){this._newTick=this._now+this.events[this._i].delay-(this._now-this.events[this._i].tick);if(this._newTick<0){this._newTick=this._now+this.events[this._i].delay;}if(this.events[this._i].loop===true){this.events[this._i].tick=this._newTick;this.events[this._i].callback.apply(this.events[this._i].callbackContext,this.events[this._i].args);}else if(this.events[this._i].repeatCount>0){this.events[this._i].repeatCount--;this.events[this._i].tick=this._newTick;this.events[this._i].callback.apply(this.events[this._i].callbackContext,this.events[this._i].args);}else{this._marked++;this.events[this._i].pendingDelete=true;this.events[this._i].callback.apply(this.events[this._i].callbackContext,this.events[this._i].args);}this._i++;}if(this.events.length>this._marked){this.order();}else{this.expired=true;this.onComplete.dispatch(this);}}return!this.expired||!this.autoDestroy;},pause:function pause(){if(this.running){this._codePaused=true;if(!this.paused){this._pauseStarted=this.game.time.time;this.paused=true;}}},_pause:function _pause(){if(!this.paused&&this.running){this._pauseStarted=this.game.time.time;this.paused=true;}},adjustEvents:function adjustEvents(t){for(var e=0;e<this.events.length;e++){if(!this.events[e].pendingDelete){var i=this.events[e].tick-t;if(i<0){i=0;}this.events[e].tick=this._now+i;}}var s=this.nextTick-t;this.nextTick=s<0?this._now:this._now+s;},resume:function resume(){if(this.paused){var t=this.game.time.time;this._pauseTotal+=t-this._now;this._now=t;this.adjustEvents(this._pauseStarted);this.paused=false;this._codePaused=false;}},_resume:function _resume(){if(!this._codePaused){this.resume();}},removeAll:function removeAll(){this.onComplete.removeAll();this.events.length=0;this._len=0;this._i=0;},destroy:function destroy(){this.onComplete.removeAll();this.running=false;this.events=[];this._len=0;this._i=0;}};Object.defineProperty(o.Timer.prototype,"next",{get:function get(){return this.nextTick;}});Object.defineProperty(o.Timer.prototype,"duration",{get:function get(){if(this.running&&this.nextTick>this._now){return this.nextTick-this._now;}else{return 0;}}});Object.defineProperty(o.Timer.prototype,"length",{get:function get(){return this.events.length;}});Object.defineProperty(o.Timer.prototype,"ms",{get:function get(){if(this.running){return this._now-this._started-this._pauseTotal;}else{return 0;}}});Object.defineProperty(o.Timer.prototype,"seconds",{get:function get(){if(this.running){return this.ms*0.001;}else{return 0;}}});o.Timer.prototype.constructor=o.Timer;o.TimerEvent=function(t,e,i,s,n,o,a,r){this.timer=t;this.delay=e;this.tick=i;this.repeatCount=s-1;this.loop=n;this.callback=o;this.callbackContext=a;this.args=r;this.pendingDelete=false;};o.TimerEvent.prototype.constructor=o.TimerEvent;o.AnimationManager=function(t){this.sprite=t;this.game=t.game;this.currentFrame=null;this.currentAnim=null;this.updateIfVisible=true;this.isLoaded=false;this._frameData=null;this._anims={};this._outputFrames=[];};o.AnimationManager.prototype={loadFrameData:function loadFrameData(t,e){if(t===undefined){return false;}if(this.isLoaded){for(var i in this._anims){this._anims[i].updateFrameData(t);}}this._frameData=t;if(e===undefined||e===null){this.frame=0;}else if(typeof e=="string"){this.frameName=e;}else{this.frame=e;}this.isLoaded=true;return true;},copyFrameData:function copyFrameData(t,e){this._frameData=t.clone();if(this.isLoaded){for(var i in this._anims){this._anims[i].updateFrameData(this._frameData);}}if(e===undefined||e===null){this.frame=0;}else if(typeof e=="string"){this.frameName=e;}else{this.frame=e;}this.isLoaded=true;return true;},add:function add(t,e,i,s,n){e=e||[];i=i||60;if(s===undefined){s=false;}if(n===undefined){n=!!e&&typeof e[0]=="number";}this._outputFrames=[];this._frameData.getFrameIndexes(e,n,this._outputFrames);this._anims[t]=new o.Animation(this.game,this.sprite,t,this._frameData,this._outputFrames,i,s);this.currentAnim=this._anims[t];if(this.sprite.tilingTexture){this.sprite.refreshTexture=true;}return this._anims[t];},validateFrames:function validateFrames(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;for(var i=0;i<t.length;i++){if(e===true){if(t[i]>this._frameData.total){return false;}}else if(this._frameData.checkFrameName(t[i])===false){return false;}}return true;},play:function play(t,e,i,s){if(this._anims[t]){if(this.currentAnim===this._anims[t]){if(this.currentAnim.isPlaying===false){this.currentAnim.paused=false;return this.currentAnim.play(e,i,s);}else{return this.currentAnim;}}else{if(this.currentAnim&&this.currentAnim.isPlaying){this.currentAnim.stop();}this.currentAnim=this._anims[t];this.currentAnim.paused=false;this.currentFrame=this.currentAnim.currentFrame;return this.currentAnim.play(e,i,s);}}},stop:function stop(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!!this.currentAnim&&(typeof t!="string"||t===this.currentAnim.name)){this.currentAnim.stop(e);}},update:function update(){return(!this.updateIfVisible||!!this.sprite.visible)&&!!this.currentAnim&&!!this.currentAnim.update()&&(this.currentFrame=this.currentAnim.currentFrame,true);},next:function next(t){if(this.currentAnim){this.currentAnim.next(t);this.currentFrame=this.currentAnim.currentFrame;}},previous:function previous(t){if(this.currentAnim){this.currentAnim.previous(t);this.currentFrame=this.currentAnim.currentFrame;}},getAnimation:function getAnimation(t){if(typeof t=="string"&&this._anims[t]){return this._anims[t];}else{return null;}},refreshFrame:function refreshFrame(){},destroy:function destroy(){var t=null;for(var t in this._anims){if(this._anims.hasOwnProperty(t)){this._anims[t].destroy();}}this._anims={};this._outputFrames=[];this._frameData=null;this.currentAnim=null;this.currentFrame=null;this.sprite=null;this.game=null;}};o.AnimationManager.prototype.constructor=o.AnimationManager;Object.defineProperty(o.AnimationManager.prototype,"frameData",{get:function get(){return this._frameData;}});Object.defineProperty(o.AnimationManager.prototype,"frameTotal",{get:function get(){return this._frameData.total;}});Object.defineProperty(o.AnimationManager.prototype,"paused",{get:function get(){return this.currentAnim.isPaused;},set:function set(t){this.currentAnim.paused=t;}});Object.defineProperty(o.AnimationManager.prototype,"name",{get:function get(){if(this.currentAnim){return this.currentAnim.name;}}});Object.defineProperty(o.AnimationManager.prototype,"frame",{get:function get(){if(this.currentFrame){return this.currentFrame.index;}},set:function set(t){if(typeof t=="number"&&this._frameData&&this._frameData.getFrame(t)!==null){this.currentFrame=this._frameData.getFrame(t);if(this.currentFrame){this.sprite.setFrame(this.currentFrame);}}}});Object.defineProperty(o.AnimationManager.prototype,"frameName",{get:function get(){if(this.currentFrame){return this.currentFrame.name;}},set:function set(t){if(typeof t=="string"&&this._frameData&&this._frameData.getFrameByName(t)!==null){this.currentFrame=this._frameData.getFrameByName(t);if(this.currentFrame){this._frameIndex=this.currentFrame.index;this.sprite.setFrame(this.currentFrame);}}}});o.Animation=function(t,e,i,s,n,a){var r=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;this.game=t;this._parent=e;this._frameData=s;this.name=i;this._frames=[];this._frames=this._frames.concat(n);this.delay=1000/a;this.loop=r;this.loopCount=0;this.killOnComplete=false;this.isFinished=false;this.isPlaying=false;this.isPaused=false;this._pauseStartTime=0;this._frameIndex=0;this._frameDiff=0;this._frameSkip=1;this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]);this.onStart=new o.Signal();this.onUpdate=null;this.onComplete=new o.Signal();this.onLoop=new o.Signal();this.isReversed=false;this.game.onPause.add(this.onPause,this);this.game.onResume.add(this.onResume,this);};o.Animation.prototype={play:function play(t,e,i){if(typeof t=="number"){this.delay=1000/t;}if(typeof e=="boolean"){this.loop=e;}if(i!==undefined){this.killOnComplete=i;}this.isPlaying=true;this.isFinished=false;this.paused=false;this.loopCount=0;this._timeLastFrame=this.game.time.time;this._timeNextFrame=this.game.time.time+this.delay;this._frameIndex=this.isReversed?this._frames.length-1:0;this.updateCurrentFrame(false,true);this._parent.events.onAnimationStart$dispatch(this._parent,this);this.onStart.dispatch(this._parent,this);this._parent.animations.currentAnim=this;this._parent.animations.currentFrame=this.currentFrame;return this;},restart:function restart(){this.isPlaying=true;this.isFinished=false;this.paused=false;this.loopCount=0;this._timeLastFrame=this.game.time.time;this._timeNextFrame=this.game.time.time+this.delay;this._frameIndex=0;this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]);this._parent.setFrame(this.currentFrame);this._parent.animations.currentAnim=this;this._parent.animations.currentFrame=this.currentFrame;this.onStart.dispatch(this._parent,this);},reverse:function reverse(){this.reversed=!this.reversed;return this;},reverseOnce:function reverseOnce(){this.onComplete.addOnce(this.reverse,this);return this.reverse();},setFrame:function setFrame(t,e){var i;if(e===undefined){e=false;}if(typeof t=="string"){for(var s=0;s<this._frames.length;s++){if(this._frameData.getFrame(this._frames[s]).name===t){i=s;}}}else if(typeof t=="number"){if(e){i=t;}else{for(var s=0;s<this._frames.length;s++){if(this._frames[s]===t){i=s;}}}}if(i){this._frameIndex=i-1;this._timeNextFrame=this.game.time.time;this.update();}},stop:function stop(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;this.isPlaying=false;this.isFinished=true;this.paused=false;if(t){this.currentFrame=this._frameData.getFrame(this._frames[0]);this._parent.setFrame(this.currentFrame);}if(e){this._parent.events.onAnimationComplete$dispatch(this._parent,this);this.onComplete.dispatch(this._parent,this);}},onPause:function onPause(){if(this.isPlaying){this._frameDiff=this._timeNextFrame-this.game.time.time;}},onResume:function onResume(){if(this.isPlaying){this._timeNextFrame=this.game.time.time+this._frameDiff;}},update:function update(){return!this.isPaused&&!!this.isPlaying&&!!(this.game.time.time>=this._timeNextFrame)&&(this._frameSkip=1,this._frameDiff=this.game.time.time-this._timeNextFrame,this._timeLastFrame=this.game.time.time,this._frameDiff>this.delay&&(this._frameSkip=Math.floor(this._frameDiff/this.delay),this._frameDiff-=this._frameSkip*this.delay),this._timeNextFrame=this.game.time.time+(this.delay-this._frameDiff),this.isReversed?this._frameIndex-=this._frameSkip:this._frameIndex+=this._frameSkip,!this.isReversed&&this._frameIndex>=this._frames.length||this.isReversed&&this._frameIndex<=-1?this.loop?(this._frameIndex=Math.abs(this._frameIndex)%this._frames.length,this.isReversed&&(this._frameIndex=this._frames.length-1-this._frameIndex),this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&this._parent.setFrame(this.currentFrame),this.loopCount++,this._parent.events.onAnimationLoop$dispatch(this._parent,this),this.onLoop.dispatch(this._parent,this),!this.onUpdate||(this.onUpdate.dispatch(this,this.currentFrame),!!this._frameData)):(this.complete(),false):this.updateCurrentFrame(true));},updateCurrentFrame:function updateCurrentFrame(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!this._frameData){return false;}var i=this.currentFrame.index;this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]);if(this.currentFrame&&(e||!e&&i!==this.currentFrame.index)){this._parent.setFrame(this.currentFrame);}return!this.onUpdate||!t||(this.onUpdate.dispatch(this,this.currentFrame),!!this._frameData);},next:function next(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var e=this._frameIndex+t;if(e>=this._frames.length){if(this.loop){e%=this._frames.length;}else{e=this._frames.length-1;}}if(e!==this._frameIndex){this._frameIndex=e;this.updateCurrentFrame(true);}},previous:function previous(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var e=this._frameIndex-t;if(e<0){if(this.loop){e=this._frames.length+e;}else{e++;}}if(e!==this._frameIndex){this._frameIndex=e;this.updateCurrentFrame(true);}},updateFrameData:function updateFrameData(t){this._frameData=t;this.currentFrame=this._frameData?this._frameData.getFrame(this._frames[this._frameIndex%this._frames.length]):null;},destroy:function destroy(){if(this._frameData){this.game.onPause.remove(this.onPause,this);this.game.onResume.remove(this.onResume,this);this.game=null;this._parent=null;this._frames=null;this._frameData=null;this.currentFrame=null;this.isPlaying=false;this.onStart.dispose();this.onLoop.dispose();this.onComplete.dispose();if(this.onUpdate){this.onUpdate.dispose();}}},complete:function complete(){this._frameIndex=this._frames.length-1;this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]);this.isPlaying=false;this.isFinished=true;this.paused=false;this._parent.events.onAnimationComplete$dispatch(this._parent,this);this.onComplete.dispatch(this._parent,this);if(this.killOnComplete){this._parent.kill();}}};o.Animation.prototype.constructor=o.Animation;Object.defineProperty(o.Animation.prototype,"paused",{get:function get(){return this.isPaused;},set:function set(t){this.isPaused=t;if(t){this._pauseStartTime=this.game.time.time;}else if(this.isPlaying){this._timeNextFrame=this.game.time.time+this.delay;}}});Object.defineProperty(o.Animation.prototype,"reversed",{get:function get(){return this.isReversed;},set:function set(t){this.isReversed=t;}});Object.defineProperty(o.Animation.prototype,"frameTotal",{get:function get(){return this._frames.length;}});Object.defineProperty(o.Animation.prototype,"frame",{get:function get(){if(this.currentFrame!==null){return this.currentFrame.index;}else{return this._frameIndex;}},set:function set(t){this.currentFrame=this._frameData.getFrame(this._frames[t]);if(this.currentFrame!==null){this._frameIndex=t;this._parent.setFrame(this.currentFrame);if(this.onUpdate){this.onUpdate.dispatch(this,this.currentFrame);}}}});Object.defineProperty(o.Animation.prototype,"speed",{get:function get(){return 1000/this.delay;},set:function set(t){if(t>0){this.delay=1000/t;}}});Object.defineProperty(o.Animation.prototype,"enableUpdate",{get:function get(){return this.onUpdate!==null;},set:function set(t){if(t&&this.onUpdate===null){this.onUpdate=new o.Signal();}else if(!t&&this.onUpdate!==null){this.onUpdate.dispose();this.onUpdate=null;}}});o.Animation.generateFrameNames=function(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";var n=arguments.length>4?arguments[4]:undefined;var a=[];var r="";if(e<i){for(var h=e;h<=i;h++){r=typeof n=="number"?o.Utils.pad(h.toString(),n,"0",1):h.toString();r=t+r+s;a.push(r);}}else{for(var h=e;h>=i;h--){r=typeof n=="number"?o.Utils.pad(h.toString(),n,"0",1):h.toString();r=t+r+s;a.push(r);}}return a;};o.Frame=function(t,e,i,s,n,a){this.index=t;this.x=e;this.y=i;this.width=s;this.height=n;this.name=a;this.centerX=Math.floor(s/2);this.centerY=Math.floor(n/2);this.distance=o.Math.distance(0,0,s,n);this.rotated=false;this.rotationDirection="cw";this.trimmed=false;this.sourceSizeW=s;this.sourceSizeH=n;this.spriteSourceSizeX=0;this.spriteSourceSizeY=0;this.spriteSourceSizeW=0;this.spriteSourceSizeH=0;this.right=this.x+this.width;this.bottom=this.y+this.height;};o.Frame.prototype={resize:function resize(t,e){this.width=t;this.height=e;this.centerX=Math.floor(t/2);this.centerY=Math.floor(e/2);this.distance=o.Math.distance(0,0,t,e);this.sourceSizeW=t;this.sourceSizeH=e;this.right=this.x+t;this.bottom=this.y+e;},setTrim:function setTrim(t,e,i,s,n,o,a){this.trimmed=t;if(t){this.sourceSizeW=e;this.sourceSizeH=i;this.centerX=Math.floor(e/2);this.centerY=Math.floor(i/2);this.spriteSourceSizeX=s;this.spriteSourceSizeY=n;this.spriteSourceSizeW=o;this.spriteSourceSizeH=a;}},clone:function clone(){var t=new o.Frame(this.index,this.x,this.y,this.width,this.height,this.name);for(var e in this){if(this.hasOwnProperty(e)){t[e]=this[e];}}return t;},getRect:function getRect(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new o.Rectangle(this.x,this.y,this.width,this.height);return t;}};o.Frame.prototype.constructor=o.Frame;o.FrameData=function(){this._frames=[];this._frameNames=[];};o.FrameData.prototype={addFrame:function addFrame(t){t.index=this._frames.length;this._frames.push(t);if(t.name!==""){this._frameNames[t.name]=t.index;}return t;},getFrame:function getFrame(t){if(t>=this._frames.length){t=0;}return this._frames[t];},getFrameByName:function getFrameByName(t){if(typeof this._frameNames[t]=="number"){return this._frames[this._frameNames[t]];}else{return null;}},checkFrameName:function checkFrameName(t){return this._frameNames[t]!=null;},clone:function clone(){var t=new o.FrameData();for(var e=0;e<this._frames.length;e++){t._frames.push(this._frames[e].clone());}for(var i in this._frameNames){if(this._frameNames.hasOwnProperty(i)){t._frameNames.push(this._frameNames[i]);}}return t;},getFrameRange:function getFrameRange(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];for(var s=t;s<=e;s++){i.push(this._frames[s]);}return i;},getFrames:function getFrames(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];if(t===undefined||t.length===0){for(var s=0;s<this._frames.length;s++){i.push(this._frames[s]);}}else{for(var s=0;s<t.length;s++){if(e){i.push(this.getFrame(t[s]));}else{i.push(this.getFrameByName(t[s]));}}}return i;},getFrameIndexes:function getFrameIndexes(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];if(t===undefined||t.length===0){for(var s=0;s<this._frames.length;s++){i.push(this._frames[s].index);}}else{for(var s=0;s<t.length;s++){if(e&&this._frames[t[s]]){i.push(this._frames[t[s]].index);}else if(this.getFrameByName(t[s])){i.push(this.getFrameByName(t[s]).index);}}}return i;},destroy:function destroy(){this._frames=null;this._frameNames=null;}};o.FrameData.prototype.constructor=o.FrameData;Object.defineProperty(o.FrameData.prototype,"total",{get:function get(){return this._frames.length;}});o.AnimationParser={spriteSheet:function spriteSheet(t,e,i,s,n,a,r){var h=e;if(typeof e=="string"){h=t.cache.getImage(e);}if(h===null){return null;}var l=h.width;var c=h.height;if(i<=0){i=Math.floor(-l/Math.min(-1,i));}if(s<=0){s=Math.floor(-c/Math.min(-1,s));}var u=Math.floor((l-a)/(i+r));var d=Math.floor((c-a)/(s+r));var p=u*d;if(n!==-1){p=n;}if(l===0||c===0||l<i||c<s||p===0){return null;}var f=new o.FrameData();var y=a;var g=a;for(var m=0;m<p;m++){f.addFrame(new o.Frame(m,y,g,i,s,""));if((y+=i+r)+i>l){y=a;g+=s+r;}}return f;},JSONData:function JSONData(t,e){if(e.frames){var i=new o.FrameData();for(var s=e.frames,n,a=0;a<s.length;a++){n=i.addFrame(new o.Frame(a,s[a].frame.x,s[a].frame.y,s[a].frame.w,s[a].frame.h,s[a].filename));if(s[a].trimmed){n.setTrim(s[a].trimmed,s[a].sourceSize.w,s[a].sourceSize.h,s[a].spriteSourceSize.x,s[a].spriteSourceSize.y,s[a].spriteSourceSize.w,s[a].spriteSourceSize.h);}}return i;}},JSONDataPyxel:function JSONDataPyxel(t,e){["layers","tilewidth","tileheight","tileswide","tileshigh"].forEach(function(t){e[t];});if(e.layers.length===1){var i=new o.FrameData();var s=e.tileheight;var n=e.tilewidth;for(var a=e.layers[0].tiles,r,h=0;h<a.length;h++){r=i.addFrame(new o.Frame(h,a[h].x,a[h].y,n,s,"frame_"+h));r.setTrim(false);}return i;}},JSONDataHash:function JSONDataHash(t,e){if(e.frames){var i=new o.FrameData();var s=e.frames;var n;var a=0;for(var r in s){n=i.addFrame(new o.Frame(a,s[r].frame.x,s[r].frame.y,s[r].frame.w,s[r].frame.h,r));if(s[r].trimmed){n.setTrim(s[r].trimmed,s[r].sourceSize.w,s[r].sourceSize.h,s[r].spriteSourceSize.x,s[r].spriteSourceSize.y,s[r].spriteSourceSize.w,s[r].spriteSourceSize.h);}a++;}return i;}},XMLData:function XMLData(t,e){if(e.getElementsByTagName("TextureAtlas")){var i=new o.FrameData();for(var s=e.getElementsByTagName("SubTexture"),n,a,r,h,l,c,u,d,p,f,y,g=0;g<s.length;g++){r=s[g].attributes;a=r.name.value;h=parseInt(r.x.value,10);l=parseInt(r.y.value,10);c=parseInt(r.width.value,10);u=parseInt(r.height.value,10);d=null;p=null;if(r.frameX){d=Math.abs(parseInt(r.frameX.value,10));p=Math.abs(parseInt(r.frameY.value,10));f=parseInt(r.frameWidth.value,10);y=parseInt(r.frameHeight.value,10);}n=i.addFrame(new o.Frame(g,h,l,c,u,a));if(d!==null||p!==null){n.setTrim(true,c,u,d,p,f,y);}}return i;}}};o.Cache=function(t){this.game=t;this.autoResolveURL=false;this._cache={canvas:{},image:{},texture:{},sound:{},video:{},text:{},json:{},xml:{},physics:{},tilemap:{},binary:{},bitmapData:{},bitmapFont:{},shader:{},renderTexture:{}};this._urlMap={};this._urlResolver=new Image();this._urlTemp=null;this.onSoundUnlock=new o.Signal();this._cacheMap=[];this._cacheMap[o.Cache.CANVAS]=this._cache.canvas;this._cacheMap[o.Cache.IMAGE]=this._cache.image;this._cacheMap[o.Cache.TEXTURE]=this._cache.texture;this._cacheMap[o.Cache.SOUND]=this._cache.sound;this._cacheMap[o.Cache.TEXT]=this._cache.text;this._cacheMap[o.Cache.PHYSICS]=this._cache.physics;this._cacheMap[o.Cache.TILEMAP]=this._cache.tilemap;this._cacheMap[o.Cache.BINARY]=this._cache.binary;this._cacheMap[o.Cache.BITMAPDATA]=this._cache.bitmapData;this._cacheMap[o.Cache.BITMAPFONT]=this._cache.bitmapFont;this._cacheMap[o.Cache.JSON]=this._cache.json;this._cacheMap[o.Cache.XML]=this._cache.xml;this._cacheMap[o.Cache.VIDEO]=this._cache.video;this._cacheMap[o.Cache.SHADER]=this._cache.shader;this._cacheMap[o.Cache.RENDER_TEXTURE]=this._cache.renderTexture;this.addDefaultImage();this.addMissingImage();};o.Cache.CANVAS=1;o.Cache.IMAGE=2;o.Cache.TEXTURE=3;o.Cache.SOUND=4;o.Cache.TEXT=5;o.Cache.PHYSICS=6;o.Cache.TILEMAP=7;o.Cache.BINARY=8;o.Cache.BITMAPDATA=9;o.Cache.BITMAPFONT=10;o.Cache.JSON=11;o.Cache.XML=12;o.Cache.VIDEO=13;o.Cache.SHADER=14;o.Cache.RENDER_TEXTURE=15;o.Cache.DEFAULT=null;o.Cache.MISSING=null;o.Cache.prototype={addCanvas:function addCanvas(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:e.getContext("2d");this._cache.canvas[t]={canvas:e,context:i};},addImage:function addImage(t,e,i){if(this.checkImageKey(t)){this.removeImage(t);}var s={key:t,url:e,data:i,base:new PIXI.BaseTexture(i),frame:new o.Frame(0,0,0,i.width,i.height,t),frameData:new o.FrameData()};s.frameData.addFrame(new o.Frame(0,0,0,i.width,i.height,e));this._cache.image[t]=s;this._resolveURL(e,s);if(t==="__default"){o.Cache.DEFAULT=new PIXI.Texture(s.base);}else if(t==="__missing"){o.Cache.MISSING=new PIXI.Texture(s.base);}return s;},addDefaultImage:function addDefaultImage(){var t=new Image();t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==";var e=this.addImage("__default",null,t);e.base.skipRender=true;o.Cache.DEFAULT=new PIXI.Texture(e.base);},addMissingImage:function addMissingImage(){var t=new Image();t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==";var e=this.addImage("__missing",null,t);o.Cache.MISSING=new PIXI.Texture(e.base);},addSound:function addSound(t,e,i,s,n){if(s===undefined){s=true;n=false;}if(n===undefined){s=false;n=true;}var o=false;if(n){o=true;}this._cache.sound[t]={url:e,data:i,isDecoding:false,decoded:o,webAudio:s,audioTag:n,locked:this.game.sound.touchLocked};this._resolveURL(e,this._cache.sound[t]);},addText:function addText(t,e,i){this._cache.text[t]={url:e,data:i};this._resolveURL(e,this._cache.text[t]);},addPhysicsData:function addPhysicsData(t,e,i,s){this._cache.physics[t]={url:e,data:i,format:s};this._resolveURL(e,this._cache.physics[t]);},addTilemap:function addTilemap(t,e,i,s){this._cache.tilemap[t]={url:e,data:i,format:s};this._resolveURL(e,this._cache.tilemap[t]);},addBinary:function addBinary(t,e){this._cache.binary[t]=e;},addBitmapData:function addBitmapData(t,e,i){e.key=t;if(i===undefined){i=new o.FrameData();i.addFrame(e.textureFrame);}this._cache.bitmapData[t]={data:e,frameData:i};return e;},addBitmapFont:function addBitmapFont(t,e,i,s,n,a,r){var h={url:e,data:i,font:null,base:new PIXI.BaseTexture(i)};if(a===undefined){a=0;}if(r===undefined){r=0;}h.font=n==="json"?o.LoaderParser.jsonBitmapFont(s,h.base,a,r):o.LoaderParser.xmlBitmapFont(s,h.base,a,r);this._cache.bitmapFont[t]=h;this._resolveURL(e,h);},addJSON:function addJSON(t,e,i){this._cache.json[t]={url:e,data:i};this._resolveURL(e,this._cache.json[t]);},addXML:function addXML(t,e,i){this._cache.xml[t]={url:e,data:i};this._resolveURL(e,this._cache.xml[t]);},addVideo:function addVideo(t,e,i,s){this._cache.video[t]={url:e,data:i,isBlob:s,locked:true};this._resolveURL(e,this._cache.video[t]);},addShader:function addShader(t,e,i){this._cache.shader[t]={url:e,data:i};this._resolveURL(e,this._cache.shader[t]);},addRenderTexture:function addRenderTexture(t,e){this._cache.renderTexture[t]={texture:e,frame:new o.Frame(0,0,0,e.width,e.height,"","")};},addSpriteSheet:function addSpriteSheet(t,e,i,s,n){var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:-1;var r=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;var h=arguments.length>7&&arguments[7]!==undefined?arguments[7]:0;var l={key:t,url:e,data:i,frameWidth:s,frameHeight:n,margin:r,spacing:h,base:new PIXI.BaseTexture(i),frameData:o.AnimationParser.spriteSheet(this.game,i,s,n,a,r,h)};this._cache.image[t]=l;this._resolveURL(e,l);},addTextureAtlas:function addTextureAtlas(t,e,i,s,n){var a={key:t,url:e,data:i,base:new PIXI.BaseTexture(i)};if(n===o.Loader.TEXTURE_ATLAS_XML_STARLING){a.frameData=o.AnimationParser.XMLData(this.game,s,t);}else if(n===o.Loader.TEXTURE_ATLAS_JSON_PYXEL){a.frameData=o.AnimationParser.JSONDataPyxel(this.game,s,t);}else if(Array.isArray(s.frames)){a.frameData=o.AnimationParser.JSONData(this.game,s,t);}else{a.frameData=o.AnimationParser.JSONDataHash(this.game,s,t);}this._cache.image[t]=a;this._resolveURL(e,a);},reloadSound:function reloadSound(t){var e=this;var i=this.getSound(t);if(i){i.data.src=i.url;i.data.addEventListener("canplaythrough",function(){return e.reloadSoundComplete(t);},false);i.data.load();}},reloadSoundComplete:function reloadSoundComplete(t){var e=this.getSound(t);if(e){e.locked=false;this.onSoundUnlock.dispatch(t);}},updateSound:function updateSound(t,e,i){var s=this.getSound(t);if(s){s[e]=i;}},decodedSound:function decodedSound(t,e){var i=this.getSound(t);i.data=e;i.decoded=true;i.isDecoding=false;},isSoundDecoded:function isSoundDecoded(t){var e=this.getItem(t,o.Cache.SOUND,"isSoundDecoded");if(e){return e.decoded;}},isSoundReady:function isSoundReady(t){var e=this.getItem(t,o.Cache.SOUND,"isSoundDecoded");if(e){return e.decoded&&!this.game.sound.touchLocked;}},checkKey:function checkKey(t,e){return!!this._cacheMap[t][e];},checkURL:function checkURL(t){return!!this._urlMap[this._resolveURL(t)];},checkCanvasKey:function checkCanvasKey(t){return this.checkKey(o.Cache.CANVAS,t);},checkImageKey:function checkImageKey(t){return this.checkKey(o.Cache.IMAGE,t);},checkTextureKey:function checkTextureKey(t){return this.checkKey(o.Cache.TEXTURE,t);},checkSoundKey:function checkSoundKey(t){return this.checkKey(o.Cache.SOUND,t);},checkTextKey:function checkTextKey(t){return this.checkKey(o.Cache.TEXT,t);},checkPhysicsKey:function checkPhysicsKey(t){return this.checkKey(o.Cache.PHYSICS,t);},checkTilemapKey:function checkTilemapKey(t){return this.checkKey(o.Cache.TILEMAP,t);},checkBinaryKey:function checkBinaryKey(t){return this.checkKey(o.Cache.BINARY,t);},checkBitmapDataKey:function checkBitmapDataKey(t){return this.checkKey(o.Cache.BITMAPDATA,t);},checkBitmapFontKey:function checkBitmapFontKey(t){return this.checkKey(o.Cache.BITMAPFONT,t);},checkJSONKey:function checkJSONKey(t){return this.checkKey(o.Cache.JSON,t);},checkXMLKey:function checkXMLKey(t){return this.checkKey(o.Cache.XML,t);},checkVideoKey:function checkVideoKey(t){return this.checkKey(o.Cache.VIDEO,t);},checkShaderKey:function checkShaderKey(t){return this.checkKey(o.Cache.SHADER,t);},checkRenderTextureKey:function checkRenderTextureKey(t){return this.checkKey(o.Cache.RENDER_TEXTURE,t);},getItem:function getItem(t,e,i,s){if(this.checkKey(e,t)){if(s===undefined){return this._cacheMap[e][t];}else{return this._cacheMap[e][t][s];}}else{return null;}},getCanvas:function getCanvas(t){return this.getItem(t,o.Cache.CANVAS,"getCanvas","canvas");},getImage:function getImage(t,e){if(t===undefined||t===null){t="__default";}if(e===undefined){e=false;}var i=this.getItem(t,o.Cache.IMAGE,"getImage");if(i===null){i=this.getItem("__missing",o.Cache.IMAGE,"getImage");}if(e){return i;}else{return i.data;}},getTextureFrame:function getTextureFrame(t){return this.getItem(t,o.Cache.TEXTURE,"getTextureFrame","frame");},getSound:function getSound(t){return this.getItem(t,o.Cache.SOUND,"getSound");},getSoundData:function getSoundData(t){return this.getItem(t,o.Cache.SOUND,"getSoundData","data");},getText:function getText(t){return this.getItem(t,o.Cache.TEXT,"getText","data");},getPhysicsData:function getPhysicsData(t,e,i){var s=this.getItem(t,o.Cache.PHYSICS,"getPhysicsData","data");if(s===null||e===undefined||e===null){return s;}if(s[e]){var n=s[e];if(!n||!i){return n;}for(var a in n){a=n[a];if(a.fixtureKey===i){return a;}}}return null;},getTilemapData:function getTilemapData(t){return this.getItem(t,o.Cache.TILEMAP,"getTilemapData");},getBinary:function getBinary(t){return this.getItem(t,o.Cache.BINARY,"getBinary");},getBitmapData:function getBitmapData(t){return this.getItem(t,o.Cache.BITMAPDATA,"getBitmapData","data");},getBitmapFont:function getBitmapFont(t){return this.getItem(t,o.Cache.BITMAPFONT,"getBitmapFont");},getJSON:function getJSON(t,e){var i=this.getItem(t,o.Cache.JSON,"getJSON","data");if(i){if(e){return o.Utils.extend(true,Array.isArray(i)?[]:{},i);}else{return i;}}else{return null;}},getXML:function getXML(t){return this.getItem(t,o.Cache.XML,"getXML","data");},getVideo:function getVideo(t){return this.getItem(t,o.Cache.VIDEO,"getVideo");},getShader:function getShader(t){return this.getItem(t,o.Cache.SHADER,"getShader","data");},getRenderTexture:function getRenderTexture(t){return this.getItem(t,o.Cache.RENDER_TEXTURE,"getRenderTexture");},getBaseTexture:function getBaseTexture(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:o.Cache.IMAGE;return this.getItem(t,e,"getBaseTexture","base");},getFrame:function getFrame(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:o.Cache.IMAGE;return this.getItem(t,e,"getFrame","frame");},getFrameCount:function getFrameCount(t,e){var i=this.getFrameData(t,e);if(i){return i.total;}else{return 0;}},getFrameData:function getFrameData(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:o.Cache.IMAGE;return this.getItem(t,e,"getFrameData","frameData");},hasFrameData:function hasFrameData(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:o.Cache.IMAGE;return this.getItem(t,e,"","frameData")!==null;},updateFrameData:function updateFrameData(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:o.Cache.IMAGE;if(this._cacheMap[i][t]){this._cacheMap[i][t].frameData=e;}},getFrameByIndex:function getFrameByIndex(t,e,i){var s=this.getFrameData(t,i);if(s){return s.getFrame(e);}else{return null;}},getFrameByName:function getFrameByName(t,e,i){var s=this.getFrameData(t,i);if(s){return s.getFrameByName(e);}else{return null;}},getURL:function getURL(t){var t=this._resolveURL(t);if(t){return this._urlMap[t];}else{return null;}},getKeys:function getKeys(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:o.Cache.IMAGE;var e=[];if(this._cacheMap[t]){for(var i in this._cacheMap[t]){if(i!=="__default"&&i!=="__missing"){e.push(i);}}}return e;},removeCanvas:function removeCanvas(t){delete this._cache.canvas[t];},removeImage:function removeImage(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=this.getImage(t,true);if(e&&i.base){i.base.destroy();}delete this._cache.image[t];},removeSound:function removeSound(t){delete this._cache.sound[t];},removeText:function removeText(t){delete this._cache.text[t];},removePhysics:function removePhysics(t){delete this._cache.physics[t];},removeTilemap:function removeTilemap(t){delete this._cache.tilemap[t];},removeBinary:function removeBinary(t){delete this._cache.binary[t];},removeBitmapData:function removeBitmapData(t){delete this._cache.bitmapData[t];},removeBitmapFont:function removeBitmapFont(t){delete this._cache.bitmapFont[t];},removeJSON:function removeJSON(t){delete this._cache.json[t];},removeXML:function removeXML(t){delete this._cache.xml[t];},removeVideo:function removeVideo(t){delete this._cache.video[t];},removeShader:function removeShader(t){delete this._cache.shader[t];},removeRenderTexture:function removeRenderTexture(t){delete this._cache.renderTexture[t];},removeSpriteSheet:function removeSpriteSheet(t){delete this._cache.spriteSheet[t];},removeTextureAtlas:function removeTextureAtlas(t){delete this._cache.atlas[t];},clearGLTextures:function clearGLTextures(){for(var t in this._cache.image){this._cache.image[t].base._glTextures=[];}},_resolveURL:function _resolveURL(t,e){if(this.autoResolveURL){this._urlResolver.src=this.game.load.baseURL+t;this._urlTemp=this._urlResolver.src;this._urlResolver.src="";if(e){this._urlMap[this._urlTemp]=e;}return this._urlTemp;}else{return null;}},destroy:function destroy(){for(var t=0;t<this._cacheMap.length;t++){var e=this._cacheMap[t];for(var i in e){if(i!=="__default"&&i!=="__missing"){if(e[i].destroy){e[i].destroy();}delete e[i];}}}this._urlMap=null;this._urlResolver=null;this._urlTemp=null;}};o.Cache.prototype.constructor=o.Cache;o.Loader=function(t){this.game=t;this.cache=t.cache;this.resetLocked=false;this.isLoading=false;this.hasLoaded=false;this.preloadSprite=null;this.crossOrigin=false;this.baseURL="";this.path="";this.headers={requestedWith:false,json:"application/json",xml:"application/xml"};this.onLoadStart=new o.Signal();this.onLoadComplete=new o.Signal();this.onPackComplete=new o.Signal();this.onFileStart=new o.Signal();this.onFileComplete=new o.Signal();this.onFileError=new o.Signal();this.useXDomainRequest=false;this._warnedAboutXDomainRequest=false;this.enableParallel=true;this.maxParallelDownloads=4;this._withSyncPointDepth=0;this._fileList=[];this._flightQueue=[];this._processingHead=0;this._fileLoadStarted=false;this._totalPackCount=0;this._totalFileCount=0;this._loadedPackCount=0;this._loadedFileCount=0;};o.Loader.TEXTURE_ATLAS_JSON_ARRAY=0;o.Loader.TEXTURE_ATLAS_JSON_HASH=1;o.Loader.TEXTURE_ATLAS_XML_STARLING=2;o.Loader.PHYSICS_LIME_CORONA_JSON=3;o.Loader.PHYSICS_PHASER_JSON=4;o.Loader.TEXTURE_ATLAS_JSON_PYXEL=5;o.Loader.prototype={setPreloadSprite:function setPreloadSprite(t,e){e=e||0;this.preloadSprite={sprite:t,direction:e,width:t.width,height:t.height,rect:null};this.preloadSprite.rect=e===0?new o.Rectangle(0,0,1,t.height):new o.Rectangle(0,0,t.width,1);t.crop(this.preloadSprite.rect);t.visible=true;},resize:function resize(){if(this.preloadSprite&&this.preloadSprite.height!==this.preloadSprite.sprite.height){this.preloadSprite.rect.height=this.preloadSprite.sprite.height;}},checkKeyExists:function checkKeyExists(t,e){return this.getAssetIndex(t,e)>-1;},getAssetIndex:function getAssetIndex(t,e){var i=-1;for(var s=0;s<this._fileList.length;s++){var n=this._fileList[s];if(n.type===t&&n.key===e&&(i=s,!n.loaded&&!n.loading)){break;}}return i;},getAsset:function getAsset(t,e){var i=this.getAssetIndex(t,e);return i>-1&&{index:i,file:this._fileList[i]};},reset:function reset(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!this.resetLocked){if(t){this.preloadSprite=null;}this.isLoading=false;this._processingHead=0;this._fileList.length=0;this._flightQueue.length=0;this._fileLoadStarted=false;this._totalFileCount=0;this._totalPackCount=0;this._loadedPackCount=0;this._loadedFileCount=0;if(e){this.onLoadStart.removeAll();this.onLoadComplete.removeAll();this.onPackComplete.removeAll();this.onFileStart.removeAll();this.onFileComplete.removeAll();this.onFileError.removeAll();}}},addToFileList:function addToFileList(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var o=arguments.length>5?arguments[5]:undefined;if(e===undefined||e===""){return this;}if(i===undefined||i===null){if(!o){return this;}i=e+o;}var a={type:t,key:e,path:this.path,url:i,syncPoint:this._withSyncPointDepth>0,data:null,loading:false,loaded:false,error:false};if(s){for(var r in s){a[r]=s[r];}}var h=this.getAssetIndex(t,e);if(n&&h>-1){var l=this._fileList[h];if(l.loading||l.loaded){this._fileList.push(a);this._totalFileCount++;}else{this._fileList[h]=a;}}else if(h===-1){this._fileList.push(a);this._totalFileCount++;}return this;},replaceInFileList:function replaceInFileList(t,e,i,s){return this.addToFileList(t,e,i,s,true);},pack:function pack(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(!e&&!i){return this;}var n={type:"packfile",key:t,url:e,path:this.path,syncPoint:true,data:null,loading:false,loaded:false,error:false,callbackContext:s};if(i){if(typeof i=="string"){i=JSON.parse(i);}n.data=i||{};n.loaded=true;}for(var o=0;o<this._fileList.length+1;o++){var a=this._fileList[o];if(!a||!a.loaded&&!a.loading&&a.type!=="packfile"){this._fileList.splice(o,0,n);this._totalPackCount++;break;}}return this;},image:function image(t,e,i){return this.addToFileList("image",t,e,undefined,i,".png");},images:function images(t,e){if(Array.isArray(e)){for(var i=0;i<t.length;i++){this.image(t[i],e[i]);}}else{for(var i=0;i<t.length;i++){this.image(t[i]);}}return this;},text:function text(t,e,i){return this.addToFileList("text",t,e,undefined,i,".txt");},json:function json(t,e,i){return this.addToFileList("json",t,e,undefined,i,".json");},shader:function shader(t,e,i){return this.addToFileList("shader",t,e,undefined,i,".frag");},xml:function xml(t,e,i){return this.addToFileList("xml",t,e,undefined,i,".xml");},script:function script(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=arguments.length>3?arguments[3]:undefined;if(i!==false&&s===undefined){s=this;}return this.addToFileList("script",t,e,{syncPoint:true,callback:i,callbackContext:s},false,".js");},binary:function binary(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=arguments.length>3?arguments[3]:undefined;if(i!==false&&s===undefined){s=i;}return this.addToFileList("binary",t,e,{callback:i,callbackContext:s},false,".bin");},spritesheet:function spritesheet(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:-1;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;return this.addToFileList("spritesheet",t,e,{frameWidth:i,frameHeight:s,frameMax:n,margin:o,spacing:a},false,".png");},audio:function audio(t,e,i){if(this.game.sound.noAudio){return this;}else{if(i===undefined){i=true;}if(typeof e=="string"){e=[e];}return this.addToFileList("audio",t,e,{buffer:null,autoDecode:i});}},audioSprite:function audioSprite(t,e,i,s,n){if(this.game.sound.noAudio){return this;}else{if(i===undefined){i=null;}if(s===undefined){s=null;}if(n===undefined){n=true;}this.audio(t,e,n);if(i){this.json(t+"-audioatlas",i);}else if(s){if(typeof s=="string"){s=JSON.parse(s);}this.cache.addJSON(t+"-audioatlas","",s);}return this;}},audiosprite:function audiosprite(t,e,i,s,n){return this.audioSprite(t,e,i,s,n);},video:function video(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.game.device.firefox?"loadeddata":"canplaythrough";var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(typeof e=="string"){e=[e];}return this.addToFileList("video",t,e,{buffer:null,asBlob:s,loadEvent:i});},tilemap:function tilemap(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:o.Tilemap.CSV;if(!e&&!i){e=s===o.Tilemap.CSV?t+".csv":t+".json";}if(i){switch(s){case o.Tilemap.CSV:break;case o.Tilemap.TILED_JSON:if(typeof i=="string"){i=JSON.parse(i);}}this.cache.addTilemap(t,null,i,s);}else{this.addToFileList("tilemap",t,e,{format:s});}return this;},physics:function physics(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:o.Physics.LIME_CORONA_JSON;if(!e&&!i){e=t+".json";}if(i){if(typeof i=="string"){i=JSON.parse(i);}this.cache.addPhysicsData(t,null,i,s);}else{this.addToFileList("physics",t,e,{format:s});}return this;},bitmapFont:function bitmapFont(t,e,i,s,n,o){if(e===undefined||e===null){e=t+".png";}if(i===undefined){i=null;}if(s===undefined){s=null;}if(i===null&&s===null){i=t+".xml";}if(n===undefined){n=0;}if(o===undefined){o=0;}if(i){this.addToFileList("bitmapfont",t,e,{atlasURL:i,xSpacing:n,ySpacing:o});}else if(typeof s=="string"){var a;var r;try{a=JSON.parse(s);}catch(t){r=this.parseXml(s);}if(!r&&!a){throw new Error("Phaser.Loader. Invalid Bitmap Font atlas given");}this.addToFileList("bitmapfont",t,e,{atlasURL:null,atlasData:a||r,atlasType:a?"json":"xml",xSpacing:n,ySpacing:o});}return this;},atlasJSONArray:function atlasJSONArray(t,e,i,s){return this.atlas(t,e,i,s,o.Loader.TEXTURE_ATLAS_JSON_ARRAY);},atlasJSONHash:function atlasJSONHash(t,e,i,s){return this.atlas(t,e,i,s,o.Loader.TEXTURE_ATLAS_JSON_HASH);},atlasXML:function atlasXML(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(!i&&!s){i=t+".xml";}return this.atlas(t,e,i,s,o.Loader.TEXTURE_ATLAS_XML_STARLING);},atlas:function atlas(t,e,i,s,n){if(e===undefined||e===null){e=t+".png";}if(i===undefined){i=null;}if(s===undefined){s=null;}if(n===undefined){n=o.Loader.TEXTURE_ATLAS_JSON_ARRAY;}if(!i&&!s){i=n===o.Loader.TEXTURE_ATLAS_XML_STARLING?t+".xml":t+".json";}if(i){this.addToFileList("textureatlas",t,e,{atlasURL:i,format:n});}else{switch(n){case o.Loader.TEXTURE_ATLAS_JSON_ARRAY:if(typeof s=="string"){s=JSON.parse(s);}break;case o.Loader.TEXTURE_ATLAS_XML_STARLING:if(typeof s=="string"){var a=this.parseXml(s);if(!a){throw new Error("Phaser.Loader. Invalid Texture Atlas XML given");}s=a;}}this.addToFileList("textureatlas",t,e,{atlasURL:null,atlasData:s,format:n});}return this;},withSyncPoint:function withSyncPoint(t,e){this._withSyncPointDepth++;try{t.call(e||this,this);}finally{this._withSyncPointDepth--;}return this;},addSyncPoint:function addSyncPoint(t,e){var i=this.getAsset(t,e);if(i){i.file.syncPoint=true;}return this;},removeFile:function removeFile(t,e){var i=this.getAsset(t,e);if(i){if(!i.loaded&&!i.loading){this._fileList.splice(i.index,1);}}},removeAll:function removeAll(){this._fileList.length=0;this._flightQueue.length=0;},start:function start(){if(!this.isLoading){this.hasLoaded=false;this.isLoading=true;this.updateProgress();this.processLoadQueue();}},processLoadQueue:function processLoadQueue(){if(!this.isLoading){this.finishedLoading(true);return;}for(var t=0;t<this._flightQueue.length;t++){var e=this._flightQueue[t];if(e.loaded||e.error){this._flightQueue.splice(t,1);t--;e.loading=false;e.requestUrl=null;e.requestObject=null;if(e.error){this.onFileError.dispatch(e.key,e);}if(e.type!=="packfile"){this._loadedFileCount++;this.onFileComplete.dispatch(this.progress,e.key,!e.error,this._loadedFileCount,this._totalFileCount);}else if(e.type==="packfile"&&e.error){this._loadedPackCount++;this.onPackComplete.dispatch(e.key,!e.error,this._loadedPackCount,this._totalPackCount);}}}var i=false;var s=this.enableParallel?o.Math.clamp(this.maxParallelDownloads,1,12):1;for(var t=this._processingHead;t<this._fileList.length;t++){var e=this._fileList[t];if(e.type==="packfile"&&!e.error&&e.loaded&&t===this._processingHead){this.processPack(e);this._loadedPackCount++;this.onPackComplete.dispatch(e.key,!e.error,this._loadedPackCount,this._totalPackCount);}if(e.loaded||e.error){if(t===this._processingHead){this._processingHead=t+1;}}else if(!e.loading&&this._flightQueue.length<s){if(e.type!=="packfile"||e.data){if(!i){if(!this._fileLoadStarted){this._fileLoadStarted=true;this.onLoadStart.dispatch();}this._flightQueue.push(e);e.loading=true;this.onFileStart.dispatch(this.progress,e.key,e.url);this.loadFile(e);}}else{this._flightQueue.push(e);e.loading=true;this.loadFile(e);}}if(!e.loaded&&e.syncPoint){i=true;}if(this._flightQueue.length>=s||i&&this._loadedPackCount===this._totalPackCount){break;}}this.updateProgress();if(this._processingHead>=this._fileList.length){this.finishedLoading();}else if(!this._flightQueue.length){var n=this;setTimeout(function(){n.finishedLoading(true);},2000);}},finishedLoading:function finishedLoading(t){if(!this.hasLoaded){this.hasLoaded=true;this.isLoading=false;if(!t&&!this._fileLoadStarted){this._fileLoadStarted=true;this.onLoadStart.dispatch();}this.onLoadComplete.dispatch();this.game.state.loadComplete();this.reset();}},asyncComplete:function asyncComplete(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";t.loaded=true;t.error=!!e;if(e){t.errorMessage=e;}this.processLoadQueue();},processPack:function processPack(t){var e=t.data[t.key];if(e){for(var i=0;i<e.length;i++){var s=e[i];switch(s.type){case"image":this.image(s.key,s.url,s.overwrite);break;case"text":this.text(s.key,s.url,s.overwrite);break;case"json":this.json(s.key,s.url,s.overwrite);break;case"xml":this.xml(s.key,s.url,s.overwrite);break;case"script":this.script(s.key,s.url,s.callback,t.callbackContext||this);break;case"binary":this.binary(s.key,s.url,s.callback,t.callbackContext||this);break;case"spritesheet":this.spritesheet(s.key,s.url,s.frameWidth,s.frameHeight,s.frameMax,s.margin,s.spacing);break;case"video":this.video(s.key,s.urls);break;case"audio":this.audio(s.key,s.urls,s.autoDecode);break;case"audiosprite":this.audiosprite(s.key,s.urls,s.jsonURL,s.jsonData,s.autoDecode);break;case"tilemap":this.tilemap(s.key,s.url,s.data,o.Tilemap[s.format]);break;case"physics":this.physics(s.key,s.url,s.data,o.Loader[s.format]);break;case"bitmapFont":this.bitmapFont(s.key,s.textureURL,s.atlasURL,s.atlasData,s.xSpacing,s.ySpacing);break;case"atlasJSONArray":this.atlasJSONArray(s.key,s.textureURL,s.atlasURL,s.atlasData);break;case"atlasJSONHash":this.atlasJSONHash(s.key,s.textureURL,s.atlasURL,s.atlasData);break;case"atlasXML":this.atlasXML(s.key,s.textureURL,s.atlasURL,s.atlasData);break;case"atlas":this.atlas(s.key,s.textureURL,s.atlasURL,s.atlasData,o.Loader[s.format]);break;case"shader":this.shader(s.key,s.url,s.overwrite);}}}},transformUrl:function transformUrl(t,e){return!!t&&(t.match(/^(?:blob:|data:|http:\\/\\/|https:\\/\\/|\\/\\/)/)?t:this.baseURL+e.path+t);},loadFile:function loadFile(t){switch(t.type){case"packfile":this.xhrLoad(t,this.transformUrl(t.url,t),"text",this.fileComplete);break;case"image":case"spritesheet":case"textureatlas":case"bitmapfont":this.loadImageTag(t);break;case"audio":t.url=this.getAudioURL(t.url);if(t.url){if(this.game.sound.usingWebAudio){this.xhrLoad(t,this.transformUrl(t.url,t),"arraybuffer",this.fileComplete);}else if(this.game.sound.usingAudioTag){this.loadAudioTag(t);}}else{this.fileError(t,null,"No supported audio URL specified or device does not have audio playback support");}break;case"video":t.url=this.getVideoURL(t.url);if(t.url){if(t.asBlob){this.xhrLoad(t,this.transformUrl(t.url,t),"blob",this.fileComplete);}else{this.loadVideoTag(t);}}else{this.fileError(t,null,"No supported video URL specified or device does not have video playback support");}break;case"json":this.xhrLoad(t,this.transformUrl(t.url,t),"text",this.jsonLoadComplete);break;case"xml":this.xhrLoad(t,this.transformUrl(t.url,t),"text",this.xmlLoadComplete);break;case"tilemap":if(t.format===o.Tilemap.TILED_JSON){this.xhrLoad(t,this.transformUrl(t.url,t),"text",this.jsonLoadComplete);}else if(t.format===o.Tilemap.CSV){this.xhrLoad(t,this.transformUrl(t.url,t),"text",this.csvLoadComplete);}else{this.asyncComplete(t,"invalid Tilemap format: "+t.format);}break;case"text":case"script":case"shader":case"physics":this.xhrLoad(t,this.transformUrl(t.url,t),"text",this.fileComplete);break;case"binary":this.xhrLoad(t,this.transformUrl(t.url,t),"arraybuffer",this.fileComplete);}},loadImageTag:function loadImageTag(t){var e=this;t.data=new Image();t.data.name=t.key;if(this.crossOrigin){t.data.crossOrigin=this.crossOrigin;}t.data.onload=function(){if(t.data.onload){t.data.onload=null;t.data.onerror=null;e.fileComplete(t);}};t.data.onerror=function(){if(t.data.onload){t.data.onload=null;t.data.onerror=null;e.fileError(t);}};t.data.src=this.transformUrl(t.url,t);if(t.data.complete&&t.data.width&&t.data.height){t.data.onload=null;t.data.onerror=null;this.fileComplete(t);}},loadVideoTag:function loadVideoTag(t){var e=this;t.data=document.createElement("video");t.data.name=t.key;t.data.controls=false;t.data.autoplay=false;function i(){t.data.removeEventListener(t.loadEvent,i,false);t.data.onerror=null;t.data.canplay=true;o.GAMES[e.game.id].load.fileComplete(t);}t.data.onerror=function(){t.data.removeEventListener(t.loadEvent,i,false);t.data.onerror=null;t.data.canplay=false;e.fileError(t);};t.data.addEventListener(t.loadEvent,i,false);t.data.src=this.transformUrl(t.url,t);t.data.load();},loadAudioTag:function loadAudioTag(t){var e=this;if(this.game.sound.touchLocked){t.data=new Audio();t.data.name=t.key;t.data.preload="auto";t.data.src=this.transformUrl(t.url,t);this.fileComplete(t);}else{var _i2=function _i(){t.data.removeEventListener("canplaythrough",_i2,false);t.data.onerror=null;e.fileComplete(t);};t.data=new Audio();t.data.name=t.key;t.data.onerror=function(){t.data.removeEventListener("canplaythrough",_i2,false);t.data.onerror=null;e.fileError(t);};t.data.preload="auto";t.data.src=this.transformUrl(t.url,t);t.data.addEventListener("canplaythrough",_i2,false);t.data.load();}},xhrLoad:function xhrLoad(t,e,i,s,n){if(this.useXDomainRequest&&window.XDomainRequest){this.xhrLoadWithXDR(t,e,i,s,n);return;}var o=new XMLHttpRequest();o.open("GET",e,true);o.responseType=i;if(this.headers.requestedWith!==false){o.setRequestHeader("X-Requested-With",this.headers.requestedWith);}if(this.headers[t.type]){o.setRequestHeader("Accept",this.headers[t.type]);}n=n||this.fileError;var a=this;o.onload=function(){try{if(o.readyState===4&&o.status>=400&&o.status<=599){return n.call(a,t,o);}else{return s.call(a,t,o);}}catch(e){if(a.hasLoaded){window.console;}else{a.asyncComplete(t,e.message||"Exception");}}};o.onerror=function(){try{return n.call(a,t,o);}catch(e){if(a.hasLoaded){window.console;}else{a.asyncComplete(t,e.message||"Exception");}}};t.requestObject=o;t.requestUrl=e;o.send();},xhrLoadWithXDR:function xhrLoadWithXDR(t,e,i,s,n){if(!this._warnedAboutXDomainRequest&&(!this.game.device.ie||!!(this.game.device.ieVersion>=10))){this._warnedAboutXDomainRequest=true;}var o=new window.XDomainRequest();o.open("GET",e,true);o.responseType=i;o.timeout=3000;n=n||this.fileError;var a=this;o.onerror=function(){try{return n.call(a,t,o);}catch(e){a.asyncComplete(t,e.message||"Exception");}};o.ontimeout=function(){try{return n.call(a,t,o);}catch(e){a.asyncComplete(t,e.message||"Exception");}};o.onprogress=function(){};o.onload=function(){try{if(o.readyState===4&&o.status>=400&&o.status<=599){return n.call(a,t,o);}else{return s.call(a,t,o);}}catch(e){a.asyncComplete(t,e.message||"Exception");}};t.requestObject=o;t.requestUrl=e;setTimeout(function(){o.send();},0);},getVideoURL:function getVideoURL(t){for(var e=0;e<t.length;e++){var i=t[e];var s;if(i.uri){s=i.type;i=i.uri;if(this.game.device.canPlayVideo(s)){return i;}}else{if(i.indexOf("blob:")===0||i.indexOf("data:")===0){return i;}if(i.indexOf("?")>=0){i=i.substr(0,i.indexOf("?"));}s=i.substr((Math.max(0,i.lastIndexOf("."))||Infinity)+1).toLowerCase();if(this.game.device.canPlayVideo(s)){return t[e];}}}return null;},getAudioURL:function getAudioURL(t){if(this.game.sound.noAudio){return null;}for(var e=0;e<t.length;e++){var i=t[e];var s;if(i.uri){s=i.type;i=i.uri;if(this.game.device.canPlayAudio(s)){return i;}}else{if(i.indexOf("blob:")===0||i.indexOf("data:")===0){return i;}if(i.indexOf("?")>=0){i=i.substr(0,i.indexOf("?"));}s=i.substr((Math.max(0,i.lastIndexOf("."))||Infinity)+1).toLowerCase();if(this.game.device.canPlayAudio(s)){return t[e];}}}return null;},fileError:function fileError(t,e,i){var s=t.requestUrl||this.transformUrl(t.url,t);var n="error loading asset from URL "+s;if(!i&&e){i=e.status;}if(i){n=n+" ("+i+")";}this.asyncComplete(t,n);},fileComplete:function fileComplete(t,e){var i=true;switch(t.type){case"packfile":var s=JSON.parse(e.responseText);t.data=s||{};break;case"image":this.cache.addImage(t.key,t.url,t.data);break;case"spritesheet":this.cache.addSpriteSheet(t.key,t.url,t.data,t.frameWidth,t.frameHeight,t.frameMax,t.margin,t.spacing);break;case"textureatlas":if(t.atlasURL==null){this.cache.addTextureAtlas(t.key,t.url,t.data,t.atlasData,t.format);}else{i=false;if(t.format===o.Loader.TEXTURE_ATLAS_JSON_ARRAY||t.format===o.Loader.TEXTURE_ATLAS_JSON_HASH||t.format===o.Loader.TEXTURE_ATLAS_JSON_PYXEL){this.xhrLoad(t,this.transformUrl(t.atlasURL,t),"text",this.jsonLoadComplete);}else{if(t.format!==o.Loader.TEXTURE_ATLAS_XML_STARLING){throw new Error("Phaser.Loader. Invalid Texture Atlas format: "+t.format);}this.xhrLoad(t,this.transformUrl(t.atlasURL,t),"text",this.xmlLoadComplete);}}break;case"bitmapfont":if(t.atlasURL){i=false;this.xhrLoad(t,this.transformUrl(t.atlasURL,t),"text",function(t,e){var i;try{i=JSON.parse(e.responseText);}catch(t){}if(i){t.atlasType="json";this.jsonLoadComplete(t,e);}else{t.atlasType="xml";this.xmlLoadComplete(t,e);}});}else{this.cache.addBitmapFont(t.key,t.url,t.data,t.atlasData,t.atlasType,t.xSpacing,t.ySpacing);}break;case"video":if(t.asBlob){try{t.data=e.response;}catch(e){throw new Error("Phaser.Loader. Unable to parse video file as Blob: "+t.key);}}this.cache.addVideo(t.key,t.url,t.data,t.asBlob);break;case"audio":if(this.game.sound.usingWebAudio){t.data=e.response;this.cache.addSound(t.key,t.url,t.data,true,false);if(t.autoDecode){this.game.sound.decode(t.key);}}else{this.cache.addSound(t.key,t.url,t.data,false,true);}break;case"text":t.data=e.responseText;this.cache.addText(t.key,t.url,t.data);break;case"shader":t.data=e.responseText;this.cache.addShader(t.key,t.url,t.data);break;case"physics":var s=JSON.parse(e.responseText);this.cache.addPhysicsData(t.key,t.url,s,t.format);break;case"script":t.data=document.createElement("script");t.data.language="javascript";t.data.type="text/javascript";t.data.defer=false;t.data.text=e.responseText;document.head.appendChild(t.data);if(t.callback){t.data=t.callback.call(t.callbackContext,t.key,e.responseText);}break;case"binary":if(t.callback){t.data=t.callback.call(t.callbackContext,t.key,e.response);}else{t.data=e.response;}this.cache.addBinary(t.key,t.data);}if(i){this.asyncComplete(t);}},jsonLoadComplete:function jsonLoadComplete(t,e){var i=JSON.parse(e.responseText);if(t.type==="tilemap"){this.cache.addTilemap(t.key,t.url,i,t.format);}else if(t.type==="bitmapfont"){this.cache.addBitmapFont(t.key,t.url,t.data,i,t.atlasType,t.xSpacing,t.ySpacing);}else if(t.type==="json"){this.cache.addJSON(t.key,t.url,i);}else{this.cache.addTextureAtlas(t.key,t.url,t.data,i,t.format);}this.asyncComplete(t);},csvLoadComplete:function csvLoadComplete(t,e){var i=e.responseText;this.cache.addTilemap(t.key,t.url,i,t.format);this.asyncComplete(t);},xmlLoadComplete:function xmlLoadComplete(t,e){var i=e.responseText;var s=this.parseXml(i);if(!s){var n=e.responseType||e.contentType;this.asyncComplete(t,"invalid XML");return;}if(t.type==="bitmapfont"){this.cache.addBitmapFont(t.key,t.url,t.data,s,t.atlasType,t.xSpacing,t.ySpacing);}else if(t.type==="textureatlas"){this.cache.addTextureAtlas(t.key,t.url,t.data,s,t.format);}else if(t.type==="xml"){this.cache.addXML(t.key,t.url,s);}this.asyncComplete(t);},parseXml:function parseXml(t){var e;try{if(window.DOMParser){var i=new DOMParser();e=i.parseFromString(t,"text/xml");}else{e=new ActiveXObject("Microsoft.XMLDOM");e.async="false";e.loadXML(t);}}catch(t){e=null;}if(e&&e.documentElement&&!e.getElementsByTagName("parsererror").length){return e;}else{return null;}},updateProgress:function updateProgress(){if(this.preloadSprite){if(this.preloadSprite.direction===0){this.preloadSprite.rect.width=Math.floor(this.preloadSprite.width/100*this.progress);}else{this.preloadSprite.rect.height=Math.floor(this.preloadSprite.height/100*this.progress);}if(this.preloadSprite.sprite){this.preloadSprite.sprite.updateCrop();}else{this.preloadSprite=null;}}},totalLoadedFiles:function totalLoadedFiles(){return this._loadedFileCount;},totalQueuedFiles:function totalQueuedFiles(){return this._totalFileCount-this._loadedFileCount;},totalLoadedPacks:function totalLoadedPacks(){return this._totalPackCount;},totalQueuedPacks:function totalQueuedPacks(){return this._totalPackCount-this._loadedPackCount;}};Object.defineProperty(o.Loader.prototype,"progressFloat",{get:function get(){var t=this._loadedFileCount/this._totalFileCount*100;return o.Math.clamp(t||0,0,100);}});Object.defineProperty(o.Loader.prototype,"progress",{get:function get(){return Math.round(this.progressFloat);}});o.Loader.prototype.constructor=o.Loader;o.LoaderParser={bitmapFont:function bitmapFont(t,e,i,s){return this.xmlBitmapFont(t,e,i,s);},xmlBitmapFont:function xmlBitmapFont(t,e,i,s){var n={};var o=t.getElementsByTagName("info")[0];var a=t.getElementsByTagName("common")[0];n.font=o.getAttribute("face");n.size=parseInt(o.getAttribute("size"),10);n.lineHeight=parseInt(a.getAttribute("lineHeight"),10)+s;n.chars={};for(var r=t.getElementsByTagName("char"),h=0;h<r.length;h++){var l=parseInt(r[h].getAttribute("id"),10);n.chars[l]={x:parseInt(r[h].getAttribute("x"),10),y:parseInt(r[h].getAttribute("y"),10),width:parseInt(r[h].getAttribute("width"),10),height:parseInt(r[h].getAttribute("height"),10),xOffset:parseInt(r[h].getAttribute("xoffset"),10),yOffset:parseInt(r[h].getAttribute("yoffset"),10),xAdvance:parseInt(r[h].getAttribute("xadvance"),10)+i,kerning:{}};}var c=t.getElementsByTagName("kerning");for(h=0;h<c.length;h++){var u=parseInt(c[h].getAttribute("first"),10);var d=parseInt(c[h].getAttribute("second"),10);var p=parseInt(c[h].getAttribute("amount"),10);n.chars[d].kerning[u]=p;}return this.finalizeBitmapFont(e,n);},jsonBitmapFont:function jsonBitmapFont(t,e,i,s){var n={font:t.font.info._face,size:parseInt(t.font.info._size,10),lineHeight:parseInt(t.font.common._lineHeight,10)+s,chars:{}};t.font.chars["char"].forEach(function t(e){var s=parseInt(e._id,10);n.chars[s]={x:parseInt(e._x,10),y:parseInt(e._y,10),width:parseInt(e._width,10),height:parseInt(e._height,10),xOffset:parseInt(e._xoffset,10),yOffset:parseInt(e._yoffset,10),xAdvance:parseInt(e._xadvance,10)+i,kerning:{}};});if(t.font.kernings&&t.font.kernings.kerning){t.font.kernings.kerning.forEach(function t(e){n.chars[e._second].kerning[e._first]=parseInt(e._amount,10);});}return this.finalizeBitmapFont(e,n);},finalizeBitmapFont:function finalizeBitmapFont(t,e){Object.keys(e.chars).forEach(function i(s){var n=e.chars[s];n.texture=new PIXI.Texture(t,new o.Rectangle(n.x,n.y,n.width,n.height));});return e;}};o.AudioSprite=function(t,e){this.game=t;this.key=e;this.config=this.game.cache.getJSON(e+"-audioatlas");this.autoplayKey=null;this.autoplay=false;this.sounds={};for(var i in this.config.spritemap){var s=this.config.spritemap[i];var n=this.game.add.sound(this.key);n.addMarker(i,s.start,s.end-s.start,null,s.loop);this.sounds[i]=n;}if(this.config.autoplay){this.autoplayKey=this.config.autoplay;this.play(this.autoplayKey);this.autoplay=this.sounds[this.autoplayKey];}};o.AudioSprite.prototype={play:function play(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return this.sounds[t].play(t,null,e);},stop:function stop(t){if(t){this.sounds[t].stop();}else{for(var e in this.sounds){this.sounds[e].stop();}}},get:function get(t){return this.sounds[t];}};o.AudioSprite.prototype.constructor=o.AudioSprite;o.Sound=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:t.sound.connectToMaster;this.game=t;this.name=e;this.key=e;this.loop=s;this.markers={};this.context=null;this.autoplay=false;this.totalDuration=0;this.startTime=0;this.currentTime=0;this.duration=0;this.durationMS=0;this.position=0;this.stopTime=0;this.paused=false;this.pausedPosition=0;this.pausedTime=0;this.isPlaying=false;this.currentMarker="";this.fadeTween=null;this.pendingPlayback=false;this.override=false;this.allowMultiple=false;this.usingWebAudio=this.game.sound.usingWebAudio;this.usingAudioTag=this.game.sound.usingAudioTag;this.externalNode=null;this.masterGainNode=null;this.gainNode=null;this._sound=null;if(this.usingWebAudio){this.context=this.game.sound.context;this.masterGainNode=this.game.sound.masterGain;if(this.context.createGain===undefined){this.gainNode=this.context.createGainNode();}else{this.gainNode=this.context.createGain();}this.gainNode.gain.value=i*this.game.sound.volume;if(n){this.gainNode.connect(this.masterGainNode);}}else if(this.usingAudioTag){if(this.game.cache.getSound(e)&&this.game.cache.isSoundReady(e)){this._sound=this.game.cache.getSoundData(e);this.totalDuration=0;if(this._sound.duration){this.totalDuration=this._sound.duration;}}else{this.game.cache.onSoundUnlock.add(this.soundHasUnlocked,this);}}this.onDecoded=new o.Signal();this.onPlay=new o.Signal();this.onPause=new o.Signal();this.onResume=new o.Signal();this.onLoop=new o.Signal();this.onStop=new o.Signal();this.onMute=new o.Signal();this.onMarkerComplete=new o.Signal();this.onFadeComplete=new o.Signal();this._volume=i;this._buffer=null;this._muted=false;this._tempMarker=0;this._tempPosition=0;this._tempVolume=0;this._tempPause=0;this._muteVolume=0;this._tempLoop=0;this._paused=false;this._onDecodedEventDispatched=false;};o.Sound.prototype={soundHasUnlocked:function soundHasUnlocked(t){if(t===this.key){this._sound=this.game.cache.getSoundData(this.key);this.totalDuration=this._sound.duration;}},addMarker:function addMarker(t,e,i,s,n){if(i===undefined||i===null){i=1;}if(s===undefined||s===null){s=1;}if(n===undefined){n=false;}this.markers[t]={name:t,start:e,stop:e+i,volume:s,duration:i,durationMS:i*1000,loop:n};},removeMarker:function removeMarker(t){delete this.markers[t];},onEndedHandler:function onEndedHandler(){this._sound.onended=null;this.isPlaying=false;this.currentTime=this.durationMS;this.stop();},update:function update(){if(!this.game.cache.checkSoundKey(this.key)){this.destroy();return;}if(this.isDecoded&&!this._onDecodedEventDispatched){this.onDecoded.dispatch(this);this._onDecodedEventDispatched=true;}if(this.pendingPlayback&&this.game.cache.isSoundReady(this.key)){this.pendingPlayback=false;this.play(this._tempMarker,this._tempPosition,this._tempVolume,this._tempLoop);}if(this.isPlaying){this.currentTime=this.game.time.time-this.startTime;if(this.currentTime>=this.durationMS){if(this.usingWebAudio){if(this.loop){this.onLoop.dispatch(this);this.isPlaying=false;if(this.currentMarker===""){this.currentTime=0;this.startTime=this.game.time.time;this.isPlaying=true;}else{this.onMarkerComplete.dispatch(this.currentMarker,this);this.play(this.currentMarker,0,this.volume,true,true);}}else if(this.currentMarker!==""){this.stop();}}else if(this.loop){this.onLoop.dispatch(this);if(this.currentMarker===""){this.currentTime=0;this.startTime=this.game.time.time;}this.isPlaying=false;this.play(this.currentMarker,0,this.volume,true,true);}else{this.stop();}}}},loopFull:function loopFull(t){return this.play(null,0,t,true);},play:function play(t,e,i,s,n){if(t===undefined||t===false||t===null){t="";}if(n===undefined){n=true;}if(this.isPlaying&&!this.allowMultiple&&!n&&!this.override){return this;}if(this._sound&&this.isPlaying&&!this.allowMultiple&&(this.override||n)){if(this.usingWebAudio){if(this._sound.stop===undefined){this._sound.noteOff(0);}else{try{this._sound.stop(0);}catch(t){}}if(this.externalNode){this._sound.disconnect(this.externalNode);}else if(this.gainNode){this._sound.disconnect(this.gainNode);}}else if(this.usingAudioTag){this._sound.pause();this._sound.currentTime=0;}this.isPlaying=false;}if(t===""&&Object.keys(this.markers).length>0){return this;}if(t!==""){if(!this.markers[t]){return this;}this.currentMarker=t;this.position=this.markers[t].start;this.volume=this.markers[t].volume;this.loop=this.markers[t].loop;this.duration=this.markers[t].duration;this.durationMS=this.markers[t].durationMS;if(i!==undefined){this.volume=i;}if(s!==undefined){this.loop=s;}this._tempMarker=t;this._tempPosition=this.position;this._tempVolume=this.volume;this._tempLoop=this.loop;}else{e=e||0;if(i===undefined){i=this._volume;}if(s===undefined){s=this.loop;}this.position=Math.max(0,e);this.volume=i;this.loop=s;this.duration=0;this.durationMS=0;this._tempMarker=t;this._tempPosition=e;this._tempVolume=i;this._tempLoop=s;}if(this.usingWebAudio){if(this.game.cache.isSoundDecoded(this.key)){this._sound=this.context.createBufferSource();if(this.externalNode){this._sound.connect(this.externalNode);}else{this._sound.connect(this.gainNode);}this._buffer=this.game.cache.getSoundData(this.key);this._sound.buffer=this._buffer;if(this.loop&&t===""){this._sound.loop=true;}if(!this.loop&&t===""){this._sound.onended=this.onEndedHandler.bind(this);}this.totalDuration=this._sound.buffer.duration;if(this.duration===0){this.duration=this.totalDuration;this.durationMS=Math.ceil(this.totalDuration*1000);}if(this._sound.start===undefined){this._sound.noteGrainOn(0,this.position,this.duration);}else if(this.loop&&t===""){this._sound.start(0,0);}else{this._sound.start(0,this.position,this.duration);}this.isPlaying=true;this.startTime=this.game.time.time;this.currentTime=0;this.stopTime=this.startTime+this.durationMS;this.onPlay.dispatch(this);}else{this.pendingPlayback=true;if(this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).isDecoding===false){this.game.sound.decode(this.key,this);}}}else if(this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).locked){this.game.cache.reloadSound(this.key);this.pendingPlayback=true;}else if(this._sound&&(this.game.device.cocoonJS||this._sound.readyState===4)){this._sound.play();this.totalDuration=this._sound.duration;if(this.duration===0){this.duration=this.totalDuration;this.durationMS=this.totalDuration*1000;}this._sound.currentTime=this.position;this._sound.muted=this._muted;if(this._muted||this.game.sound.mute){this._sound.volume=0;}else{this._sound.volume=this._volume;}this.isPlaying=true;this.startTime=this.game.time.time;this.currentTime=0;this.stopTime=this.startTime+this.durationMS;this.onPlay.dispatch(this);}else{this.pendingPlayback=true;}return this;},restart:function restart(t,e,i,s){t=t||"";e=e||0;i=i||1;if(s===undefined){s=false;}this.play(t,e,i,s,true);},pause:function pause(){if(this.isPlaying&&this._sound){this.paused=true;this.pausedPosition=this.currentTime;this.pausedTime=this.game.time.time;this._tempPause=this._sound.currentTime;this.onPause.dispatch(this);this.stop();}},resume:function resume(){if(this.paused&&this._sound){if(this.usingWebAudio){var t=Math.max(0,this.position+this.pausedPosition/1000);this._sound=this.context.createBufferSource();this._sound.buffer=this._buffer;if(this.externalNode){this._sound.connect(this.externalNode);}else{this._sound.connect(this.gainNode);}if(this.loop){this._sound.loop=true;}if(!this.loop&&this.currentMarker===""){this._sound.onended=this.onEndedHandler.bind(this);}var e=this.duration-this.pausedPosition/1000;if(this._sound.start===undefined){this._sound.noteGrainOn(0,t,e);}else if(this.loop&&this.game.device.chrome){if(this.game.device.chromeVersion===42){this._sound.start(0);}else{this._sound.start(0,t);}}else{this._sound.start(0,t,e);}}else{this._sound.currentTime=this._tempPause;this._sound.play();}this.isPlaying=true;this.paused=false;this.startTime+=this.game.time.time-this.pausedTime;this.onResume.dispatch(this);}},stop:function stop(){if(this.isPlaying&&this._sound){if(this.usingWebAudio){if(this._sound.stop===undefined){this._sound.noteOff(0);}else{try{this._sound.stop(0);}catch(t){}}if(this.externalNode){this._sound.disconnect(this.externalNode);}else if(this.gainNode){this._sound.disconnect(this.gainNode);}}else if(this.usingAudioTag){this._sound.pause();this._sound.currentTime=0;}}this.pendingPlayback=false;this.isPlaying=false;if(!this.paused){var t=this.currentMarker;if(this.currentMarker!==""){this.onMarkerComplete.dispatch(this.currentMarker,this);}this.currentMarker="";if(this.fadeTween!==null){this.fadeTween.stop();}this.onStop.dispatch(this,t);}},fadeIn:function fadeIn(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.currentMarker;if(!this.paused){this.play(i,0,0,e);this.fadeTo(t,1);}},fadeOut:function fadeOut(t){this.fadeTo(t,0);},fadeTo:function fadeTo(t,e){if(this.isPlaying&&!this.paused&&e!==this.volume){if(t===undefined){t=1000;}if(e!==undefined){this.fadeTween=this.game.add.tween(this).to({volume:e},t,o.Easing.Linear.None,true);this.fadeTween.onComplete.add(this.fadeComplete,this);}}},fadeComplete:function fadeComplete(){this.onFadeComplete.dispatch(this,this.volume);if(this.volume===0){this.stop();}},updateGlobalVolume:function updateGlobalVolume(t){if(this.usingAudioTag&&this._sound){this._sound.volume=t*this._volume;}},destroy:function destroy(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;this.stop();if(t){this.game.sound.remove(this);}else{this.markers={};this.context=null;this._buffer=null;this.externalNode=null;this.onDecoded.dispose();this.onPlay.dispose();this.onPause.dispose();this.onResume.dispose();this.onLoop.dispose();this.onStop.dispose();this.onMute.dispose();this.onMarkerComplete.dispose();}}};o.Sound.prototype.constructor=o.Sound;Object.defineProperty(o.Sound.prototype,"isDecoding",{get:function get(){return this.game.cache.getSound(this.key).isDecoding;}});Object.defineProperty(o.Sound.prototype,"isDecoded",{get:function get(){return this.game.cache.isSoundDecoded(this.key);}});Object.defineProperty(o.Sound.prototype,"mute",{get:function get(){return this._muted||this.game.sound.mute;},set:function set(t){if((t=t||false)!==this._muted){if(t){this._muted=true;this._muteVolume=this._tempVolume;if(this.usingWebAudio){this.gainNode.gain.value=0;}else if(this.usingAudioTag&&this._sound){this._sound.volume=0;}}else{this._muted=false;if(this.usingWebAudio){this.gainNode.gain.value=this._muteVolume;}else if(this.usingAudioTag&&this._sound){this._sound.volume=this._muteVolume;}}this.onMute.dispatch(this);}}});Object.defineProperty(o.Sound.prototype,"volume",{get:function get(){return this._volume;},set:function set(t){if(this.game.device.firefox&&this.usingAudioTag){t=this.game.math.clamp(t,0,1);}if(this._muted){this._muteVolume=t;return;}this._tempVolume=t;this._volume=t;if(this.usingWebAudio){this.gainNode.gain.value=t;}else if(this.usingAudioTag&&this._sound){this._sound.volume=t;}}});o.SoundManager=function(t){this.game=t;this.onSoundDecode=new o.Signal();this.onVolumeChange=new o.Signal();this.onMute=new o.Signal();this.onUnMute=new o.Signal();this.context=null;this.usingWebAudio=false;this.usingAudioTag=false;this.noAudio=false;this.connectToMaster=true;this.touchLocked=false;this.channels=32;this.muteOnPause=true;this._codeMuted=false;this._muted=false;this._unlockSource=null;this._volume=1;this._sounds=[];this._watchList=new o.ArraySet();this._watching=false;this._watchCallback=null;this._watchContext=null;};o.SoundManager.prototype={boot:function boot(){if(this.game.device.iOS&&this.game.device.webAudio===false){this.channels=1;}if(window.PhaserGlobal){if(window.PhaserGlobal.disableAudio===true){this.noAudio=true;this.touchLocked=false;return;}if(window.PhaserGlobal.disableWebAudio===true){this.usingAudioTag=true;this.touchLocked=false;return;}}if(window.PhaserGlobal&&window.PhaserGlobal.audioContext){this.context=window.PhaserGlobal.audioContext;}else if(window.AudioContext){try{this.context=new window.AudioContext();}catch(t){this.context=null;this.usingWebAudio=false;this.touchLocked=false;}}else if(window.webkitAudioContext){try{this.context=new window.webkitAudioContext();}catch(t){this.context=null;this.usingWebAudio=false;this.touchLocked=false;}}if(this.context===null){if(window.Audio===undefined){this.noAudio=true;return;}this.usingAudioTag=true;}else{this.usingWebAudio=true;if(this.context.createGain===undefined){this.masterGain=this.context.createGainNode();}else{this.masterGain=this.context.createGain();}this.masterGain.gain.value=1;this.masterGain.connect(this.context.destination);}if(!this.noAudio){if(!this.game.device.cocoonJS&&(this.game.device.android||this.game.device.iOS||window.PhaserGlobal&&window.PhaserGlobal.fakeiOSTouchLock)){this.setTouchLock();}}},setTouchLock:function setTouchLock(){if(!this.noAudio&&(!window.PhaserGlobal||window.PhaserGlobal.disableAudio!==true)){if(this.game.device.iOSVersion>8||this.game.device.chromeVersion>=55){this.game.input.touch.addTouchLockCallback(this.unlock,this,true);}else{this.game.input.touch.addTouchLockCallback(this.unlock,this);}this.touchLocked=true;}},unlock:function unlock(){if(this.noAudio||!this.touchLocked||this._unlockSource!==null){return true;}if(this.usingAudioTag){this.touchLocked=false;this._unlockSource=null;}else if(this.usingWebAudio){var t=this.context.createBuffer(1,1,22050);this._unlockSource=this.context.createBufferSource();this._unlockSource.buffer=t;this._unlockSource.connect(this.context.destination);if(this._unlockSource.start===undefined){this._unlockSource.noteOn(0);}else{this._unlockSource.start(0);}if(this._unlockSource.context.state==="suspended"){this._unlockSource.context.resume();}}return true;},stopAll:function stopAll(){if(!this.noAudio){for(var t=0;t<this._sounds.length;t++){if(this._sounds[t]){this._sounds[t].stop();}}}},pauseAll:function pauseAll(){if(!this.noAudio){for(var t=0;t<this._sounds.length;t++){if(this._sounds[t]){this._sounds[t].pause();}}}},resumeAll:function resumeAll(){if(!this.noAudio){for(var t=0;t<this._sounds.length;t++){if(this._sounds[t]){this._sounds[t].resume();}}}},decode:function decode(t,e){e=e||null;var i=this.game.cache.getSoundData(t);if(i&&this.game.cache.isSoundDecoded(t)===false){this.game.cache.updateSound(t,"isDecoding",true);var s=this;try{this.context.decodeAudioData(i,function(i){if(i){s.game.cache.decodedSound(t,i);s.onSoundDecode.dispatch(t,e);}});}catch(t){}}},setDecodedCallback:function setDecodedCallback(t,e,i){if(typeof t=="string"){t=[t];}this._watchList.reset();for(var s=0;s<t.length;s++){if(t[s]instanceof o.Sound){if(!this.game.cache.isSoundDecoded(t[s].key)){this._watchList.add(t[s].key);}}else if(!this.game.cache.isSoundDecoded(t[s])){this._watchList.add(t[s]);}}if(this._watchList.total===0){this._watching=false;e.call(i);}else{this._watching=true;this._watchCallback=e;this._watchContext=i;}},update:function update(){if(!this.noAudio){if(!!this.touchLocked&&this._unlockSource!==null&&(this._unlockSource.playbackState===this._unlockSource.PLAYING_STATE||this._unlockSource.playbackState===this._unlockSource.FINISHED_STATE)){this.touchLocked=false;this._unlockSource=null;}for(var t=0;t<this._sounds.length;t++){this._sounds[t].update();}if(this._watching){for(var e=this._watchList.first;e;){if(this.game.cache.isSoundDecoded(e)){this._watchList.remove(e);}e=this._watchList.next;}if(this._watchList.total===0){this._watching=false;this._watchCallback.call(this._watchContext);}}}},add:function add(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:this.connectToMaster;var n=new o.Sound(this.game,t,e,i,s);this._sounds.push(n);return n;},addSprite:function addSprite(t){return new o.AudioSprite(this.game,t);},remove:function remove(t){for(var e=this._sounds.length;e--;){if(this._sounds[e]===t){this._sounds[e].destroy(false);this._sounds.splice(e,1);return true;}}return false;},removeByKey:function removeByKey(t){for(var e=this._sounds.length,i=0;e--;){if(this._sounds[e].key===t){this._sounds[e].destroy(false);this._sounds.splice(e,1);i++;}}return i;},play:function play(t,e,i){if(!this.noAudio){var s=this.add(t,e,i);s.play();return s;}},setMute:function setMute(){if(!this._muted){this._muted=true;if(this.usingWebAudio){this._muteVolume=this.masterGain.gain.value;this.masterGain.gain.value=0;}for(var t=0;t<this._sounds.length;t++){if(this._sounds[t].usingAudioTag){this._sounds[t].mute=true;}}this.onMute.dispatch();}},unsetMute:function unsetMute(){if(this._muted&&!this._codeMuted){this._muted=false;if(this.usingWebAudio){this.masterGain.gain.value=this._muteVolume;}for(var t=0;t<this._sounds.length;t++){if(this._sounds[t].usingAudioTag){this._sounds[t].mute=false;}}this.onUnMute.dispatch();}},destroy:function destroy(){this.stopAll();for(var t=0;t<this._sounds.length;t++){if(this._sounds[t]){this._sounds[t].destroy();}}this._sounds=[];this.onSoundDecode.dispose();if(this.context){if(window.PhaserGlobal){window.PhaserGlobal.audioContext=this.context;}else if(this.context.close){this.context.close();}}}};o.SoundManager.prototype.constructor=o.SoundManager;Object.defineProperty(o.SoundManager.prototype,"mute",{get:function get(){return this._muted;},set:function set(t){if(t=t||false){if(this._muted){return;}this._codeMuted=true;this.setMute();}else{if(!this._muted){return;}this._codeMuted=false;this.unsetMute();}}});Object.defineProperty(o.SoundManager.prototype,"volume",{get:function get(){return this._volume;},set:function set(t){if(t<0){t=0;}else if(t>1){t=1;}if(this._volume!==t){this._volume=t;if(this.usingWebAudio){this.masterGain.gain.value=t;}else{for(var e=0;e<this._sounds.length;e++){if(this._sounds[e].usingAudioTag){this._sounds[e].updateGlobalVolume(t);}}}this.onVolumeChange.dispatch(t);}}});o.ScaleManager=function(t,e,i){this.game=t;this.dom=o.DOM;this.grid=null;this.width=0;this.height=0;this.minWidth=null;this.maxWidth=null;this.minHeight=null;this.maxHeight=null;this.offset=new o.Point();this.forceLandscape=false;this.forcePortrait=false;this.incorrectOrientation=false;this._pageAlignHorizontally=false;this._pageAlignVertically=false;this.onOrientationChange=new o.Signal();this.enterIncorrectOrientation=new o.Signal();this.leaveIncorrectOrientation=new o.Signal();this.hasPhaserSetFullScreen=false;this.fullScreenTarget=null;this._createdFullScreenTarget=null;this.onFullScreenInit=new o.Signal();this.onFullScreenChange=new o.Signal();this.onFullScreenError=new o.Signal();this.screenOrientation=this.dom.getScreenOrientation();this.scaleFactor=new o.Point(1,1);this.scaleFactorInversed=new o.Point(1,1);this.margin={left:0,top:0,right:0,bottom:0,x:0,y:0};this.bounds=new o.Rectangle();this.aspectRatio=0;this.sourceAspectRatio=0;this.event=null;this.windowConstraints={right:"layout",bottom:""};this.compatibility={supportsFullScreen:false,orientationFallback:null,noMargins:false,scrollTo:null,forceMinimumDocumentHeight:false,canExpandParent:true,clickTrampoline:""};this._scaleMode=o.ScaleManager.NO_SCALE;this._fullScreenScaleMode=o.ScaleManager.NO_SCALE;this.parentIsWindow=false;this.parentNode=null;this.parentScaleFactor=new o.Point(1,1);this.trackParentInterval=2000;this.onSizeChange=new o.Signal();this.onResize=null;this.onResizeContext=null;this._pendingScaleMode=null;this._fullScreenRestore=null;this._gameSize=new o.Rectangle();this._userScaleFactor=new o.Point(1,1);this._userScaleTrim=new o.Point(0,0);this._lastUpdate=0;this._updateThrottle=0;this._updateThrottleReset=100;this._parentBounds=new o.Rectangle();this._tempBounds=new o.Rectangle();this._lastReportedCanvasSize=new o.Rectangle();this._lastReportedGameSize=new o.Rectangle();this._booted=false;if(t.config){this.parseConfig(t.config);}this.setupScale(e,i);};o.ScaleManager.EXACT_FIT=0;o.ScaleManager.NO_SCALE=1;o.ScaleManager.SHOW_ALL=2;o.ScaleManager.RESIZE=3;o.ScaleManager.USER_SCALE=4;o.ScaleManager.prototype={boot:function boot(){var t=this.compatibility;t.supportsFullScreen=this.game.device.fullscreen&&!this.game.device.cocoonJS;if(!this.game.device.iPad&&!this.game.device.webApp&&!this.game.device.desktop){if(this.game.device.android&&!this.game.device.chrome){t.scrollTo=new o.Point(0,1);}else{t.scrollTo=new o.Point(0,0);}}if(this.game.device.desktop){t.orientationFallback="screen";t.clickTrampoline="when-not-mouse";}else{t.orientationFallback="";t.clickTrampoline="";}var e=this;this._orientationChange=function(t){return e.orientationChange(t);};this._windowResize=function(t){return e.windowResize(t);};window.addEventListener("orientationchange",this._orientationChange,false);window.addEventListener("resize",this._windowResize,false);if(this.compatibility.supportsFullScreen){this._fullScreenChange=function(t){return e.fullScreenChange(t);};this._fullScreenError=function(t){return e.fullScreenError(t);};document.addEventListener("webkitfullscreenchange",this._fullScreenChange,false);document.addEventListener("mozfullscreenchange",this._fullScreenChange,false);document.addEventListener("MSFullscreenChange",this._fullScreenChange,false);document.addEventListener("fullscreenchange",this._fullScreenChange,false);document.addEventListener("webkitfullscreenerror",this._fullScreenError,false);document.addEventListener("mozfullscreenerror",this._fullScreenError,false);document.addEventListener("MSFullscreenError",this._fullScreenError,false);document.addEventListener("fullscreenerror",this._fullScreenError,false);}this.game.onResume.add(this._gameResumed,this);this.dom.getOffset(this.game.canvas,this.offset);this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height);this.setGameSize(this.game.width,this.game.height);this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback);if(o.FlexGrid){this.grid=new o.FlexGrid(this,this.width,this.height);}this._booted=true;if(this._pendingScaleMode!==null){this.scaleMode=this._pendingScaleMode;this._pendingScaleMode=null;}},parseConfig:function parseConfig(t){if(t.scaleMode!==undefined){if(this._booted){this.scaleMode=t.scaleMode;}else{this._pendingScaleMode=t.scaleMode;}}if(t.fullScreenScaleMode!==undefined){this.fullScreenScaleMode=t.fullScreenScaleMode;}if(t.fullScreenTarget){this.fullScreenTarget=t.fullScreenTarget;}},setupScale:function setupScale(t,e){var i;var s=new o.Rectangle();if(this.game.parent!==""){if(typeof this.game.parent=="string"){i=document.getElementById(this.game.parent);}else if(this.game.parent&&this.game.parent.nodeType===1){i=this.game.parent;}}if(i){this.parentNode=i;this.parentIsWindow=false;this.getParentBounds(this._parentBounds);s.width=this._parentBounds.width;s.height=this._parentBounds.height;this.offset.set(this._parentBounds.x,this._parentBounds.y);}else{this.parentNode=null;this.parentIsWindow=true;s.width=this.dom.visualBounds.width;s.height=this.dom.visualBounds.height;this.offset.set(0,0);}var n=0;var a=0;if(typeof t=="number"){n=t;}else{this.parentScaleFactor.x=parseInt(t,10)/100;n=s.width*this.parentScaleFactor.x;}if(typeof e=="number"){a=e;}else{this.parentScaleFactor.y=parseInt(e,10)/100;a=s.height*this.parentScaleFactor.y;}n=Math.floor(n);a=Math.floor(a);this._gameSize.setTo(0,0,n,a);this.updateDimensions(n,a,false);},_gameResumed:function _gameResumed(){this.queueUpdate(true);},setGameSize:function setGameSize(t,e){this._gameSize.setTo(0,0,t,e);if(this.currentScaleMode!==o.ScaleManager.RESIZE){this.updateDimensions(t,e,true);}this.queueUpdate(true);},setUserScale:function setUserScale(t,e,i,s){this._userScaleFactor.setTo(t,e);this._userScaleTrim.setTo(i|0,s|0);this.queueUpdate(true);},setResizeCallback:function setResizeCallback(t,e){this.onResize=t;this.onResizeContext=e;},signalSizeChange:function signalSizeChange(){if(!o.Rectangle.sameDimensions(this,this._lastReportedCanvasSize)||!o.Rectangle.sameDimensions(this.game,this._lastReportedGameSize)){var t=this.width;var e=this.height;this._lastReportedCanvasSize.setTo(0,0,t,e);this._lastReportedGameSize.setTo(0,0,this.game.width,this.game.height);if(this.grid){this.grid.onResize(t,e);}this.onSizeChange.dispatch(this,t,e);if(this.currentScaleMode===o.ScaleManager.RESIZE){this.game.state.resize(t,e);this.game.load.resize(t,e);}}},setMinMax:function setMinMax(t,e,i,s){this.minWidth=t;this.minHeight=e;if(i!==undefined){this.maxWidth=i;}if(s!==undefined){this.maxHeight=s;}},preUpdate:function preUpdate(){if(!(this.game.time.time<this._lastUpdate+this._updateThrottle)){var t=this._updateThrottle;this._updateThrottleReset=t>=400?0:100;this.dom.getOffset(this.game.canvas,this.offset);var e=this._parentBounds.width;var i=this._parentBounds.height;var s=this.getParentBounds(this._parentBounds);var n=s.width!==e||s.height!==i;var a=this.updateOrientationState();if(n||a){if(this.onResize){this.onResize.call(this.onResizeContext,this,s);}this.updateLayout();this.signalSizeChange();}var r=this._updateThrottle*2;if(this._updateThrottle<t){r=Math.min(t,this._updateThrottleReset);}this._updateThrottle=o.Math.clamp(r,25,this.trackParentInterval);this._lastUpdate=this.game.time.time;}},pauseUpdate:function pauseUpdate(){this.preUpdate();this._updateThrottle=this.trackParentInterval;},updateDimensions:function updateDimensions(t,e,i){this.width=t*this.parentScaleFactor.x;this.height=e*this.parentScaleFactor.y;this.game.width=this.width;this.game.height=this.height;this.sourceAspectRatio=this.width/this.height;this.updateScalingAndBounds();if(i){this.game.renderer.resize(this.width,this.height);this.game.camera.setSize(this.width,this.height);this.game.world.resize(this.width,this.height);}},updateScalingAndBounds:function updateScalingAndBounds(){this.scaleFactor.x=this.game.width/this.width;this.scaleFactor.y=this.game.height/this.height;this.scaleFactorInversed.x=this.width/this.game.width;this.scaleFactorInversed.y=this.height/this.game.height;this.aspectRatio=this.width/this.height;if(this.game.canvas){this.dom.getOffset(this.game.canvas,this.offset);}this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height);if(this.game.input&&this.game.input.scale){this.game.input.scale.setTo(this.scaleFactor.x,this.scaleFactor.y);}},forceOrientation:function forceOrientation(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;this.forceLandscape=t;this.forcePortrait=e;this.queueUpdate(true);},classifyOrientation:function classifyOrientation(t){if(t==="portrait-primary"||t==="portrait-secondary"){return"portrait";}else if(t==="landscape-primary"||t==="landscape-secondary"){return"landscape";}else{return null;}},updateOrientationState:function updateOrientationState(){var t=this.screenOrientation;var e=this.incorrectOrientation;this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback);this.incorrectOrientation=this.forceLandscape&&!this.isLandscape||this.forcePortrait&&!this.isPortrait;var i=t!==this.screenOrientation;var s=e!==this.incorrectOrientation;if(s){if(this.incorrectOrientation){this.enterIncorrectOrientation.dispatch();}else{this.leaveIncorrectOrientation.dispatch();}}if(i||s){this.onOrientationChange.dispatch(this,t,e);}return i||s;},orientationChange:function orientationChange(t){this.event=t;this.queueUpdate(true);},windowResize:function windowResize(t){this.event=t;this.queueUpdate(true);},scrollTop:function scrollTop(){var t=this.compatibility.scrollTo;if(t){window.scrollTo(t.x,t.y);}},refresh:function refresh(){this.scrollTop();this.queueUpdate(true);},updateLayout:function updateLayout(){var t=this.currentScaleMode;if(t===o.ScaleManager.RESIZE){this.reflowGame();return;}this.scrollTop();if(this.compatibility.forceMinimumDocumentHeight){document.documentElement.style.minHeight=window.innerHeight+"px";}if(this.incorrectOrientation){this.setMaximum();}else if(t===o.ScaleManager.EXACT_FIT){this.setExactFit();}else if(t===o.ScaleManager.SHOW_ALL){if(!this.isFullScreen&&this.boundingParent&&this.compatibility.canExpandParent){this.setShowAll(true);this.resetCanvas();this.setShowAll();}else{this.setShowAll();}}else if(t===o.ScaleManager.NO_SCALE){this.width=this.game.width;this.height=this.game.height;}else if(t===o.ScaleManager.USER_SCALE){this.width=this.game.width*this._userScaleFactor.x-this._userScaleTrim.x;this.height=this.game.height*this._userScaleFactor.y-this._userScaleTrim.y;}if(!this.compatibility.canExpandParent&&(t===o.ScaleManager.SHOW_ALL||t===o.ScaleManager.USER_SCALE)){var e=this.getParentBounds(this._tempBounds);this.width=Math.min(this.width,e.width);this.height=Math.min(this.height,e.height);}this.width=this.width|0;this.height=this.height|0;this.reflowCanvas();},getParentBounds:function getParentBounds(t){var e=t||new o.Rectangle();var i=this.boundingParent;var s=this.dom.visualBounds;var n=this.dom.layoutBounds;if(i){var a=i.getBoundingClientRect();var r=i.offsetParent?i.offsetParent.getBoundingClientRect():i.getBoundingClientRect();e.setTo(a.left-r.left,a.top-r.top,a.width,a.height);var h=this.windowConstraints;if(h.right){var l=h.right==="layout"?n:s;e.right=Math.min(e.right,l.width);}if(h.bottom){var l=h.bottom==="layout"?n:s;e.bottom=Math.min(e.bottom,l.height);}}else{e.setTo(0,0,s.width,s.height);}e.setTo(Math.round(e.x),Math.round(e.y),Math.round(e.width),Math.round(e.height));return e;},alignCanvas:function alignCanvas(t,e){var i=this.getParentBounds(this._tempBounds);var s=this.game.canvas;var n=this.margin;if(t){n.left=n.right=0;var o=s.getBoundingClientRect();if(this.width<i.width&&!this.incorrectOrientation){var a=o.left-i.x;var r=i.width/2-this.width/2;r=Math.max(r,0);var h=r-a;n.left=Math.round(h);}s.style.marginLeft=n.left+"px";if(n.left!==0){n.right=-(i.width-o.width-n.left);s.style.marginRight=n.right+"px";}}if(e){n.top=n.bottom=0;var o=s.getBoundingClientRect();if(this.height<i.height&&!this.incorrectOrientation){var a=o.top-i.y;var r=i.height/2-this.height/2;r=Math.max(r,0);var h=r-a;n.top=Math.round(h);}s.style.marginTop=n.top+"px";if(n.top!==0){n.bottom=-(i.height-o.height-n.top);s.style.marginBottom=n.bottom+"px";}}n.x=n.left;n.y=n.top;},reflowGame:function reflowGame(){this.resetCanvas("","");var t=this.getParentBounds(this._tempBounds);this.updateDimensions(t.width,t.height,true);},reflowCanvas:function reflowCanvas(){if(!this.incorrectOrientation){this.width=o.Math.clamp(this.width,this.minWidth||0,this.maxWidth||this.width);this.height=o.Math.clamp(this.height,this.minHeight||0,this.maxHeight||this.height);}this.resetCanvas();if(!this.compatibility.noMargins){if(this.isFullScreen&&this._createdFullScreenTarget){this.alignCanvas(true,true);}else{this.alignCanvas(this.pageAlignHorizontally,this.pageAlignVertically);}}this.updateScalingAndBounds();},resetCanvas:function resetCanvas(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.width+"px";var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.height+"px";var i=this.game.canvas;if(!this.compatibility.noMargins){i.style.marginLeft="";i.style.marginTop="";i.style.marginRight="";i.style.marginBottom="";}i.style.width=t;i.style.height=e;},queueUpdate:function queueUpdate(t){if(t){this._parentBounds.width=0;this._parentBounds.height=0;}this._updateThrottle=this._updateThrottleReset;},reset:function reset(t){if(t&&this.grid){this.grid.reset();}},setMaximum:function setMaximum(){this.width=this.dom.visualBounds.width;this.height=this.dom.visualBounds.height;},setShowAll:function setShowAll(t){var e=this.getParentBounds(this._tempBounds);var i=e.width;var s=e.height;var n;n=t?Math.max(s/this.game.height,i/this.game.width):Math.min(s/this.game.height,i/this.game.width);this.width=Math.round(this.game.width*n);this.height=Math.round(this.game.height*n);},setExactFit:function setExactFit(){var t=this.getParentBounds(this._tempBounds);this.width=t.width;this.height=t.height;if(!this.isFullScreen){if(this.maxWidth){this.width=Math.min(this.width,this.maxWidth);}if(this.maxHeight){this.height=Math.min(this.height,this.maxHeight);}}},createFullScreenTarget:function createFullScreenTarget(){var t=document.createElement("div");t.style.margin="0";t.style.padding="0";t.style.background="#000";return t;},startFullScreen:function startFullScreen(t,e){if(this.isFullScreen){return false;}if(!this.compatibility.supportsFullScreen){var i=this;setTimeout(function(){i.fullScreenError();},10);return;}if(this.compatibility.clickTrampoline==="when-not-mouse"){var s=this.game.input;if(s.activePointer&&s.activePointer!==s.mousePointer&&(e||e!==false)){s.activePointer.addClickTrampoline("startFullScreen",this.startFullScreen,this,[t,false]);return;}}if(t!==undefined&&this.game.renderType===o.CANVAS){this.game.stage.smoothed=t;}var n=this.fullScreenTarget;if(!n){this.cleanupCreatedTarget();this._createdFullScreenTarget=this.createFullScreenTarget();n=this._createdFullScreenTarget;}var a={targetElement:n};this.hasPhaserSetFullScreen=true;this.onFullScreenInit.dispatch(this,a);if(this._createdFullScreenTarget){var r=this.game.canvas;r.parentNode.insertBefore(n,r);n.appendChild(r);}if(this.game.device.fullscreenKeyboard){n[this.game.device.requestFullscreen](Element.ALLOW_KEYBOARD_INPUT);}else{n[this.game.device.requestFullscreen]();}return true;},stopFullScreen:function stopFullScreen(){return!!this.isFullScreen&&!!this.compatibility.supportsFullScreen&&(this.hasPhaserSetFullScreen=false,document[this.game.device.cancelFullscreen](),true);},cleanupCreatedTarget:function cleanupCreatedTarget(){var t=this._createdFullScreenTarget;if(t&&t.parentNode){var e=t.parentNode;e.insertBefore(this.game.canvas,t);e.removeChild(t);}this._createdFullScreenTarget=null;},prepScreenMode:function prepScreenMode(t){var e=!!this._createdFullScreenTarget;var i=this._createdFullScreenTarget||this.fullScreenTarget;if(t){if((e||this.fullScreenScaleMode===o.ScaleManager.EXACT_FIT)&&i!==this.game.canvas){this._fullScreenRestore={targetWidth:i.style.width,targetHeight:i.style.height};i.style.width="100%";i.style.height="100%";}}else{if(this._fullScreenRestore){i.style.width=this._fullScreenRestore.targetWidth;i.style.height=this._fullScreenRestore.targetHeight;this._fullScreenRestore=null;}this.updateDimensions(this._gameSize.width,this._gameSize.height,true);this.resetCanvas();}},fullScreenChange:function fullScreenChange(t){this.event=t;if(this.isFullScreen){this.prepScreenMode(true);this.updateLayout();this.queueUpdate(true);}else{this.prepScreenMode(false);this.cleanupCreatedTarget();this.updateLayout();this.queueUpdate(true);}this.onFullScreenChange.dispatch(this,this.width,this.height);},fullScreenError:function fullScreenError(t){this.event=t;this.cleanupCreatedTarget();this.onFullScreenError.dispatch(this);},scaleSprite:function scaleSprite(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.width;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.height;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(!t||!t.scale){return t;}t.scale.x=1;t.scale.y=1;if(t.width<=0||t.height<=0||e<=0||i<=0){return t;}var n=e;var o=t.height*e/t.width;var a=t.width*i/t.height;var r=i;var h=a>e;h=h?s:!s;if(h){t.width=Math.floor(n);t.height=Math.floor(o);}else{t.width=Math.floor(a);t.height=Math.floor(r);}return t;},destroy:function destroy(){this.game.onResume.remove(this._gameResumed,this);window.removeEventListener("orientationchange",this._orientationChange,false);window.removeEventListener("resize",this._windowResize,false);if(this.compatibility.supportsFullScreen){document.removeEventListener("webkitfullscreenchange",this._fullScreenChange,false);document.removeEventListener("mozfullscreenchange",this._fullScreenChange,false);document.removeEventListener("MSFullscreenChange",this._fullScreenChange,false);document.removeEventListener("fullscreenchange",this._fullScreenChange,false);document.removeEventListener("webkitfullscreenerror",this._fullScreenError,false);document.removeEventListener("mozfullscreenerror",this._fullScreenError,false);document.removeEventListener("MSFullscreenError",this._fullScreenError,false);document.removeEventListener("fullscreenerror",this._fullScreenError,false);}}};o.ScaleManager.prototype.constructor=o.ScaleManager;Object.defineProperty(o.ScaleManager.prototype,"boundingParent",{get:function get(){if(this.parentIsWindow||this.isFullScreen&&this.hasPhaserSetFullScreen&&!this._createdFullScreenTarget){return null;}else{return this.game.canvas&&this.game.canvas.parentNode||null;}}});Object.defineProperty(o.ScaleManager.prototype,"scaleMode",{get:function get(){return this._scaleMode;},set:function set(t){if(t!==this._scaleMode){if(!this.isFullScreen){this.updateDimensions(this._gameSize.width,this._gameSize.height,true);this.queueUpdate(true);}this._scaleMode=t;}return this._scaleMode;}});Object.defineProperty(o.ScaleManager.prototype,"fullScreenScaleMode",{get:function get(){return this._fullScreenScaleMode;},set:function set(t){if(t!==this._fullScreenScaleMode){if(this.isFullScreen){this.prepScreenMode(false);this._fullScreenScaleMode=t;this.prepScreenMode(true);this.queueUpdate(true);}else{this._fullScreenScaleMode=t;}}return this._fullScreenScaleMode;}});Object.defineProperty(o.ScaleManager.prototype,"currentScaleMode",{get:function get(){if(this.isFullScreen){return this._fullScreenScaleMode;}else{return this._scaleMode;}}});Object.defineProperty(o.ScaleManager.prototype,"pageAlignHorizontally",{get:function get(){return this._pageAlignHorizontally;},set:function set(t){if(t!==this._pageAlignHorizontally){this._pageAlignHorizontally=t;this.queueUpdate(true);}}});Object.defineProperty(o.ScaleManager.prototype,"pageAlignVertically",{get:function get(){return this._pageAlignVertically;},set:function set(t){if(t!==this._pageAlignVertically){this._pageAlignVertically=t;this.queueUpdate(true);}}});Object.defineProperty(o.ScaleManager.prototype,"isFullScreen",{get:function get(){return!!document.fullscreenElement||!!document.webkitFullscreenElement||!!document.mozFullScreenElement||!!document.msFullscreenElement;}});Object.defineProperty(o.ScaleManager.prototype,"isPortrait",{get:function get(){return this.classifyOrientation(this.screenOrientation)==="portrait";}});Object.defineProperty(o.ScaleManager.prototype,"isLandscape",{get:function get(){return this.classifyOrientation(this.screenOrientation)==="landscape";}});Object.defineProperty(o.ScaleManager.prototype,"isGamePortrait",{get:function get(){return this.height>this.width;}});Object.defineProperty(o.ScaleManager.prototype,"isGameLandscape",{get:function get(){return this.width>this.height;}});o.Utils.Debug=function(t){this.game=t;this.sprite=null;this.bmd=null;this.canvas=null;this.context=null;this.font="14px Courier";this.columnWidth=100;this.lineHeight=16;this.renderShadow=true;this.currentX=0;this.currentY=0;this.currentAlpha=1;this.dirty=false;};o.Utils.Debug.prototype={boot:function boot(){if(this.game.renderType===o.CANVAS){this.context=this.game.context;}else{this.bmd=new o.BitmapData(this.game,"__DEBUG",this.game.width,this.game.height,true);this.sprite=this.game.make.image(0,0,this.bmd);this.game.stage.addChild(this.sprite);this.game.scale.onSizeChange.add(this.resize,this);this.canvas=PIXI.CanvasPool.create(this,this.game.width,this.game.height);this.context=this.canvas.getContext("2d");}},resize:function resize(t,e,i){this.bmd.resize(e,i);this.canvas.width=e;this.canvas.height=i;},preUpdate:function preUpdate(){if(this.dirty&&this.sprite){this.bmd.clear();this.bmd.draw(this.canvas,0,0);this.context.clearRect(0,0,this.game.width,this.game.height);this.dirty=false;}},reset:function reset(){if(this.context){this.context.clearRect(0,0,this.game.width,this.game.height);}if(this.sprite){this.bmd.clear();}},start:function start(t,e,i,s){if(typeof t!="number"){t=0;}if(typeof e!="number"){e=0;}i=i||"rgb(255,255,255)";if(s===undefined){s=0;}this.currentX=t;this.currentY=e;this.currentColor=i;this.columnWidth=s;this.dirty=true;this.context.save();this.context.setTransform(1,0,0,1,0,0);this.context.strokeStyle=i;this.context.fillStyle=i;this.context.font=this.font;this.context.globalAlpha=this.currentAlpha;},stop:function stop(){this.context.restore();},line:function line(){var t=this.currentX;for(var e=0;e<arguments.length;e++){if(this.renderShadow){this.context.fillStyle="rgb(0,0,0)";this.context.fillText(arguments[e],t+1,this.currentY+1);this.context.fillStyle=this.currentColor;}this.context.fillText(arguments[e],t,this.currentY);t+=this.columnWidth;}this.currentY+=this.lineHeight;},soundInfo:function soundInfo(t,e,i,s){this.start(e,i,s);this.line("Sound: "+t.key+" Locked: "+t.game.sound.touchLocked);this.line("Is Ready?: "+this.game.cache.isSoundReady(t.key)+" Pending Playback: "+t.pendingPlayback);this.line("Decoded: "+t.isDecoded+" Decoding: "+t.isDecoding);this.line("Total Duration: "+t.totalDuration+" Playing: "+t.isPlaying);this.line("Time: "+t.currentTime);this.line("Volume: "+t.volume+" Muted: "+t.mute);this.line("WebAudio: "+t.usingWebAudio+" Audio: "+t.usingAudioTag);if(t.currentMarker!==""){this.line("Marker: "+t.currentMarker+" Duration: "+t.duration+" (ms: "+t.durationMS+")");this.line("Start: "+t.markers[t.currentMarker].start+" Stop: "+t.markers[t.currentMarker].stop);this.line("Position: "+t.position);}this.stop();},cameraInfo:function cameraInfo(t,e,i,s){this.start(e,i,s);this.line("Camera ("+t.width+" x "+t.height+")");this.line("X: "+t.x+" Y: "+t.y);if(t.bounds){this.line("Bounds x: "+t.bounds.x+" Y: "+t.bounds.y+" w: "+t.bounds.width+" h: "+t.bounds.height);}this.line("View x: "+t.view.x+" Y: "+t.view.y+" w: "+t.view.width+" h: "+t.view.height);this.line("Total in view: "+t.totalInView);this.stop();},timer:function timer(t,e,i,s){this.start(e,i,s);this.line("Timer (running: "+t.running+" expired: "+t.expired+")");this.line("Next Tick: "+t.next+" Duration: "+t.duration);this.line("Paused: "+t.paused+" Length: "+t.length);this.stop();},pointer:function pointer(t,e,i,s,n){if(t!=null){if(e===undefined){e=false;}i=i||"rgba(0,255,0,0.5)";s=s||"rgba(255,0,0,0.5)";if(e!==true||t.isUp!==true){this.start(t.x,t.y-100,n);this.context.beginPath();this.context.arc(t.x,t.y,t.circle.radius,0,Math.PI*2);if(t.active){this.context.fillStyle=i;}else{this.context.fillStyle=s;}this.context.fill();this.context.closePath();this.context.beginPath();this.context.moveTo(t.positionDown.x,t.positionDown.y);this.context.lineTo(t.position.x,t.position.y);this.context.lineWidth=2;this.context.stroke();this.context.closePath();this.line("ID: "+t.id+" Active: "+t.active);this.line("World X: "+t.worldX+" World Y: "+t.worldY);this.line("Screen X: "+t.x+" Screen Y: "+t.y+" In: "+t.withinGame);this.line("Duration: "+t.duration+" ms");this.line("is Down: "+t.isDown+" is Up: "+t.isUp);this.stop();}}},spriteInputInfo:function spriteInputInfo(t,e,i,s){this.start(e,i,s);this.line("Sprite Input: ("+t.width+" x "+t.height+")");this.line("x: "+t.input.pointerX().toFixed(1)+" y: "+t.input.pointerY().toFixed(1));this.line("over: "+t.input.pointerOver()+" duration: "+t.input.overDuration().toFixed(0));this.line("down: "+t.input.pointerDown()+" duration: "+t.input.downDuration().toFixed(0));this.line("just over: "+t.input.justOver()+" just out: "+t.input.justOut());this.stop();},key:function key(t,e,i,s){this.start(e,i,s,150);this.line("Key:",t.keyCode,"isDown:",t.isDown);this.line("justDown:",t.justDown,"justUp:",t.justUp);this.line("Time Down:",t.timeDown.toFixed(0),"duration:",t.duration.toFixed(0));this.stop();},inputInfo:function inputInfo(t,e,i){this.start(t,e,i);this.line("Input");this.line("X: "+this.game.input.x+" Y: "+this.game.input.y);this.line("World X: "+this.game.input.worldX+" World Y: "+this.game.input.worldY);this.line("Scale X: "+this.game.input.scale.x.toFixed(1)+" Scale Y: "+this.game.input.scale.x.toFixed(1));this.line("Screen X: "+this.game.input.activePointer.screenX+" Screen Y: "+this.game.input.activePointer.screenY);this.stop();},spriteBounds:function spriteBounds(t,e,i){var s=t.getBounds();s.x+=this.game.camera.x;s.y+=this.game.camera.y;this.rectangle(s,e,i);},ropeSegments:function ropeSegments(t,e,i){var s=this;t.segments.forEach(function(t){s.rectangle(t,e,i);},this);},spriteInfo:function spriteInfo(t,e,i,s){this.start(e,i,s);this.line("Sprite:  ("+t.width+" x "+t.height+") anchor: "+t.anchor.x+" x "+t.anchor.y);this.line("x: "+t.x.toFixed(1)+" y: "+t.y.toFixed(1));this.line("angle: "+t.angle.toFixed(1)+" rotation: "+t.rotation.toFixed(1));this.line("visible: "+t.visible+" in camera: "+t.inCamera);this.line("bounds x: "+t._bounds.x.toFixed(1)+" y: "+t._bounds.y.toFixed(1)+" w: "+t._bounds.width.toFixed(1)+" h: "+t._bounds.height.toFixed(1));this.stop();},spriteCoords:function spriteCoords(t,e,i,s){this.start(e,i,s,100);if(t.name){this.line(t.name);}this.line("x:",t.x.toFixed(2),"y:",t.y.toFixed(2));this.line("pos x:",t.position.x.toFixed(2),"pos y:",t.position.y.toFixed(2));this.line("world x:",t.world.x.toFixed(2),"world y:",t.world.y.toFixed(2));this.stop();},lineInfo:function lineInfo(t,e,i,s){this.start(e,i,s,80);this.line("start.x:",t.start.x.toFixed(2),"start.y:",t.start.y.toFixed(2));this.line("end.x:",t.end.x.toFixed(2),"end.y:",t.end.y.toFixed(2));this.line("length:",t.length.toFixed(2),"angle:",t.angle);this.stop();},pixel:function pixel(t,e,i,s){s=s||2;this.start();this.context.fillStyle=i;this.context.fillRect(t,e,s,s);this.stop();},geom:function geom(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;e=e||"rgba(0,255,0,0.4)";this.start();this.context.fillStyle=e;this.context.strokeStyle=e;if(t instanceof o.Rectangle||s===1){if(i){this.context.fillRect(t.x-this.game.camera.x,t.y-this.game.camera.y,t.width,t.height);}else{this.context.strokeRect(t.x-this.game.camera.x,t.y-this.game.camera.y,t.width,t.height);}}else if(t instanceof o.Circle||s===2){this.context.beginPath();this.context.arc(t.x-this.game.camera.x,t.y-this.game.camera.y,t.radius,0,Math.PI*2,false);this.context.closePath();if(i){this.context.fill();}else{this.context.stroke();}}else if(t instanceof o.Point||s===3){this.context.fillRect(t.x-this.game.camera.x,t.y-this.game.camera.y,4,4);}else if(t instanceof o.Line||s===4){this.context.lineWidth=1;this.context.beginPath();this.context.moveTo(t.start.x+0.5-this.game.camera.x,t.start.y+0.5-this.game.camera.y);this.context.lineTo(t.end.x+0.5-this.game.camera.x,t.end.y+0.5-this.game.camera.y);this.context.closePath();this.context.stroke();}this.stop();},rectangle:function rectangle(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;e=e||"rgba(0, 255, 0, 0.4)";this.start();if(i){this.context.fillStyle=e;this.context.fillRect(t.x-this.game.camera.x,t.y-this.game.camera.y,t.width,t.height);}else{this.context.strokeStyle=e;this.context.strokeRect(t.x-this.game.camera.x,t.y-this.game.camera.y,t.width,t.height);}this.stop();},text:function text(t,e,i,s,n){s=s||"rgb(255,255,255)";n=n||"16px Courier";this.start();this.context.font=n;if(this.renderShadow){this.context.fillStyle="rgb(0,0,0)";this.context.fillText(t,e+1,i+1);}this.context.fillStyle=s;this.context.fillText(t,e,i);this.stop();},quadTree:function quadTree(t,e){e=e||"rgba(255,0,0,0.3)";this.start();var i=t.bounds;if(t.nodes.length===0){this.context.strokeStyle=e;this.context.strokeRect(i.x,i.y,i.width,i.height);this.text("size: "+t.objects.length,i.x+4,i.y+16,"rgb(0,200,0)","12px Courier");this.context.strokeStyle="rgb(0,255,0)";for(var s=0;s<t.objects.length;s++){this.context.strokeRect(t.objects[s].x,t.objects[s].y,t.objects[s].width,t.objects[s].height);}}else{for(var s=0;s<t.nodes.length;s++){this.quadTree(t.nodes[s]);}}this.stop();},body:function body(t,e,i){if(t.body){this.start();if(t.body.type===o.Physics.ARCADE){o.Physics.Arcade.Body.render(this.context,t.body,e,i);}else if(t.body.type===o.Physics.NINJA){o.Physics.Ninja.Body.render(this.context,t.body,e,i);}else if(t.body.type===o.Physics.BOX2D){o.Physics.Box2D.renderBody(this.context,t.body,e);}this.stop();}},bodyInfo:function bodyInfo(t,e,i,s){if(t.body){this.start(e,i,s,210);if(t.body.type===o.Physics.ARCADE){o.Physics.Arcade.Body.renderBodyInfo(this,t.body);}else if(t.body.type===o.Physics.BOX2D){this.game.physics.box2d.renderBodyInfo(this,t.body);}this.stop();}},box2dWorld:function box2dWorld(){this.start();this.context.translate(-this.game.camera.view.x,-this.game.camera.view.y,0);this.game.physics.box2d.renderDebugDraw(this.context);this.stop();},box2dBody:function box2dBody(t,e){this.start();o.Physics.Box2D.renderBody(this.context,t,e);this.stop();},displayList:function displayList(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.game.world;t.hasOwnProperty("renderOrderID");if(t.children&&t.children.length>0){for(var e=0;e<t.children.length;e++){this.game.debug.displayList(t.children[e]);}}},destroy:function destroy(){PIXI.CanvasPool.remove(this);}};o.Utils.Debug.prototype.constructor=o.Utils.Debug;o.DOM={getOffset:function getOffset(t,e){e=e||new o.Point();var i=t.getBoundingClientRect();var s=o.DOM.scrollY;var n=o.DOM.scrollX;var a=document.documentElement.clientTop;var r=document.documentElement.clientLeft;e.x=i.left+n-r;e.y=i.top+s-a;return e;},getBounds:function getBounds(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return!!(t=t&&!t.nodeType?t[0]:t)&&t.nodeType===1&&this.calibrate(t.getBoundingClientRect(),e);},calibrate:function calibrate(t,e){e=+e||0;var i={width:0,height:0,left:0,right:0,top:0,bottom:0};i.width=(i.right=t.right+e)-(i.left=t.left-e);i.height=(i.bottom=t.bottom+e)-(i.top=t.top-e);return i;},getAspectRatio:function getAspectRatio(t){t=t==null?this.visualBounds:t.nodeType===1?this.getBounds(t):t;var e=t.width;var i=t.height;if(typeof e=="function"){e=e.call(t);}if(typeof i=="function"){i=i.call(t);}return e/i;},inLayoutViewport:function inLayoutViewport(t,e){var i=this.getBounds(t,e);return!!i&&i.bottom>=0&&i.right>=0&&i.top<=this.layoutBounds.width&&i.left<=this.layoutBounds.height;},getScreenOrientation:function getScreenOrientation(t){var e=window.screen;var i=e.orientation||e.mozOrientation||e.msOrientation;if(i&&typeof i.type=="string"){return i.type;}if(typeof i=="string"){return i;}var s="portrait-primary";var n="landscape-primary";if(t==="screen"){if(e.height>e.width){return s;}else{return n;}}if(t==="viewport"){if(this.visualBounds.height>this.visualBounds.width){return s;}else{return n;}}if(t==="window.orientation"&&typeof window.orientation=="number"){if(window.orientation===0||window.orientation===180){return s;}else{return n;}}if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches){return s;}if(window.matchMedia("(orientation: landscape)").matches){return n;}}if(this.visualBounds.height>this.visualBounds.width){return s;}else{return n;}},visualBounds:new o.Rectangle(),layoutBounds:new o.Rectangle(),documentBounds:new o.Rectangle()};o.Device.whenReady(function(t){var e=window&&"pageXOffset"in window?function(){return window.pageXOffset;}:function(){return document.documentElement.scrollLeft;};var i=window&&"pageYOffset"in window?function(){return window.pageYOffset;}:function(){return document.documentElement.scrollTop;};Object.defineProperty(o.DOM,"scrollX",{get:e});Object.defineProperty(o.DOM,"scrollY",{get:i});Object.defineProperty(o.DOM.visualBounds,"x",{get:e});Object.defineProperty(o.DOM.visualBounds,"y",{get:i});Object.defineProperty(o.DOM.layoutBounds,"x",{value:0});Object.defineProperty(o.DOM.layoutBounds,"y",{value:0});if(t.desktop&&document.documentElement.clientWidth<=window.innerWidth&&document.documentElement.clientHeight<=window.innerHeight){var _s=function _s(){return Math.max(window.innerWidth,document.documentElement.clientWidth);};var _n=function _n(){return Math.max(window.innerHeight,document.documentElement.clientHeight);};Object.defineProperty(o.DOM.visualBounds,"width",{get:_s});Object.defineProperty(o.DOM.visualBounds,"height",{get:_n});Object.defineProperty(o.DOM.layoutBounds,"width",{get:_s});Object.defineProperty(o.DOM.layoutBounds,"height",{get:_n});}else{Object.defineProperty(o.DOM.visualBounds,"width",{get:function get(){return window.innerWidth;}});Object.defineProperty(o.DOM.visualBounds,"height",{get:function get(){return window.innerHeight;}});Object.defineProperty(o.DOM.layoutBounds,"width",{get:function get(){var t=document.documentElement.clientWidth;var e=window.innerWidth;if(t<e){return e;}else{return t;}}});Object.defineProperty(o.DOM.layoutBounds,"height",{get:function get(){var t=document.documentElement.clientHeight;var e=window.innerHeight;if(t<e){return e;}else{return t;}}});}Object.defineProperty(o.DOM.documentBounds,"x",{value:0});Object.defineProperty(o.DOM.documentBounds,"y",{value:0});Object.defineProperty(o.DOM.documentBounds,"width",{get:function get(){var t=document.documentElement;return Math.max(t.clientWidth,t.offsetWidth,t.scrollWidth);}});Object.defineProperty(o.DOM.documentBounds,"height",{get:function get(){var t=document.documentElement;return Math.max(t.clientHeight,t.offsetHeight,t.scrollHeight);}});},null,true);o.ArraySet=function(t){this.position=0;this.list=t||[];};o.ArraySet.prototype={add:function add(t){if(!this.exists(t)){this.list.push(t);}return t;},getIndex:function getIndex(t){return this.list.indexOf(t);},getByKey:function getByKey(t,e){for(var i=this.list.length;i--;){if(this.list[i][t]===e){return this.list[i];}}return null;},exists:function exists(t){return this.list.indexOf(t)>-1;},reset:function reset(){this.list.length=0;},remove:function remove(t){var e=this.list.indexOf(t);if(e>-1){this.list.splice(e,1);return t;}},setAll:function setAll(t,e){for(var i=this.list.length;i--;){if(this.list[i]){this.list[i][t]=e;}}},callAll:function callAll(t){var e=Array.prototype.slice.call(arguments,1);for(var i=this.list.length;i--;){if(this.list[i]&&this.list[i][t]){this.list[i][t].apply(this.list[i],e);}}},removeAll:function removeAll(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;for(var e=this.list.length;e--;){if(this.list[e]){var i=this.remove(this.list[e]);if(t){i.destroy();}}}this.position=0;this.list=[];}};Object.defineProperty(o.ArraySet.prototype,"total",{get:function get(){return this.list.length;}});Object.defineProperty(o.ArraySet.prototype,"first",{get:function get(){this.position=0;if(this.list.length>0){return this.list[0];}else{return null;}}});Object.defineProperty(o.ArraySet.prototype,"next",{get:function get(){if(this.position<this.list.length){this.position++;return this.list[this.position];}else{return null;}}});o.ArraySet.prototype.constructor=o.ArraySet;o.ArrayUtils={getRandomItem:function getRandomItem(t,e,i){if(t===null){return null;}if(e===undefined){e=0;}if(i===undefined){i=t.length;}var s=e+Math.floor(Math.random()*i);if(t[s]===undefined){return null;}else{return t[s];}},removeRandomItem:function removeRandomItem(t,e,i){if(t==null){return null;}if(e===undefined){e=0;}if(i===undefined){i=t.length;}var s=e+Math.floor(Math.random()*i);if(s<t.length){var n=t.splice(s,1);if(n[0]===undefined){return null;}else{return n[0];}}return null;},shuffle:function shuffle(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1));var s=t[e];t[e]=t[i];t[i]=s;}return t;},transposeMatrix:function transposeMatrix(t){var e=t.length;for(var i=t[0].length,s=new Array(i),n=0;n<i;n++){s[n]=new Array(e);for(var o=e-1;o>-1;o--){s[n][o]=t[o][n];}}return s;},rotateMatrix:function rotateMatrix(t,e){if(typeof e!="string"){e=(e%360+360)%360;}if(e===90||e===-270||e==="rotateLeft"){t=o.ArrayUtils.transposeMatrix(t);t=t.reverse();}else if(e===-90||e===270||e==="rotateRight"){t=t.reverse();t=o.ArrayUtils.transposeMatrix(t);}else if(Math.abs(e)===180||e==="rotate180"){for(var i=0;i<t.length;i++){t[i].reverse();}t=t.reverse();}return t;},findClosest:function findClosest(t,e){if(!e.length){return NaN;}if(e.length===1||t<e[0]){return e[0];}for(var i=1;e[i]<t;){i++;}var s=e[i-1];var n=i<e.length?e[i]:Number.POSITIVE_INFINITY;if(n-t<=t-s){return n;}else{return s;}},rotateRight:function rotateRight(t){var e=t.pop();t.unshift(e);return e;},rotateLeft:function rotateLeft(t){var e=t.shift();t.push(e);return e;},rotate:function rotate(t){var e=t.shift();t.push(e);return e;},numberArray:function numberArray(t,e){var i=[];for(var s=t;s<=e;s++){i.push(s);}return i;},numberArrayStep:function numberArrayStep(t,e,i){if(t===undefined||t===null){t=0;}if(e===undefined||e===null){e=t;t=0;}if(i===undefined){i=1;}var s=[];for(var n=Math.max(o.Math.roundAwayFromZero((e-t)/(i||1)),0),a=0;a<n;a++){s.push(t);t+=i;}return s;}};o.LinkedList=function(){this.next=null;this.prev=null;this.first=null;this.last=null;this.total=0;};o.LinkedList.prototype={add:function add(t){if(this.total===0&&this.first===null&&this.last===null){this.first=t;this.last=t;this.next=t;t.prev=this;this.total++;return t;}else{this.last.next=t;t.prev=this.last;this.last=t;this.total++;return t;}},reset:function reset(){this.first=null;this.last=null;this.next=null;this.prev=null;this.total=0;},remove:function remove(t){if(this.total===1){this.reset();t.next=t.prev=null;return;}if(t===this.first){this.first=this.first.next;}else if(t===this.last){this.last=this.last.prev;}if(t.prev){t.prev.next=t.next;}if(t.next){t.next.prev=t.prev;}t.next=t.prev=null;if(this.first===null){this.last=null;}this.total--;},callAll:function callAll(t){if(this.first&&this.last){var e=this.first;do{if(e&&e[t]){e[t].call(e);}e=e.next;}while(e!==this.last.next);}}};o.LinkedList.prototype.constructor=o.LinkedList;o.Create=function(t){this.game=t;this.bmd=null;this.canvas=null;this.ctx=null;this.palettes=[{0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"},{0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"},{0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"},{0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"},{0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}];};o.Create.PALETTE_ARNE=0;o.Create.PALETTE_JMP=1;o.Create.PALETTE_CGA=2;o.Create.PALETTE_C64=3;o.Create.PALETTE_JAPANESE_MACHINE=4;o.Create.prototype={texture:function texture(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:8;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:i;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var o=e[0].length*i;var a=e.length*s;if(this.bmd===null){this.bmd=this.game.make.bitmapData();this.canvas=this.bmd.canvas;this.ctx=this.bmd.context;}this.bmd.resize(o,a);this.bmd.clear();for(var r=0;r<e.length;r++){for(var h=e[r],l=0;l<h.length;l++){var c=h[l];if(c!=="."&&c!==" "){this.ctx.fillStyle=this.palettes[n][c];this.ctx.fillRect(l*i,r*s,i,s);}}}return this.bmd.generateTexture(t);},grid:function grid(t,e,i,s,n,o){if(this.bmd===null){this.bmd=this.game.make.bitmapData();this.canvas=this.bmd.canvas;this.ctx=this.bmd.context;}this.bmd.resize(e,i);this.ctx.fillStyle=o;for(var a=0;a<i;a+=n){this.ctx.fillRect(0,a,e,1);}for(var r=0;r<e;r+=s){this.ctx.fillRect(r,0,1,i);}return this.bmd.generateTexture(t);}};o.Create.prototype.constructor=o.Create;o.FlexGrid=function(t,e,i){this.game=t.game;this.manager=t;this.width=e;this.height=i;this.boundsCustom=new o.Rectangle(0,0,e,i);this.boundsFluid=new o.Rectangle(0,0,e,i);this.boundsFull=new o.Rectangle(0,0,e,i);this.boundsNone=new o.Rectangle(0,0,e,i);this.positionCustom=new o.Point(0,0);this.positionFluid=new o.Point(0,0);this.positionFull=new o.Point(0,0);this.positionNone=new o.Point(0,0);this.scaleCustom=new o.Point(1,1);this.scaleFluid=new o.Point(1,1);this.scaleFluidInversed=new o.Point(1,1);this.scaleFull=new o.Point(1,1);this.scaleNone=new o.Point(1,1);this.customWidth=0;this.customHeight=0;this.customOffsetX=0;this.customOffsetY=0;this.ratioH=e/i;this.ratioV=i/e;this.multiplier=0;this.layers=[];};o.FlexGrid.prototype={setSize:function setSize(t,e){this.width=t;this.height=e;this.ratioH=t/e;this.ratioV=e/t;this.scaleNone=new o.Point(1,1);this.boundsNone.width=this.width;this.boundsNone.height=this.height;this.refresh();},createCustomLayer:function createCustomLayer(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;this.customWidth=t;this.customHeight=e;this.boundsCustom.width=t;this.boundsCustom.height=e;var n=new o.FlexLayer(this,this.positionCustom,this.boundsCustom,this.scaleCustom);if(s){this.game.world.add(n);}this.layers.push(n);if(i!==undefined&&_typeof(i)!==null){n.addMultiple(i);}return n;},createFluidLayer:function createFluidLayer(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=new o.FlexLayer(this,this.positionFluid,this.boundsFluid,this.scaleFluid);if(e){this.game.world.add(i);}this.layers.push(i);if(t!==undefined&&_typeof(t)!==null){i.addMultiple(t);}return i;},createFullLayer:function createFullLayer(t){var e=new o.FlexLayer(this,this.positionFull,this.boundsFull,this.scaleFluid);this.game.world.add(e);this.layers.push(e);if(t!==undefined){e.addMultiple(t);}return e;},createFixedLayer:function createFixedLayer(t){var e=new o.FlexLayer(this,this.positionNone,this.boundsNone,this.scaleNone);this.game.world.add(e);this.layers.push(e);if(t!==undefined){e.addMultiple(t);}return e;},reset:function reset(){for(var t=this.layers.length;t--;){if(!this.layers[t].persist){this.layers[t].position=null;this.layers[t].scale=null;this.layers.slice(t,1);}}},onResize:function onResize(t,e){this.ratioH=t/e;this.ratioV=e/t;this.refresh(t,e);},refresh:function refresh(){this.multiplier=Math.min(this.manager.height/this.height,this.manager.width/this.width);this.boundsFluid.width=Math.round(this.width*this.multiplier);this.boundsFluid.height=Math.round(this.height*this.multiplier);this.scaleFluid.set(this.boundsFluid.width/this.width,this.boundsFluid.height/this.height);this.scaleFluidInversed.set(this.width/this.boundsFluid.width,this.height/this.boundsFluid.height);this.scaleFull.set(this.boundsFull.width/this.width,this.boundsFull.height/this.height);this.boundsFull.width=Math.round(this.manager.width*this.scaleFluidInversed.x);this.boundsFull.height=Math.round(this.manager.height*this.scaleFluidInversed.y);this.boundsFluid.centerOn(this.manager.bounds.centerX,this.manager.bounds.centerY);this.boundsNone.centerOn(this.manager.bounds.centerX,this.manager.bounds.centerY);this.positionFluid.set(this.boundsFluid.x,this.boundsFluid.y);this.positionNone.set(this.boundsNone.x,this.boundsNone.y);},fitSprite:function fitSprite(t){this.manager.scaleSprite(t);t.x=this.manager.bounds.centerX;t.y=this.manager.bounds.centerY;},debug:function debug(){this.game.debug.text(this.boundsFluid.width+" x "+this.boundsFluid.height,this.boundsFluid.x+4,this.boundsFluid.y+16);this.game.debug.geom(this.boundsFluid,"rgba(255,0,0,0.9",false);}};o.FlexGrid.prototype.constructor=o.FlexGrid;o.FlexLayer=function(t,e,i,s){o.Group.call(this,t.game,null,"__flexLayer"+t.game.rnd.uuid(),false);this.manager=t.manager;this.grid=t;this.persist=false;this.position=e;this.bounds=i;this.scale=s;this.topLeft=i.topLeft;this.topMiddle=new o.Point(i.halfWidth,0);this.topRight=i.topRight;this.bottomLeft=i.bottomLeft;this.bottomMiddle=new o.Point(i.halfWidth,i.bottom);this.bottomRight=i.bottomRight;};o.FlexLayer.prototype=Object.create(o.Group.prototype);o.FlexLayer.prototype.constructor=o.FlexLayer;o.FlexLayer.prototype.resize=function(){};o.FlexLayer.prototype.debug=function(){this.game.debug.text(this.bounds.width+" x "+this.bounds.height,this.bounds.x+4,this.bounds.y+16);this.game.debug.geom(this.bounds,"rgba(0,0,255,0.9",false);this.game.debug.geom(this.topLeft,"rgba(255,255,255,0.9");this.game.debug.geom(this.topMiddle,"rgba(255,255,255,0.9");this.game.debug.geom(this.topRight,"rgba(255,255,255,0.9");};o.Color={packPixel:function packPixel(t,e,i,s){if(o.Device.LITTLE_ENDIAN){return(s<<24|i<<16|e<<8|t)>>>0;}else{return(t<<24|e<<16|i<<8|s)>>>0;}},unpackPixel:function unpackPixel(t,e,i,s){if(e===undefined||e===null){e=o.Color.createColor();}if(i===undefined||i===null){i=false;}if(s===undefined||s===null){s=false;}if(o.Device.LITTLE_ENDIAN){e.a=(t&4278190080)>>>24;e.b=(t&16711680)>>>16;e.g=(t&65280)>>>8;e.r=t&255;}else{e.r=(t&4278190080)>>>24;e.g=(t&16711680)>>>16;e.b=(t&65280)>>>8;e.a=t&255;}e.color=t;e.rgba="rgba("+e.r+","+e.g+","+e.b+","+e.a/255+")";if(i){o.Color.RGBtoHSL(e.r,e.g,e.b,e);}if(s){o.Color.RGBtoHSV(e.r,e.g,e.b,e);}return e;},fromRGBA:function fromRGBA(t,e){e||(e=o.Color.createColor());e.r=(t&4278190080)>>>24;e.g=(t&16711680)>>>16;e.b=(t&65280)>>>8;e.a=t&255;e.rgba="rgba("+e.r+","+e.g+","+e.b+","+e.a+")";return e;},toRGBA:function toRGBA(t,e,i,s){return t<<24|e<<16|i<<8|s;},toABGR:function toABGR(t,e,i,s){return(s<<24|i<<16|e<<8|t)>>>0;},RGBtoHSL:function RGBtoHSL(t,e,i,s){s||(s=o.Color.createColor(t,e,i,1));t/=255;e/=255;i/=255;var n=Math.min(t,e,i);var a=Math.max(t,e,i);s.h=0;s.s=0;s.l=(a+n)/2;if(a!==n){var r=a-n;s.s=s.l>0.5?r/(2-a-n):r/(a+n);if(a===t){s.h=(e-i)/r+(e<i?6:0);}else if(a===e){s.h=(i-t)/r+2;}else if(a===i){s.h=(t-e)/r+4;}s.h/=6;}return s;},HSLtoRGB:function HSLtoRGB(t,e,i,s){if(s){s.r=i;s.g=i;s.b=i;}else{s=o.Color.createColor(i,i,i);}if(e!==0){var n=i<0.5?i*(1+e):i+e-i*e;var a=i*2-n;s.r=o.Color.hueToColor(a,n,t+1/3);s.g=o.Color.hueToColor(a,n,t);s.b=o.Color.hueToColor(a,n,t-1/3);}s.r=Math.floor(s.r*255|0);s.g=Math.floor(s.g*255|0);s.b=Math.floor(s.b*255|0);o.Color.updateColor(s);return s;},RGBtoHSV:function RGBtoHSV(t,e,i,s){s||(s=o.Color.createColor(t,e,i,255));t/=255;e/=255;i/=255;var n=Math.min(t,e,i);var a=Math.max(t,e,i);var r=a-n;s.h=0;s.s=a===0?0:r/a;s.v=a;if(a!==n){if(a===t){s.h=(e-i)/r+(e<i?6:0);}else if(a===e){s.h=(i-t)/r+2;}else if(a===i){s.h=(t-e)/r+4;}s.h/=6;}return s;},HSVtoRGB:function HSVtoRGB(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:o.Color.createColor(0,0,0,1,t,e,0,i);var n;var a;var r;var h=Math.floor(t*6);var l=t*6-h;var c=i*(1-e);var u=i*(1-l*e);var d=i*(1-(1-l)*e);switch(h%6){case 0:n=i;a=d;r=c;break;case 1:n=u;a=i;r=c;break;case 2:n=c;a=i;r=d;break;case 3:n=c;a=u;r=i;break;case 4:n=d;a=c;r=i;break;case 5:n=i;a=c;r=u;}s.r=Math.floor(n*255);s.g=Math.floor(a*255);s.b=Math.floor(r*255);o.Color.updateColor(s);return s;},hueToColor:function hueToColor(t,e,i){if(i<0){i+=1;}if(i>1){i-=1;}if(i<1/6){return t+(e-t)*6*i;}else if(i<0.5){return e;}else if(i<2/3){return t+(e-t)*(2/3-i)*6;}else{return t;}},createColor:function createColor(t,e,i,s,n,a,r,h){var l={r:t||0,g:e||0,b:i||0,a:s||1,h:n||0,s:a||0,l:r||0,v:h||0,color:0,color32:0,rgba:""};return o.Color.updateColor(l);},updateColor:function updateColor(t){t.rgba="rgba("+t.r.toString()+","+t.g.toString()+","+t.b.toString()+","+t.a.toString()+")";t.color=o.Color.getColor(t.r,t.g,t.b);t.color32=o.Color.getColor32(t.a*255,t.r,t.g,t.b);return t;},getColor32:function getColor32(t,e,i,s){return t<<24|e<<16|i<<8|s;},getColor:function getColor(t,e,i){return t<<16|e<<8|i;},RGBtoString:function RGBtoString(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:255;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:"#";if(n==="#"){return"#"+(16777216+(t<<16)+(e<<8)+i).toString(16).slice(1);}else{return"0x"+o.Color.componentToHex(s)+o.Color.componentToHex(t)+o.Color.componentToHex(e)+o.Color.componentToHex(i);}},hexToRGB:function hexToRGB(t){var e=o.Color.hexToColor(t);if(e){return o.Color.getColor32(e.a,e.r,e.g,e.b);}},hexToColor:function hexToColor(t,e){t=t.replace(/^(?:#|0x)?([a-f\\d])([a-f\\d])([a-f\\d])$/i,function(t,e,i,s){return e+e+i+i+s+s;});var i=/^(?:#|0x)?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(t);if(i){var s=parseInt(i[1],16);var n=parseInt(i[2],16);var a=parseInt(i[3],16);if(e){e.r=s;e.g=n;e.b=a;}else{e=o.Color.createColor(s,n,a);}}return e;},webToColor:function webToColor(t,e){e||(e=o.Color.createColor());var i=/^rgba?\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(\\d+(?:\\.\\d+)?))?\\s*\\)$/.exec(t);if(i){e.r=parseInt(i[1],10);e.g=parseInt(i[2],10);e.b=parseInt(i[3],10);e.a=i[4]!==undefined?parseFloat(i[4]):1;o.Color.updateColor(e);}return e;},valueToColor:function valueToColor(t,e){e||(e=o.Color.createColor());if(typeof t=="string"){if(t.indexOf("rgb")===0){return o.Color.webToColor(t,e);}else{e.a=1;return o.Color.hexToColor(t,e);}}if(typeof t=="number"){var i=o.Color.getRGB(t);e.r=i.r;e.g=i.g;e.b=i.b;e.a=i.a/255;return e;}return e;},componentToHex:function componentToHex(t){var e=t.toString(16);if(e.length===1){return"0"+e;}else{return e;}},HSVColorWheel:function HSVColorWheel(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var i=[];for(var s=0;s<=359;s++){i.push(o.Color.HSVtoRGB(s/359,t,e));}return i;},HSLColorWheel:function HSLColorWheel(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0.5;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0.5;var i=[];for(var s=0;s<=359;s++){i.push(o.Color.HSLtoRGB(s/359,t,e));}return i;},interpolateColor:function interpolateColor(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:255;var a=o.Color.getRGB(t);var r=o.Color.getRGB(e);var h=(r.red-a.red)*s/i+a.red;var l=(r.green-a.green)*s/i+a.green;var c=(r.blue-a.blue)*s/i+a.blue;return o.Color.getColor32(n,h,l,c);},interpolateColorWithRGB:function interpolateColorWithRGB(t,e,i,s,n,a){var r=o.Color.getRGB(t);var h=(e-r.red)*a/n+r.red;var l=(i-r.green)*a/n+r.green;var c=(s-r.blue)*a/n+r.blue;return o.Color.getColor(h,l,c);},interpolateRGB:function interpolateRGB(t,e,i,s,n,a,r,h){var l=(s-t)*h/r+t;var c=(n-e)*h/r+e;var u=(a-i)*h/r+i;return o.Color.getColor(l,c,u);},getRandomColor:function getRandomColor(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:255;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:255;if(e>255||t>e){return o.Color.getColor(255,255,255);}var s=t+Math.round(Math.random()*(e-t));var n=t+Math.round(Math.random()*(e-t));var a=t+Math.round(Math.random()*(e-t));return o.Color.getColor32(i,s,n,a);},getRGB:function getRGB(t){if(t>16777215){return{alpha:t>>>24,red:t>>16&255,green:t>>8&255,blue:t&255,a:t>>>24,r:t>>16&255,g:t>>8&255,b:t&255};}else{return{alpha:255,red:t>>16&255,green:t>>8&255,blue:t&255,a:255,r:t>>16&255,g:t>>8&255,b:t&255};}},getWebRGB:function getWebRGB(t){if(_typeof(t)=="object"){return"rgba("+t.r.toString()+","+t.g.toString()+","+t.b.toString()+","+(t.a/255).toString()+")";}var e=o.Color.getRGB(t);return"rgba("+e.r.toString()+","+e.g.toString()+","+e.b.toString()+","+(e.a/255).toString()+")";},getAlpha:function getAlpha(t){return t>>>24;},getAlphaFloat:function getAlphaFloat(t){return(t>>>24)/255;},getRed:function getRed(t){return t>>16&255;},getGreen:function getGreen(t){return t>>8&255;},getBlue:function getBlue(t){return t&255;},blendNormal:function blendNormal(t){return t;},blendLighten:function blendLighten(t,e){if(e>t){return e;}else{return t;}},blendDarken:function blendDarken(t,e){if(e>t){return t;}else{return e;}},blendMultiply:function blendMultiply(t,e){return t*e/255;},blendAverage:function blendAverage(t,e){return(t+e)/2;},blendAdd:function blendAdd(t,e){return Math.min(255,t+e);},blendSubtract:function blendSubtract(t,e){return Math.max(0,t+e-255);},blendDifference:function blendDifference(t,e){return Math.abs(t-e);},blendNegation:function blendNegation(t,e){return 255-Math.abs(255-t-e);},blendScreen:function blendScreen(t,e){return 255-((255-t)*(255-e)>>8);},blendExclusion:function blendExclusion(t,e){return t+e-t*2*e/255;},blendOverlay:function blendOverlay(t,e){if(e<128){return t*2*e/255;}else{return 255-(255-t)*2*(255-e)/255;}},blendSoftLight:function blendSoftLight(t,e){if(e<128){return(64+(t>>1))*2*(e/255);}else{return 255-(255-(64+(t>>1)))*2*(255-e)/255;}},blendHardLight:function blendHardLight(t,e){return o.Color.blendOverlay(e,t);},blendColorDodge:function blendColorDodge(t,e){if(e===255){return e;}else{return Math.min(255,(t<<8)/(255-e));}},blendColorBurn:function blendColorBurn(t,e){if(e===0){return e;}else{return Math.max(0,255-(255-t<<8)/e);}},blendLinearDodge:function blendLinearDodge(t,e){return o.Color.blendAdd(t,e);},blendLinearBurn:function blendLinearBurn(t,e){return o.Color.blendSubtract(t,e);},blendLinearLight:function blendLinearLight(t,e){if(e<128){return o.Color.blendLinearBurn(t,e*2);}else{return o.Color.blendLinearDodge(t,(e-128)*2);}},blendVividLight:function blendVividLight(t,e){if(e<128){return o.Color.blendColorBurn(t,e*2);}else{return o.Color.blendColorDodge(t,(e-128)*2);}},blendPinLight:function blendPinLight(t,e){if(e<128){return o.Color.blendDarken(t,e*2);}else{return o.Color.blendLighten(t,(e-128)*2);}},blendHardMix:function blendHardMix(t,e){if(o.Color.blendVividLight(t,e)<128){return 0;}else{return 255;}},blendReflect:function blendReflect(t,e){if(e===255){return e;}else{return Math.min(255,t*t/(255-e));}},blendGlow:function blendGlow(t,e){return o.Color.blendReflect(e,t);},blendPhoenix:function blendPhoenix(t,e){return Math.min(t,e)-Math.max(t,e)+255;}};o.Physics=function(t,e){e=e||{};this.game=t;this.config=e;this.arcade=null;this.p2=null;this.ninja=null;this.box2d=null;this.chipmunk=null;this.matter=null;this.parseConfig();};o.Physics.ARCADE=0;o.Physics.P2JS=1;o.Physics.NINJA=2;o.Physics.BOX2D=3;o.Physics.CHIPMUNK=4;o.Physics.MATTERJS=5;o.Physics.prototype={parseConfig:function parseConfig(){if((!this.config.hasOwnProperty("arcade")||this.config.arcade===true)&&!!o.Physics.hasOwnProperty("Arcade")){this.arcade=new o.Physics.Arcade(this.game);}if(this.config.hasOwnProperty("ninja")&&this.config.ninja===true&&o.Physics.hasOwnProperty("Ninja")){this.ninja=new o.Physics.Ninja(this.game);}if(this.config.hasOwnProperty("p2")&&this.config.p2===true&&o.Physics.hasOwnProperty("P2")){this.p2=new o.Physics.P2(this.game,this.config);}if(this.config.hasOwnProperty("box2d")&&this.config.box2d===true&&o.Physics.hasOwnProperty("BOX2D")){this.box2d=new o.Physics.BOX2D(this.game,this.config);}if(this.config.hasOwnProperty("matter")&&this.config.matter===true&&o.Physics.hasOwnProperty("Matter")){this.matter=new o.Physics.Matter(this.game,this.config);}},startSystem:function startSystem(t){if(t===o.Physics.ARCADE){this.arcade=new o.Physics.Arcade(this.game);}else if(t===o.Physics.P2JS){if(this.p2===null){this.p2=new o.Physics.P2(this.game,this.config);}else{this.p2.reset();}}else if(t===o.Physics.NINJA){this.ninja=new o.Physics.Ninja(this.game);}else if(t===o.Physics.BOX2D){if(this.box2d===null){this.box2d=new o.Physics.Box2D(this.game,this.config);}else{this.box2d.reset();}}else if(t===o.Physics.MATTERJS){if(this.matter===null){this.matter=new o.Physics.Matter(this.game,this.config);}else{this.matter.reset();}}},enable:function enable(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:o.Physics.ARCADE;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(e===o.Physics.ARCADE){this.arcade.enable(t);}else if(e===o.Physics.P2JS&&this.p2){this.p2.enable(t,i);}else if(e===o.Physics.NINJA&&this.ninja){this.ninja.enableAABB(t);}else if(e===o.Physics.BOX2D&&this.box2d){this.box2d.enable(t);}else if(e===o.Physics.MATTERJS&&this.matter){this.matter.enable(t);}},preUpdate:function preUpdate(){if(this.p2){this.p2.preUpdate();}if(this.box2d){this.box2d.preUpdate();}if(this.matter){this.matter.preUpdate();}},update:function update(){if(this.p2){this.p2.update();}if(this.box2d){this.box2d.update();}if(this.matter){this.matter.update();}},setBoundsToWorld:function setBoundsToWorld(){if(this.arcade){this.arcade.setBoundsToWorld();}if(this.ninja){this.ninja.setBoundsToWorld();}if(this.p2){this.p2.setBoundsToWorld();}if(this.box2d){this.box2d.setBoundsToWorld();}if(this.matter){this.matter.setBoundsToWorld();}},clear:function clear(){if(this.p2){this.p2.clear();}if(this.box2d){this.box2d.clear();}if(this.matter){this.matter.clear();}},reset:function reset(){if(this.p2){this.p2.reset();}if(this.box2d){this.box2d.reset();}if(this.matter){this.matter.reset();}},destroy:function destroy(){if(this.p2){this.p2.destroy();}if(this.box2d){this.box2d.destroy();}if(this.matter){this.matter.destroy();}this.arcade=null;this.ninja=null;this.p2=null;this.box2d=null;this.matter=null;}};o.Physics.prototype.constructor=o.Physics;o.Physics.Arcade=function(t){this.game=t;this.gravity=new o.Point();this.bounds=new o.Rectangle(0,0,t.world.width,t.world.height);this.checkCollision={up:true,down:true,left:true,right:true};this.maxObjects=10;this.maxLevels=4;this.OVERLAP_BIAS=4;this.forceX=false;this.sortDirection=o.Physics.Arcade.LEFT_RIGHT;this.skipQuadTree=true;this.isPaused=false;this.quadTree=new o.QuadTree(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels);this._total=0;this.setBoundsToWorld();};o.Physics.Arcade.prototype.constructor=o.Physics.Arcade;o.Physics.Arcade.SORT_NONE=0;o.Physics.Arcade.LEFT_RIGHT=1;o.Physics.Arcade.RIGHT_LEFT=2;o.Physics.Arcade.TOP_BOTTOM=3;o.Physics.Arcade.BOTTOM_TOP=4;o.Physics.Arcade.prototype={setBounds:function setBounds(t,e,i,s){this.bounds.setTo(t,e,i,s);},setBoundsToWorld:function setBoundsToWorld(){this.bounds.copyFrom(this.game.world.bounds);},enable:function enable(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=1;if(Array.isArray(t)){for(i=t.length;i--;){if(t[i]instanceof o.Group){this.enable(t[i].children,e);}else{this.enableBody(t[i]);if(e&&t[i].hasOwnProperty("children")&&t[i].children.length>0){this.enable(t[i],true);}}}}else if(t instanceof o.Group){this.enable(t.children,e);}else{this.enableBody(t);if(e&&t.hasOwnProperty("children")&&t.children.length>0){this.enable(t.children,true);}}},enableBody:function enableBody(t){if(t.hasOwnProperty("body")&&t.body===null){t.body=new o.Physics.Arcade.Body(t);if(t.parent&&t.parent instanceof o.Group){t.parent.addToHash(t);}}},updateMotion:function updateMotion(t){var e=this.computeVelocity(0,t,t.angularVelocity,t.angularAcceleration,t.angularDrag,t.maxAngular)-t.angularVelocity;t.angularVelocity+=e;t.rotation+=t.angularVelocity*this.game.time.physicsElapsed;t.velocity.x=this.computeVelocity(1,t,t.velocity.x,t.acceleration.x,t.drag.x,t.maxVelocity.x);t.velocity.y=this.computeVelocity(2,t,t.velocity.y,t.acceleration.y,t.drag.y,t.maxVelocity.y);},computeVelocity:function computeVelocity(t,e,i,s,n){var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:10000;if(t===1&&e.allowGravity){i+=(this.gravity.x+e.gravity.x)*this.game.time.physicsElapsed;}else if(t===2&&e.allowGravity){i+=(this.gravity.y+e.gravity.y)*this.game.time.physicsElapsed;}if(s){i+=s*this.game.time.physicsElapsed;}else if(n){n*=this.game.time.physicsElapsed;if(i-n>0){i-=n;}else if(i+n<0){i+=n;}else{i=0;}}if(i>o){i=o;}else if(i<-o){i=-o;}return i;},overlap:function overlap(t,e,i,s,n){i=i||null;s=s||null;n=n||i;this._total=0;if(!Array.isArray(t)&&Array.isArray(e)){for(var o=0;o<e.length;o++){this.collideHandler(t,e[o],i,s,n,true);}}else if(Array.isArray(t)&&!Array.isArray(e)){for(var o=0;o<t.length;o++){this.collideHandler(t[o],e,i,s,n,true);}}else if(Array.isArray(t)&&Array.isArray(e)){for(var o=0;o<t.length;o++){for(var a=0;a<e.length;a++){this.collideHandler(t[o],e[a],i,s,n,true);}}}else{this.collideHandler(t,e,i,s,n,true);}return this._total>0;},collide:function collide(t,e,i,s,n){i=i||null;s=s||null;n=n||i;this._total=0;if(!Array.isArray(t)&&Array.isArray(e)){for(var o=0;o<e.length;o++){this.collideHandler(t,e[o],i,s,n,false);}}else if(Array.isArray(t)&&!Array.isArray(e)){for(var o=0;o<t.length;o++){this.collideHandler(t[o],e,i,s,n,false);}}else if(Array.isArray(t)&&Array.isArray(e)){for(var o=0;o<t.length;o++){for(var a=0;a<e.length;a++){this.collideHandler(t[o],e[a],i,s,n,false);}}}else{this.collideHandler(t,e,i,s,n,false);}return this._total>0;},sortLeftRight:function sortLeftRight(t,e){if(t.body&&e.body){return t.body.x-e.body.x;}else{return 0;}},sortRightLeft:function sortRightLeft(t,e){if(t.body&&e.body){return e.body.x-t.body.x;}else{return 0;}},sortTopBottom:function sortTopBottom(t,e){if(t.body&&e.body){return t.body.y-e.body.y;}else{return 0;}},sortBottomTop:function sortBottomTop(t,e){if(t.body&&e.body){return e.body.y-t.body.y;}else{return 0;}},sort:function sort(t,e){if(t.physicsSortDirection!==null){e=t.physicsSortDirection;}else if(e===undefined){e=this.sortDirection;}if(e===o.Physics.Arcade.LEFT_RIGHT){t.hash.sort(this.sortLeftRight);}else if(e===o.Physics.Arcade.RIGHT_LEFT){t.hash.sort(this.sortRightLeft);}else if(e===o.Physics.Arcade.TOP_BOTTOM){t.hash.sort(this.sortTopBottom);}else if(e===o.Physics.Arcade.BOTTOM_TOP){t.hash.sort(this.sortBottomTop);}},collideHandler:function collideHandler(t,e,i,s,n,a){if(e===undefined&&t.physicsType===o.GROUP){this.sort(t);this.collideGroupVsSelf(t,i,s,n,a);return;}if(t&&e&&t.exists&&e.exists){if(this.sortDirection!==o.Physics.Arcade.SORT_NONE){if(t.physicsType===o.GROUP){this.sort(t);}if(e.physicsType===o.GROUP){this.sort(e);}}if(t.physicsType===o.SPRITE){if(e.physicsType===o.SPRITE){this.collideSpriteVsSprite(t,e,i,s,n,a);}else if(e.physicsType===o.GROUP){this.collideSpriteVsGroup(t,e,i,s,n,a);}else if(e.physicsType===o.TILEMAPLAYER){this.collideSpriteVsTilemapLayer(t,e,i,s,n,a);}}else if(t.physicsType===o.GROUP){if(e.physicsType===o.SPRITE){this.collideSpriteVsGroup(e,t,i,s,n,a);}else if(e.physicsType===o.GROUP){this.collideGroupVsGroup(t,e,i,s,n,a);}else if(e.physicsType===o.TILEMAPLAYER){this.collideGroupVsTilemapLayer(t,e,i,s,n,a);}}else if(t.physicsType===o.TILEMAPLAYER){if(e.physicsType===o.SPRITE){this.collideSpriteVsTilemapLayer(e,t,i,s,n,a);}else if(e.physicsType===o.GROUP){this.collideGroupVsTilemapLayer(e,t,i,s,n,a);}}}},collideSpriteVsSprite:function collideSpriteVsSprite(t,e,i,s,n,o){return!!t.body&&!!e.body&&(this.separate(t.body,e.body,s,n,o)&&(i&&i.call(n,t,e),this._total++),true);},collideSpriteVsGroup:function collideSpriteVsGroup(t,e,i,s,n,a){if(e.length!==0&&t.body){if(this.skipQuadTree||t.body.skipQuadTree){var r={};for(var h=0;h<e.hash.length;h++){var l=e.hash[h];if(l&&l.exists&&l.body){r=l.body.getBounds(r);if(this.sortDirection===o.Physics.Arcade.LEFT_RIGHT){if(t.body.right<r.x){break;}if(r.right<t.body.x){continue;}}else if(this.sortDirection===o.Physics.Arcade.RIGHT_LEFT){if(t.body.x>r.right){break;}if(r.x>t.body.right){continue;}}else if(this.sortDirection===o.Physics.Arcade.TOP_BOTTOM){if(t.body.bottom<r.y){break;}if(r.bottom<t.body.y){continue;}}else if(this.sortDirection===o.Physics.Arcade.BOTTOM_TOP){if(t.body.y>r.bottom){break;}if(r.y>t.body.bottom){continue;}}this.collideSpriteVsSprite(t,l,i,s,n,a);}}}else{this.quadTree.clear();this.quadTree.reset(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels);this.quadTree.populate(e);for(var c=this.quadTree.retrieve(t),h=0;h<c.length;h++){if(this.separate(t.body,c[h],s,n,a)){if(i){i.call(n,t,c[h].sprite);}this._total++;}}}}},collideGroupVsSelf:function collideGroupVsSelf(t,e,i,s,n){if(t.length!==0){for(var a=0;a<t.hash.length;a++){var r={};var h=t.hash[a];if(h&&h.exists&&h.body){r=h.body.getBounds(r);for(var l=a+1;l<t.hash.length;l++){var c={};var u=t.hash[l];if(u&&u.exists&&u.body){c=u.body.getBounds(c);if(this.sortDirection===o.Physics.Arcade.LEFT_RIGHT){if(r.right<c.x){break;}if(c.right<r.x){continue;}}else if(this.sortDirection===o.Physics.Arcade.RIGHT_LEFT){if(r.x>c.right){continue;}if(c.x>r.right){break;}}else if(this.sortDirection===o.Physics.Arcade.TOP_BOTTOM){if(r.bottom<c.y){continue;}if(c.bottom<r.y){break;}}else if(this.sortDirection===o.Physics.Arcade.BOTTOM_TOP){if(r.y>c.bottom){continue;}if(c.y>h.body.bottom){break;}}this.collideSpriteVsSprite(h,u,e,i,s,n);}}}}}},collideGroupVsGroup:function collideGroupVsGroup(t,e,i,s,n,a){if(t.length!==0&&e.length!==0){for(var r=0;r<t.children.length;r++){if(t.children[r].exists){if(t.children[r].physicsType===o.GROUP){this.collideGroupVsGroup(t.children[r],e,i,s,n,a);}else{this.collideSpriteVsGroup(t.children[r],e,i,s,n,a);}}}}},separate:function separate(t,e,i,s,n){if(!t.enable||!e.enable||t.checkCollision.none||e.checkCollision.none||!this.intersects(t,e)){return false;}if(i&&i.call(s,t.sprite,e.sprite)===false){return false;}if(t.isCircle&&e.isCircle){return this.separateCircle(t,e,n);}if(t.isCircle!==e.isCircle){var o=t.isCircle?e:t;var a=t.isCircle?t:e;var r={x:o.x,y:o.y,right:o.right,bottom:o.bottom};var h={x:a.x+a.radius,y:a.y+a.radius};if((h.y<r.y||h.y>r.bottom)&&(h.x<r.x||h.x>r.right)){return this.separateCircle(t,e,n);}}var l=false;var c=false;if(this.forceX||Math.abs(this.gravity.y+t.gravity.y)<Math.abs(this.gravity.x+t.gravity.x)){l=this.separateX(t,e,n);if(this.intersects(t,e)){c=this.separateY(t,e,n);}}else{c=this.separateY(t,e,n);if(this.intersects(t,e)){l=this.separateX(t,e,n);}}var u=l||c;if(u){if(n){if(t.onOverlap){t.onOverlap.dispatch(t.sprite,e.sprite);}if(e.onOverlap){e.onOverlap.dispatch(e.sprite,t.sprite);}}else{if(t.onCollide){t.onCollide.dispatch(t.sprite,e.sprite);}if(e.onCollide){e.onCollide.dispatch(e.sprite,t.sprite);}}}return u;},intersects:function intersects(t,e){return t!==e&&(t.isCircle?e.isCircle?o.Math.distance(t.center.x,t.center.y,e.center.x,e.center.y)<=t.radius+e.radius:this.circleBodyIntersects(t,e):e.isCircle?this.circleBodyIntersects(e,t):!(t.right<=e.position.x)&&!(t.bottom<=e.position.y)&&!(t.position.x>=e.right)&&!(t.position.y>=e.bottom));},circleBodyIntersects:function circleBodyIntersects(t,e){var i=o.Math.clamp(t.center.x,e.left,e.right);var s=o.Math.clamp(t.center.y,e.top,e.bottom);return(t.center.x-i)*(t.center.x-i)+(t.center.y-s)*(t.center.y-s)<=t.radius*t.radius;},separateCircle:function separateCircle(t,e,i){this.getOverlapX(t,e);this.getOverlapY(t,e);var s=e.center.x-t.center.x;var n=e.center.y-t.center.y;var a=Math.atan2(n,s);var r=0;if(t.isCircle!==e.isCircle){var h={x:e.isCircle?t.position.x:e.position.x,y:e.isCircle?t.position.y:e.position.y,right:e.isCircle?t.right:e.right,bottom:e.isCircle?t.bottom:e.bottom};var l={x:t.isCircle?t.position.x+t.radius:e.position.x+e.radius,y:t.isCircle?t.position.y+t.radius:e.position.y+e.radius,radius:t.isCircle?t.radius:e.radius};if(l.y<h.y){if(l.x<h.x){r=o.Math.distance(l.x,l.y,h.x,h.y)-l.radius;}else if(l.x>h.right){r=o.Math.distance(l.x,l.y,h.right,h.y)-l.radius;}}else if(l.y>h.bottom){if(l.x<h.x){r=o.Math.distance(l.x,l.y,h.x,h.bottom)-l.radius;}else if(l.x>h.right){r=o.Math.distance(l.x,l.y,h.right,h.bottom)-l.radius;}}r*=-1;}else{r=t.radius+e.radius-o.Math.distance(t.center.x,t.center.y,e.center.x,e.center.y);}if(i||r===0||t.immovable&&e.immovable||t.customSeparateX||e.customSeparateX){if(r!==0){if(t.onOverlap){t.onOverlap.dispatch(t.sprite,e.sprite);}if(e.onOverlap){e.onOverlap.dispatch(e.sprite,t.sprite);}}return r!==0;}var c={x:t.velocity.x*Math.cos(a)+t.velocity.y*Math.sin(a),y:t.velocity.x*Math.sin(a)-t.velocity.y*Math.cos(a)};var u={x:e.velocity.x*Math.cos(a)+e.velocity.y*Math.sin(a),y:e.velocity.x*Math.sin(a)-e.velocity.y*Math.cos(a)};var d=((t.mass-e.mass)*c.x+e.mass*2*u.x)/(t.mass+e.mass);var p=(t.mass*2*c.x+(e.mass-t.mass)*u.x)/(t.mass+e.mass);if(!t.immovable){t.velocity.x=(d*Math.cos(a)-c.y*Math.sin(a))*t.bounce.x;t.velocity.y=(c.y*Math.cos(a)+d*Math.sin(a))*t.bounce.y;}if(!e.immovable){e.velocity.x=(p*Math.cos(a)-u.y*Math.sin(a))*e.bounce.x;e.velocity.y=(u.y*Math.cos(a)+p*Math.sin(a))*e.bounce.y;}if(Math.abs(a)<Math.PI/2){if(t.velocity.x>0&&!t.immovable&&e.velocity.x>t.velocity.x){t.velocity.x*=-1;}else if(e.velocity.x<0&&!e.immovable&&t.velocity.x<e.velocity.x){e.velocity.x*=-1;}else if(t.velocity.y>0&&!t.immovable&&e.velocity.y>t.velocity.y){t.velocity.y*=-1;}else if(e.velocity.y<0&&!e.immovable&&t.velocity.y<e.velocity.y){e.velocity.y*=-1;}}else if(Math.abs(a)>Math.PI/2){if(t.velocity.x<0&&!t.immovable&&e.velocity.x<t.velocity.x){t.velocity.x*=-1;}else if(e.velocity.x>0&&!e.immovable&&t.velocity.x>e.velocity.x){e.velocity.x*=-1;}else if(t.velocity.y<0&&!t.immovable&&e.velocity.y<t.velocity.y){t.velocity.y*=-1;}else if(e.velocity.y>0&&!e.immovable&&t.velocity.x>e.velocity.y){e.velocity.y*=-1;}}if(!t.immovable){t.x+=t.velocity.x*this.game.time.physicsElapsed-r*Math.cos(a);t.y+=t.velocity.y*this.game.time.physicsElapsed-r*Math.sin(a);}if(!e.immovable){e.x+=e.velocity.x*this.game.time.physicsElapsed+r*Math.cos(a);e.y+=e.velocity.y*this.game.time.physicsElapsed+r*Math.sin(a);}if(t.onCollide){t.onCollide.dispatch(t.sprite,e.sprite);}if(e.onCollide){e.onCollide.dispatch(e.sprite,t.sprite);}return true;},getOverlapX:function getOverlapX(t,e,i){var s=0;var n=t.deltaAbsX()+e.deltaAbsX()+this.OVERLAP_BIAS;if(t.deltaX()===0&&e.deltaX()===0){t.embedded=true;e.embedded=true;}else if(t.deltaX()>e.deltaX()){s=t.right-e.x;if(s>n&&!i||t.checkCollision.right===false||e.checkCollision.left===false){s=0;}else{t.touching.none=false;t.touching.right=true;e.touching.none=false;e.touching.left=true;}}else if(t.deltaX()<e.deltaX()){s=t.x-e.width-e.x;if(-s>n&&!i||t.checkCollision.left===false||e.checkCollision.right===false){s=0;}else{t.touching.none=false;t.touching.left=true;e.touching.none=false;e.touching.right=true;}}t.overlapX=s;e.overlapX=s;return s;},getOverlapY:function getOverlapY(t,e,i){var s=0;var n=t.deltaAbsY()+e.deltaAbsY()+this.OVERLAP_BIAS;if(t.deltaY()===0&&e.deltaY()===0){t.embedded=true;e.embedded=true;}else if(t.deltaY()>e.deltaY()){s=t.bottom-e.y;if(s>n&&!i||t.checkCollision.down===false||e.checkCollision.up===false){s=0;}else{t.touching.none=false;t.touching.down=true;e.touching.none=false;e.touching.up=true;}}else if(t.deltaY()<e.deltaY()){s=t.y-e.bottom;if(-s>n&&!i||t.checkCollision.up===false||e.checkCollision.down===false){s=0;}else{t.touching.none=false;t.touching.up=true;e.touching.none=false;e.touching.down=true;}}t.overlapY=s;e.overlapY=s;return s;},separateX:function separateX(t,e,i){var s=this.getOverlapX(t,e,i);if(i||s===0||t.immovable&&e.immovable||t.customSeparateX||e.customSeparateX){return s!==0||t.embedded&&e.embedded;}var n=t.velocity.x;var o=e.velocity.x;if(t.immovable||e.immovable){if(t.immovable){e.x+=s;e.velocity.x=n-o*e.bounce.x;if(t.moves){e.y+=(t.y-t.prev.y)*t.friction.y;}}else{t.x-=s;t.velocity.x=o-n*t.bounce.x;if(e.moves){t.y+=(e.y-e.prev.y)*e.friction.y;}}}else{s*=0.5;t.x-=s;e.x+=s;var a=Math.sqrt(o*o*e.mass/t.mass)*(o>0?1:-1);var r=Math.sqrt(n*n*t.mass/e.mass)*(n>0?1:-1);var h=(a+r)*0.5;a-=h;r-=h;t.velocity.x=h+a*t.bounce.x;e.velocity.x=h+r*e.bounce.x;}return true;},separateY:function separateY(t,e,i){var s=this.getOverlapY(t,e,i);if(i||s===0||t.immovable&&e.immovable||t.customSeparateY||e.customSeparateY){return s!==0||t.embedded&&e.embedded;}var n=t.velocity.y;var o=e.velocity.y;if(t.immovable||e.immovable){if(t.immovable){e.y+=s;e.velocity.y=n-o*e.bounce.y;if(t.moves){e.x+=(t.x-t.prev.x)*t.friction.x;}}else{t.y-=s;t.velocity.y=o-n*t.bounce.y;if(e.moves){t.x+=(e.x-e.prev.x)*e.friction.x;}}}else{s*=0.5;t.y-=s;e.y+=s;var a=Math.sqrt(o*o*e.mass/t.mass)*(o>0?1:-1);var r=Math.sqrt(n*n*t.mass/e.mass)*(n>0?1:-1);var h=(a+r)*0.5;a-=h;r-=h;t.velocity.y=h+a*t.bounce.y;e.velocity.y=h+r*e.bounce.y;}return true;},getObjectsUnderPointer:function getObjectsUnderPointer(t,e,i,s){if(e.length!==0&&t.exists){return this.getObjectsAtLocation(t.x,t.y,e,i,s,t);}},getObjectsAtLocation:function getObjectsAtLocation(t,e,i,s,n,a){this.quadTree.clear();this.quadTree.reset(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels);this.quadTree.populate(i);var r=new o.Rectangle(t,e,1,1);var h=[];for(var l=this.quadTree.retrieve(r),c=0;c<l.length;c++){if(l[c].hitTest(t,e)){if(s){s.call(n,a,l[c].sprite);}h.push(l[c].sprite);}}return h;},moveToObject:function moveToObject(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:60;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var n=Math.atan2(e.y-t.y,e.x-t.x);if(s>0){i=this.distanceBetween(t,e)/(s/1000);}t.body.velocity.x=Math.cos(n)*i;t.body.velocity.y=Math.sin(n)*i;return n;},moveToPointer:function moveToPointer(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:60;var i=arguments.length>2?arguments[2]:undefined;var s=arguments.length>3?arguments[3]:undefined;i=i||this.game.input.activePointer;if(s===undefined){s=0;}var n=this.angleToPointer(t,i);if(s>0){e=this.distanceToPointer(t,i)/(s/1000);}t.body.velocity.x=Math.cos(n)*e;t.body.velocity.y=Math.sin(n)*e;return n;},moveToXY:function moveToXY(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:60;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var o=Math.atan2(i-t.y,e-t.x);if(n>0){s=this.distanceToXY(t,e,i)/(n/1000);}t.body.velocity.x=Math.cos(o)*s;t.body.velocity.y=Math.sin(o)*s;return o;},velocityFromAngle:function velocityFromAngle(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:60;var i=arguments.length>2?arguments[2]:undefined;i=i||new o.Point();return i.setTo(Math.cos(this.game.math.degToRad(t))*e,Math.sin(this.game.math.degToRad(t))*e);},velocityFromRotation:function velocityFromRotation(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:60;var i=arguments.length>2?arguments[2]:undefined;i=i||new o.Point();return i.setTo(Math.cos(t)*e,Math.sin(t)*e);},accelerationFromRotation:function accelerationFromRotation(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:60;var i=arguments.length>2?arguments[2]:undefined;i=i||new o.Point();return i.setTo(Math.cos(t)*e,Math.sin(t)*e);},accelerateToObject:function accelerateToObject(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:60;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1000;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1000;var o=this.angleBetween(t,e);t.body.acceleration.setTo(Math.cos(o)*i,Math.sin(o)*i);t.body.maxVelocity.setTo(s,n);return o;},accelerateToPointer:function accelerateToPointer(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.game.input.activePointer;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:60;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1000;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1000;var o=this.angleToPointer(t,e);t.body.acceleration.setTo(Math.cos(o)*i,Math.sin(o)*i);t.body.maxVelocity.setTo(s,n);return o;},accelerateToXY:function accelerateToXY(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:60;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1000;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:1000;var a=this.angleToXY(t,e,i);t.body.acceleration.setTo(Math.cos(a)*s,Math.sin(a)*s);t.body.maxVelocity.setTo(n,o);return a;},distanceBetween:function distanceBetween(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=i?t.world.x-e.world.x:t.x-e.x;var n=i?t.world.y-e.world.y:t.y-e.y;return Math.sqrt(s*s+n*n);},distanceToXY:function distanceToXY(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var n=s?t.world.x-e:t.x-e;var o=s?t.world.y-i:t.y-i;return Math.sqrt(n*n+o*o);},distanceToPointer:function distanceToPointer(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.game.input.activePointer;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=i?t.world.x-e.worldX:t.x-e.worldX;var n=i?t.world.y-e.worldY:t.y-e.worldY;return Math.sqrt(s*s+n*n);},angleBetween:function angleBetween(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(i){return Math.atan2(e.world.y-t.world.y,e.world.x-t.world.x);}else{return Math.atan2(e.y-t.y,e.x-t.x);}},angleBetweenCenters:function angleBetweenCenters(t,e){var i=e.centerX-t.centerX;var s=e.centerY-t.centerY;return Math.atan2(s,i);},angleToXY:function angleToXY(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(s){return Math.atan2(i-t.world.y,e-t.world.x);}else{return Math.atan2(i-t.y,e-t.x);}},angleToPointer:function angleToPointer(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.game.input.activePointer;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(i){return Math.atan2(e.worldY-t.world.y,e.worldX-t.world.x);}else{return Math.atan2(e.worldY-t.y,e.worldX-t.x);}},worldAngleToPointer:function worldAngleToPointer(t,e){return this.angleToPointer(t,e,true);}};o.Physics.Arcade.Body=function(t){this.sprite=t;this.game=t.game;this.type=o.Physics.ARCADE;this.enable=true;this.isCircle=false;this.radius=0;this.offset=new o.Point();this.position=new o.Point(t.x,t.y);this.prev=new o.Point(this.position.x,this.position.y);this.allowRotation=true;this.rotation=t.angle;this.preRotation=t.angle;this.width=t.width;this.height=t.height;this.sourceWidth=t.width;this.sourceHeight=t.height;if(t.texture){this.sourceWidth=t.texture.frame.width;this.sourceHeight=t.texture.frame.height;}this.halfWidth=Math.abs(t.width/2);this.halfHeight=Math.abs(t.height/2);this.center=new o.Point(t.x+this.halfWidth,t.y+this.halfHeight);this.velocity=new o.Point();this.newVelocity=new o.Point();this.deltaMax=new o.Point();this.acceleration=new o.Point();this.drag=new o.Point();this.allowGravity=true;this.gravity=new o.Point();this.bounce=new o.Point();this.worldBounce=null;this.onWorldBounds=null;this.onCollide=null;this.onOverlap=null;this.maxVelocity=new o.Point(10000,10000);this.friction=new o.Point(1,0);this.angularVelocity=0;this.angularAcceleration=0;this.angularDrag=0;this.maxAngular=1000;this.mass=1;this.angle=0;this.speed=0;this.facing=o.NONE;this.immovable=false;this.moves=true;this.customSeparateX=false;this.customSeparateY=false;this.overlapX=0;this.overlapY=0;this.overlapR=0;this.embedded=false;this.collideWorldBounds=false;this.checkCollision={none:false,any:true,up:true,down:true,left:true,right:true};this.touching={none:true,up:false,down:false,left:false,right:false};this.wasTouching={none:true,up:false,down:false,left:false,right:false};this.blocked={up:false,down:false,left:false,right:false};this.tilePadding=new o.Point();this.dirty=false;this.skipQuadTree=false;this.syncBounds=false;this.isMoving=false;this.stopVelocityOnCollide=true;this.moveTimer=0;this.moveDistance=0;this.moveDuration=0;this.moveTarget=null;this.moveEnd=null;this.onMoveComplete=new o.Signal();this.movementCallback=null;this.movementCallbackContext=null;this._reset=true;this._sx=t.scale.x;this._sy=t.scale.y;this._dx=0;this._dy=0;};o.Physics.Arcade.Body.prototype={updateBounds:function updateBounds(){if(this.syncBounds){var t=this.sprite.getBounds();t.ceilAll();if(t.width!==this.width||t.height!==this.height){this.width=t.width;this.height=t.height;this._reset=true;}}else{var e=Math.abs(this.sprite.scale.x);var i=Math.abs(this.sprite.scale.y);if(e!==this._sx||i!==this._sy){this.width=this.sourceWidth*e;this.height=this.sourceHeight*i;this._sx=e;this._sy=i;this._reset=true;}}if(this._reset){this.halfWidth=Math.floor(this.width/2);this.halfHeight=Math.floor(this.height/2);this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight);}},preUpdate:function preUpdate(){if(this.enable&&!this.game.physics.arcade.isPaused){this.dirty=true;this.wasTouching.none=this.touching.none;this.wasTouching.up=this.touching.up;this.wasTouching.down=this.touching.down;this.wasTouching.left=this.touching.left;this.wasTouching.right=this.touching.right;this.touching.none=true;this.touching.up=false;this.touching.down=false;this.touching.left=false;this.touching.right=false;this.blocked.up=false;this.blocked.down=false;this.blocked.left=false;this.blocked.right=false;this.embedded=false;this.updateBounds();this.position.x=this.sprite.world.x-this.sprite.anchor.x*this.sprite.width+this.sprite.scale.x*this.offset.x;this.position.x-=this.sprite.scale.x<0?this.width:0;this.position.y=this.sprite.world.y-this.sprite.anchor.y*this.sprite.height+this.sprite.scale.y*this.offset.y;this.position.y-=this.sprite.scale.y<0?this.height:0;this.rotation=this.sprite.angle;this.preRotation=this.rotation;if(this._reset||this.sprite.fresh){this.prev.x=this.position.x;this.prev.y=this.position.y;}if(this.moves){this.game.physics.arcade.updateMotion(this);this.newVelocity.set(this.velocity.x*this.game.time.physicsElapsed,this.velocity.y*this.game.time.physicsElapsed);this.position.x+=this.newVelocity.x;this.position.y+=this.newVelocity.y;if(this.position.x!==this.prev.x||this.position.y!==this.prev.y){this.angle=Math.atan2(this.velocity.y,this.velocity.x);}this.speed=Math.sqrt(this.velocity.x*this.velocity.x+this.velocity.y*this.velocity.y);if(this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){this.onWorldBounds.dispatch(this.sprite,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right);}}this._dx=this.deltaX();this._dy=this.deltaY();this._reset=false;}},updateMovement:function updateMovement(){var t=0;var e=this.overlapX!==0||this.overlapY!==0;if(this.moveDuration>0){this.moveTimer+=this.game.time.elapsedMS;t=this.moveTimer/this.moveDuration;}else{this.moveTarget.end.set(this.position.x,this.position.y);t=this.moveTarget.length/this.moveDistance;}if(this.movementCallback){var i=this.movementCallback.call(this.movementCallbackContext,this,this.velocity,t);}return!e&&!(t>=1)&&(i===undefined||i===true)||(this.stopMovement(t>=1||this.stopVelocityOnCollide&&e),false);},stopMovement:function stopMovement(t){if(this.isMoving){this.isMoving=false;if(t){this.velocity.set(0);}this.onMoveComplete.dispatch(this.sprite,this.overlapX!==0||this.overlapY!==0);}},postUpdate:function postUpdate(){if(this.enable&&this.dirty){if(this.isMoving){this.updateMovement();}this.dirty=false;if(this.deltaX()<0){this.facing=o.LEFT;}else if(this.deltaX()>0){this.facing=o.RIGHT;}if(this.deltaY()<0){this.facing=o.UP;}else if(this.deltaY()>0){this.facing=o.DOWN;}if(this.moves){this._dx=this.deltaX();this._dy=this.deltaY();if(this.deltaMax.x!==0&&this._dx!==0){if(this._dx<0&&this._dx<-this.deltaMax.x){this._dx=-this.deltaMax.x;}else if(this._dx>0&&this._dx>this.deltaMax.x){this._dx=this.deltaMax.x;}}if(this.deltaMax.y!==0&&this._dy!==0){if(this._dy<0&&this._dy<-this.deltaMax.y){this._dy=-this.deltaMax.y;}else if(this._dy>0&&this._dy>this.deltaMax.y){this._dy=this.deltaMax.y;}}this.sprite.position.x+=this._dx;this.sprite.position.y+=this._dy;this._reset=true;}this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight);if(this.allowRotation){this.sprite.angle+=this.deltaZ();}this.prev.x=this.position.x;this.prev.y=this.position.y;}},checkWorldBounds:function checkWorldBounds(){var t=this.position;var e=this.game.physics.arcade.bounds;var i=this.game.physics.arcade.checkCollision;var s=this.worldBounce?-this.worldBounce.x:-this.bounce.x;var n=this.worldBounce?-this.worldBounce.y:-this.bounce.y;if(this.isCircle){var o={x:this.center.x-this.radius,y:this.center.y-this.radius,right:this.center.x+this.radius,bottom:this.center.y+this.radius};if(o.x<e.x&&i.left){t.x=e.x-this.halfWidth+this.radius;this.velocity.x*=s;this.blocked.left=true;}else if(o.right>e.right&&i.right){t.x=e.right-this.halfWidth-this.radius;this.velocity.x*=s;this.blocked.right=true;}if(o.y<e.y&&i.up){t.y=e.y-this.halfHeight+this.radius;this.velocity.y*=n;this.blocked.up=true;}else if(o.bottom>e.bottom&&i.down){t.y=e.bottom-this.halfHeight-this.radius;this.velocity.y*=n;this.blocked.down=true;}}else{if(t.x<e.x&&i.left){t.x=e.x;this.velocity.x*=s;this.blocked.left=true;}else if(this.right>e.right&&i.right){t.x=e.right-this.width;this.velocity.x*=s;this.blocked.right=true;}if(t.y<e.y&&i.up){t.y=e.y;this.velocity.y*=n;this.blocked.up=true;}else if(this.bottom>e.bottom&&i.down){t.y=e.bottom-this.height;this.velocity.y*=n;this.blocked.down=true;}}return this.blocked.up||this.blocked.down||this.blocked.left||this.blocked.right;},moveFrom:function moveFrom(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.speed;var i=arguments.length>2?arguments[2]:undefined;if(e===0){return false;}var s;if(i===undefined){s=this.angle;i=this.game.math.radToDeg(s);}else{s=this.game.math.degToRad(i);}this.moveTimer=0;this.moveDuration=t;if(i===0||i===180){this.velocity.set(Math.cos(s)*e,0);}else if(i===90||i===270){this.velocity.set(0,Math.sin(s)*e);}else{this.velocity.set(Math.cos(s)*e,Math.sin(s)*e);}this.isMoving=true;return true;},moveTo:function moveTo(t,e,i){var s=e/(t/1000);if(s===0){return false;}var n;if(i===undefined){n=this.angle;i=this.game.math.radToDeg(n);}else{n=this.game.math.degToRad(i);}e=Math.abs(e);this.moveDuration=0;this.moveDistance=e;if(this.moveTarget===null){this.moveTarget=new o.Line();this.moveEnd=new o.Point();}this.moveTarget.fromAngle(this.x,this.y,n,e);this.moveEnd.set(this.moveTarget.end.x,this.moveTarget.end.y);this.moveTarget.setTo(this.x,this.y,this.x,this.y);if(i===0||i===180){this.velocity.set(Math.cos(n)*s,0);}else if(i===90||i===270){this.velocity.set(0,Math.sin(n)*s);}else{this.velocity.set(Math.cos(n)*s,Math.sin(n)*s);}this.isMoving=true;return true;},setSize:function setSize(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.offset.x;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:this.offset.y;this.sourceWidth=t;this.sourceHeight=e;this.width=this.sourceWidth*this._sx;this.height=this.sourceHeight*this._sy;this.halfWidth=Math.floor(this.width/2);this.halfHeight=Math.floor(this.height/2);this.offset.setTo(i,s);this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight);this.isCircle=false;this.radius=0;},setCircle:function setCircle(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.offset.x;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.offset.y;if(t>0){this.isCircle=true;this.radius=t;this.sourceWidth=t*2;this.sourceHeight=t*2;this.width=this.sourceWidth*this._sx;this.height=this.sourceHeight*this._sy;this.halfWidth=Math.floor(this.width/2);this.halfHeight=Math.floor(this.height/2);this.offset.setTo(e,i);this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight);}else{this.isCircle=false;}},reset:function reset(t,e){this.velocity.set(0);this.acceleration.set(0);this.speed=0;this.angularVelocity=0;this.angularAcceleration=0;this.position.x=t-this.sprite.anchor.x*this.sprite.width+this.sprite.scale.x*this.offset.x;this.position.x-=this.sprite.scale.x<0?this.width:0;this.position.y=e-this.sprite.anchor.y*this.sprite.height+this.sprite.scale.y*this.offset.y;this.position.y-=this.sprite.scale.y<0?this.height:0;this.prev.x=this.position.x;this.prev.y=this.position.y;this.rotation=this.sprite.angle;this.preRotation=this.rotation;this._sx=this.sprite.scale.x;this._sy=this.sprite.scale.y;this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight);},getBounds:function getBounds(t){if(this.isCircle){t.x=this.center.x-this.radius;t.y=this.center.y-this.radius;t.right=this.center.x+this.radius;t.bottom=this.center.y+this.radius;}else{t.x=this.x;t.y=this.y;t.right=this.right;t.bottom=this.bottom;}return t;},hitTest:function hitTest(t,e){if(this.isCircle){return o.Circle.contains(this,t,e);}else{return o.Rectangle.contains(this,t,e);}},onFloor:function onFloor(){return this.blocked.down;},onCeiling:function onCeiling(){return this.blocked.up;},onWall:function onWall(){return this.blocked.left||this.blocked.right;},deltaAbsX:function deltaAbsX(){if(this.deltaX()>0){return this.deltaX();}else{return-this.deltaX();}},deltaAbsY:function deltaAbsY(){if(this.deltaY()>0){return this.deltaY();}else{return-this.deltaY();}},deltaX:function deltaX(){return this.position.x-this.prev.x;},deltaY:function deltaY(){return this.position.y-this.prev.y;},deltaZ:function deltaZ(){return this.rotation-this.preRotation;},destroy:function destroy(){if(this.sprite.parent&&this.sprite.parent instanceof o.Group){this.sprite.parent.removeFromHash(this.sprite);}this.sprite.body=null;this.sprite=null;}};Object.defineProperty(o.Physics.Arcade.Body.prototype,"left",{get:function get(){return this.position.x;}});Object.defineProperty(o.Physics.Arcade.Body.prototype,"right",{get:function get(){return this.position.x+this.width;}});Object.defineProperty(o.Physics.Arcade.Body.prototype,"top",{get:function get(){return this.position.y;}});Object.defineProperty(o.Physics.Arcade.Body.prototype,"bottom",{get:function get(){return this.position.y+this.height;}});Object.defineProperty(o.Physics.Arcade.Body.prototype,"x",{get:function get(){return this.position.x;},set:function set(t){this.position.x=t;}});Object.defineProperty(o.Physics.Arcade.Body.prototype,"y",{get:function get(){return this.position.y;},set:function set(t){this.position.y=t;}});o.Physics.Arcade.Body.render=function(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;i=i||"rgba(0,255,0,0.4)";t.fillStyle=i;t.strokeStyle=i;if(e.isCircle){t.beginPath();t.arc(e.center.x-e.game.camera.x,e.center.y-e.game.camera.y,e.radius,0,Math.PI*2);if(s){t.fill();}else{t.stroke();}}else if(s){t.fillRect(e.position.x-e.game.camera.x,e.position.y-e.game.camera.y,e.width,e.height);}else{t.strokeRect(e.position.x-e.game.camera.x,e.position.y-e.game.camera.y,e.width,e.height);}};o.Physics.Arcade.Body.renderBodyInfo=function(t,e){t.line("x: "+e.x.toFixed(2),"y: "+e.y.toFixed(2),"width: "+e.width,"height: "+e.height);t.line("velocity x: "+e.velocity.x.toFixed(2),"y: "+e.velocity.y.toFixed(2),"deltaX: "+e._dx.toFixed(2),"deltaY: "+e._dy.toFixed(2));t.line("acceleration x: "+e.acceleration.x.toFixed(2),"y: "+e.acceleration.y.toFixed(2),"speed: "+e.speed.toFixed(2),"angle: "+e.angle.toFixed(2));t.line("gravity x: "+e.gravity.x,"y: "+e.gravity.y,"bounce x: "+e.bounce.x.toFixed(2),"y: "+e.bounce.y.toFixed(2));t.line("touching left: "+e.touching.left,"right: "+e.touching.right,"up: "+e.touching.up,"down: "+e.touching.down);t.line("blocked left: "+e.blocked.left,"right: "+e.blocked.right,"up: "+e.blocked.up,"down: "+e.blocked.down);};o.Physics.Arcade.Body.prototype.constructor=o.Physics.Arcade.Body;o.Physics.Arcade.TilemapCollision=function(){};o.Physics.Arcade.TilemapCollision.prototype={TILE_BIAS:16,collideSpriteVsTilemapLayer:function collideSpriteVsTilemapLayer(t,e,i,s,n,o){if(t.body){var a=e.getTiles(t.body.position.x-t.body.tilePadding.x,t.body.position.y-t.body.tilePadding.y,t.body.width+t.body.tilePadding.x,t.body.height+t.body.tilePadding.y,false,false);if(a.length!==0){for(var r=0;r<a.length;r++){if(s){if(s.call(n,t,a[r])&&this.separateTile(r,t.body,a[r],e,o)){this._total++;if(i){i.call(n,t,a[r]);}}}else if(this.separateTile(r,t.body,a[r],e,o)){this._total++;if(i){i.call(n,t,a[r]);}}}}}},collideGroupVsTilemapLayer:function collideGroupVsTilemapLayer(t,e,i,s,n,o){if(t.length!==0){for(var a=0;a<t.children.length;a++){if(t.children[a].exists){this.collideSpriteVsTilemapLayer(t.children[a],e,i,s,n,o);}}}},separateTile:function separateTile(t,e,i,s,n){if(!e.enable){return false;}var o=s.fixedToCamera?0:s.position.x;var a=s.fixedToCamera?0:s.position.y;if(!i.intersects(e.position.x-o,e.position.y-a,e.right-o,e.bottom-a)){return false;}if(n){return true;}if(i.collisionCallback&&!i.collisionCallback.call(i.collisionCallbackContext,e.sprite,i)){return false;}if(i.layer.callbacks!==undefined&&i.layer.callbacks[i.index]&&!i.layer.callbacks[i.index].callback.call(i.layer.callbacks[i.index].callbackContext,e.sprite,i)){return false;}if(!i.faceLeft&&!i.faceRight&&!i.faceTop&&!i.faceBottom){return false;}var r=0;var h=0;var l=0;var c=1;if(e.deltaAbsX()>e.deltaAbsY()){l=-1;}else if(e.deltaAbsX()<e.deltaAbsY()){c=-1;}if(e.deltaX()!==0&&e.deltaY()!==0&&(i.faceLeft||i.faceRight)&&(i.faceTop||i.faceBottom)){l=Math.min(Math.abs(e.position.x-o-i.right),Math.abs(e.right-o-i.left));c=Math.min(Math.abs(e.position.y-a-i.bottom),Math.abs(e.bottom-a-i.top));}if(l<c){if((i.faceLeft||i.faceRight)&&(r=this.tileCheckX(e,i,s))!==0&&!i.intersects(e.position.x-o,e.position.y-a,e.right-o,e.bottom-a)){return true;}if(i.faceTop||i.faceBottom){h=this.tileCheckY(e,i,s);}}else{if((i.faceTop||i.faceBottom)&&(h=this.tileCheckY(e,i,s))!==0&&!i.intersects(e.position.x-o,e.position.y-a,e.right-o,e.bottom-a)){return true;}if(i.faceLeft||i.faceRight){r=this.tileCheckX(e,i,s);}}return r!==0||h!==0;},tileCheckX:function tileCheckX(t,e,i){var s=0;var n=i.fixedToCamera?0:i.position.x;if(t.deltaX()<0&&!t.blocked.left&&e.collideRight&&t.checkCollision.left){if(e.faceRight&&t.x-n<e.right&&(s=t.x-n-e.right)<-this.TILE_BIAS){s=0;}}else if(t.deltaX()>0&&!t.blocked.right&&e.collideLeft&&t.checkCollision.right&&e.faceLeft&&t.right-n>e.left&&(s=t.right-n-e.left)>this.TILE_BIAS){s=0;}if(s!==0){if(t.customSeparateX){t.overlapX=s;}else{this.processTileSeparationX(t,s);}}return s;},tileCheckY:function tileCheckY(t,e,i){var s=0;var n=i.fixedToCamera?0:i.position.y;if(t.deltaY()<0&&!t.blocked.up&&e.collideDown&&t.checkCollision.up){if(e.faceBottom&&t.y-n<e.bottom&&(s=t.y-n-e.bottom)<-this.TILE_BIAS){s=0;}}else if(t.deltaY()>0&&!t.blocked.down&&e.collideUp&&t.checkCollision.down&&e.faceTop&&t.bottom-n>e.top&&(s=t.bottom-n-e.top)>this.TILE_BIAS){s=0;}if(s!==0){if(t.customSeparateY){t.overlapY=s;}else{this.processTileSeparationY(t,s);}}return s;},processTileSeparationX:function processTileSeparationX(t,e){if(e<0){t.blocked.left=true;}else if(e>0){t.blocked.right=true;}t.position.x-=e;if(t.bounce.x===0){t.velocity.x=0;}else{t.velocity.x=-t.velocity.x*t.bounce.x;}},processTileSeparationY:function processTileSeparationY(t,e){if(e<0){t.blocked.up=true;}else if(e>0){t.blocked.down=true;}t.position.y-=e;if(t.bounce.y===0){t.velocity.y=0;}else{t.velocity.y=-t.velocity.y*t.bounce.y;}}};o.Utils.mixinPrototype(o.Physics.Arcade.prototype,o.Physics.Arcade.TilemapCollision.prototype);p2.Body.prototype.parent=null;p2.Spring.prototype.parent=null;o.Physics.P2=function(t,e){this.game=t;if(e===undefined){e={gravity:[0,0],broadphase:new p2.SAPBroadphase()};}else{if(!e.hasOwnProperty("gravity")){e.gravity=[0,0];}if(!e.hasOwnProperty("broadphase")){e.broadphase=new p2.SAPBroadphase();}}this.config=e;this.world=new p2.World(this.config);this.frameRate=1/60;this.useElapsedTime=false;this.paused=false;this.materials=[];this.gravity=new o.Physics.P2.InversePointProxy(this,this.world.gravity);this.walls={left:null,right:null,top:null,bottom:null};this.onBodyAdded=new o.Signal();this.onBodyRemoved=new o.Signal();this.onSpringAdded=new o.Signal();this.onSpringRemoved=new o.Signal();this.onConstraintAdded=new o.Signal();this.onConstraintRemoved=new o.Signal();this.onContactMaterialAdded=new o.Signal();this.onContactMaterialRemoved=new o.Signal();this.postBroadphaseCallback=null;this.callbackContext=null;this.onBeginContact=new o.Signal();this.onEndContact=new o.Signal();if(e.hasOwnProperty("mpx")&&e.hasOwnProperty("pxm")&&e.hasOwnProperty("mpxi")&&e.hasOwnProperty("pxmi")){this.mpx=e.mpx;this.mpxi=e.mpxi;this.pxm=e.pxm;this.pxmi=e.pxmi;}this.world.on("beginContact",this.beginContactHandler,this);this.world.on("endContact",this.endContactHandler,this);this.collisionGroups=[];this.nothingCollisionGroup=new o.Physics.P2.CollisionGroup(1);this.boundsCollisionGroup=new o.Physics.P2.CollisionGroup(2);this.everythingCollisionGroup=new o.Physics.P2.CollisionGroup(2147483648);this.boundsCollidesWith=[];this._toRemove=[];this._collisionGroupID=2;this._boundsLeft=true;this._boundsRight=true;this._boundsTop=true;this._boundsBottom=true;this._boundsOwnGroup=false;this.setBoundsToWorld(true,true,true,true,false);};o.Physics.P2.prototype={removeBodyNextStep:function removeBodyNextStep(t){this._toRemove.push(t);},preUpdate:function preUpdate(){for(var t=this._toRemove.length;t--;){this.removeBody(this._toRemove[t]);}this._toRemove.length=0;},enable:function enable(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var s=1;if(Array.isArray(t)){for(s=t.length;s--;){if(t[s]instanceof o.Group){this.enable(t[s].children,e,i);}else{this.enableBody(t[s],e);if(i&&t[s].hasOwnProperty("children")&&t[s].children.length>0){this.enable(t[s],e,true);}}}}else if(t instanceof o.Group){this.enable(t.children,e,i);}else{this.enableBody(t,e);if(i&&t.hasOwnProperty("children")&&t.children.length>0){this.enable(t.children,e,true);}}},enableBody:function enableBody(t,e){if(t.hasOwnProperty("body")&&t.body===null){t.body=new o.Physics.P2.Body(this.game,t,t.x,t.y,1);t.body.debug=e;if(t.anchor!==undefined){t.anchor.set(0.5);}}},setImpactEvents:function setImpactEvents(t){if(t){this.world.on("impact",this.impactHandler,this);}else{this.world.off("impact",this.impactHandler,this);}},setPostBroadphaseCallback:function setPostBroadphaseCallback(t,e){this.postBroadphaseCallback=t;this.callbackContext=e;if(t!==null){this.world.on("postBroadphase",this.postBroadphaseHandler,this);}else{this.world.off("postBroadphase",this.postBroadphaseHandler,this);}},postBroadphaseHandler:function postBroadphaseHandler(t){if(this.postBroadphaseCallback&&t.pairs.length!==0){for(var e=t.pairs.length-2;e>=0;e-=2){if(t.pairs[e].parent&&t.pairs[e+1].parent&&!this.postBroadphaseCallback.call(this.callbackContext,t.pairs[e].parent,t.pairs[e+1].parent)){t.pairs.splice(e,2);}}}},impactHandler:function impactHandler(t){if(t.bodyA.parent&&t.bodyB.parent){var e=t.bodyA.parent;var i=t.bodyB.parent;if(e._bodyCallbacks[t.bodyB.id]){e._bodyCallbacks[t.bodyB.id].call(e._bodyCallbackContext[t.bodyB.id],e,i,t.shapeA,t.shapeB);}if(i._bodyCallbacks[t.bodyA.id]){i._bodyCallbacks[t.bodyA.id].call(i._bodyCallbackContext[t.bodyA.id],i,e,t.shapeB,t.shapeA);}if(e._groupCallbacks[t.shapeB.collisionGroup]){e._groupCallbacks[t.shapeB.collisionGroup].call(e._groupCallbackContext[t.shapeB.collisionGroup],e,i,t.shapeA,t.shapeB);}if(i._groupCallbacks[t.shapeA.collisionGroup]){i._groupCallbacks[t.shapeA.collisionGroup].call(i._groupCallbackContext[t.shapeA.collisionGroup],i,e,t.shapeB,t.shapeA);}}},beginContactHandler:function beginContactHandler(t){if(t.bodyA&&t.bodyB){this.onBeginContact.dispatch(t.bodyA,t.bodyB,t.shapeA,t.shapeB,t.contactEquations);if(t.bodyA.parent){t.bodyA.parent.onBeginContact.dispatch(t.bodyB.parent,t.bodyB,t.shapeA,t.shapeB,t.contactEquations);}if(t.bodyB.parent){t.bodyB.parent.onBeginContact.dispatch(t.bodyA.parent,t.bodyA,t.shapeB,t.shapeA,t.contactEquations);}}},endContactHandler:function endContactHandler(t){if(t.bodyA&&t.bodyB){this.onEndContact.dispatch(t.bodyA,t.bodyB,t.shapeA,t.shapeB);if(t.bodyA.parent){t.bodyA.parent.onEndContact.dispatch(t.bodyB.parent,t.bodyB,t.shapeA,t.shapeB);}if(t.bodyB.parent){t.bodyB.parent.onEndContact.dispatch(t.bodyA.parent,t.bodyA,t.shapeB,t.shapeA);}}},setBoundsToWorld:function setBoundsToWorld(t,e,i,s,n){this.setBounds(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,t,e,i,s,n);},setWorldMaterial:function setWorldMaterial(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;if(e&&this.walls.left){this.walls.left.shapes[0].material=t;}if(i&&this.walls.right){this.walls.right.shapes[0].material=t;}if(s&&this.walls.top){this.walls.top.shapes[0].material=t;}if(n&&this.walls.bottom){this.walls.bottom.shapes[0].material=t;}},updateBoundsCollisionGroup:function updateBoundsCollisionGroup(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var e=t?this.boundsCollisionGroup.mask:this.everythingCollisionGroup.mask;if(this.walls.left){this.walls.left.shapes[0].collisionGroup=e;}if(this.walls.right){this.walls.right.shapes[0].collisionGroup=e;}if(this.walls.top){this.walls.top.shapes[0].collisionGroup=e;}if(this.walls.bottom){this.walls.bottom.shapes[0].collisionGroup=e;}this._boundsOwnGroup=t;},setBounds:function setBounds(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:this._boundsLeft;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:this._boundsRight;var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:this._boundsTop;var r=arguments.length>7&&arguments[7]!==undefined?arguments[7]:this._boundsBottom;var h=arguments.length>8&&arguments[8]!==undefined?arguments[8]:this._boundsOwnGroup;this.setupWall(n,"left",t,e,1.5707963267948966,h);this.setupWall(o,"right",t+i,e,-1.5707963267948966,h);this.setupWall(a,"top",t,e,-3.141592653589793,h);this.setupWall(r,"bottom",t,e+s,0,h);this._boundsLeft=n;this._boundsRight=o;this._boundsTop=a;this._boundsBottom=r;this._boundsOwnGroup=h;},setupWall:function setupWall(t,e,i,s,n,o){if(t){if(this.walls[e]){this.walls[e].position=[this.pxmi(i),this.pxmi(s)];}else{this.walls[e]=new p2.Body({mass:0,position:[this.pxmi(i),this.pxmi(s)],angle:n});this.walls[e].addShape(new p2.Plane());this.world.addBody(this.walls[e]);}if(o){this.walls[e].shapes[0].collisionGroup=this.boundsCollisionGroup.mask;}}else if(this.walls[e]){this.world.removeBody(this.walls[e]);this.walls[e]=null;}},pause:function pause(){this.paused=true;},resume:function resume(){this.paused=false;},update:function update(){if(!this.paused){if(this.useElapsedTime){this.world.step(this.game.time.physicsElapsed);}else{this.world.step(this.frameRate);}}},reset:function reset(){this.world.on("beginContact",this.beginContactHandler,this);this.world.on("endContact",this.endContactHandler,this);this.nothingCollisionGroup=new o.Physics.P2.CollisionGroup(1);this.boundsCollisionGroup=new o.Physics.P2.CollisionGroup(2);this.everythingCollisionGroup=new o.Physics.P2.CollisionGroup(2147483648);this._collisionGroupID=2;this.setBoundsToWorld(true,true,true,true,false);},clear:function clear(){this.world.time=0;this.world.fixedStepTime=0;if(this.world.solver&&this.world.solver.equations.length){this.world.solver.removeAllEquations();}var t=this.world.constraints;for(var e=t.length-1;e>=0;e--){this.world.removeConstraint(t[e]);}var i=this.world.bodies;for(var e=i.length-1;e>=0;e--){this.world.removeBody(i[e]);}var s=this.world.springs;for(var e=s.length-1;e>=0;e--){this.world.removeSpring(s[e]);}var n=this.world.contactMaterials;for(var e=n.length-1;e>=0;e--){this.world.removeContactMaterial(n[e]);}this.world.off("beginContact",this.beginContactHandler,this);this.world.off("endContact",this.endContactHandler,this);this.postBroadphaseCallback=null;this.callbackContext=null;this.impactCallback=null;this.collisionGroups=[];this._toRemove=[];this.boundsCollidesWith=[];this.walls={left:null,right:null,top:null,bottom:null};},destroy:function destroy(){this.clear();this.game=null;},addBody:function addBody(t){return!t.data.world&&(this.world.addBody(t.data),this.onBodyAdded.dispatch(t),true);},removeBody:function removeBody(t){if(t.data.world===this.world){this.world.removeBody(t.data);this.onBodyRemoved.dispatch(t);}return t;},addSpring:function addSpring(t){if(t instanceof o.Physics.P2.Spring||t instanceof o.Physics.P2.RotationalSpring){this.world.addSpring(t.data);}else{this.world.addSpring(t);}this.onSpringAdded.dispatch(t);return t;},removeSpring:function removeSpring(t){if(t instanceof o.Physics.P2.Spring||t instanceof o.Physics.P2.RotationalSpring){this.world.removeSpring(t.data);}else{this.world.removeSpring(t);}this.onSpringRemoved.dispatch(t);return t;},createDistanceConstraint:function createDistanceConstraint(t,e,i,s,n,a){t=this.getBody(t);e=this.getBody(e);if(t&&e){return this.addConstraint(new o.Physics.P2.DistanceConstraint(this,t,e,i,s,n,a));}},createGearConstraint:function createGearConstraint(t,e,i,s){t=this.getBody(t);e=this.getBody(e);if(t&&e){return this.addConstraint(new o.Physics.P2.GearConstraint(this,t,e,i,s));}},createRevoluteConstraint:function createRevoluteConstraint(t,e,i,s,n,a){t=this.getBody(t);i=this.getBody(i);if(t&&i){return this.addConstraint(new o.Physics.P2.RevoluteConstraint(this,t,e,i,s,n,a));}},createLockConstraint:function createLockConstraint(t,e,i,s,n){t=this.getBody(t);e=this.getBody(e);if(t&&e){return this.addConstraint(new o.Physics.P2.LockConstraint(this,t,e,i,s,n));}},createPrismaticConstraint:function createPrismaticConstraint(t,e,i,s,n,a,r){t=this.getBody(t);e=this.getBody(e);if(t&&e){return this.addConstraint(new o.Physics.P2.PrismaticConstraint(this,t,e,i,s,n,a,r));}},addConstraint:function addConstraint(t){this.world.addConstraint(t);this.onConstraintAdded.dispatch(t);return t;},removeConstraint:function removeConstraint(t){this.world.removeConstraint(t);this.onConstraintRemoved.dispatch(t);return t;},addContactMaterial:function addContactMaterial(t){this.world.addContactMaterial(t);this.onContactMaterialAdded.dispatch(t);return t;},removeContactMaterial:function removeContactMaterial(t){this.world.removeContactMaterial(t);this.onContactMaterialRemoved.dispatch(t);return t;},getContactMaterial:function getContactMaterial(t,e){return this.world.getContactMaterial(t,e);},setMaterial:function setMaterial(t,e){for(var i=e.length;i--;){e[i].setMaterial(t);}},createMaterial:function createMaterial(t,e){t=t||"";var i=new o.Physics.P2.Material(t);this.materials.push(i);if(e!==undefined){e.setMaterial(i);}return i;},createContactMaterial:function createContactMaterial(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.createMaterial();var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.createMaterial();var i=arguments.length>2?arguments[2]:undefined;var s=new o.Physics.P2.ContactMaterial(t,e,i);return this.addContactMaterial(s);},getBodies:function getBodies(){var t=[];for(var e=this.world.bodies.length;e--;){t.push(this.world.bodies[e].parent);}return t;},getBody:function getBody(t){if(t instanceof p2.Body){return t;}else if(t instanceof o.Physics.P2.Body){return t.data;}else if(t.body&&t.body.type===o.Physics.P2JS){return t.body.data;}else{return null;}},getSprings:function getSprings(){var t=[];for(var e=this.world.springs.length;e--;){t.push(this.world.springs[e].parent);}return t;},getConstraints:function getConstraints(){var t=[];for(var e=this.world.constraints.length;e--;){t.push(this.world.constraints[e]);}return t;},hitTest:function hitTest(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.world.bodies;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:5;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var n=[this.pxmi(t.x),this.pxmi(t.y)];var a=[];for(var r=e.length;r--;){if(e[r]instanceof o.Physics.P2.Body&&(!s||e[r].data.type!==p2.Body.STATIC)){a.push(e[r].data);}else if(e[r]instanceof p2.Body&&e[r].parent&&(!s||e[r].type!==p2.Body.STATIC)){a.push(e[r]);}else if(e[r]instanceof o.Sprite&&e[r].hasOwnProperty("body")&&(!s||e[r].body.data.type!==p2.Body.STATIC)){a.push(e[r].body.data);}}return this.world.hitTest(n,a,i);},toJSON:function toJSON(){return this.world.toJSON();},createCollisionGroup:function createCollisionGroup(t){var e=Math.pow(2,this._collisionGroupID);if(this.walls.left){this.walls.left.shapes[0].collisionMask=this.walls.left.shapes[0].collisionMask|e;}if(this.walls.right){this.walls.right.shapes[0].collisionMask=this.walls.right.shapes[0].collisionMask|e;}if(this.walls.top){this.walls.top.shapes[0].collisionMask=this.walls.top.shapes[0].collisionMask|e;}if(this.walls.bottom){this.walls.bottom.shapes[0].collisionMask=this.walls.bottom.shapes[0].collisionMask|e;}this._collisionGroupID++;var i=new o.Physics.P2.CollisionGroup(e);this.collisionGroups.push(i);if(t){this.setCollisionGroup(t,i);}return i;},setCollisionGroup:function setCollisionGroup(t,e){if(t instanceof o.Group){for(var i=0;i<t.total;i++){if(t.children[i].body&&t.children[i].body.type===o.Physics.P2JS){t.children[i].body.setCollisionGroup(e);}}}else{t.body.setCollisionGroup(e);}},createSpring:function createSpring(t,e,i,s,n,a,r,h,l){t=this.getBody(t);e=this.getBody(e);if(t&&e){return this.addSpring(new o.Physics.P2.Spring(this,t,e,i,s,n,a,r,h,l));}},createRotationalSpring:function createRotationalSpring(t,e,i,s,n){t=this.getBody(t);e=this.getBody(e);if(t&&e){return this.addSpring(new o.Physics.P2.RotationalSpring(this,t,e,i,s,n));}},createBody:function createBody(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var n=arguments.length>4?arguments[4]:undefined;var a=arguments.length>5?arguments[5]:undefined;var r=new o.Physics.P2.Body(this.game,null,t,e,i);if(a){if(!r.addPolygon(n,a)){return false;}}if(s){this.world.addBody(r.data);}return r;},createParticle:function createParticle(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var n=arguments.length>4?arguments[4]:undefined;var a=arguments.length>5?arguments[5]:undefined;var r=new o.Physics.P2.Body(this.game,null,t,e,i);if(a){if(!r.addPolygon(n,a)){return false;}}if(s){this.world.addBody(r.data);}return r;},convertCollisionObjects:function convertCollisionObjects(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var s=[];for(var n=0,o=t.collision[e].length;n<o;n++){var a=t.collision[e][n];var r=this.createBody(a.x,a.y,0,i,{},a.polyline);if(r){s.push(r);}}return s;},clearTilemapLayerBodies:function clearTilemapLayerBodies(t,e){e=t.getLayer(e);for(var i=t.layers[e].bodies.length;i--;){t.layers[e].bodies[i].destroy();}t.layers[e].bodies.length=0;},convertTilemap:function convertTilemap(t,e,i,s){e=t.getLayer(e);if(i===undefined){i=true;}if(s===undefined){s=true;}this.clearTilemapLayerBodies(t,e);var n=0;var o=0;var a=0;for(var r=0,h=t.layers[e].height;r<h;r++){n=0;for(var l=0,c=t.layers[e].width;l<c;l++){var u=t.layers[e].data[r][l];if(u&&u.index>-1&&u.collides){if(s){var d=t.getTileRight(e,l,r);if(n===0){o=u.x*u.width;a=u.y*u.height;n=u.width;}if(d&&d.collides){n+=u.width;}else{var p=this.createBody(o,a,0,false);p.addRectangle(n,u.height,n/2,u.height/2,0);if(i){this.addBody(p);}t.layers[e].bodies.push(p);n=0;}}else{var p=this.createBody(u.x*u.width,u.y*u.height,0,false);p.addRectangle(u.width,u.height,u.width/2,u.height/2,0);if(i){this.addBody(p);}t.layers[e].bodies.push(p);}}}}return t.layers[e].bodies;},mpx:function mpx(t){return t*=20;},pxm:function pxm(t){return t*0.05;},mpxi:function mpxi(t){return t*=-20;},pxmi:function pxmi(t){return t*-0.05;}};Object.defineProperty(o.Physics.P2.prototype,"friction",{get:function get(){return this.world.defaultContactMaterial.friction;},set:function set(t){this.world.defaultContactMaterial.friction=t;}});Object.defineProperty(o.Physics.P2.prototype,"restitution",{get:function get(){return this.world.defaultContactMaterial.restitution;},set:function set(t){this.world.defaultContactMaterial.restitution=t;}});Object.defineProperty(o.Physics.P2.prototype,"contactMaterial",{get:function get(){return this.world.defaultContactMaterial;},set:function set(t){this.world.defaultContactMaterial=t;}});Object.defineProperty(o.Physics.P2.prototype,"applySpringForces",{get:function get(){return this.world.applySpringForces;},set:function set(t){this.world.applySpringForces=t;}});Object.defineProperty(o.Physics.P2.prototype,"applyDamping",{get:function get(){return this.world.applyDamping;},set:function set(t){this.world.applyDamping=t;}});Object.defineProperty(o.Physics.P2.prototype,"applyGravity",{get:function get(){return this.world.applyGravity;},set:function set(t){this.world.applyGravity=t;}});Object.defineProperty(o.Physics.P2.prototype,"solveConstraints",{get:function get(){return this.world.solveConstraints;},set:function set(t){this.world.solveConstraints=t;}});Object.defineProperty(o.Physics.P2.prototype,"time",{get:function get(){return this.world.time;}});Object.defineProperty(o.Physics.P2.prototype,"emitImpactEvent",{get:function get(){return this.world.emitImpactEvent;},set:function set(t){this.world.emitImpactEvent=t;}});Object.defineProperty(o.Physics.P2.prototype,"sleepMode",{get:function get(){return this.world.sleepMode;},set:function set(t){this.world.sleepMode=t;}});Object.defineProperty(o.Physics.P2.prototype,"total",{get:function get(){return this.world.bodies.length;}});o.Physics.P2.FixtureList=function(t){if(!Array.isArray(t)){t=[t];}this.rawList=t;this.init();this.parse(this.rawList);};o.Physics.P2.FixtureList.prototype={init:function init(){this.namedFixtures={};this.groupedFixtures=[];this.allFixtures=[];},setCategory:function setCategory(t,e){function i(e){e.collisionGroup=t;}this.getFixtures(e).forEach(i);},setMask:function setMask(t,e){function i(e){e.collisionMask=t;}this.getFixtures(e).forEach(i);},setSensor:function setSensor(t,e){function i(e){e.sensor=t;}this.getFixtures(e).forEach(i);},setMaterial:function setMaterial(t,e){function i(e){e.material=t;}this.getFixtures(e).forEach(i);},getFixtures:function getFixtures(t){var e=[];if(t){if(!(t instanceof Array)){t=[t];}var i=this;t.forEach(function(t){if(i.namedFixtures[t]){e.push(i.namedFixtures[t]);}});return this.flatten(e);}return this.allFixtures;},getFixtureByKey:function getFixtureByKey(t){return this.namedFixtures[t];},getGroup:function getGroup(t){return this.groupedFixtures[t];},parse:function parse(){var t;var e;var i;var s;i=this.rawList;s=[];for(t in i){e=i[t];if(isNaN(t-0)){this.namedFixtures[t]=this.flatten(e);}else{this.groupedFixtures[t]=this.groupedFixtures[t]||[];this.groupedFixtures[t]=this.groupedFixtures[t].concat(e);}s.push(this.allFixtures=this.flatten(this.groupedFixtures));}},flatten:function flatten(t){var e;var i;e=[];i=arguments.callee;t.forEach(function(t){return Array.prototype.push.apply(e,Array.isArray(t)?i(t):[t]);});return e;}};o.Physics.P2.PointProxy=function(t,e){this.world=t;this.destination=e;};o.Physics.P2.PointProxy.prototype.constructor=o.Physics.P2.PointProxy;Object.defineProperty(o.Physics.P2.PointProxy.prototype,"x",{get:function get(){return this.world.mpx(this.destination[0]);},set:function set(t){this.destination[0]=this.world.pxm(t);}});Object.defineProperty(o.Physics.P2.PointProxy.prototype,"y",{get:function get(){return this.world.mpx(this.destination[1]);},set:function set(t){this.destination[1]=this.world.pxm(t);}});Object.defineProperty(o.Physics.P2.PointProxy.prototype,"mx",{get:function get(){return this.destination[0];},set:function set(t){this.destination[0]=t;}});Object.defineProperty(o.Physics.P2.PointProxy.prototype,"my",{get:function get(){return this.destination[1];},set:function set(t){this.destination[1]=t;}});o.Physics.P2.InversePointProxy=function(t,e){this.world=t;this.destination=e;};o.Physics.P2.InversePointProxy.prototype.constructor=o.Physics.P2.InversePointProxy;Object.defineProperty(o.Physics.P2.InversePointProxy.prototype,"x",{get:function get(){return this.world.mpxi(this.destination[0]);},set:function set(t){this.destination[0]=this.world.pxmi(t);}});Object.defineProperty(o.Physics.P2.InversePointProxy.prototype,"y",{get:function get(){return this.world.mpxi(this.destination[1]);},set:function set(t){this.destination[1]=this.world.pxmi(t);}});Object.defineProperty(o.Physics.P2.InversePointProxy.prototype,"mx",{get:function get(){return this.destination[0];},set:function set(t){this.destination[0]=-t;}});Object.defineProperty(o.Physics.P2.InversePointProxy.prototype,"my",{get:function get(){return this.destination[1];},set:function set(t){this.destination[1]=-t;}});o.Physics.P2.Body=function(t,e,i,s,n){e=e||null;i=i||0;s=s||0;if(n===undefined){n=1;}this.game=t;this.world=t.physics.p2;this.sprite=e;this.type=o.Physics.P2JS;this.offset=new o.Point();this.data=new p2.Body({position:[this.world.pxmi(i),this.world.pxmi(s)],mass:n});this.data.parent=this;this.velocity=new o.Physics.P2.InversePointProxy(this.world,this.data.velocity);this.force=new o.Physics.P2.InversePointProxy(this.world,this.data.force);this.gravity=new o.Point();this.onBeginContact=new o.Signal();this.onEndContact=new o.Signal();this.collidesWith=[];this.removeNextStep=false;this.debugBody=null;this.dirty=false;this._collideWorldBounds=true;this._bodyCallbacks={};this._bodyCallbackContext={};this._groupCallbacks={};this._groupCallbackContext={};this._reset=false;if(e){this.setRectangleFromSprite(e);if(e.exists){this.game.physics.p2.addBody(this);}}};o.Physics.P2.Body.prototype={createBodyCallback:function createBodyCallback(t,e,i){var s=-1;if(t.id){s=t.id;}else if(t.body){s=t.body.id;}if(s>-1){if(e===null){delete this._bodyCallbacks[s];delete this._bodyCallbackContext[s];}else{this._bodyCallbacks[s]=e;this._bodyCallbackContext[s]=i;}}},createGroupCallback:function createGroupCallback(t,e,i){if(e===null){delete this._groupCallbacks[t.mask];delete this._groupCallbackContext[t.mask];}else{this._groupCallbacks[t.mask]=e;this._groupCallbackContext[t.mask]=i;}},getCollisionMask:function getCollisionMask(){var t=0;if(this._collideWorldBounds){t=this.game.physics.p2.boundsCollisionGroup.mask;}for(var e=0;e<this.collidesWith.length;e++){t|=this.collidesWith[e].mask;}return t;},updateCollisionMask:function updateCollisionMask(t){var e=this.getCollisionMask();if(t===undefined){for(var i=this.data.shapes.length-1;i>=0;i--){this.data.shapes[i].collisionMask=e;}}else{t.collisionMask=e;}},setCollisionGroup:function setCollisionGroup(t,e){var i=this.getCollisionMask();if(e===undefined){for(var s=this.data.shapes.length-1;s>=0;s--){this.data.shapes[s].collisionGroup=t.mask;this.data.shapes[s].collisionMask=i;}}else{e.collisionGroup=t.mask;e.collisionMask=i;}},clearCollision:function clearCollision(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=arguments.length>2?arguments[2]:undefined;if(i===undefined){for(var s=this.data.shapes.length-1;s>=0;s--){if(t){this.data.shapes[s].collisionGroup=null;}if(e){this.data.shapes[s].collisionMask=null;}}}else{if(t){i.collisionGroup=null;}if(e){i.collisionMask=null;}}if(t){this.collidesWith.length=0;}},removeCollisionGroup:function removeCollisionGroup(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=arguments.length>2?arguments[2]:undefined;var s;if(Array.isArray(t)){for(var n=0;n<t.length;n++){if((s=this.collidesWith.indexOf(t[n]))>-1){this.collidesWith.splice(s,1);if(e){delete this._groupCallbacks[t.mask];delete this._groupCallbackContext[t.mask];}}}}else if((s=this.collidesWith.indexOf(t))>-1){this.collidesWith.splice(s,1);if(e){delete this._groupCallbacks[t.mask];delete this._groupCallbackContext[t.mask];}}var o=this.getCollisionMask();if(i===undefined){for(var n=this.data.shapes.length-1;n>=0;n--){this.data.shapes[n].collisionMask=o;}}else{i.collisionMask=o;}},collides:function collides(t,e,i,s){if(Array.isArray(t)){for(var n=0;n<t.length;n++){if(this.collidesWith.indexOf(t[n])===-1){this.collidesWith.push(t[n]);if(e){this.createGroupCallback(t[n],e,i);}}}}else if(this.collidesWith.indexOf(t)===-1){this.collidesWith.push(t);if(e){this.createGroupCallback(t,e,i);}}var o=this.getCollisionMask();if(s===undefined){for(var n=this.data.shapes.length-1;n>=0;n--){this.data.shapes[n].collisionMask=o;}}else{s.collisionMask=o;}},adjustCenterOfMass:function adjustCenterOfMass(){this.data.adjustCenterOfMass();this.shapeChanged();},getVelocityAtPoint:function getVelocityAtPoint(t,e){return this.data.getVelocityAtPoint(t,e);},applyDamping:function applyDamping(t){this.data.applyDamping(t);},applyImpulse:function applyImpulse(t,e,i){this.data.applyImpulse(t,[this.world.pxmi(e),this.world.pxmi(i)]);},applyImpulseLocal:function applyImpulseLocal(t,e,i){this.data.applyImpulseLocal(t,[this.world.pxmi(e),this.world.pxmi(i)]);},applyForce:function applyForce(t,e,i){this.data.applyForce(t,[this.world.pxmi(e),this.world.pxmi(i)]);},setZeroForce:function setZeroForce(){this.data.setZeroForce();},setZeroRotation:function setZeroRotation(){this.data.angularVelocity=0;},setZeroVelocity:function setZeroVelocity(){this.data.velocity[0]=0;this.data.velocity[1]=0;},setZeroDamping:function setZeroDamping(){this.data.damping=0;this.data.angularDamping=0;},toLocalFrame:function toLocalFrame(t,e){return this.data.toLocalFrame(t,e);},toWorldFrame:function toWorldFrame(t,e){return this.data.toWorldFrame(t,e);},rotateLeft:function rotateLeft(t){this.data.angularVelocity=this.world.pxm(-t);},rotateRight:function rotateRight(t){this.data.angularVelocity=this.world.pxm(t);},moveForward:function moveForward(t){var e=this.world.pxmi(-t);var i=this.data.angle+Math.PI/2;this.data.velocity[0]=e*Math.cos(i);this.data.velocity[1]=e*Math.sin(i);},moveBackward:function moveBackward(t){var e=this.world.pxmi(-t);var i=this.data.angle+Math.PI/2;this.data.velocity[0]=-e*Math.cos(i);this.data.velocity[1]=-e*Math.sin(i);},thrust:function thrust(t){var e=this.world.pxmi(-t);var i=this.data.angle+Math.PI/2;this.data.force[0]+=e*Math.cos(i);this.data.force[1]+=e*Math.sin(i);},thrustLeft:function thrustLeft(t){var e=this.world.pxmi(-t);var i=this.data.angle;this.data.force[0]+=e*Math.cos(i);this.data.force[1]+=e*Math.sin(i);},thrustRight:function thrustRight(t){var e=this.world.pxmi(-t);var i=this.data.angle;this.data.force[0]-=e*Math.cos(i);this.data.force[1]-=e*Math.sin(i);},reverse:function reverse(t){var e=this.world.pxmi(-t);var i=this.data.angle+Math.PI/2;this.data.force[0]-=e*Math.cos(i);this.data.force[1]-=e*Math.sin(i);},moveLeft:function moveLeft(t){this.data.velocity[0]=this.world.pxmi(-t);},moveRight:function moveRight(t){this.data.velocity[0]=this.world.pxmi(t);},moveUp:function moveUp(t){this.data.velocity[1]=this.world.pxmi(-t);},moveDown:function moveDown(t){this.data.velocity[1]=this.world.pxmi(t);},preUpdate:function preUpdate(){this.dirty=true;if(this.removeNextStep){this.removeFromWorld();this.removeNextStep=false;}},postUpdate:function postUpdate(){this.sprite.x=this.world.mpxi(this.data.position[0])+this.offset.x;this.sprite.y=this.world.mpxi(this.data.position[1])+this.offset.y;if(!this.fixedRotation){this.sprite.rotation=this.data.angle;}if(this.debugBody){this.debugBody.updateSpriteTransform();}this.dirty=false;},reset:function reset(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;this.setZeroForce();this.setZeroVelocity();this.setZeroRotation();if(i){this.setZeroDamping();}if(s){this.mass=1;}this.x=t;this.y=e;},addToWorld:function addToWorld(){if(this.game.physics.p2._toRemove){for(var t=0;t<this.game.physics.p2._toRemove.length;t++){if(this.game.physics.p2._toRemove[t]===this){this.game.physics.p2._toRemove.splice(t,1);}}}if(this.data.world!==this.game.physics.p2.world){this.game.physics.p2.addBody(this);}},removeFromWorld:function removeFromWorld(){if(this.data.world===this.game.physics.p2.world){this.game.physics.p2.removeBodyNextStep(this);}},destroy:function destroy(){this.removeFromWorld();this.clearShapes();this._bodyCallbacks={};this._bodyCallbackContext={};this._groupCallbacks={};this._groupCallbackContext={};if(this.debugBody){this.debugBody.destroy(true,true);}this.debugBody=null;if(this.sprite){this.sprite.body=null;this.sprite=null;}},clearShapes:function clearShapes(){for(var t=this.data.shapes.length;t--;){this.data.removeShape(this.data.shapes[t]);}this.shapeChanged();},addShape:function addShape(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;this.data.addShape(t,[this.world.pxmi(e),this.world.pxmi(i)],s);this.shapeChanged();return t;},addCircle:function addCircle(t,e,i,s){var n=new p2.Circle({radius:this.world.pxm(t)});return this.addShape(n,e,i,s);},addRectangle:function addRectangle(t,e,i,s,n){var o=new p2.Box({width:this.world.pxm(t),height:this.world.pxm(e)});return this.addShape(o,i,s,n);},addPlane:function addPlane(t,e,i){var s=new p2.Plane();return this.addShape(s,t,e,i);},addParticle:function addParticle(t,e,i){var s=new p2.Particle();return this.addShape(s,t,e,i);},addLine:function addLine(t,e,i,s){var n=new p2.Line({length:this.world.pxm(t)});return this.addShape(n,e,i,s);},addCapsule:function addCapsule(t,e,i,s,n){var o=new p2.Capsule({length:this.world.pxm(t),radius:this.world.pxm(e)});return this.addShape(o,i,s,n);},addPolygon:function addPolygon(t,e){t=t||{};if(!Array.isArray(e)){e=Array.prototype.slice.call(arguments,1);}var i=[];if(e.length===1&&Array.isArray(e[0])){i=e[0].slice(0);}else if(Array.isArray(e[0])){i=e.slice();}else if(typeof e[0]=="number"){for(var s=0,n=e.length;s<n;s+=2){i.push([e[s],e[s+1]]);}}var o=i.length-1;if(i[o][0]===i[0][0]&&i[o][1]===i[0][1]){i.pop();}for(var a=0;a<i.length;a++){i[a][0]=this.world.pxmi(i[a][0]);i[a][1]=this.world.pxmi(i[a][1]);}var r=this.data.fromPolygon(i,t);this.shapeChanged();return r;},removeShape:function removeShape(t){var e=this.data.removeShape(t);this.shapeChanged();return e;},setCircle:function setCircle(t,e,i,s){this.clearShapes();return this.addCircle(t,e,i,s);},setRectangle:function setRectangle(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:16;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:16;var i=arguments.length>2?arguments[2]:undefined;var s=arguments.length>3?arguments[3]:undefined;var n=arguments.length>4?arguments[4]:undefined;this.clearShapes();return this.addRectangle(t,e,i,s,n);},setRectangleFromSprite:function setRectangleFromSprite(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.sprite;this.clearShapes();return this.addRectangle(t.width,t.height,0,0,t.rotation);},setMaterial:function setMaterial(t,e){if(e===undefined){for(var i=this.data.shapes.length-1;i>=0;i--){this.data.shapes[i].material=t;}}else{e.material=t;}},shapeChanged:function shapeChanged(){if(this.debugBody){this.debugBody.draw();}},addPhaserPolygon:function addPhaserPolygon(t,e){for(var i=this.game.cache.getPhysicsData(t,e),s=[],n=0;n<i.length;n++){var o=i[n];var a=this.addFixture(o);s[o.filter.group]=s[o.filter.group]||[];s[o.filter.group]=s[o.filter.group].concat(a);if(o.fixtureKey){s[o.fixtureKey]=a;}}this.data.aabbNeedsUpdate=true;this.shapeChanged();return s;},addFixture:function addFixture(t){var e=[];if(t.circle){var i=new p2.Circle({radius:this.world.pxm(t.circle.radius)});i.collisionGroup=t.filter.categoryBits;i.collisionMask=t.filter.maskBits;i.sensor=t.isSensor;var s=p2.vec2.create();s[0]=this.world.pxmi(t.circle.position[0]-this.sprite.width/2);s[1]=this.world.pxmi(t.circle.position[1]-this.sprite.height/2);this.data.addShape(i,s);e.push(i);}else{for(var n=t.polygons,o=p2.vec2.create(),a=0;a<n.length;a++){for(var r=n[a],h=[],l=0;l<r.length;l+=2){h.push([this.world.pxmi(r[l]),this.world.pxmi(r[l+1])]);}for(var i=new p2.Convex({vertices:h}),c=0;c!==i.vertices.length;c++){var u=i.vertices[c];p2.vec2.sub(u,u,i.centerOfMass);}p2.vec2.scale(o,i.centerOfMass,1);o[0]-=this.world.pxmi(this.sprite.width/2);o[1]-=this.world.pxmi(this.sprite.height/2);i.updateTriangles();i.updateCenterOfMass();i.updateBoundingRadius();i.collisionGroup=t.filter.categoryBits;i.collisionMask=t.filter.maskBits;i.sensor=t.isSensor;this.data.addShape(i,o);e.push(i);}}return e;},loadPolygon:function loadPolygon(t,e){if(t===null){var i=e;}else{var i=this.game.cache.getPhysicsData(t,e);}var s=p2.vec2.create();for(var n=0;n<i.length;n++){var o=[];for(var a=0;a<i[n].shape.length;a+=2){o.push([this.world.pxmi(i[n].shape[a]),this.world.pxmi(i[n].shape[a+1])]);}for(var r=new p2.Convex({vertices:o}),h=0;h!==r.vertices.length;h++){var l=r.vertices[h];p2.vec2.sub(l,l,r.centerOfMass);}p2.vec2.scale(s,r.centerOfMass,1);s[0]-=this.world.pxmi(this.sprite.width/2);s[1]-=this.world.pxmi(this.sprite.height/2);r.updateTriangles();r.updateCenterOfMass();r.updateBoundingRadius();this.data.addShape(r,s);}this.data.aabbNeedsUpdate=true;this.shapeChanged();return true;}};o.Physics.P2.Body.prototype.constructor=o.Physics.P2.Body;o.Physics.P2.Body.DYNAMIC=1;o.Physics.P2.Body.STATIC=2;o.Physics.P2.Body.KINEMATIC=4;Object.defineProperty(o.Physics.P2.Body.prototype,"static",{get:function get(){return this.data.type===o.Physics.P2.Body.STATIC;},set:function set(t){if(t&&this.data.type!==o.Physics.P2.Body.STATIC){this.data.type=o.Physics.P2.Body.STATIC;this.mass=0;}else if(!t&&this.data.type===o.Physics.P2.Body.STATIC){this.data.type=o.Physics.P2.Body.DYNAMIC;this.mass=1;}}});Object.defineProperty(o.Physics.P2.Body.prototype,"dynamic",{get:function get(){return this.data.type===o.Physics.P2.Body.DYNAMIC;},set:function set(t){if(t&&this.data.type!==o.Physics.P2.Body.DYNAMIC){this.data.type=o.Physics.P2.Body.DYNAMIC;this.mass=1;}else if(!t&&this.data.type===o.Physics.P2.Body.DYNAMIC){this.data.type=o.Physics.P2.Body.STATIC;this.mass=0;}}});Object.defineProperty(o.Physics.P2.Body.prototype,"kinematic",{get:function get(){return this.data.type===o.Physics.P2.Body.KINEMATIC;},set:function set(t){if(t&&this.data.type!==o.Physics.P2.Body.KINEMATIC){this.data.type=o.Physics.P2.Body.KINEMATIC;this.mass=4;}else if(!t&&this.data.type===o.Physics.P2.Body.KINEMATIC){this.data.type=o.Physics.P2.Body.STATIC;this.mass=0;}}});Object.defineProperty(o.Physics.P2.Body.prototype,"allowSleep",{get:function get(){return this.data.allowSleep;},set:function set(t){if(t!==this.data.allowSleep){this.data.allowSleep=t;}}});Object.defineProperty(o.Physics.P2.Body.prototype,"angle",{get:function get(){return o.Math.wrapAngle(o.Math.radToDeg(this.data.angle));},set:function set(t){this.data.angle=o.Math.degToRad(o.Math.wrapAngle(t));}});Object.defineProperty(o.Physics.P2.Body.prototype,"angularDamping",{get:function get(){return this.data.angularDamping;},set:function set(t){this.data.angularDamping=t;}});Object.defineProperty(o.Physics.P2.Body.prototype,"angularForce",{get:function get(){return this.data.angularForce;},set:function set(t){this.data.angularForce=t;}});Object.defineProperty(o.Physics.P2.Body.prototype,"angularVelocity",{get:function get(){return this.data.angularVelocity;},set:function set(t){this.data.angularVelocity=t;}});Object.defineProperty(o.Physics.P2.Body.prototype,"damping",{get:function get(){return this.data.damping;},set:function set(t){this.data.damping=t;}});Object.defineProperty(o.Physics.P2.Body.prototype,"fixedRotation",{get:function get(){return this.data.fixedRotation;},set:function set(t){if(t!==this.data.fixedRotation){this.data.fixedRotation=t;}}});Object.defineProperty(o.Physics.P2.Body.prototype,"inertia",{get:function get(){return this.data.inertia;},set:function set(t){this.data.inertia=t;}});Object.defineProperty(o.Physics.P2.Body.prototype,"mass",{get:function get(){return this.data.mass;},set:function set(t){if(t!==this.data.mass){this.data.mass=t;this.data.updateMassProperties();}}});Object.defineProperty(o.Physics.P2.Body.prototype,"motionState",{get:function get(){return this.data.type;},set:function set(t){if(t!==this.data.type){this.data.type=t;}}});Object.defineProperty(o.Physics.P2.Body.prototype,"rotation",{get:function get(){return this.data.angle;},set:function set(t){this.data.angle=t;}});Object.defineProperty(o.Physics.P2.Body.prototype,"sleepSpeedLimit",{get:function get(){return this.data.sleepSpeedLimit;},set:function set(t){this.data.sleepSpeedLimit=t;}});Object.defineProperty(o.Physics.P2.Body.prototype,"x",{get:function get(){return this.world.mpxi(this.data.position[0]);},set:function set(t){this.data.position[0]=this.world.pxmi(t);}});Object.defineProperty(o.Physics.P2.Body.prototype,"y",{get:function get(){return this.world.mpxi(this.data.position[1]);},set:function set(t){this.data.position[1]=this.world.pxmi(t);}});Object.defineProperty(o.Physics.P2.Body.prototype,"id",{get:function get(){return this.data.id;}});Object.defineProperty(o.Physics.P2.Body.prototype,"debug",{get:function get(){return this.debugBody!==null;},set:function set(t){if(t&&!this.debugBody){this.debugBody=new o.Physics.P2.BodyDebug(this.game,this.data);}else if(!t&&this.debugBody){this.debugBody.destroy();this.debugBody=null;}}});Object.defineProperty(o.Physics.P2.Body.prototype,"collideWorldBounds",{get:function get(){return this._collideWorldBounds;},set:function set(t){if(t&&!this._collideWorldBounds){this._collideWorldBounds=true;this.updateCollisionMask();}else if(!t&&this._collideWorldBounds){this._collideWorldBounds=false;this.updateCollisionMask();}}});o.Physics.P2.BodyDebug=function(t,e,i){o.Group.call(this,t);var s={pixelsPerLengthUnit:t.physics.p2.mpx(1),debugPolygons:false,lineWidth:1,alpha:0.5};this.settings=o.Utils.extend(s,i);this.ppu=this.settings.pixelsPerLengthUnit;this.ppu=this.ppu*-1;this.body=e;this.canvas=new o.Graphics(t);this.canvas.alpha=this.settings.alpha;this.add(this.canvas);this.draw();this.updateSpriteTransform();};o.Physics.P2.BodyDebug.prototype=Object.create(o.Group.prototype);o.Physics.P2.BodyDebug.prototype.constructor=o.Physics.P2.BodyDebug;o.Utils.extend(o.Physics.P2.BodyDebug.prototype,{updateSpriteTransform:function updateSpriteTransform(){this.position.x=this.body.position[0]*this.ppu;this.position.y=this.body.position[1]*this.ppu;this.rotation=this.body.angle;},draw:function draw(){var t;var e;var i;var s;var n;var o;var a;var r;var h;var l;var c;var u;var d;var p;var f;r=this.body;l=this.canvas;l.clear();i=parseInt(this.randomPastelHex(),16);o=16711680;a=this.lineWidth;if(r instanceof p2.Body&&r.shapes.length){var y=r.shapes.length;for(s=0;s!==y;){e=r.shapes[s];h=e.position||0;t=e.angle||0;if(e instanceof p2.Circle){this.drawCircle(l,h[0]*this.ppu,h[1]*this.ppu,t,e.radius*this.ppu,i,a);}else if(e instanceof p2.Capsule){this.drawCapsule(l,h[0]*this.ppu,h[1]*this.ppu,t,e.length*this.ppu,e.radius*this.ppu,o,i,a);}else if(e instanceof p2.Plane){this.drawPlane(l,h[0]*this.ppu,-h[1]*this.ppu,i,o,a*5,a*10,a*10,this.ppu*100,t);}else if(e instanceof p2.Line){this.drawLine(l,e.length*this.ppu,o,a);}else if(e instanceof p2.Box){this.drawRectangle(l,h[0]*this.ppu,h[1]*this.ppu,t,e.width*this.ppu,e.height*this.ppu,o,i,a);}else if(e instanceof p2.Convex){u=[];d=p2.vec2.create();n=p=0;f=e.vertices.length;for(;f>=0?p<f:p>f;n=f>=0?++p:--p){c=e.vertices[n];p2.vec2.rotate(d,c,t);u.push([(d[0]+h[0])*this.ppu,-(d[1]+h[1])*this.ppu]);}this.drawConvex(l,u,e.triangles,o,i,a,this.settings.debugPolygons,[h[0]*this.ppu,-h[1]*this.ppu]);}s++;}}},drawRectangle:function drawRectangle(t,e,i,s,n,o){var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;var r=arguments.length>7?arguments[7]:undefined;var h=arguments.length>8&&arguments[8]!==undefined?arguments[8]:1;t.lineStyle(h,a,1);t.beginFill(r);t.drawRect(e-n/2,i-o/2,n,o);},drawCircle:function drawCircle(t,e,i,s,n){var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:16777215;var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:1;t.lineStyle(a,0,1);t.beginFill(o,1);t.drawCircle(e,i,-n*2);t.endFill();t.moveTo(e,i);t.lineTo(e+n*Math.cos(-s),i+n*Math.sin(-s));},drawLine:function drawLine(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;t.lineStyle(s*5,i,1);t.moveTo(-e/2,0);t.lineTo(e/2,0);},drawConvex:function drawConvex(t,e,i,s,n,o,a,r){var h;var l;var c;var u;var d;var p;var f;var y;var g;var m;var v;if(o===undefined){o=1;}if(s===undefined){s=0;}if(a){h=[16711680,65280,255];l=0;while(l!==e.length+1){u=e[l%e.length];d=e[(l+1)%e.length];f=u[0];m=u[1];y=d[0];v=d[1];t.lineStyle(o,h[l%h.length],1);t.moveTo(f,-m);t.lineTo(y,-v);t.drawCircle(f,-m,o*2);l++;}t.lineStyle(o,0,1);return t.drawCircle(r[0],r[1],o*2);}t.lineStyle(o,s,1);t.beginFill(n);l=0;while(l!==e.length){c=e[l];p=c[0];g=c[1];if(l===0){t.moveTo(p,-g);}else{t.lineTo(p,-g);}l++;}t.endFill();if(e.length>2){t.moveTo(e[e.length-1][0],-e[e.length-1][1]);return t.lineTo(e[0][0],-e[0][1]);}},drawPath:function drawPath(t,e,i,s,n){var o;var a;var r;var h;var l;var c;var u;var d;var p;var f;var y;var g;var m;if(n===undefined){n=1;}if(i===undefined){i=0;}t.lineStyle(n,i,1);if(typeof s=="number"){t.beginFill(s);}r=null;h=null;a=0;while(a<e.length){y=e[a];g=y[0];m=y[1];if(g!==r||m!==h){if(a===0){t.moveTo(g,m);}else{l=r;c=h;u=g;d=m;p=e[(a+1)%e.length][0];f=e[(a+1)%e.length][1];if((o=(u-l)*(f-c)-(p-l)*(d-c))!==0){t.lineTo(g,m);}}r=g;h=m;}a++;}if(typeof s=="number"){t.endFill();}if(e.length>2&&typeof s=="number"){t.moveTo(e[e.length-1][0],e[e.length-1][1]);t.lineTo(e[0][0],e[0][1]);}},drawPlane:function drawPlane(t,e,i,s,n,o,a,r,h,l){var c;var u;var d;if(o===undefined){o=1;}if(s===undefined){s=16777215;}t.lineStyle(o,n,11);t.beginFill(s);c=h;t.moveTo(e,-i);u=e+Math.cos(l)*this.game.width;d=i+Math.sin(l)*this.game.height;t.lineTo(u,-d);t.moveTo(e,-i);u=e+Math.cos(l)*-this.game.width;d=i+Math.sin(l)*-this.game.height;t.lineTo(u,-d);},drawCapsule:function drawCapsule(t,e,i,s,n,o){var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;var r=arguments.length>7?arguments[7]:undefined;var h=arguments.length>8&&arguments[8]!==undefined?arguments[8]:1;t.lineStyle(h,a,1);var l=Math.cos(s);var c=Math.sin(s);t.beginFill(r,1);t.drawCircle(-n/2*l+e,-n/2*c+i,-o*2);t.drawCircle(n/2*l+e,n/2*c+i,-o*2);t.endFill();t.lineStyle(h,a,0);t.beginFill(r,1);t.moveTo(-n/2*l+o*c+e,-n/2*c+o*l+i);t.lineTo(n/2*l+o*c+e,n/2*c+o*l+i);t.lineTo(n/2*l-o*c+e,n/2*c-o*l+i);t.lineTo(-n/2*l-o*c+e,-n/2*c-o*l+i);t.endFill();t.lineStyle(h,a,1);t.moveTo(-n/2*l+o*c+e,-n/2*c+o*l+i);t.lineTo(n/2*l+o*c+e,n/2*c+o*l+i);t.moveTo(-n/2*l-o*c+e,-n/2*c-o*l+i);t.lineTo(n/2*l-o*c+e,n/2*c-o*l+i);},randomPastelHex:function randomPastelHex(){var t;var e;var i;var s;i=[255,255,255];s=Math.floor(Math.random()*256);e=Math.floor(Math.random()*256);t=Math.floor(Math.random()*256);s=Math.floor((s+i[0]*3)/4);e=Math.floor((e+i[1]*3)/4);t=Math.floor((t+i[2]*3)/4);return this.rgbToHex(s,e,t);},rgbToHex:function rgbToHex(t,e,i){return this.componentToHex(t)+this.componentToHex(e)+this.componentToHex(i);},componentToHex:function componentToHex(t){var e;e=t.toString(16);if(e.length===2){return e;}else{return e+"0";}}});o.Physics.P2.Spring=function(t,e,i,s,n,o,a,r,h,l){this.game=t.game;this.world=t;if(s===undefined){s=1;}if(n===undefined){n=100;}if(o===undefined){o=1;}s=t.pxm(s);var c={restLength:s,stiffness:n,damping:o};if(a!==undefined&&a!==null){c.worldAnchorA=[t.pxm(a[0]),t.pxm(a[1])];}if(r!==undefined&&r!==null){c.worldAnchorB=[t.pxm(r[0]),t.pxm(r[1])];}if(h!==undefined&&h!==null){c.localAnchorA=[t.pxm(h[0]),t.pxm(h[1])];}if(l!==undefined&&l!==null){c.localAnchorB=[t.pxm(l[0]),t.pxm(l[1])];}this.data=new p2.LinearSpring(e,i,c);this.data.parent=this;};o.Physics.P2.Spring.prototype.constructor=o.Physics.P2.Spring;o.Physics.P2.RotationalSpring=function(t,e,i,s,n,o){this.game=t.game;this.world=t;if(s===undefined){s=null;}if(n===undefined){n=100;}if(o===undefined){o=1;}s&&(s=t.pxm(s));var a={restAngle:s,stiffness:n,damping:o};this.data=new p2.RotationalSpring(e,i,a);this.data.parent=this;};o.Physics.P2.Spring.prototype.constructor=o.Physics.P2.Spring;o.Physics.P2.Material=function(t){this.name=t;p2.Material.call(this);};o.Physics.P2.Material.prototype=Object.create(p2.Material.prototype);o.Physics.P2.Material.prototype.constructor=o.Physics.P2.Material;o.Physics.P2.ContactMaterial=function(t,e,i){p2.ContactMaterial.call(this,t,e,i);};o.Physics.P2.ContactMaterial.prototype=Object.create(p2.ContactMaterial.prototype);o.Physics.P2.ContactMaterial.prototype.constructor=o.Physics.P2.ContactMaterial;o.Physics.P2.CollisionGroup=function(t){this.mask=t;};o.Physics.P2.DistanceConstraint=function(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:100;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:[0,0];var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:[0,0];var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:Number.MAX_VALUE;this.game=t.game;this.world=t;s=t.pxm(s);n=[t.pxmi(n[0]),t.pxmi(n[1])];o=[t.pxmi(o[0]),t.pxmi(o[1])];var r={distance:s,localAnchorA:n,localAnchorB:o,maxForce:a};p2.DistanceConstraint.call(this,e,i,r);};o.Physics.P2.DistanceConstraint.prototype=Object.create(p2.DistanceConstraint.prototype);o.Physics.P2.DistanceConstraint.prototype.constructor=o.Physics.P2.DistanceConstraint;o.Physics.P2.GearConstraint=function(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;this.game=t.game;this.world=t;var o={angle:s,ratio:n};p2.GearConstraint.call(this,e,i,o);};o.Physics.P2.GearConstraint.prototype=Object.create(p2.GearConstraint.prototype);o.Physics.P2.GearConstraint.prototype.constructor=o.Physics.P2.GearConstraint;o.Physics.P2.LockConstraint=function(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[0,0];var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:Number.MAX_VALUE;this.game=t.game;this.world=t;s=[t.pxm(s[0]),t.pxm(s[1])];var a={localOffsetB:s,localAngleB:n,maxForce:o};p2.LockConstraint.call(this,e,i,a);};o.Physics.P2.LockConstraint.prototype=Object.create(p2.LockConstraint.prototype);o.Physics.P2.LockConstraint.prototype.constructor=o.Physics.P2.LockConstraint;o.Physics.P2.PrismaticConstraint=function(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:[0,0];var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:[0,0];var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:[0,0];var r=arguments.length>7&&arguments[7]!==undefined?arguments[7]:Number.MAX_VALUE;this.game=t.game;this.world=t;n=[t.pxmi(n[0]),t.pxmi(n[1])];o=[t.pxmi(o[0]),t.pxmi(o[1])];var h={localAnchorA:n,localAnchorB:o,localAxisA:a,maxForce:r,disableRotationalLock:!s};p2.PrismaticConstraint.call(this,e,i,h);};o.Physics.P2.PrismaticConstraint.prototype=Object.create(p2.PrismaticConstraint.prototype);o.Physics.P2.PrismaticConstraint.prototype.constructor=o.Physics.P2.PrismaticConstraint;o.Physics.P2.RevoluteConstraint=function(t,e,i,s,n){var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:Number.MAX_VALUE;var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:null;this.game=t.game;this.world=t;i=[t.pxmi(i[0]),t.pxmi(i[1])];n=[t.pxmi(n[0]),t.pxmi(n[1])];a&&(a=[t.pxmi(a[0]),t.pxmi(a[1])]);var r={worldPivot:a,localPivotA:i,localPivotB:n,maxForce:o};p2.RevoluteConstraint.call(this,e,s,r);};o.Physics.P2.RevoluteConstraint.prototype=Object.create(p2.RevoluteConstraint.prototype);o.Physics.P2.RevoluteConstraint.prototype.constructor=o.Physics.P2.RevoluteConstraint;o.ImageCollection=function(t,e,i,s,n,o,a){if(i===undefined||i<=0){i=32;}if(s===undefined||s<=0){s=32;}if(n===undefined){n=0;}if(o===undefined){o=0;}this.name=t;this.firstgid=e|0;this.imageWidth=i|0;this.imageHeight=s|0;this.imageMargin=n|0;this.imageSpacing=o|0;this.properties=a||{};this.images=[];this.total=0;};o.ImageCollection.prototype={containsImageIndex:function containsImageIndex(t){return t>=this.firstgid&&t<this.firstgid+this.total;},addImage:function addImage(t,e){this.images.push({gid:t,image:e});this.total++;}};o.ImageCollection.prototype.constructor=o.ImageCollection;o.Tile=function(t,e,i,s,n,o){this.layer=t;this.index=e;this.x=i;this.y=s;this.rotation=0;this.flipped=false;this.worldX=i*n;this.worldY=s*o;this.width=n;this.height=o;this.centerX=Math.abs(n/2);this.centerY=Math.abs(o/2);this.alpha=1;this.properties={};this.scanned=false;this.faceTop=false;this.faceBottom=false;this.faceLeft=false;this.faceRight=false;this.collideLeft=false;this.collideRight=false;this.collideUp=false;this.collideDown=false;this.collisionCallback=null;this.collisionCallbackContext=this;};o.Tile.prototype={containsPoint:function containsPoint(t,e){return!(t<this.worldX)&&!(e<this.worldY)&&!(t>this.right)&&!(e>this.bottom);},intersects:function intersects(t,e,i,s){return!(i<=this.worldX)&&!(s<=this.worldY)&&!(t>=this.worldX+this.width)&&!(e>=this.worldY+this.height);},setCollisionCallback:function setCollisionCallback(t,e){this.collisionCallback=t;this.collisionCallbackContext=e;},destroy:function destroy(){this.collisionCallback=null;this.collisionCallbackContext=null;this.properties=null;},setCollision:function setCollision(t,e,i,s){this.collideLeft=t;this.collideRight=e;this.collideUp=i;this.collideDown=s;this.faceLeft=t;this.faceRight=e;this.faceTop=i;this.faceBottom=s;},resetCollision:function resetCollision(){this.collideLeft=false;this.collideRight=false;this.collideUp=false;this.collideDown=false;this.faceTop=false;this.faceBottom=false;this.faceLeft=false;this.faceRight=false;},isInteresting:function isInteresting(t,e){if(t&&e){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.faceTop||this.faceBottom||this.faceLeft||this.faceRight||this.collisionCallback;}else if(t){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown;}else{return!!e&&(this.faceTop||this.faceBottom||this.faceLeft||this.faceRight);}},copy:function copy(t){this.index=t.index;this.alpha=t.alpha;this.properties=t.properties;this.collideUp=t.collideUp;this.collideDown=t.collideDown;this.collideLeft=t.collideLeft;this.collideRight=t.collideRight;this.collisionCallback=t.collisionCallback;this.collisionCallbackContext=t.collisionCallbackContext;}};o.Tile.prototype.constructor=o.Tile;Object.defineProperty(o.Tile.prototype,"collides",{get:function get(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown;}});Object.defineProperty(o.Tile.prototype,"canCollide",{get:function get(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback;}});Object.defineProperty(o.Tile.prototype,"left",{get:function get(){return this.worldX;}});Object.defineProperty(o.Tile.prototype,"right",{get:function get(){return this.worldX+this.width;}});Object.defineProperty(o.Tile.prototype,"top",{get:function get(){return this.worldY;}});Object.defineProperty(o.Tile.prototype,"bottom",{get:function get(){return this.worldY+this.height;}});o.Tilemap=function(t,e,i,s,n,a){this.game=t;this.key=e;var r=o.TilemapParser.parse(this.game,e,i,s,n,a);if(r!==null){this.width=r.width;this.height=r.height;this.tileWidth=r.tileWidth;this.tileHeight=r.tileHeight;this.orientation=r.orientation;this.format=r.format;this.version=r.version;this.properties=r.properties;this.widthInPixels=r.widthInPixels;this.heightInPixels=r.heightInPixels;this.layers=r.layers;this.tilesets=r.tilesets;this.imagecollections=r.imagecollections;this.tiles=r.tiles;this.objects=r.objects;this.collideIndexes=[];this.collision=r.collision;this.images=r.images;this.enableDebug=false;this.currentLayer=0;this.debugMap=[];this._results=[];this._tempA=0;this._tempB=0;}};o.Tilemap.CSV=0;o.Tilemap.TILED_JSON=1;o.Tilemap.NORTH=0;o.Tilemap.EAST=1;o.Tilemap.SOUTH=2;o.Tilemap.WEST=3;o.Tilemap.prototype={create:function create(t,e,i,s,n){var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:this.game.world;this.width=e;this.height=i;this.setTileSize(s,n);this.layers.length=0;return this.createBlankLayer(t,e,i,s,n,o);},setTileSize:function setTileSize(t,e){this.tileWidth=t;this.tileHeight=e;this.widthInPixels=this.width*t;this.heightInPixels=this.height*e;},addTilesetImage:function addTilesetImage(t,e,i,s,n,a,r){if(t===undefined){return null;}if(i===undefined){i=this.tileWidth;}if(s===undefined){s=this.tileHeight;}if(n===undefined){n=0;}if(a===undefined){a=0;}if(r===undefined){r=0;}if(i===0){i=32;}if(s===0){s=32;}var h=null;if(e===undefined||e===null){e=t;}if(e instanceof o.BitmapData){h=e.canvas;}else{if(!this.game.cache.checkImageKey(e)){return null;}h=this.game.cache.getImage(e);}var l=this.getTilesetIndex(t);if(l===null&&this.format===o.Tilemap.TILED_JSON){return null;}if(this.tilesets[l]){this.tilesets[l].setImage(h);return this.tilesets[l];}var c=new o.Tileset(t,r,i,s,n,a,{});c.setImage(h);this.tilesets.push(c);for(var u=this.tilesets.length-1,d=n,p=n,f=0,y=0,g=0,m=r;m<r+c.total&&(this.tiles[m]=[d,p,u],d+=i+a,++f!==c.total)&&(++y!==c.columns||(d=n,p+=s+a,y=0,++g!==c.rows));m++);return c;},createFromObjects:function createFromObjects(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;var r=arguments.length>6&&arguments[6]!==undefined?arguments[6]:this.game.world;var h=arguments.length>7&&arguments[7]!==undefined?arguments[7]:o.Sprite;var l=arguments.length>8&&arguments[8]!==undefined?arguments[8]:true;if(this.objects[t]){for(var c=0;c<this.objects[t].length;c++){var u=false;var d=this.objects[t][c];if(d.gid!==undefined&&typeof e=="number"&&d.gid===e){u=true;}else if(d.id!==undefined&&typeof e=="number"&&d.id===e){u=true;}else if(d.name!==undefined&&typeof e=="string"&&d.name===e){u=true;}if(u){var p=new h(this.game,parseFloat(d.x,10),parseFloat(d.y,10),i,s);p.name=d.name;p.visible=d.visible;p.autoCull=a;p.exists=n;if(d.width){p.width=d.width;}if(d.height){p.height=d.height;}if(d.rotation){p.angle=d.rotation;}if(l){p.y-=p.height;}r.add(p);for(var f in d.properties){r.set(p,f,d.properties[f],false,false,0,true);}}}}},createFromTiles:function createFromTiles(t,e,i,s,n,a){if(typeof t=="number"){t=[t];}if(e===undefined||e===null){e=[];}else if(typeof e=="number"){e=[e];}s=this.getLayer(s);if(n===undefined){n=this.game.world;}if(a===undefined){a={};}if(a.customClass===undefined){a.customClass=o.Sprite;}if(a.adjustY===undefined){a.adjustY=true;}var r=this.layers[s].width;var h=this.layers[s].height;this.copy(0,0,r,h,s);if(this._results.length<2){return 0;}var l=0;var c;for(var u=1,d=this._results.length;u<d;u++){if(t.indexOf(this._results[u].index)!==-1){c=new a.customClass(this.game,this._results[u].worldX,this._results[u].worldY,i);for(var p in a){c[p]=a[p];}n.add(c);l++;}}if(e.length===1){for(u=0;u<t.length;u++){this.replace(t[u],e[0],0,0,r,h,s);}}else if(e.length>1){for(u=0;u<t.length;u++){this.replace(t[u],e[u],0,0,r,h,s);}}return l;},createLayer:function createLayer(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.game.width;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.game.height;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:this.game.world;var n=t;if(typeof t=="string"){n=this.getLayerIndex(t);}if(n!==null&&!(n>this.layers.length)){if(e===undefined||e<=0){e=Math.min(this.game.width,this.layers[n].widthInPixels);}else if(e>this.game.width){e=this.game.width;}if(i===undefined||i<=0){i=Math.min(this.game.height,this.layers[n].heightInPixels);}else if(i>this.game.height){i=this.game.height;}this.enableDebug;var a=s.add(new o.TilemapLayer(this.game,this,n,e,i));this.enableDebug;return a;}},createBlankLayer:function createBlankLayer(t,e,i,s,n){var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:this.game.world;if(this.getLayerIndex(t)===null){var r={name:t,x:0,y:0,width:e,height:i,widthInPixels:e*s,heightInPixels:i*n,alpha:1,visible:true,properties:{},indexes:[],callbacks:[],bodies:[],data:null};var h;var l=[];for(var c=0;c<i;c++){h=[];for(var u=0;u<e;u++){h.push(new o.Tile(r,-1,u,c,s,n));}l.push(h);}r.data=l;this.layers.push(r);this.currentLayer=this.layers.length-1;var d=r.widthInPixels;var p=r.heightInPixels;if(d>this.game.width){d=this.game.width;}if(p>this.game.height){p=this.game.height;}var l=new o.TilemapLayer(this.game,this,this.layers.length-1,d,p);l.name=t;return a.add(l);}},getIndex:function getIndex(t,e){for(var i=0;i<t.length;i++){if(t[i].name===e){return i;}}return null;},getLayerIndex:function getLayerIndex(t){return this.getIndex(this.layers,t);},getTilesetIndex:function getTilesetIndex(t){return this.getIndex(this.tilesets,t);},getImageIndex:function getImageIndex(t){return this.getIndex(this.images,t);},setTileIndexCallback:function setTileIndexCallback(t,e,i,s){s=this.getLayer(s);if(typeof t=="number"){this.layers[s].callbacks[t]={callback:e,callbackContext:i};}else{for(var n=0,o=t.length;n<o;n++){this.layers[s].callbacks[t[n]]={callback:e,callbackContext:i};}}},setTileLocationCallback:function setTileLocationCallback(t,e,i,s,n,o,a){a=this.getLayer(a);this.copy(t,e,i,s,a);if(!(this._results.length<2)){for(var r=1;r<this._results.length;r++){this._results[r].setCollisionCallback(n,o);}}},setCollision:function setCollision(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=arguments.length>2?arguments[2]:undefined;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;i=this.getLayer(i);if(typeof t=="number"){return this.setCollisionByIndex(t,e,i,true);}if(Array.isArray(t)){for(var n=0;n<t.length;n++){this.setCollisionByIndex(t[n],e,i,false);}if(s){this.calculateFaces(i);}}},setCollisionBetween:function setCollisionBetween(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var s=arguments.length>3?arguments[3]:undefined;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;s=this.getLayer(s);if(!(t>e)){for(var o=t;o<=e;o++){this.setCollisionByIndex(o,i,s,false);}if(n){this.calculateFaces(s);}}},setCollisionByExclusion:function setCollisionByExclusion(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=arguments.length>2?arguments[2]:undefined;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;i=this.getLayer(i);for(var n=0,o=this.tiles.length;n<o;n++){if(t.indexOf(n)===-1){this.setCollisionByIndex(n,e,i,false);}}if(s){this.calculateFaces(i);}},setCollisionByIndex:function setCollisionByIndex(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.currentLayer;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(e){this.collideIndexes.push(t);}else{var n=this.collideIndexes.indexOf(t);if(n>-1){this.collideIndexes.splice(n,1);}}for(var o=0;o<this.layers[i].height;o++){for(var a=0;a<this.layers[i].width;a++){var r=this.layers[i].data[o][a];if(r&&r.index===t){if(e){r.setCollision(true,true,true,true);}else{r.resetCollision();}r.faceTop=e;r.faceBottom=e;r.faceLeft=e;r.faceRight=e;}}}if(s){this.calculateFaces(i);}return i;},getLayer:function getLayer(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.currentLayer;return t;},setPreventRecalculate:function setPreventRecalculate(t){if(t===true&&this.preventingRecalculate!==true){this.preventingRecalculate=true;this.needToRecalculate={};}if(t===false&&this.preventingRecalculate===true){this.preventingRecalculate=false;for(var e in this.needToRecalculate){this.calculateFaces(e);}this.needToRecalculate=false;}},calculateFaces:function calculateFaces(t){if(this.preventingRecalculate){this.needToRecalculate[t]=true;return;}var e=null;var i=null;var s=null;var n=null;for(var o=0,a=this.layers[t].height;o<a;o++){for(var r=0,h=this.layers[t].width;r<h;r++){var l=this.layers[t].data[o][r];if(l){e=this.getTileAbove(t,r,o);i=this.getTileBelow(t,r,o);s=this.getTileLeft(t,r,o);n=this.getTileRight(t,r,o);if(l.collides){l.faceTop=true;l.faceBottom=true;l.faceLeft=true;l.faceRight=true;}if(e&&e.collides){l.faceTop=false;}if(i&&i.collides){l.faceBottom=false;}if(s&&s.collides){l.faceLeft=false;}if(n&&n.collides){l.faceRight=false;}}}}},getTileAbove:function getTileAbove(t,e,i){if(i>0){return this.layers[t].data[i-1][e];}else{return null;}},getTileBelow:function getTileBelow(t,e,i){if(i<this.layers[t].height-1){return this.layers[t].data[i+1][e];}else{return null;}},getTileLeft:function getTileLeft(t,e,i){if(e>0){return this.layers[t].data[i][e-1];}else{return null;}},getTileRight:function getTileRight(t,e,i){if(e<this.layers[t].width-1){return this.layers[t].data[i][e+1];}else{return null;}},setLayer:function setLayer(t){t=this.getLayer(t);if(this.layers[t]){this.currentLayer=t;}},hasTile:function hasTile(t,e,i){i=this.getLayer(i);return this.layers[i].data[e]!==undefined&&this.layers[i].data[e][t]!==undefined&&this.layers[i].data[e][t].index>-1;},removeTile:function removeTile(t,e,i){i=this.getLayer(i);if(t>=0&&t<this.layers[i].width&&e>=0&&e<this.layers[i].height&&this.hasTile(t,e,i)){var s=this.layers[i].data[e][t];this.layers[i].data[e][t]=new o.Tile(this.layers[i],-1,t,e,this.tileWidth,this.tileHeight);this.layers[i].dirty=true;this.calculateFaces(i);return s;}},removeTileWorldXY:function removeTileWorldXY(t,e,i,s,n){n=this.getLayer(n);t=this.game.math.snapToFloor(t,i)/i;e=this.game.math.snapToFloor(e,s)/s;return this.removeTile(t,e,n);},putTile:function putTile(t,e,i,s){if(t===null){return this.removeTile(e,i,s);}s=this.getLayer(s);if(e>=0&&e<this.layers[s].width&&i>=0&&i<this.layers[s].height){var n;if(t instanceof o.Tile){n=t.index;if(this.hasTile(e,i,s)){this.layers[s].data[i][e].copy(t);}else{this.layers[s].data[i][e]=new o.Tile(s,n,e,i,t.width,t.height);}}else{n=t;if(this.hasTile(e,i,s)){this.layers[s].data[i][e].index=n;}else{this.layers[s].data[i][e]=new o.Tile(this.layers[s],n,e,i,this.tileWidth,this.tileHeight);}}if(this.collideIndexes.indexOf(n)>-1){this.layers[s].data[i][e].setCollision(true,true,true,true);}else{this.layers[s].data[i][e].resetCollision();}this.layers[s].dirty=true;this.calculateFaces(s);return this.layers[s].data[i][e];}return null;},putTileWorldXY:function putTileWorldXY(t,e,i,s,n,o){o=this.getLayer(o);e=this.game.math.snapToFloor(e,s)/s;i=this.game.math.snapToFloor(i,n)/n;return this.putTile(t,e,i,o);},searchTileIndex:function searchTileIndex(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=arguments.length>3?arguments[3]:undefined;s=this.getLayer(s);var n=0;if(i){for(var o=this.layers[s].height-1;o>=0;o--){for(var a=this.layers[s].width-1;a>=0;a--){if(this.layers[s].data[o][a].index===t){if(n===e){return this.layers[s].data[o][a];}n++;}}}}else{for(var o=0;o<this.layers[s].height;o++){for(var a=0;a<this.layers[s].width;a++){if(this.layers[s].data[o][a].index===t){if(n===e){return this.layers[s].data[o][a];}n++;}}}}return null;},getTile:function getTile(t,e,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;i=this.getLayer(i);if(t>=0&&t<this.layers[i].width&&e>=0&&e<this.layers[i].height){if(this.layers[i].data[e][t].index===-1){if(s){return this.layers[i].data[e][t];}else{return null;}}else{return this.layers[i].data[e][t];}}else{return null;}},getTileWorldXY:function getTileWorldXY(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.tileWidth;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:this.tileHeight;var n=arguments.length>4?arguments[4]:undefined;var o=arguments.length>5?arguments[5]:undefined;n=this.getLayer(n);t=this.game.math.snapToFloor(t,i)/i;e=this.game.math.snapToFloor(e,s)/s;return this.getTile(t,e,n,o);},copy:function copy(t,e,i,s,n){n=this.getLayer(n);if(!this.layers[n]){this._results.length=0;return;}if(t===undefined){t=0;}if(e===undefined){e=0;}if(i===undefined){i=this.layers[n].width;}if(s===undefined){s=this.layers[n].height;}if(t<0){t=0;}if(e<0){e=0;}if(i>this.layers[n].width){i=this.layers[n].width;}if(s>this.layers[n].height){s=this.layers[n].height;}this._results.length=0;this._results.push({x:t,y:e,width:i,height:s,layer:n});for(var o=e;o<e+s;o++){for(var a=t;a<t+i;a++){this._results.push(this.layers[n].data[o][a]);}}return this._results;},paste:function paste(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2?arguments[2]:undefined;var s=arguments.length>3?arguments[3]:undefined;s=this.getLayer(s);if(i&&!(i.length<2)){var n=t-i[1].x;var o=e-i[1].y;for(var a=1;a<i.length;a++){this.layers[s].data[o+i[a].y][n+i[a].x].copy(i[a]);}this.layers[s].dirty=true;this.calculateFaces(s);}},swap:function swap(t,e,i,s,n,o,a){a=this.getLayer(a);this.copy(i,s,n,o,a);if(!(this._results.length<2)){this._tempA=t;this._tempB=e;this._results.forEach(this.swapHandler,this);this.paste(i,s,this._results,a);}},swapHandler:function swapHandler(t){if(t.index===this._tempA){t.index=this._tempB;}else if(t.index===this._tempB){t.index=this._tempA;}},forEach:function forEach(t,e,i,s,n,o,a){a=this.getLayer(a);this.copy(i,s,n,o,a);if(!(this._results.length<2)){this._results.forEach(t,e);this.paste(i,s,this._results,a);}},replace:function replace(t,e,i,s,n,o,a){a=this.getLayer(a);this.copy(i,s,n,o,a);if(!(this._results.length<2)){for(var r=1;r<this._results.length;r++){if(this._results[r].index===t){this._results[r].index=e;}}this.paste(i,s,this._results,a);}},random:function random(t,e,i,s,n){n=this.getLayer(n);this.copy(t,e,i,s,n);if(!(this._results.length<2)){var o=[];for(var a=1;a<this._results.length;a++){if(this._results[a].index){var r=this._results[a].index;if(o.indexOf(r)===-1){o.push(r);}}}for(var h=1;h<this._results.length;h++){this._results[h].index=this.game.rnd.pick(o);}this.paste(t,e,this._results,n);}},shuffle:function shuffle(t,e,i,s,n){n=this.getLayer(n);this.copy(t,e,i,s,n);if(!(this._results.length<2)){var a=[];for(var r=1;r<this._results.length;r++){if(this._results[r].index){a.push(this._results[r].index);}}o.ArrayUtils.shuffle(a);for(var h=1;h<this._results.length;h++){this._results[h].index=a[h-1];}this.paste(t,e,this._results,n);}},fill:function fill(t,e,i,s,n,o){o=this.getLayer(o);this.copy(e,i,s,n,o);if(!(this._results.length<2)){for(var a=1;a<this._results.length;a++){this._results[a].index=t;}this.paste(e,i,this._results,o);}},removeAllLayers:function removeAllLayers(){this.layers.length=0;this.currentLayer=0;},dump:function dump(){var t="";var e=[""];for(var i=0;i<this.layers[this.currentLayer].height;i++){for(var s=0;s<this.layers[this.currentLayer].width;s++){t+="%c  ";if(this.layers[this.currentLayer].data[i][s]>1){if(this.debugMap[this.layers[this.currentLayer].data[i][s]]){e.push("background: "+this.debugMap[this.layers[this.currentLayer].data[i][s]]);}else{e.push("background: #ffffff");}}else{e.push("background: rgb(0, 0, 0)");}}t+="\\n";}e[0]=t;},destroy:function destroy(){this.removeAllLayers();this.data=[];this.game=null;}};o.Tilemap.prototype.constructor=o.Tilemap;Object.defineProperty(o.Tilemap.prototype,"layer",{get:function get(){return this.layers[this.currentLayer];},set:function set(t){if(t!==this.currentLayer){this.setLayer(t);}}});o.TilemapLayer=function(t,e,i,s,n){s|=0;n|=0;o.Sprite.call(this,t,0,0);this.map=e;this.index=i;this.layer=e.layers[i];this.canvas=PIXI.CanvasPool.create(this,s,n);this.context=this.canvas.getContext("2d");this.setTexture(new PIXI.Texture(new PIXI.BaseTexture(this.canvas)));this.type=o.TILEMAPLAYER;this.physicsType=o.TILEMAPLAYER;this.renderSettings={enableScrollDelta:false,overdrawRatio:0.2,copyCanvas:null};this.debug=false;this.exists=true;this.debugSettings={missingImageFill:"rgb(255,255,255)",debuggedTileOverfill:"rgba(0,255,0,0.4)",forceFullRedraw:true,debugAlpha:0.5,facingEdgeStroke:"rgba(0,255,0,1)",collidingTileOverfill:"rgba(0,255,0,0.2)"};this.scrollFactorX=1;this.scrollFactorY=1;this.dirty=true;this.rayStepRate=4;this._wrap=false;this._mc={scrollX:0,scrollY:0,renderWidth:0,renderHeight:0,tileWidth:e.tileWidth,tileHeight:e.tileHeight,cw:e.tileWidth,ch:e.tileHeight,tilesets:[]};this._scrollX=0;this._scrollY=0;this._results=[];if(!t.device.canvasBitBltShift){this.renderSettings.copyCanvas=o.TilemapLayer.ensureSharedCopyCanvas();}this.fixedToCamera=true;};o.TilemapLayer.prototype=Object.create(o.Sprite.prototype);o.TilemapLayer.prototype.constructor=o.TilemapLayer;o.TilemapLayer.prototype.preUpdateCore=o.Component.Core.preUpdate;o.TilemapLayer.sharedCopyCanvas=null;o.TilemapLayer.ensureSharedCopyCanvas=function(){this.sharedCopyCanvas||(this.sharedCopyCanvas=PIXI.CanvasPool.create(this,2,2));return this.sharedCopyCanvas;};o.TilemapLayer.prototype.preUpdate=function(){return this.preUpdateCore();};o.TilemapLayer.prototype.postUpdate=function(){if(this.fixedToCamera){this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x;this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y;}this._scrollX=this.game.camera.view.x*this.scrollFactorX/this.scale.x;this._scrollY=this.game.camera.view.y*this.scrollFactorY/this.scale.y;};o.TilemapLayer.prototype._renderCanvas=function(t){if(this.fixedToCamera){this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x;this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y;}this._scrollX=this.game.camera.view.x*this.scrollFactorX/this.scale.x;this._scrollY=this.game.camera.view.y*this.scrollFactorY/this.scale.y;this.render();PIXI.Sprite.prototype._renderCanvas.call(this,t);};o.TilemapLayer.prototype._renderWebGL=function(t){if(this.fixedToCamera){this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x;this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y;}this._scrollX=this.game.camera.view.x*this.scrollFactorX/this.scale.x;this._scrollY=this.game.camera.view.y*this.scrollFactorY/this.scale.y;this.render();PIXI.Sprite.prototype._renderWebGL.call(this,t);};o.TilemapLayer.prototype.destroy=function(){PIXI.CanvasPool.remove(this);o.Component.Destroy.prototype.destroy.call(this);};o.TilemapLayer.prototype.resize=function(t,e){this.canvas.width=t;this.canvas.height=e;this.texture.frame.resize(t,e);this.texture.width=t;this.texture.height=e;this.texture.crop.width=t;this.texture.crop.height=e;this.texture.baseTexture.width=t;this.texture.baseTexture.height=e;this.texture.baseTexture.dirty();this.texture.requiresUpdate=true;this.texture._updateUvs();this.dirty=true;};o.TilemapLayer.prototype.resizeWorld=function(){this.game.world.setBounds(0,0,this.layer.widthInPixels*this.scale.x,this.layer.heightInPixels*this.scale.y);};o.TilemapLayer.prototype._fixX=function(t){if(this.scrollFactorX===1||this.scrollFactorX===0&&this.position.x===0){return t;}else if(this.scrollFactorX===0&&this.position.x!==0){return t-this.position.x;}else{return this._scrollX+(t-this._scrollX/this.scrollFactorX);}};o.TilemapLayer.prototype._unfixX=function(t){if(this.scrollFactorX===1){return t;}else{return this._scrollX/this.scrollFactorX+(t-this._scrollX);}};o.TilemapLayer.prototype._fixY=function(t){if(this.scrollFactorY===1||this.scrollFactorY===0&&this.position.y===0){return t;}else if(this.scrollFactorY===0&&this.position.y!==0){return t-this.position.y;}else{return this._scrollY+(t-this._scrollY/this.scrollFactorY);}};o.TilemapLayer.prototype._unfixY=function(t){if(this.scrollFactorY===1){return t;}else{return this._scrollY/this.scrollFactorY+(t-this._scrollY);}};o.TilemapLayer.prototype.getTileX=function(t){return Math.floor(this._fixX(t)/this._mc.tileWidth);};o.TilemapLayer.prototype.getTileY=function(t){return Math.floor(this._fixY(t)/this._mc.tileHeight);};o.TilemapLayer.prototype.getTileXY=function(t,e,i){i.x=this.getTileX(t);i.y=this.getTileY(e);return i;};o.TilemapLayer.prototype.getRayCastTiles=function(t,e,i,s){e||(e=this.rayStepRate);if(i===undefined){i=false;}if(s===undefined){s=false;}var n=this.getTiles(t.x,t.y,t.width,t.height,i,s);if(n.length===0){return[];}var o=t.coordinatesOnLine(e);var a=[];for(var r=0;r<n.length;r++){for(var h=0;h<o.length;h++){var l=n[r];var c=o[h];if(l.containsPoint(c[0],c[1])){a.push(l);break;}}}return a;};o.TilemapLayer.prototype.getTiles=function(t,e,i,s){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;var a=!n&&!o;t=this._fixX(t);e=this._fixY(e);var r=Math.floor(t/(this._mc.cw*this.scale.x));var h=Math.floor(e/(this._mc.ch*this.scale.y));var l=Math.ceil((t+i)/(this._mc.cw*this.scale.x))-r;var c=Math.ceil((e+s)/(this._mc.ch*this.scale.y))-h;while(this._results.length){this._results.pop();}for(var u=h;u<h+c;u++){for(var d=r;d<r+l;d++){var p=this.layer.data[u];if(p&&p[d]&&(a||p[d].isInteresting(n,o))){this._results.push(p[d]);}}}return this._results.slice();};o.TilemapLayer.prototype.resolveTileset=function(t){var e=this._mc.tilesets;if(t<2000){while(e.length<t){e.push(undefined);}}var i=this.map.tiles[t]&&this.map.tiles[t][2];if(i!==null){var s=this.map.tilesets[i];if(s&&s.containsTileIndex(t)){return e[t]=s;}}return e[t]=null;};o.TilemapLayer.prototype.resetTilesetCache=function(){for(var t=this._mc.tilesets;t.length;){t.pop();}};o.TilemapLayer.prototype.setScale=function(t,e){t=t||1;e=e||t;for(var i=0;i<this.layer.data.length;i++){for(var s=this.layer.data[i],n=0;n<s.length;n++){var o=s[n];o.width=this.map.tileWidth*t;o.height=this.map.tileHeight*e;o.worldX=o.x*o.width;o.worldY=o.y*o.height;}}this.scale.setTo(t,e);};o.TilemapLayer.prototype.shiftCanvas=function(t,e,i){var s=t.canvas;var n=s.width-Math.abs(e);var o=s.height-Math.abs(i);var a=0;var r=0;var h=e;var l=i;if(e<0){a=-e;h=0;}if(i<0){r=-i;l=0;}var c=this.renderSettings.copyCanvas;if(c){if(c.width<n||c.height<o){c.width=n;c.height=o;}var u=c.getContext("2d");u.clearRect(0,0,n,o);u.drawImage(s,a,r,n,o,0,0,n,o);t.clearRect(h,l,n,o);t.drawImage(c,0,0,n,o,h,l,n,o);}else{t.save();t.globalCompositeOperation="copy";t.drawImage(s,a,r,n,o,h,l,n,o);t.restore();}};o.TilemapLayer.prototype.renderRegion=function(t,e,i,s,n,o){var a=this.context;var r=this.layer.width;var h=this.layer.height;var l=this._mc.tileWidth;var c=this._mc.tileHeight;var u=this._mc.tilesets;var d=NaN;if(!this._wrap){if(i<=n){i=Math.max(0,i);n=Math.min(r-1,n);}if(s<=o){s=Math.max(0,s);o=Math.min(h-1,o);}}var p=i*l-t;var f=s*c-e;var y=(i+r*1048576)%r;var g=(s+h*1048576)%h;var m;var v;var b;var x;var _;var w;x=g;w=o-s;v=f;for(;w>=0;x++,w--,v+=c){if(x>=h){x-=h;}var C=this.layer.data[x];b=y;_=n-i;m=p;for(;_>=0;b++,_--,m+=l){if(b>=r){b-=r;}var P=C[b];if(P&&!(P.index<0)){var T=P.index;var S=u[T];if(S===undefined){S=this.resolveTileset(T);}if(P.alpha!==d&&!this.debug){a.globalAlpha=P.alpha;d=P.alpha;}if(S){if(P.rotation||P.flipped){a.save();a.translate(m+P.centerX,v+P.centerY);a.rotate(P.rotation);if(P.flipped){a.scale(-1,1);}S.draw(a,-P.centerX,-P.centerY,T);a.restore();}else{S.draw(a,m,v,T);}}else if(this.debugSettings.missingImageFill){a.fillStyle=this.debugSettings.missingImageFill;a.fillRect(m,v,l,c);}if(P.debug&&this.debugSettings.debuggedTileOverfill){a.fillStyle=this.debugSettings.debuggedTileOverfill;a.fillRect(m,v,l,c);}}}}};o.TilemapLayer.prototype.renderDeltaScroll=function(t,e){var i=this._mc.scrollX;var s=this._mc.scrollY;var n=this.canvas.width;var o=this.canvas.height;var a=this._mc.tileWidth;var r=this._mc.tileHeight;var h=0;var l=-a;var c=0;var u=-r;if(t<0){h=n+t;l=n-1;}else if(t>0){l=t;}if(e<0){c=o+e;u=o-1;}else if(e>0){u=e;}this.shiftCanvas(this.context,t,e);h=Math.floor((h+i)/a);l=Math.floor((l+i)/a);c=Math.floor((c+s)/r);u=Math.floor((u+s)/r);if(h<=l){this.context.clearRect(h*a-i,0,(l-h+1)*a,o);var d=Math.floor((0+s)/r);var p=Math.floor((o-1+s)/r);this.renderRegion(i,s,h,d,l,p);}if(c<=u){this.context.clearRect(0,c*r-s,n,(u-c+1)*r);var f=Math.floor((0+i)/a);var y=Math.floor((n-1+i)/a);this.renderRegion(i,s,f,c,y,u);}};o.TilemapLayer.prototype.renderFull=function(){var t=this._mc.scrollX;var e=this._mc.scrollY;var i=this.canvas.width;var s=this.canvas.height;var n=this._mc.tileWidth;var o=this._mc.tileHeight;var a=Math.floor(t/n);var r=Math.floor((i-1+t)/n);var h=Math.floor(e/o);var l=Math.floor((s-1+e)/o);this.context.clearRect(0,0,i,s);this.renderRegion(t,e,a,h,r,l);};o.TilemapLayer.prototype.render=function(){var t=false;if(this.visible){if(this.dirty||this.layer.dirty){this.layer.dirty=false;t=true;}var e=this.canvas.width;var i=this.canvas.height;var s=this._scrollX|0;var n=this._scrollY|0;var o=this._mc;var a=o.scrollX-s;var r=o.scrollY-n;if(t||a!==0||r!==0||o.renderWidth!==e||o.renderHeight!==i){this.context.save();o.scrollX=s;o.scrollY=n;if(o.renderWidth!==e||o.renderHeight!==i){o.renderWidth=e;o.renderHeight=i;}if(this.debug){this.context.globalAlpha=this.debugSettings.debugAlpha;if(this.debugSettings.forceFullRedraw){t=true;}}if(!t&&this.renderSettings.enableScrollDelta&&Math.abs(a)+Math.abs(r)<Math.min(e,i)){this.renderDeltaScroll(a,r);}else{this.renderFull();}if(this.debug){this.context.globalAlpha=1;this.renderDebug();}this.texture.baseTexture.dirty();this.dirty=false;this.context.restore();return true;}}};o.TilemapLayer.prototype.renderDebug=function(){var t=this._mc.scrollX;var e=this._mc.scrollY;var i=this.context;var s=this.canvas.width;var n=this.canvas.height;var o=this.layer.width;var a=this.layer.height;var r=this._mc.tileWidth;var h=this._mc.tileHeight;var l=Math.floor(t/r);var c=Math.floor((s-1+t)/r);var u=Math.floor(e/h);var d=Math.floor((n-1+e)/h);var p=l*r-t;var f=u*h-e;var y=(l+o*1048576)%o;var g=(u+a*1048576)%a;var m;var v;var b;var x;var _;var w;i.strokeStyle=this.debugSettings.facingEdgeStroke;x=g;w=d-u;v=f;for(;w>=0;x++,w--,v+=h){if(x>=a){x-=a;}var C=this.layer.data[x];b=y;_=c-l;m=p;for(;_>=0;b++,_--,m+=r){if(b>=o){b-=o;}var P=C[b];if(!!P&&!(P.index<0)&&!!P.collides){if(this.debugSettings.collidingTileOverfill){i.fillStyle=this.debugSettings.collidingTileOverfill;i.fillRect(m,v,this._mc.cw,this._mc.ch);}if(this.debugSettings.facingEdgeStroke){i.beginPath();if(P.faceTop){i.moveTo(m,v);i.lineTo(m+this._mc.cw,v);}if(P.faceBottom){i.moveTo(m,v+this._mc.ch);i.lineTo(m+this._mc.cw,v+this._mc.ch);}if(P.faceLeft){i.moveTo(m,v);i.lineTo(m,v+this._mc.ch);}if(P.faceRight){i.moveTo(m+this._mc.cw,v);i.lineTo(m+this._mc.cw,v+this._mc.ch);}i.closePath();i.stroke();}}}}};Object.defineProperty(o.TilemapLayer.prototype,"wrap",{get:function get(){return this._wrap;},set:function set(t){this._wrap=t;this.dirty=true;}});Object.defineProperty(o.TilemapLayer.prototype,"scrollX",{get:function get(){return this._scrollX;},set:function set(t){this._scrollX=t;}});Object.defineProperty(o.TilemapLayer.prototype,"scrollY",{get:function get(){return this._scrollY;},set:function set(t){this._scrollY=t;}});Object.defineProperty(o.TilemapLayer.prototype,"collisionWidth",{get:function get(){return this._mc.cw;},set:function set(t){this._mc.cw=t|0;this.dirty=true;}});Object.defineProperty(o.TilemapLayer.prototype,"collisionHeight",{get:function get(){return this._mc.ch;},set:function set(t){this._mc.ch=t|0;this.dirty=true;}});o.TilemapParser={INSERT_NULL:false,parse:function parse(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:32;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:32;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:10;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:10;if(e===undefined){return this.getEmptyData();}if(e===null){return this.getEmptyData(i,s,n,a);}var r=t.cache.getTilemapData(e);if(r){if(r.format===o.Tilemap.CSV){return this.parseCSV(e,r.data,i,s);}if(!r.format||r.format===o.Tilemap.TILED_JSON){return this.parseTiledJSON(r.data);}}},parseCSV:function parseCSV(t,e,i,s){var n=this.getEmptyData();e=e.trim();var a=[];for(var r=e.split("\\n"),h=r.length,l=0,c=0;c<r.length;c++){a[c]=[];for(var u=r[c].split(","),d=0;d<u.length;d++){a[c][d]=new o.Tile(n.layers[0],parseInt(u[d],10),d,c,i,s);}if(l===0){l=u.length;}}n.format=o.Tilemap.CSV;n.name=t;n.width=l;n.height=h;n.tileWidth=i;n.tileHeight=s;n.widthInPixels=l*i;n.heightInPixels=h*s;n.layers[0].width=l;n.layers[0].height=h;n.layers[0].widthInPixels=n.widthInPixels;n.layers[0].heightInPixels=n.heightInPixels;n.layers[0].data=a;return n;},getEmptyData:function getEmptyData(t,e,i,s){return{width:i!==undefined&&i!==null?i:0,height:s!==undefined&&s!==null?s:0,tileWidth:t!==undefined&&t!==null?t:0,tileHeight:e!==undefined&&e!==null?e:0,orientation:"orthogonal",version:"1",properties:{},widthInPixels:0,heightInPixels:0,layers:[{name:"layer",x:0,y:0,width:0,height:0,widthInPixels:0,heightInPixels:0,alpha:1,visible:true,properties:{},indexes:[],callbacks:[],bodies:[],data:[]}],images:[],objects:{},collision:{},tilesets:[],tiles:[]};},parseTiledJSON:function parseTiledJSON(t){function e(t,e){var i={};for(var s in e){var n=e[s];if(t[n]!==undefined){i[n]=t[n];}}return i;}if(t.orientation!=="orthogonal"){return null;}var i={width:t.width,height:t.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,orientation:t.orientation,format:o.Tilemap.TILED_JSON,version:t.version,properties:t.properties,widthInPixels:t.width*t.tilewidth,heightInPixels:t.height*t.tileheight};var s=[];for(var n=0;n<t.layers.length;n++){if(t.layers[n].type==="tilelayer"){var a=t.layers[n];if(!a.compression&&a.encoding&&a.encoding==="base64"){var r=window.atob(a.data);for(var h=r.length,l=new Array(h),c=0;c<h;c+=4){l[c/4]=(r.charCodeAt(c)|r.charCodeAt(c+1)<<8|r.charCodeAt(c+2)<<16|r.charCodeAt(c+3)<<24)>>>0;}a.data=l;delete a.encoding;}else if(a.compression){continue;}var u={name:a.name,x:a.x,y:a.y,width:a.width,height:a.height,widthInPixels:a.width*t.tilewidth,heightInPixels:a.height*t.tileheight,alpha:a.opacity,visible:a.visible,properties:{},indexes:[],callbacks:[],bodies:[]};if(a.properties){u.properties=a.properties;}var d=0;var p=[];var f=[];var y;var g;var m;var v;for(var b=0,h=a.data.length;b<h;b++){y=0;g=false;v=a.data[b];m=0;if(v>536870912){if(v>2147483648){v-=2147483648;m+=4;}if(v>1073741824){v-=1073741824;m+=2;}if(v>536870912){v-=536870912;m+=1;}switch(m){case 5:y=Math.PI/2;break;case 6:y=Math.PI;break;case 3:y=Math.PI*3/2;break;case 4:y=0;g=true;break;case 7:y=Math.PI/2;g=true;break;case 2:y=Math.PI;g=true;break;case 1:y=Math.PI*3/2;g=true;}}if(v>0){var x=new o.Tile(u,v,d,f.length,t.tilewidth,t.tileheight);x.rotation=y;x.flipped=g;if(m!==0){x.flippedVal=m;}p.push(x);}else if(o.TilemapParser.INSERT_NULL){p.push(null);}else{p.push(new o.Tile(u,-1,d,f.length,t.tilewidth,t.tileheight));}d++;if(d===a.width){f.push(p);d=0;p=[];}}u.data=f;s.push(u);}}i.layers=s;var _=[];for(var n=0;n<t.layers.length;n++){if(t.layers[n].type==="imagelayer"){var w=t.layers[n];var C={name:w.name,image:w.image,x:w.x,y:w.y,alpha:w.opacity,visible:w.visible,properties:{}};if(w.properties){C.properties=w.properties;}_.push(C);}}i.images=_;var P=[];var T=[];var S=null;for(var n=0;n<t.tilesets.length;n++){var A=t.tilesets[n];if(A.image){var E=new o.Tileset(A.name,A.firstgid,A.tilewidth,A.tileheight,A.margin,A.spacing,A.properties);if(A.tileproperties){E.tileProperties=A.tileproperties;}E.updateTileData(A.imagewidth,A.imageheight);P.push(E);}else{var I=new o.ImageCollection(A.name,A.firstgid,A.tilewidth,A.tileheight,A.margin,A.spacing,A.properties);for(var M in A.tiles){var C=A.tiles[M].image;var v=A.firstgid+parseInt(M,10);I.addImage(v,C);}T.push(I);}if(S){S.lastgid=A.firstgid-1;}S=A;}i.tilesets=P;i.imagecollections=T;var R={};var O={};for(var n=0;n<t.layers.length;n++){if(t.layers[n].type==="objectgroup"){var B=t.layers[n];R[B.name]=[];O[B.name]=[];for(var L=0,h=B.objects.length;L<h;L++){if(B.objects[L].gid){var k={gid:B.objects[L].gid,name:B.objects[L].name,type:B.objects[L].hasOwnProperty("type")?B.objects[L].type:"",x:B.objects[L].x,y:B.objects[L].y,visible:B.objects[L].visible,properties:B.objects[L].properties};if(B.objects[L].rotation){k.rotation=B.objects[L].rotation;}R[B.name].push(k);}else if(B.objects[L].polyline){var k={name:B.objects[L].name,type:B.objects[L].type,x:B.objects[L].x,y:B.objects[L].y,width:B.objects[L].width,height:B.objects[L].height,visible:B.objects[L].visible,properties:B.objects[L].properties};if(B.objects[L].rotation){k.rotation=B.objects[L].rotation;}k.polyline=[];for(var D=0;D<B.objects[L].polyline.length;D++){k.polyline.push([B.objects[L].polyline[D].x,B.objects[L].polyline[D].y]);}O[B.name].push(k);R[B.name].push(k);}else if(B.objects[L].polygon){var k=e(B.objects[L],["name","type","x","y","visible","rotation","properties"]);k.polygon=[];for(var D=0;D<B.objects[L].polygon.length;D++){k.polygon.push([B.objects[L].polygon[D].x,B.objects[L].polygon[D].y]);}R[B.name].push(k);}else if(B.objects[L].ellipse){var k=e(B.objects[L],["name","type","ellipse","x","y","width","height","visible","rotation","properties"]);R[B.name].push(k);}else{var k=e(B.objects[L],["name","type","x","y","width","height","visible","rotation","properties"]);k.rectangle=true;R[B.name].push(k);}}}}i.objects=R;i.collision=O;i.tiles=[];for(var n=0;n<i.tilesets.length;n++){for(var A=i.tilesets[n],d=A.tileMargin,F=A.tileMargin,G=0,U=0,N=0,b=A.firstgid;b<A.firstgid+A.total&&(i.tiles[b]=[d,F,n],d+=A.tileWidth+A.tileSpacing,++G!==A.total)&&(++U!==A.columns||(d=A.tileMargin,F+=A.tileHeight+A.tileSpacing,U=0,++N!==A.rows));b++);}var u;var x;var j;var A;for(var n=0;n<i.layers.length;n++){u=i.layers[n];A=null;for(var c=0;c<u.data.length;c++){p=u.data[c];for(var W=0;W<p.length;W++){if((x=p[W])!==null&&!(x.index<0)){j=i.tiles[x.index][2];A=i.tilesets[j];if(A.tileProperties&&A.tileProperties[x.index-A.firstgid]){x.properties=o.Utils.mixin(A.tileProperties[x.index-A.firstgid],x.properties);}}}}}return i;}};o.Tileset=function(t,e,i,s,n,o,a){if(i===undefined||i<=0){i=32;}if(s===undefined||s<=0){s=32;}if(n===undefined){n=0;}if(o===undefined){o=0;}this.name=t;this.firstgid=e|0;this.tileWidth=i|0;this.tileHeight=s|0;this.tileMargin=n|0;this.tileSpacing=o|0;this.properties=a||{};this.image=null;this.rows=0;this.columns=0;this.total=0;this.drawCoords=[];};o.Tileset.prototype={draw:function draw(t,e,i,s){var n=s-this.firstgid<<1;if(n>=0&&n+1<this.drawCoords.length){t.drawImage(this.image,this.drawCoords[n],this.drawCoords[n+1],this.tileWidth,this.tileHeight,e,i,this.tileWidth,this.tileHeight);}},containsTileIndex:function containsTileIndex(t){return t>=this.firstgid&&t<this.firstgid+this.total;},setImage:function setImage(t){this.image=t;this.updateTileData(t.width,t.height);},setSpacing:function setSpacing(t,e){this.tileMargin=t|0;this.tileSpacing=e|0;if(this.image){this.updateTileData(this.image.width,this.image.height);}},updateTileData:function updateTileData(t,e){var i=(e-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing);var s=(t-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);i=Math.floor(i);s=Math.floor(s);if(!this.rows||this.rows===i){if(this.columns){this.columns;}}this.rows=i;this.columns=s;this.total=i*s;this.drawCoords.length=0;var n=this.tileMargin;var o=this.tileMargin;for(var a=0;a<this.rows;a++){for(var r=0;r<this.columns;r++){this.drawCoords.push(n);this.drawCoords.push(o);n+=this.tileWidth+this.tileSpacing;}n=this.tileMargin;o+=this.tileHeight+this.tileSpacing;}}};o.Tileset.prototype.constructor=o.Tileset;o.Particle=function(t,e,i,s,n){o.Sprite.call(this,t,e,i,s,n);this.autoScale=false;this.scaleData=null;this._s=0;this.autoAlpha=false;this.alphaData=null;this._a=0;};o.Particle.prototype=Object.create(o.Sprite.prototype);o.Particle.prototype.constructor=o.Particle;o.Particle.prototype.update=function(){if(this.autoScale){this._s--;if(this._s){this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y);}else{this.autoScale=false;}}if(this.autoAlpha){this._a--;if(this._a){this.alpha=this.alphaData[this._a].v;}else{this.autoAlpha=false;}}};o.Particle.prototype.onEmit=function(){};o.Particle.prototype.setAlphaData=function(t){this.alphaData=t;this._a=t.length-1;this.alpha=this.alphaData[this._a].v;this.autoAlpha=true;};o.Particle.prototype.setScaleData=function(t){this.scaleData=t;this._s=t.length-1;this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y);this.autoScale=true;};o.Particle.prototype.reset=function(t,e,i){o.Component.Reset.prototype.reset.call(this,t,e,i);this.alpha=1;this.scale.set(1);this.autoScale=false;this.autoAlpha=false;return this;};o.Particles=function(t){this.game=t;this.emitters={};this.ID=0;};o.Particles.prototype={add:function add(t){this.emitters[t.name]=t;return t;},remove:function remove(t){delete this.emitters[t.name];},update:function update(){for(var t in this.emitters){if(this.emitters[t].exists){this.emitters[t].update();}}}};o.Particles.prototype.constructor=o.Particles;o.Particles.Arcade={};o.Particles.Arcade.Emitter=function(t,e,i,s){this.maxParticles=s||50;o.Group.call(this,t);this.name="emitter"+this.game.particles.ID++;this.type=o.EMITTER;this.physicsType=o.GROUP;this.area=new o.Rectangle(e,i,1,1);this.minParticleSpeed=new o.Point(-100,-100);this.maxParticleSpeed=new o.Point(100,100);this.minParticleScale=1;this.maxParticleScale=1;this.scaleData=null;this.minRotation=-360;this.maxRotation=360;this.minParticleAlpha=1;this.maxParticleAlpha=1;this.alphaData=null;this.gravity=100;this.particleClass=o.Particle;this.particleDrag=new o.Point();this.angularDrag=0;this.frequency=100;this.lifespan=2000;this.bounce=new o.Point();this.on=false;this.particleAnchor=new o.Point(0.5,0.5);this.blendMode=o.blendModes.NORMAL;this.emitX=e;this.emitY=i;this.autoScale=false;this.autoAlpha=false;this.particleBringToTop=false;this.particleSendToBack=false;this._minParticleScale=new o.Point(1,1);this._maxParticleScale=new o.Point(1,1);this._quantity=0;this._timer=0;this._counter=0;this._flowQuantity=0;this._flowTotal=0;this._explode=true;this._frames=null;};o.Particles.Arcade.Emitter.prototype=Object.create(o.Group.prototype);o.Particles.Arcade.Emitter.prototype.constructor=o.Particles.Arcade.Emitter;o.Particles.Arcade.Emitter.prototype.update=function(){if(this.on&&this.game.time.time>=this._timer){this._timer=this.game.time.time+this.frequency*this.game.time.slowMotion;if(this._flowTotal!==0){if(this._flowQuantity>0){for(var t=0;t<this._flowQuantity;t++){if(this.emitParticle()&&(this._counter++,this._flowTotal!==-1&&this._counter>=this._flowTotal)){this.on=false;break;}}}else if(this.emitParticle()){this._counter++;if(this._flowTotal!==-1&&this._counter>=this._flowTotal){this.on=false;}}}else if(this.emitParticle()){this._counter++;if(this._quantity>0&&this._counter>=this._quantity){this.on=false;}}}for(var t=this.children.length;t--;){if(this.children[t].exists){this.children[t].update();}}};o.Particles.Arcade.Emitter.prototype.makeParticles=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.maxParticles;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var o;var a=0;var r=t;var h=e;this._frames=e;if(i>this.maxParticles){this.maxParticles=i;}while(a<i){if(Array.isArray(t)){r=this.game.rnd.pick(t);}if(Array.isArray(e)){h=this.game.rnd.pick(e);}o=new this.particleClass(this.game,0,0,r,h);this.game.physics.arcade.enable(o,false);if(s){o.body.checkCollision.any=true;o.body.checkCollision.none=false;}else{o.body.checkCollision.none=true;}o.body.collideWorldBounds=n;o.body.skipQuadTree=true;o.exists=false;o.visible=false;o.anchor.copyFrom(this.particleAnchor);this.add(o);a++;}return this;};o.Particles.Arcade.Emitter.prototype.kill=function(){this.on=false;this.alive=false;this.exists=false;return this;};o.Particles.Arcade.Emitter.prototype.revive=function(){this.alive=true;this.exists=true;return this;};o.Particles.Arcade.Emitter.prototype.explode=function(t,e){this._flowTotal=0;this.start(true,t,0,e,false);return this;};o.Particles.Arcade.Emitter.prototype.flow=function(t,e,i,s,n){if(i===undefined||i===0){i=1;}if(s===undefined){s=-1;}if(n===undefined){n=true;}if(i>this.maxParticles){i=this.maxParticles;}this._counter=0;this._flowQuantity=i;this._flowTotal=s;if(n){this.start(true,t,e,i);this._counter+=i;this.on=true;this._timer=this.game.time.time+e*this.game.time.slowMotion;}else{this.start(false,t,e,i);}return this;};o.Particles.Arcade.Emitter.prototype.start=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2?arguments[2]:undefined;var s=arguments.length>3?arguments[3]:undefined;var n=arguments.length>4?arguments[4]:undefined;if(i===undefined||i===null){i=250;}if(s===undefined){s=0;}if(n===undefined){n=false;}if(s>this.maxParticles){s=this.maxParticles;}this.revive();this.visible=true;this.lifespan=e;this.frequency=i;if(t||n){for(var o=0;o<s;o++){this.emitParticle();}}else{this.on=true;this._quantity=s;this._counter=0;this._timer=this.game.time.time+i*this.game.time.slowMotion;}return this;};o.Particles.Arcade.Emitter.prototype.emitParticle=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=arguments.length>2?arguments[2]:undefined;var s=arguments.length>3?arguments[3]:undefined;var n=this.getFirstExists(false);if(n===null){return false;}var o=this.game.rnd;if(i!==undefined&&s!==undefined){n.loadTexture(i,s);}else if(i!==undefined){n.loadTexture(i);}var a=this.emitX;var r=this.emitY;if(t!==null){a=t;}else if(this.width>1){a=o.between(this.left,this.right);}if(e!==null){r=e;}else if(this.height>1){r=o.between(this.top,this.bottom);}n.reset(a,r);n.angle=0;n.lifespan=this.lifespan;if(this.particleBringToTop){this.bringToTop(n);}else if(this.particleSendToBack){this.sendToBack(n);}if(this.autoScale){n.setScaleData(this.scaleData);}else if(this.minParticleScale!==1||this.maxParticleScale!==1){n.scale.set(o.realInRange(this.minParticleScale,this.maxParticleScale));}else if(this._minParticleScale.x!==this._maxParticleScale.x||this._minParticleScale.y!==this._maxParticleScale.y){n.scale.set(o.realInRange(this._minParticleScale.x,this._maxParticleScale.x),o.realInRange(this._minParticleScale.y,this._maxParticleScale.y));}if(s===undefined){if(Array.isArray(this._frames)){n.frame=this.game.rnd.pick(this._frames);}else{n.frame=this._frames;}}if(this.autoAlpha){n.setAlphaData(this.alphaData);}else{n.alpha=o.realInRange(this.minParticleAlpha,this.maxParticleAlpha);}n.blendMode=this.blendMode;var h=n.body;h.updateBounds();h.bounce.copyFrom(this.bounce);h.drag.copyFrom(this.particleDrag);h.velocity.x=o.between(this.minParticleSpeed.x,this.maxParticleSpeed.x);h.velocity.y=o.between(this.minParticleSpeed.y,this.maxParticleSpeed.y);h.angularVelocity=o.between(this.minRotation,this.maxRotation);h.gravity.y=this.gravity;h.angularDrag=this.angularDrag;n.onEmit();return true;};o.Particles.Arcade.Emitter.prototype.destroy=function(){this.game.particles.remove(this);o.Group.prototype.destroy.call(this,true,false);};o.Particles.Arcade.Emitter.prototype.setSize=function(t,e){this.area.width=t;this.area.height=e;return this;};o.Particles.Arcade.Emitter.prototype.setXSpeed=function(t,e){t=t||0;e=e||0;this.minParticleSpeed.x=t;this.maxParticleSpeed.x=e;return this;};o.Particles.Arcade.Emitter.prototype.setYSpeed=function(t,e){t=t||0;e=e||0;this.minParticleSpeed.y=t;this.maxParticleSpeed.y=e;return this;};o.Particles.Arcade.Emitter.prototype.setRotation=function(t,e){t=t||0;e=e||0;this.minRotation=t;this.maxRotation=e;return this;};o.Particles.Arcade.Emitter.prototype.setAlpha=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:o.Easing.Linear.None;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;this.minParticleAlpha=t;this.maxParticleAlpha=e;this.autoAlpha=false;if(i>0&&t!==e){var a={v:t};var r=this.game.make.tween(a).to({v:e},i,s);r.yoyo(n);this.alphaData=r.generateData(60);this.alphaData.reverse();this.autoAlpha=true;}return this;};o.Particles.Arcade.Emitter.prototype.setScale=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:o.Easing.Linear.None;var r=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;this.minParticleScale=1;this.maxParticleScale=1;this._minParticleScale.set(t,i);this._maxParticleScale.set(e,s);this.autoScale=false;if(n>0&&(t!==e||i!==s)){var h={x:t,y:i};var l=this.game.make.tween(h).to({x:e,y:s},n,a);l.yoyo(r);this.scaleData=l.generateData(60);this.scaleData.reverse();this.autoScale=true;}return this;};o.Particles.Arcade.Emitter.prototype.at=function(t){if(t.center){this.emitX=t.center.x;this.emitY=t.center.y;}else{this.emitX=t.world.x+t.anchor.x*t.width;this.emitY=t.world.y+t.anchor.y*t.height;}return this;};Object.defineProperty(o.Particles.Arcade.Emitter.prototype,"width",{get:function get(){return this.area.width;},set:function set(t){this.area.width=t;}});Object.defineProperty(o.Particles.Arcade.Emitter.prototype,"height",{get:function get(){return this.area.height;},set:function set(t){this.area.height=t;}});Object.defineProperty(o.Particles.Arcade.Emitter.prototype,"x",{get:function get(){return this.emitX;},set:function set(t){this.emitX=t;}});Object.defineProperty(o.Particles.Arcade.Emitter.prototype,"y",{get:function get(){return this.emitY;},set:function set(t){this.emitY=t;}});Object.defineProperty(o.Particles.Arcade.Emitter.prototype,"left",{get:function get(){return Math.floor(this.x-this.area.width/2);}});Object.defineProperty(o.Particles.Arcade.Emitter.prototype,"right",{get:function get(){return Math.floor(this.x+this.area.width/2);}});Object.defineProperty(o.Particles.Arcade.Emitter.prototype,"top",{get:function get(){return Math.floor(this.y-this.area.height/2);}});Object.defineProperty(o.Particles.Arcade.Emitter.prototype,"bottom",{get:function get(){return Math.floor(this.y+this.area.height/2);}});o.Weapon=function(t,e){o.Plugin.call(this,t,e);this.bullets=null;this.autoExpandBulletsGroup=false;this.autofire=false;this.shots=0;this.fireLimit=0;this.fireRate=100;this.fireRateVariance=0;this.fireFrom=new o.Rectangle(0,0,1,1);this.fireAngle=o.ANGLE_UP;this.bulletInheritSpriteSpeed=false;this.bulletAnimation="";this.bulletFrameRandom=false;this.bulletFrameCycle=false;this.bulletWorldWrap=false;this.bulletWorldWrapPadding=0;this.bulletAngleOffset=0;this.bulletAngleVariance=0;this.bulletSpeed=200;this.bulletSpeedVariance=0;this.bulletLifespan=0;this.bulletKillDistance=0;this.bulletGravity=new o.Point(0,0);this.bulletRotateToVelocity=false;this.bulletKey="";this.bulletFrame="";this._bulletClass=o.Bullet;this._bulletCollideWorldBounds=false;this._bulletKillType=o.Weapon.KILL_WORLD_BOUNDS;this._data={customBody:false,width:0,height:0,offsetX:0,offsetY:0};this.bounds=new o.Rectangle();this.bulletBounds=t.world.bounds;this.bulletFrames=[];this.bulletFrameIndex=0;this.anims={};this.onFire=new o.Signal();this.onKill=new o.Signal();this.onFireLimit=new o.Signal();this.trackedSprite=null;this.trackedPointer=null;this.trackRotation=false;this.trackOffset=new o.Point();this._nextFire=0;this._rotatedPoint=new o.Point();};o.Weapon.prototype=Object.create(o.Plugin.prototype);o.Weapon.prototype.constructor=o.Weapon;o.Weapon.KILL_NEVER=0;o.Weapon.KILL_LIFESPAN=1;o.Weapon.KILL_DISTANCE=2;o.Weapon.KILL_WEAPON_BOUNDS=3;o.Weapon.KILL_CAMERA_BOUNDS=4;o.Weapon.KILL_WORLD_BOUNDS=5;o.Weapon.KILL_STATIC_BOUNDS=6;o.Weapon.prototype.createBullets=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var e=arguments.length>1?arguments[1]:undefined;var i=arguments.length>2?arguments[2]:undefined;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:this.game.world;if(!this.bullets){this.bullets=this.game.add.physicsGroup(o.Physics.ARCADE,s);this.bullets.classType=this._bulletClass;}if(t!==0){if(t===-1){this.autoExpandBulletsGroup=true;t=1;}this.bullets.createMultiple(t,e,i);this.bullets.setAll("data.bulletManager",this);this.bulletKey=e;this.bulletFrame=i;}return this;};o.Weapon.prototype.forEach=function(t,e){this.bullets.forEachExists(t,e,arguments);return this;};o.Weapon.prototype.pauseAll=function(){this.bullets.setAll("body.enable",false);return this;};o.Weapon.prototype.resumeAll=function(){this.bullets.setAll("body.enable",true);return this;};o.Weapon.prototype.killAll=function(){this.bullets.callAllExists("kill",true);this.bullets.setAll("body.enable",true);return this;};o.Weapon.prototype.resetShots=function(t){this.shots=0;if(t!==undefined){this.fireLimit=t;}return this;};o.Weapon.prototype.destroy=function(){this.parent.remove(this,false);this.bullets.destroy();this.game=null;this.parent=null;this.active=false;this.visible=false;};o.Weapon.prototype.update=function(){if(this._bulletKillType===o.Weapon.KILL_WEAPON_BOUNDS){if(this.trackedSprite){this.trackedSprite.updateTransform();this.bounds.centerOn(this.trackedSprite.worldPosition.x,this.trackedSprite.worldPosition.y);}else if(this.trackedPointer){this.bounds.centerOn(this.trackedPointer.worldX,this.trackedPointer.worldY);}}if(this.autofire){this.fire();}};o.Weapon.prototype.trackSprite=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;this.trackedPointer=null;this.trackedSprite=t;this.trackRotation=s;this.trackOffset.set(e,i);return this;};o.Weapon.prototype.trackPointer=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.game.input.activePointer;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this.trackedPointer=t;this.trackedSprite=null;this.trackRotation=false;this.trackOffset.set(e,i);return this;};o.Weapon.prototype.fire=function(t,e,i){if(this.game.time.now<this._nextFire||this.fireLimit>0&&this.shots===this.fireLimit){return false;}var s=this.bulletSpeed;if(this.bulletSpeedVariance!==0){s+=o.Math.between(-this.bulletSpeedVariance,this.bulletSpeedVariance);}if(t){if(this.fireFrom.width>1){this.fireFrom.centerOn(t.x,t.y);}else{this.fireFrom.x=t.x;this.fireFrom.y=t.y;}}else if(this.trackedSprite){if(this.trackRotation){this._rotatedPoint.set(this.trackedSprite.world.x+this.trackOffset.x,this.trackedSprite.world.y+this.trackOffset.y);this._rotatedPoint.rotate(this.trackedSprite.world.x,this.trackedSprite.world.y,this.trackedSprite.rotation);if(this.fireFrom.width>1){this.fireFrom.centerOn(this._rotatedPoint.x,this._rotatedPoint.y);}else{this.fireFrom.x=this._rotatedPoint.x;this.fireFrom.y=this._rotatedPoint.y;}}else if(this.fireFrom.width>1){this.fireFrom.centerOn(this.trackedSprite.world.x+this.trackOffset.x,this.trackedSprite.world.y+this.trackOffset.y);}else{this.fireFrom.x=this.trackedSprite.world.x+this.trackOffset.x;this.fireFrom.y=this.trackedSprite.world.y+this.trackOffset.y;}if(this.bulletInheritSpriteSpeed){s+=this.trackedSprite.body.speed;}}else if(this.trackedPointer){if(this.fireFrom.width>1){this.fireFrom.centerOn(this.trackedPointer.world.x+this.trackOffset.x,this.trackedPointer.world.y+this.trackOffset.y);}else{this.fireFrom.x=this.trackedPointer.world.x+this.trackOffset.x;this.fireFrom.y=this.trackedPointer.world.y+this.trackOffset.y;}}var n=this.fireFrom.width>1?this.fireFrom.randomX:this.fireFrom.x;var a=this.fireFrom.height>1?this.fireFrom.randomY:this.fireFrom.y;var r=this.trackRotation?this.trackedSprite.angle:this.fireAngle;if(e!==undefined&&i!==undefined){r=this.game.math.radToDeg(Math.atan2(i-a,e-n));}if(this.bulletAngleVariance!==0){r+=o.Math.between(-this.bulletAngleVariance,this.bulletAngleVariance);}var h=0;var l=0;if(r===0||r===180){h=Math.cos(this.game.math.degToRad(r))*s;}else if(r===90||r===270){l=Math.sin(this.game.math.degToRad(r))*s;}else{h=Math.cos(this.game.math.degToRad(r))*s;l=Math.sin(this.game.math.degToRad(r))*s;}var c=null;if(this.autoExpandBulletsGroup){c=this.bullets.getFirstExists(false,true,n,a,this.bulletKey,this.bulletFrame);c.data.bulletManager=this;}else{c=this.bullets.getFirstExists(false);}if(c){c.reset(n,a);c.data.fromX=n;c.data.fromY=a;c.data.killType=this.bulletKillType;c.data.killDistance=this.bulletKillDistance;c.data.rotateToVelocity=this.bulletRotateToVelocity;if(this.bulletKillType===o.Weapon.KILL_LIFESPAN){c.lifespan=this.bulletLifespan;}c.angle=r+this.bulletAngleOffset;if(this.bulletAnimation!==""){if(c.animations.getAnimation(this.bulletAnimation)===null){var u=this.anims[this.bulletAnimation];c.animations.add(u.name,u.frames,u.frameRate,u.loop,u.useNumericIndex);}c.animations.play(this.bulletAnimation);}else if(this.bulletFrameCycle){c.frame=this.bulletFrames[this.bulletFrameIndex];if(++this.bulletFrameIndex>=this.bulletFrames.length){this.bulletFrameIndex=0;}}else if(this.bulletFrameRandom){c.frame=this.bulletFrames[Math.floor(Math.random()*this.bulletFrames.length)];}if(c.data.bodyDirty){if(this._data.customBody){c.body.setSize(this._data.width,this._data.height,this._data.offsetX,this._data.offsetY);}c.body.collideWorldBounds=this.bulletCollideWorldBounds;c.data.bodyDirty=false;}c.body.velocity.set(h,l);c.body.gravity.set(this.bulletGravity.x,this.bulletGravity.y);if(this.bulletSpeedVariance!==0){var d=this.fireRate;d+=o.Math.between(-this.fireRateVariance,this.fireRateVariance);if(d<0){d=0;}this._nextFire=this.game.time.now+d;}else{this._nextFire=this.game.time.now+this.fireRate;}this.shots++;this.onFire.dispatch(c,this,s);if(this.fireLimit>0&&this.shots===this.fireLimit){this.onFireLimit.dispatch(this,this.fireLimit);}}return c;};o.Weapon.prototype.fireAtPointer=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.game.input.activePointer;return this.fire(null,t.worldX,t.worldY);};o.Weapon.prototype.fireAtSprite=function(t){return this.fire(null,t.world.x,t.world.y);};o.Weapon.prototype.fireAtXY=function(t,e){return this.fire(null,t,e);};o.Weapon.prototype.setBulletBodyOffset=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;this._data.customBody=true;this._data.width=t;this._data.height=e;this._data.offsetX=i;this._data.offsetY=s;this.bullets.callAll("body.setSize","body",t,e,i,s);this.bullets.setAll("data.bodyDirty",false);return this;};o.Weapon.prototype.setBulletFrames=function(t,e){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;this.bulletFrames=o.ArrayUtils.numberArray(t,e);this.bulletFrameIndex=0;this.bulletFrameCycle=i;this.bulletFrameRandom=s;return this;};o.Weapon.prototype.addBulletAnimation=function(t,e,i,s,n){this.anims[t]={name:t,frames:e,frameRate:i,loop:s,useNumericIndex:n};this.bullets.callAll("animations.add","animations",t,e,i,s,n);this.bulletAnimation=t;return this;};o.Weapon.prototype.debug=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:16;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:32;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;this.game.debug.text("Weapon Plugin",t,e);this.game.debug.text("Bullets Alive: "+this.bullets.total+" - Total: "+this.bullets.length,t,e+24);if(i){this.bullets.forEachExists(this.game.debug.body,this.game.debug,"rgba(255, 0, 255, 0.8)");}};Object.defineProperty(o.Weapon.prototype,"bulletClass",{get:function get(){return this._bulletClass;},set:function set(t){this._bulletClass=t;this.bullets.classType=this._bulletClass;}});Object.defineProperty(o.Weapon.prototype,"bulletKillType",{get:function get(){return this._bulletKillType;},set:function set(t){switch(t){case o.Weapon.KILL_STATIC_BOUNDS:case o.Weapon.KILL_WEAPON_BOUNDS:this.bulletBounds=this.bounds;break;case o.Weapon.KILL_CAMERA_BOUNDS:this.bulletBounds=this.game.camera.view;break;case o.Weapon.KILL_WORLD_BOUNDS:this.bulletBounds=this.game.world.bounds;}this._bulletKillType=t;}});Object.defineProperty(o.Weapon.prototype,"bulletCollideWorldBounds",{get:function get(){return this._bulletCollideWorldBounds;},set:function set(t){this._bulletCollideWorldBounds=t;this.bullets.setAll("body.collideWorldBounds",t);this.bullets.setAll("data.bodyDirty",false);}});Object.defineProperty(o.Weapon.prototype,"x",{get:function get(){return this.fireFrom.x;},set:function set(t){this.fireFrom.x=t;}});Object.defineProperty(o.Weapon.prototype,"y",{get:function get(){return this.fireFrom.y;},set:function set(t){this.fireFrom.y=t;}});o.Bullet=function(t,e,i,s,n){o.Sprite.call(this,t,e,i,s,n);this.anchor.set(0.5);this.data={bulletManager:null,fromX:0,fromY:0,bodyDirty:true,rotateToVelocity:false,killType:0,killDistance:0};};o.Bullet.prototype=Object.create(o.Sprite.prototype);o.Bullet.prototype.constructor=o.Bullet;o.Bullet.prototype.kill=function(){this.alive=false;this.exists=false;this.visible=false;this.data.bulletManager.onKill.dispatch(this);return this;};o.Bullet.prototype.update=function(){if(this.exists){if(this.data.killType>o.Weapon.KILL_LIFESPAN){if(this.data.killType===o.Weapon.KILL_DISTANCE){if(this.game.physics.arcade.distanceToXY(this,this.data.fromX,this.data.fromY,true)>this.data.killDistance){this.kill();}}else if(!this.data.bulletManager.bulletBounds.intersects(this)){this.kill();}}if(this.data.rotateToVelocity){this.rotation=Math.atan2(this.body.velocity.y,this.body.velocity.x);}if(this.data.bulletManager.bulletWorldWrap){this.game.world.wrap(this,this.data.bulletManager.bulletWorldWrapPadding);}}};o.Video=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this.game=t;this.key=e;this.width=0;this.height=0;this.type=o.VIDEO;this.disableTextureUpload=false;this.touchLocked=false;this.onPlay=new o.Signal();this.onChangeSource=new o.Signal();this.onComplete=new o.Signal();this.onAccess=new o.Signal();this.onError=new o.Signal();this.onTimeout=new o.Signal();this.timeout=15000;this._timeOutID=null;this.video=null;this.videoStream=null;this.isStreaming=false;this.retryLimit=20;this.retry=0;this.retryInterval=500;this._retryID=null;this._codeMuted=false;this._muted=false;this._codePaused=false;this._paused=false;this._pending=false;this._autoplay=false;this._endCallback=null;this._playCallback=null;if(e&&this.game.cache.checkVideoKey(e)){var s=this.game.cache.getVideo(e);if(s.isBlob){this.createVideoFromBlob(s.data);}else{this.video=s.data;}this.width=this.video.videoWidth;this.height=this.video.videoHeight;}else if(i){this.createVideoFromURL(i,false);}if(this.video&&!i){this.baseTexture=new PIXI.BaseTexture(this.video);this.baseTexture.forceLoaded(this.width,this.height);}else{this.baseTexture=new PIXI.BaseTexture(o.Cache.DEFAULT.baseTexture.source);this.baseTexture.forceLoaded(this.width,this.height);}this.texture=new PIXI.Texture(this.baseTexture);this.textureFrame=new o.Frame(0,0,0,this.width,this.height,"video");this.texture.setFrame(this.textureFrame);this.texture.valid=false;if(e!==null&&this.video){this.texture.valid=this.video.canplay;}this.snapshot=null;if(o.BitmapData){this.snapshot=new o.BitmapData(this.game,"",this.width,this.height);}if(!this.game.device.cocoonJS&&(this.game.device.iOS||this.game.device.android)||window.PhaserGlobal&&window.PhaserGlobal.fakeiOSTouchLock){this.setTouchLock();}else if(s){s.locked=false;}};o.Video.prototype={connectToMediaStream:function connectToMediaStream(t,e){if(t&&e){this.video=t;this.videoStream=e;this.isStreaming=true;this.baseTexture.source=this.video;this.updateTexture(null,this.video.videoWidth,this.video.videoHeight);this.onAccess.dispatch(this);}return this;},startMediaStream:function startMediaStream(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!this.game.device.getUserMedia){this.onError.dispatch(this,"No getUserMedia");return false;}if(this.videoStream!==null){if(this.videoStream.active){this.videoStream.active=false;}else{this.videoStream.stop();}}this.removeVideoElement();this.video=document.createElement("video");this.video.setAttribute("autoplay","autoplay");if(e!==null){this.video.width=e;}if(i!==null){this.video.height=i;}this._timeOutID=window.setTimeout(this.getUserMediaTimeout.bind(this),this.timeout);try{navigator.getUserMedia({audio:t,video:true},this.getUserMediaSuccess.bind(this),this.getUserMediaError.bind(this));}catch(t){this.getUserMediaError(t);}return this;},getUserMediaTimeout:function getUserMediaTimeout(){clearTimeout(this._timeOutID);this.onTimeout.dispatch(this);},getUserMediaError:function getUserMediaError(t){clearTimeout(this._timeOutID);this.onError.dispatch(this,t);},getUserMediaSuccess:function getUserMediaSuccess(t){clearTimeout(this._timeOutID);this.videoStream=t;if(this.video.mozSrcObject!==undefined){this.video.mozSrcObject=t;}else{this.video.src=window.URL&&window.URL.createObjectURL(t)||t;}var e=this;this.video.onloadeddata=function(){function t(){if(i>0){if(e.video.videoWidth>0){var s=e.video.videoWidth;var n=e.video.videoHeight;if(isNaN(e.video.videoHeight)){n=s/(4/3);}e.video.play();e.isStreaming=true;e.baseTexture.source=e.video;e.updateTexture(null,s,n);e.onAccess.dispatch(e);}else{window.setTimeout(t,500);}}i--;}var i=10;t();};},createVideoFromBlob:function createVideoFromBlob(t){var e=this;this.video=document.createElement("video");this.video.controls=false;this.video.setAttribute("autoplay","autoplay");this.video.addEventListener("loadeddata",function(t){e.updateTexture(t);},true);this.video.src=window.URL.createObjectURL(t);this.video.canplay=true;return this;},createVideoFromURL:function createVideoFromURL(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(this.texture){this.texture.valid=false;}this.video=document.createElement("video");this.video.controls=false;if(e){this.video.setAttribute("autoplay","autoplay");}this.video.src=t;this.video.canplay=true;this.video.load();this.retry=this.retryLimit;this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval);this.key=t;return this;},updateTexture:function updateTexture(t,e,i){var s=false;if(e===undefined||e===null){e=this.video.videoWidth;s=true;}if(i===undefined||i===null){i=this.video.videoHeight;}this.width=e;this.height=i;if(this.baseTexture.source!==this.video){this.baseTexture.source=this.video;}this.baseTexture.forceLoaded(e,i);this.texture.frame.resize(e,i);this.texture.width=e;this.texture.height=i;this.texture.valid=true;if(this.snapshot){this.snapshot.resize(e,i);}if(s&&this.key!==null){this.onChangeSource.dispatch(this,e,i);if(this._autoplay){this.video.play();this.onPlay.dispatch(this,this.loop,this.playbackRate);}}},complete:function complete(){this.onComplete.dispatch(this);},play:function play(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;if(this.game.sound.onMute){this.game.sound.onMute.add(this.setMute,this);this.game.sound.onUnMute.add(this.unsetMute,this);if(this.game.sound.mute){this.setMute();}}this.game.onPause.add(this.setPause,this);this.game.onResume.add(this.setResume,this);this._endCallback=this.complete.bind(this);this.video.addEventListener("ended",this._endCallback,true);this.video.addEventListener("webkitendfullscreen",this._endCallback,true);this.video.loop=t?"loop":"";this.video.playbackRate=e;if(this.touchLocked){this._pending=true;}else{this._pending=false;if(this.key!==null){if(this.video.readyState!==4){this.retry=this.retryLimit;this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval);}else{this._playCallback=this.playHandler.bind(this);this.video.addEventListener("playing",this._playCallback,true);}}this.video.play();this.onPlay.dispatch(this,t,e);}return this;},playHandler:function playHandler(){this.video.removeEventListener("playing",this._playCallback,true);this.updateTexture();},stop:function stop(){if(this.game.sound.onMute){this.game.sound.onMute.remove(this.setMute,this);this.game.sound.onUnMute.remove(this.unsetMute,this);}this.game.onPause.remove(this.setPause,this);this.game.onResume.remove(this.setResume,this);if(this.isStreaming){if(this.video.mozSrcObject){this.video.mozSrcObject.stop();this.video.src=null;}else{this.video.src="";if(this.videoStream.active){this.videoStream.active=false;}else if(this.videoStream.getTracks){this.videoStream.getTracks().forEach(function(t){t.stop();});}else{this.videoStream.stop();}}this.videoStream=null;this.isStreaming=false;}else{this.video.removeEventListener("ended",this._endCallback,true);this.video.removeEventListener("webkitendfullscreen",this._endCallback,true);this.video.removeEventListener("playing",this._playCallback,true);if(this.touchLocked){this._pending=false;}else{this.video.pause();}}return this;},add:function add(t){if(Array.isArray(t)){for(var e=0;e<t.length;e++){if(t[e].loadTexture){t[e].loadTexture(this);}}}else{t.loadTexture(this);}return this;},addToWorld:function addToWorld(t,e,i,s,n,o){n=n||1;o=o||1;var a=this.game.add.image(t,e,this);a.anchor.set(i,s);a.scale.set(n,o);return a;},render:function render(){if(!this.disableTextureUpload&&this.playing){this.baseTexture.dirty();}},setMute:function setMute(){if(!this._muted){this._muted=true;this.video.muted=true;}},unsetMute:function unsetMute(){if(this._muted&&!this._codeMuted){this._muted=false;this.video.muted=false;}},setPause:function setPause(){if(!this._paused&&!this.touchLocked){this._paused=true;this.video.pause();}},setResume:function setResume(){if(!!this._paused&&!this._codePaused&&!this.touchLocked){this._paused=false;if(!this.video.ended){this.video.play();}}},changeSource:function changeSource(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.texture.valid=false;this.video.pause();this.retry=this.retryLimit;this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval);this.video.src=t;this.video.load();this._autoplay=e;if(!e){this.paused=true;}return this;},checkVideoProgress:function checkVideoProgress(){if(this.video.readyState===4){this.updateTexture();}else if(--this.retry>0){this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval);}},setTouchLock:function setTouchLock(){this.game.input.touch.addTouchLockCallback(this.unlock,this);this.touchLocked=true;},unlock:function unlock(){this.touchLocked=false;this.video.play();this.onPlay.dispatch(this,this.loop,this.playbackRate);if(this.key){var t=this.game.cache.getVideo(this.key);if(t&&!t.isBlob){t.locked=false;}}return true;},grab:function grab(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(this.snapshot!==null){if(t){this.snapshot.cls();}this.snapshot.copy(this.video,0,0,this.width,this.height,0,0,this.width,this.height,0,0,0,1,1,e,i);return this.snapshot;}},removeVideoElement:function removeVideoElement(){if(this.video){for(this.video.parentNode&&this.video.parentNode.removeChild(this.video);this.video.hasChildNodes();){this.video.removeChild(this.video.firstChild);}this.video.removeAttribute("autoplay");this.video.removeAttribute("src");this.video=null;}},destroy:function destroy(){this.stop();this.removeVideoElement();if(this.touchLocked){this.game.input.touch.removeTouchLockCallback(this.unlock,this);}if(this._retryID){window.clearTimeout(this._retryID);}}};Object.defineProperty(o.Video.prototype,"currentTime",{get:function get(){if(this.video){return this.video.currentTime;}else{return 0;}},set:function set(t){this.video.currentTime=t;}});Object.defineProperty(o.Video.prototype,"duration",{get:function get(){if(this.video){return this.video.duration;}else{return 0;}}});Object.defineProperty(o.Video.prototype,"progress",{get:function get(){if(this.video){return this.video.currentTime/this.video.duration;}else{return 0;}}});Object.defineProperty(o.Video.prototype,"mute",{get:function get(){return this._muted;},set:function set(t){if(t=t||null){if(this._muted){return;}this._codeMuted=true;this.setMute();}else{if(!this._muted){return;}this._codeMuted=false;this.unsetMute();}}});Object.defineProperty(o.Video.prototype,"paused",{get:function get(){return this._paused;},set:function set(t){t=t||null;if(!this.touchLocked){if(t){if(this._paused){return;}this._codePaused=true;this.setPause();}else{if(!this._paused){return;}this._codePaused=false;this.setResume();}}}});Object.defineProperty(o.Video.prototype,"volume",{get:function get(){if(this.video){return this.video.volume;}else{return 1;}},set:function set(t){if(t<0){t=0;}else if(t>1){t=1;}if(this.video){this.video.volume=t;}}});Object.defineProperty(o.Video.prototype,"playbackRate",{get:function get(){if(this.video){return this.video.playbackRate;}else{return 1;}},set:function set(t){if(this.video){this.video.playbackRate=t;}}});Object.defineProperty(o.Video.prototype,"loop",{get:function get(){return!!this.video&&this.video.loop;},set:function set(t){if(t&&this.video){this.video.loop="loop";}else if(this.video){this.video.loop="";}}});Object.defineProperty(o.Video.prototype,"playing",{get:function get(){return!this.video.paused||!this.video.ended;}});o.Video.prototype.constructor=o.Video;if(PIXI.blendModes===undefined){PIXI.blendModes=o.blendModes;}if(PIXI.scaleModes===undefined){PIXI.scaleModes=o.scaleModes;}if(PIXI.Texture.emptyTexture===undefined){PIXI.Texture.emptyTexture=new PIXI.Texture(new PIXI.BaseTexture());}if(PIXI.DisplayObject._tempMatrix===undefined){PIXI.DisplayObject._tempMatrix=new PIXI.Matrix();}if(PIXI.RenderTexture.tempMatrix===undefined){PIXI.RenderTexture.tempMatrix=new PIXI.Matrix();}if(PIXI.Graphics&&PIXI.Graphics.POLY===undefined){PIXI.Graphics.POLY=o.POLYGON;PIXI.Graphics.RECT=o.RECTANGLE;PIXI.Graphics.CIRC=o.CIRCLE;PIXI.Graphics.ELIP=o.ELLIPSE;PIXI.Graphics.RREC=o.ROUNDEDRECTANGLE;}PIXI.TextureSilentFail=true;if(module!==undefined&&module.exports){exports=module.exports=o;}exports.Phaser=o;return o;}).call(this);\n\n//# sourceURL=webpack://motox3m/./src/lib/CorePhaser.js?')},"./src/lib/Extra.js":module=>{eval('function i() {\n  throw new Error("setTimeout has not been defined");\n}\nfunction s() {\n  throw new Error("clearTimeout has not been defined");\n}\nfunction n(t) {\n  if (u === setTimeout) {\n    return setTimeout(t, 0);\n  }\n  if ((u === i || !u) && setTimeout) {\n    u = setTimeout;\n    return setTimeout(t, 0);\n  }\n  try {\n    return u(t, 0);\n  } catch (e) {\n    try {\n      return u.call(null, t, 0);\n    } catch (e) {\n      return u.call(this, t, 0);\n    }\n  }\n}\nfunction o(t) {\n  if (d === clearTimeout) {\n    return clearTimeout(t);\n  }\n  if ((d === s || !d) && clearTimeout) {\n    d = clearTimeout;\n    return clearTimeout(t);\n  }\n  try {\n    return d(t);\n  } catch (e) {\n    try {\n      return d.call(null, t);\n    } catch (e) {\n      return d.call(this, t);\n    }\n  }\n}\nfunction a() {\n  if (f && y) {\n    f = false;\n    if (y.length) {\n      p = y.concat(p);\n    } else {\n      g = -1;\n    }\n    if (p.length) {\n      r();\n    }\n  }\n}\nfunction r() {\n  if (!f) {\n    var t = n(a);\n    f = true;\n    for (var e = p.length; e;) {\n      y = p;\n      p = [];\n      while (++g < e) {\n        if (y) {\n          y[g].run();\n        }\n      }\n      g = -1;\n      e = p.length;\n    }\n    y = null;\n    f = false;\n    o(t);\n  }\n}\nfunction h(t, e) {\n  this.fun = t;\n  this.array = e;\n}\nfunction l() {}\nvar c = module.exports = {};\nvar u;\nvar d;\n(function () {\n  try {\n    u = typeof setTimeout == "function" ? setTimeout : i;\n  } catch (t) {\n    u = i;\n  }\n  try {\n    d = typeof clearTimeout == "function" ? clearTimeout : s;\n  } catch (t) {\n    d = s;\n  }\n})();\nvar p = [];\nvar f = false;\nvar y;\nvar g = -1;\nc.nextTick = function (t) {\n  var e = new Array(arguments.length - 1);\n  if (arguments.length > 1) {\n    for (var i = 1; i < arguments.length; i++) {\n      e[i - 1] = arguments[i];\n    }\n  }\n  p.push(new h(t, e));\n  if (p.length === 1 && !f) {\n    n(r);\n  }\n};\nh.prototype.run = function () {\n  this.fun.apply(null, this.array);\n};\nc.title = "browser";\nc.browser = true;\nc.env = {};\nc.argv = [];\nc.version = "";\nc.versions = {};\nc.on = l;\nc.addListener = l;\nc.once = l;\nc.off = l;\nc.removeListener = l;\nc.removeAllListeners = l;\nc.emit = l;\nc.prependListener = l;\nc.prependOnceListener = l;\nc.listeners = function (t) {\n  return [];\n};\nc.binding = function (t) {\n  throw new Error("process.binding is not supported");\n};\nc.cwd = function () {\n  return "/";\n};\nc.chdir = function (t) {\n  throw new Error("process.chdir is not supported");\n};\nc.umask = function () {\n  return 0;\n};\n\n//# sourceURL=webpack://motox3m/./src/lib/Extra.js?')},"./src/lib/ModulePhaser.js":module=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nvar i;\ni = function () {\n  return this;\n}();\ntry {\n  i = i || Function("return this")() || (0, eval)("this");\n} catch (t) {\n  if ((typeof window === "undefined" ? "undefined" : _typeof(window)) == "object") {\n    i = window;\n  }\n}\nmodule.exports = i;\n\n//# sourceURL=webpack://motox3m/./src/lib/ModulePhaser.js?')},"./src/lib/ModulePixi.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var e = __webpack_require__(/*! @/src/lib/ModulePhaser.js */ "./src/lib/ModulePhaser.js");\nmodule.exports = e.PIXI = __webpack_require__(/*! @/src/lib/PixiLib.js */ "./src/lib/PixiLib.js");\n\n//# sourceURL=webpack://motox3m/./src/lib/ModulePixi.js?')},"./src/lib/PhaserLib.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var e = __webpack_require__(/*! @/src/lib/ModulePhaser.js */ "./src/lib/ModulePhaser.js");\nmodule.exports = e.Phaser = __webpack_require__(/*! @/src/lib/CorePhaser.js */ "./src/lib/CorePhaser.js");\n\n//# sourceURL=webpack://motox3m/./src/lib/PhaserLib.js?')},"./src/lib/PixiLib.js":function(module,exports,__webpack_require__){eval('/* module decorator */ module = __webpack_require__.nmd(module);\n/**\r\n* @author       Richard Davey <rich@photonstorm.com>\r\n* @copyright    2016 Photon Storm Ltd.\r\n* @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n*\r\n* @overview\r\n*\r\n* Phaser - http://phaser.io\r\n*\r\n* v2.6.4 "Kore Springs" - Built: Thu Nov 16 2017 13:53:48\r\n*\r\n* By Richard Davey http://www.photonstorm.com @photonstorm\r\n*\r\n* Phaser is a fun, free and fast 2D game framework for making HTML5 games\r\n* for desktop and mobile web browsers, supporting Canvas and WebGL rendering.\r\n*\r\n* Phaser uses Pixi.js for rendering, created by Mat Groves http://matgroves.com @Doormat23\r\n* Phaser uses p2.js for full-body physics, created by Stefan Hedman https://github.com/schteppe/p2.js @schteppe\r\n* Phaser contains a port of N+ Physics, converted by Richard Davey, original by http://www.metanetsoftware.com\r\n*\r\n* Many thanks to Adam Saltsman (@ADAMATOMIC) for releasing Flixel, from which both Phaser and my love of framework development originate.\r\n*\r\n* Follow development at http://phaser.io and on our forum\r\n*\r\n* "If you want your children to be intelligent,  read them fairy tales."\r\n* "If you want them to be more intelligent, read them more fairy tales."\r\n*                                                     -- Albert Einstein\r\n*/\n(function () {\n  var i = this;\n  var s = s || {};\n  /**\r\n  * @author       Mat Groves http://matgroves.com @Doormat23\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */\n  /**\r\n  * @author       Richard Davey <rich@photonstorm.com>\r\n  * @copyright    2016 Photon Storm Ltd.\r\n  * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n  */\n  s.game = null;\n  s.WEBGL_RENDERER = 0;\n  s.CANVAS_RENDERER = 1;\n  s.VERSION = "v2.2.9";\n  s._UID = 0;\n  if (typeof Float32Array != "undefined") {\n    s.Float32Array = Float32Array;\n    s.Uint16Array = Uint16Array;\n    s.Uint32Array = Uint32Array;\n    s.ArrayBuffer = ArrayBuffer;\n  } else {\n    s.Float32Array = Array;\n    s.Uint16Array = Array;\n  }\n  s.PI_2 = Math.PI * 2;\n  s.RAD_TO_DEG = 180 / Math.PI;\n  s.DEG_TO_RAD = Math.PI / 180;\n  s.RETINA_PREFIX = "@2x";\n  s.DisplayObject = function () {\n    this.position = new s.Point(0, 0);\n    this.scale = new s.Point(1, 1);\n    this.pivot = new s.Point(0, 0);\n    this.rotation = 0;\n    this.alpha = 1;\n    this.visible = true;\n    this.hitArea = null;\n    this.renderable = false;\n    this.parent = null;\n    this.worldAlpha = 1;\n    this.worldTransform = new s.Matrix();\n    this.worldPosition = new s.Point(0, 0);\n    this.worldScale = new s.Point(1, 1);\n    this.worldRotation = 0;\n    this.filterArea = null;\n    this._sr = 0;\n    this._cr = 1;\n    this._bounds = new s.Rectangle(0, 0, 0, 0);\n    this._currentBounds = null;\n    this._mask = null;\n    this._cacheAsBitmap = false;\n    this._cacheIsDirty = false;\n  };\n  s.DisplayObject.prototype.constructor = s.DisplayObject;\n  s.DisplayObject.prototype = {\n    destroy: function destroy() {\n      if (this.children) {\n        for (var t = this.children.length; t--;) {\n          this.children[t].destroy();\n        }\n        this.children = [];\n      }\n      this.hitArea = null;\n      this.parent = null;\n      this.worldTransform = null;\n      this.filterArea = null;\n      this.renderable = false;\n      this._bounds = null;\n      this._currentBounds = null;\n      this._mask = null;\n      this._destroyCachedSprite();\n    },\n    updateTransform: function updateTransform(t) {\n      if (!t && !this.parent && !this.game) {\n        return this;\n      }\n      var e = this.parent;\n      if (t) {\n        e = t;\n      } else if (!this.parent) {\n        e = this.game.world;\n      }\n      var i = e.worldTransform;\n      var n = this.worldTransform;\n      var o;\n      var a;\n      var r;\n      var h;\n      var l;\n      var c;\n      if (this.rotation % s.PI_2) {\n        if (this.rotation !== this.rotationCache) {\n          this.rotationCache = this.rotation;\n          this._sr = Math.sin(this.rotation);\n          this._cr = Math.cos(this.rotation);\n        }\n        o = this._cr * this.scale.x;\n        a = this._sr * this.scale.x;\n        r = -this._sr * this.scale.y;\n        h = this._cr * this.scale.y;\n        l = this.position.x;\n        c = this.position.y;\n        if (this.pivot.x || this.pivot.y) {\n          l -= this.pivot.x * o + this.pivot.y * r;\n          c -= this.pivot.x * a + this.pivot.y * h;\n        }\n        n.a = o * i.a + a * i.c;\n        n.b = o * i.b + a * i.d;\n        n.c = r * i.a + h * i.c;\n        n.d = r * i.b + h * i.d;\n        n.tx = l * i.a + c * i.c + i.tx;\n        n.ty = l * i.b + c * i.d + i.ty;\n      } else {\n        o = this.scale.x;\n        h = this.scale.y;\n        l = this.position.x - this.pivot.x * o;\n        c = this.position.y - this.pivot.y * h;\n        n.a = o * i.a;\n        n.b = o * i.b;\n        n.c = h * i.c;\n        n.d = h * i.d;\n        n.tx = l * i.a + c * i.c + i.tx;\n        n.ty = l * i.b + c * i.d + i.ty;\n      }\n      this.worldAlpha = this.alpha * e.worldAlpha;\n      this.worldPosition.set(n.tx, n.ty);\n      this.worldScale.set(this.scale.x * Math.sqrt(n.a * n.a + n.c * n.c), this.scale.y * Math.sqrt(n.b * n.b + n.d * n.d));\n      this.worldRotation = Math.atan2(-n.c, n.d);\n      this._currentBounds = null;\n      if (this.transformCallback) {\n        this.transformCallback.call(this.transformCallbackContext, n, i);\n      }\n      return this;\n    },\n    preUpdate: function preUpdate() {},\n    generateTexture: function generateTexture(t, e, i) {\n      var n = this.getLocalBounds();\n      var o = new s.RenderTexture(n.width | 0, n.height | 0, i, e, t);\n      s.DisplayObject._tempMatrix.tx = -n.x;\n      s.DisplayObject._tempMatrix.ty = -n.y;\n      o.render(this, s.DisplayObject._tempMatrix);\n      return o;\n    },\n    updateCache: function updateCache() {\n      this._generateCachedSprite();\n      return this;\n    },\n    toGlobal: function toGlobal(t) {\n      this.updateTransform();\n      return this.worldTransform.apply(t);\n    },\n    toLocal: function toLocal(t, e) {\n      if (e) {\n        t = e.toGlobal(t);\n      }\n      this.updateTransform();\n      return this.worldTransform.applyInverse(t);\n    },\n    _renderCachedSprite: function _renderCachedSprite(t) {\n      this._cachedSprite.worldAlpha = this.worldAlpha;\n      if (t.gl) {\n        s.Sprite.prototype._renderWebGL.call(this._cachedSprite, t);\n      } else {\n        s.Sprite.prototype._renderCanvas.call(this._cachedSprite, t);\n      }\n    },\n    _generateCachedSprite: function _generateCachedSprite() {\n      this._cacheAsBitmap = false;\n      var t = this.getLocalBounds();\n      t.width = Math.max(1, Math.ceil(t.width));\n      t.height = Math.max(1, Math.ceil(t.height));\n      this.updateTransform();\n      if (this._cachedSprite) {\n        this._cachedSprite.texture.resize(t.width, t.height);\n      } else {\n        var e = new s.RenderTexture(t.width, t.height);\n        this._cachedSprite = new s.Sprite(e);\n        this._cachedSprite.worldTransform = this.worldTransform;\n      }\n      var i = this._filters;\n      this._filters = null;\n      this._cachedSprite.filters = i;\n      s.DisplayObject._tempMatrix.tx = -t.x;\n      s.DisplayObject._tempMatrix.ty = -t.y;\n      this._cachedSprite.texture.render(this, s.DisplayObject._tempMatrix, true);\n      this._cachedSprite.anchor.x = -t.x / t.width;\n      this._cachedSprite.anchor.y = -t.y / t.height;\n      this._filters = i;\n      this._cacheAsBitmap = true;\n    },\n    _destroyCachedSprite: function _destroyCachedSprite() {\n      if (this._cachedSprite) {\n        this._cachedSprite.texture.destroy(true);\n        this._cachedSprite = null;\n      }\n    }\n  };\n  s.DisplayObject.prototype.displayObjectUpdateTransform = s.DisplayObject.prototype.updateTransform;\n  Object.defineProperties(s.DisplayObject.prototype, {\n    x: {\n      get: function get() {\n        return this.position.x;\n      },\n      set: function set(t) {\n        this.position.x = t;\n      }\n    },\n    y: {\n      get: function get() {\n        return this.position.y;\n      },\n      set: function set(t) {\n        this.position.y = t;\n      }\n    },\n    worldVisible: {\n      get: function get() {\n        if (this.visible) {\n          var t = this.parent;\n          if (!t) {\n            return this.visible;\n          }\n          do {\n            if (!t.visible) {\n              return false;\n            }\n            t = t.parent;\n          } while (t);\n          return true;\n        }\n        return false;\n      }\n    },\n    mask: {\n      get: function get() {\n        return this._mask;\n      },\n      set: function set(t) {\n        if (this._mask) {\n          this._mask.isMask = false;\n        }\n        this._mask = t;\n        if (t) {\n          this._mask.isMask = true;\n        }\n      }\n    },\n    filters: {\n      get: function get() {\n        return this._filters;\n      },\n      set: function set(t) {\n        if (Array.isArray(t)) {\n          var e = [];\n          for (var i = 0; i < t.length; i++) {\n            for (var n = t[i].passes, o = 0; o < n.length; o++) {\n              e.push(n[o]);\n            }\n          }\n          this._filterBlock = {\n            target: this,\n            filterPasses: e\n          };\n        }\n        this._filters = t;\n        if (this.blendMode && this.blendMode === s.blendModes.MULTIPLY) {\n          this.blendMode = s.blendModes.NORMAL;\n        }\n      }\n    },\n    cacheAsBitmap: {\n      get: function get() {\n        return this._cacheAsBitmap;\n      },\n      set: function set(t) {\n        if (this._cacheAsBitmap !== t) {\n          if (t) {\n            this._generateCachedSprite();\n          } else {\n            this._destroyCachedSprite();\n          }\n          this._cacheAsBitmap = t;\n        }\n      }\n    }\n  });\n  s.DisplayObjectContainer = function () {\n    s.DisplayObject.call(this);\n    this.children = [];\n    this.ignoreChildInput = false;\n  };\n  s.DisplayObjectContainer.prototype = Object.create(s.DisplayObject.prototype);\n  s.DisplayObjectContainer.prototype.constructor = s.DisplayObjectContainer;\n  s.DisplayObjectContainer.prototype.addChild = function (t) {\n    return this.addChildAt(t, this.children.length);\n  };\n  s.DisplayObjectContainer.prototype.addChildAt = function (t, e) {\n    if (e >= 0 && e <= this.children.length) {\n      if (t.parent) {\n        t.parent.removeChild(t);\n      }\n      t.parent = this;\n      this.children.splice(e, 0, t);\n      return t;\n    }\n    throw new Error(t + "addChildAt: The index " + e + " supplied is out of bounds " + this.children.length);\n  };\n  s.DisplayObjectContainer.prototype.swapChildren = function (t, e) {\n    if (t !== e) {\n      var i = this.getChildIndex(t);\n      var s = this.getChildIndex(e);\n      if (i < 0 || s < 0) {\n        throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");\n      }\n      this.children[i] = e;\n      this.children[s] = t;\n    }\n  };\n  s.DisplayObjectContainer.prototype.getChildIndex = function (t) {\n    var e = this.children.indexOf(t);\n    if (e === -1) {\n      throw new Error("The supplied DisplayObject must be a child of the caller");\n    }\n    return e;\n  };\n  s.DisplayObjectContainer.prototype.setChildIndex = function (t, e) {\n    if (e < 0 || e >= this.children.length) {\n      throw new Error("The supplied index is out of bounds");\n    }\n    var i = this.getChildIndex(t);\n    this.children.splice(i, 1);\n    this.children.splice(e, 0, t);\n  };\n  s.DisplayObjectContainer.prototype.getChildAt = function (t) {\n    if (t < 0 || t >= this.children.length) {\n      throw new Error("getChildAt: Supplied index " + t + " does not exist in the child list, or the supplied DisplayObject must be a child of the caller");\n    }\n    return this.children[t];\n  };\n  s.DisplayObjectContainer.prototype.removeChild = function (t) {\n    var e = this.children.indexOf(t);\n    if (e !== -1) {\n      return this.removeChildAt(e);\n    }\n  };\n  s.DisplayObjectContainer.prototype.removeChildAt = function (t) {\n    var e = this.getChildAt(t);\n    if (e) {\n      e.parent = undefined;\n      this.children.splice(t, 1);\n    }\n    return e;\n  };\n  s.DisplayObjectContainer.prototype.removeChildren = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.children.length;\n    var i = e - t;\n    if (i > 0 && i <= e) {\n      for (var s = this.children.splice(begin, i), n = 0; n < s.length; n++) {\n        s[n].parent = undefined;\n      }\n      return s;\n    }\n    if (i === 0 && this.children.length === 0) {\n      return [];\n    }\n    throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range");\n  };\n  s.DisplayObjectContainer.prototype.updateTransform = function () {\n    if (this.visible && (this.displayObjectUpdateTransform(), !this._cacheAsBitmap)) {\n      for (var t = 0; t < this.children.length; t++) {\n        this.children[t].updateTransform();\n      }\n    }\n  };\n  s.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform = s.DisplayObjectContainer.prototype.updateTransform;\n  s.DisplayObjectContainer.prototype.getBounds = function (t) {\n    var e = t && t instanceof s.DisplayObject;\n    var i = true;\n    if (e) {\n      i = t instanceof s.DisplayObjectContainer && t.contains(this);\n    } else {\n      t = this;\n    }\n    var n;\n    if (e) {\n      var o = t.worldTransform;\n      t.worldTransform = s.identityMatrix;\n      n = 0;\n      for (; n < t.children.length; n++) {\n        t.children[n].updateTransform();\n      }\n    }\n    var a = Infinity;\n    var r = Infinity;\n    var h = -Infinity;\n    var l = -Infinity;\n    var c;\n    var u;\n    var d;\n    var p = false;\n    for (n = 0; n < this.children.length; n++) {\n      if (this.children[n].visible) {\n        p = true;\n        c = this.children[n].getBounds();\n        a = a < c.x ? a : c.x;\n        r = r < c.y ? r : c.y;\n        u = c.width + c.x;\n        d = c.height + c.y;\n        h = h > u ? h : u;\n        l = l > d ? l : d;\n      }\n    }\n    var f = this._bounds;\n    if (!p) {\n      f = new s.Rectangle();\n      var y = f.x;\n      var g = f.width + f.x;\n      var m = f.y;\n      var v = f.height + f.y;\n      var b = this.worldTransform;\n      var x = b.a;\n      var _ = b.b;\n      var w = b.c;\n      var C = b.d;\n      var P = b.tx;\n      var T = b.ty;\n      var S = x * g + w * v + P;\n      var A = C * v + _ * g + T;\n      var E = x * y + w * v + P;\n      var I = C * v + _ * y + T;\n      var M = x * y + w * m + P;\n      var R = C * m + _ * y + T;\n      var O = x * g + w * m + P;\n      var B = C * m + _ * g + T;\n      h = S;\n      l = A;\n      a = S;\n      r = A;\n      a = E < a ? E : a;\n      a = M < a ? M : a;\n      a = O < a ? O : a;\n      r = I < r ? I : r;\n      r = R < r ? R : r;\n      r = B < r ? B : r;\n      h = E > h ? E : h;\n      h = M > h ? M : h;\n      h = O > h ? O : h;\n      l = I > l ? I : l;\n      l = R > l ? R : l;\n      l = B > l ? B : l;\n    }\n    f.x = a;\n    f.y = r;\n    f.width = h - a;\n    f.height = l - r;\n    if (e) {\n      t.worldTransform = o;\n      n = 0;\n      for (; n < t.children.length; n++) {\n        t.children[n].updateTransform();\n      }\n    }\n    if (!i) {\n      var L = t.getBounds();\n      f.x -= L.x;\n      f.y -= L.y;\n    }\n    return f;\n  };\n  s.DisplayObjectContainer.prototype.getLocalBounds = function () {\n    return this.getBounds(this);\n  };\n  s.DisplayObjectContainer.prototype.contains = function (t) {\n    return !!t && (t === this || this.contains(t.parent));\n  };\n  s.DisplayObjectContainer.prototype._renderWebGL = function (t) {\n    if (this.visible && !(this.alpha <= 0)) {\n      if (this._cacheAsBitmap) {\n        this._renderCachedSprite(t);\n        return;\n      }\n      var e;\n      if (this._mask || this._filters) {\n        if (this._filters) {\n          t.spriteBatch.flush();\n          t.filterManager.pushFilter(this._filterBlock);\n        }\n        if (this._mask) {\n          t.spriteBatch.stop();\n          t.maskManager.pushMask(this.mask, t);\n          t.spriteBatch.start();\n        }\n        e = 0;\n        for (; e < this.children.length; e++) {\n          this.children[e]._renderWebGL(t);\n        }\n        t.spriteBatch.stop();\n        if (this._mask) {\n          t.maskManager.popMask(this._mask, t);\n        }\n        if (this._filters) {\n          t.filterManager.popFilter();\n        }\n        t.spriteBatch.start();\n      } else {\n        for (e = 0; e < this.children.length; e++) {\n          this.children[e]._renderWebGL(t);\n        }\n      }\n    }\n  };\n  s.DisplayObjectContainer.prototype._renderCanvas = function (t) {\n    if (this.visible !== false && this.alpha !== 0) {\n      if (this._cacheAsBitmap) {\n        this._renderCachedSprite(t);\n        return;\n      }\n      if (this._mask) {\n        t.maskManager.pushMask(this._mask, t);\n      }\n      for (var e = 0; e < this.children.length; e++) {\n        this.children[e]._renderCanvas(t);\n      }\n      if (this._mask) {\n        t.maskManager.popMask(t);\n      }\n    }\n  };\n  Object.defineProperty(s.DisplayObjectContainer.prototype, "width", {\n    get: function get() {\n      return this.getLocalBounds().width * this.scale.x;\n    },\n    set: function set(t) {\n      var e = this.getLocalBounds().width;\n      this.scale.x = e !== 0 ? t / e : 1;\n      this._width = t;\n    }\n  });\n  Object.defineProperty(s.DisplayObjectContainer.prototype, "height", {\n    get: function get() {\n      return this.getLocalBounds().height * this.scale.y;\n    },\n    set: function set(t) {\n      var e = this.getLocalBounds().height;\n      this.scale.y = e !== 0 ? t / e : 1;\n      this._height = t;\n    }\n  });\n  s.Sprite = function (t) {\n    s.DisplayObjectContainer.call(this);\n    this.anchor = new s.Point();\n    this.texture = t || s.Texture.emptyTexture;\n    this._width = 0;\n    this._height = 0;\n    this.tint = 16777215;\n    this.cachedTint = -1;\n    this.tintedTexture = null;\n    this.blendMode = s.blendModes.NORMAL;\n    this.shader = null;\n    this.exists = true;\n    if (this.texture.baseTexture.hasLoaded) {\n      this.onTextureUpdate();\n    }\n    this.renderable = true;\n  };\n  s.Sprite.prototype = Object.create(s.DisplayObjectContainer.prototype);\n  s.Sprite.prototype.constructor = s.Sprite;\n  Object.defineProperty(s.Sprite.prototype, "width", {\n    get: function get() {\n      return this.scale.x * this.texture.frame.width;\n    },\n    set: function set(t) {\n      this.scale.x = t / this.texture.frame.width;\n      this._width = t;\n    }\n  });\n  Object.defineProperty(s.Sprite.prototype, "height", {\n    get: function get() {\n      return this.scale.y * this.texture.frame.height;\n    },\n    set: function set(t) {\n      this.scale.y = t / this.texture.frame.height;\n      this._height = t;\n    }\n  });\n  s.Sprite.prototype.setTexture = function (t, e) {\n    if (e !== undefined) {\n      this.texture.baseTexture.destroy();\n    }\n    this.texture.baseTexture.skipRender = false;\n    this.texture = t;\n    this.texture.valid = true;\n    this.cachedTint = -1;\n  };\n  s.Sprite.prototype.onTextureUpdate = function () {\n    if (this._width) {\n      this.scale.x = this._width / this.texture.frame.width;\n    }\n    if (this._height) {\n      this.scale.y = this._height / this.texture.frame.height;\n    }\n  };\n  s.Sprite.prototype.getBounds = function (t) {\n    var e = this.texture.frame.width;\n    var i = this.texture.frame.height;\n    var s = e * (1 - this.anchor.x);\n    var n = e * -this.anchor.x;\n    var o = i * (1 - this.anchor.y);\n    var a = i * -this.anchor.y;\n    var r = t || this.worldTransform;\n    var h = r.a;\n    var l = r.b;\n    var c = r.c;\n    var u = r.d;\n    var d = r.tx;\n    var p = r.ty;\n    var f = -Infinity;\n    var y = -Infinity;\n    var g = Infinity;\n    var m = Infinity;\n    if (l === 0 && c === 0) {\n      if (h < 0) {\n        h *= -1;\n        var v = s;\n        s = -n;\n        n = -v;\n      }\n      if (u < 0) {\n        u *= -1;\n        var v = o;\n        o = -a;\n        a = -v;\n      }\n      g = h * n + d;\n      f = h * s + d;\n      m = u * a + p;\n      y = u * o + p;\n    } else {\n      var b = h * n + c * a + d;\n      var x = u * a + l * n + p;\n      var _ = h * s + c * a + d;\n      var w = u * a + l * s + p;\n      var C = h * s + c * o + d;\n      var P = u * o + l * s + p;\n      var T = h * n + c * o + d;\n      var S = u * o + l * n + p;\n      g = b < g ? b : g;\n      g = _ < g ? _ : g;\n      g = C < g ? C : g;\n      g = T < g ? T : g;\n      m = x < m ? x : m;\n      m = w < m ? w : m;\n      m = P < m ? P : m;\n      m = S < m ? S : m;\n      f = b > f ? b : f;\n      f = _ > f ? _ : f;\n      f = C > f ? C : f;\n      f = T > f ? T : f;\n      y = x > y ? x : y;\n      y = w > y ? w : y;\n      y = P > y ? P : y;\n      y = S > y ? S : y;\n    }\n    var A = this._bounds;\n    A.x = g;\n    A.width = f - g;\n    A.y = m;\n    A.height = y - m;\n    this._currentBounds = A;\n    return A;\n  };\n  s.Sprite.prototype.getLocalBounds = function () {\n    var t = this.worldTransform;\n    this.worldTransform = s.identityMatrix;\n    for (var e = 0; e < this.children.length; e++) {\n      this.children[e].updateTransform();\n    }\n    var i = this.getBounds();\n    this.worldTransform = t;\n    e = 0;\n    for (; e < this.children.length; e++) {\n      this.children[e].updateTransform();\n    }\n    return i;\n  };\n  s.Sprite.prototype._renderWebGL = function (t, e) {\n    if (this.visible && !(this.alpha <= 0) && this.renderable) {\n      var i = this.worldTransform;\n      if (e) {\n        i = e;\n      }\n      if (this._mask || this._filters) {\n        var s = t.spriteBatch;\n        if (this._filters) {\n          s.flush();\n          t.filterManager.pushFilter(this._filterBlock);\n        }\n        if (this._mask) {\n          s.stop();\n          t.maskManager.pushMask(this.mask, t);\n          s.start();\n        }\n        s.render(this);\n        for (var n = 0; n < this.children.length; n++) {\n          this.children[n]._renderWebGL(t);\n        }\n        s.stop();\n        if (this._mask) {\n          t.maskManager.popMask(this._mask, t);\n        }\n        if (this._filters) {\n          t.filterManager.popFilter();\n        }\n        s.start();\n      } else {\n        t.spriteBatch.render(this);\n        for (var n = 0; n < this.children.length; n++) {\n          this.children[n]._renderWebGL(t, i);\n        }\n      }\n    }\n  };\n  s.Sprite.prototype._renderCanvas = function (t, e) {\n    if (!!this.visible && this.alpha !== 0 && !!this.renderable && !(this.texture.crop.width <= 0) && !(this.texture.crop.height <= 0)) {\n      var i = this.worldTransform;\n      if (e) {\n        i = e;\n      }\n      if (this.blendMode !== t.currentBlendMode) {\n        t.currentBlendMode = this.blendMode;\n        t.context.globalCompositeOperation = s.blendModesCanvas[t.currentBlendMode];\n      }\n      if (this._mask) {\n        t.maskManager.pushMask(this._mask, t);\n      }\n      if (this.texture.valid) {\n        var n = this.texture.baseTexture.resolution / t.resolution;\n        t.context.globalAlpha = this.worldAlpha;\n        if (t.smoothProperty && t.scaleMode !== this.texture.baseTexture.scaleMode) {\n          t.scaleMode = this.texture.baseTexture.scaleMode;\n          t.context[t.smoothProperty] = t.scaleMode === s.scaleModes.LINEAR;\n        }\n        var o = this.texture.trim ? this.texture.trim.x - this.anchor.x * this.texture.trim.width : this.anchor.x * -this.texture.frame.width;\n        var a = this.texture.trim ? this.texture.trim.y - this.anchor.y * this.texture.trim.height : this.anchor.y * -this.texture.frame.height;\n        var r = i.tx * t.resolution + t.shakeX;\n        var h = i.ty * t.resolution + t.shakeY;\n        if (t.roundPixels) {\n          t.context.setTransform(i.a, i.b, i.c, i.d, r | 0, h | 0);\n          o |= 0;\n          a |= 0;\n        } else {\n          t.context.setTransform(i.a, i.b, i.c, i.d, r, h);\n        }\n        var l = this.texture.crop.width;\n        var c = this.texture.crop.height;\n        o /= n;\n        a /= n;\n        if (this.tint !== 16777215) {\n          if (this.texture.requiresReTint || this.cachedTint !== this.tint) {\n            this.tintedTexture = s.CanvasTinter.getTintedTexture(this, this.tint);\n            this.cachedTint = this.tint;\n            this.texture.requiresReTint = false;\n          }\n          t.context.drawImage(this.tintedTexture, 0, 0, l, c, o, a, l / n, c / n);\n        } else {\n          var u = this.texture.crop.x;\n          var d = this.texture.crop.y;\n          t.context.drawImage(this.texture.baseTexture.source, u, d, l, c, o, a, l / n, c / n);\n        }\n      }\n      for (var p = 0; p < this.children.length; p++) {\n        this.children[p]._renderCanvas(t);\n      }\n      if (this._mask) {\n        t.maskManager.popMask(t);\n      }\n    }\n  };\n  s.SpriteBatch = function (t) {\n    s.DisplayObjectContainer.call(this);\n    this.textureThing = t;\n    this.ready = false;\n  };\n  s.SpriteBatch.prototype = Object.create(s.DisplayObjectContainer.prototype);\n  s.SpriteBatch.prototype.constructor = s.SpriteBatch;\n  s.SpriteBatch.prototype.initWebGL = function (t) {\n    this.fastSpriteBatch = new s.WebGLFastSpriteBatch(t);\n    this.ready = true;\n  };\n  s.SpriteBatch.prototype.updateTransform = function () {\n    this.displayObjectUpdateTransform();\n  };\n  s.SpriteBatch.prototype._renderWebGL = function (t) {\n    if (!!this.visible && !(this.alpha <= 0) && !!this.children.length) {\n      if (!this.ready) {\n        this.initWebGL(t.gl);\n      }\n      if (this.fastSpriteBatch.gl !== t.gl) {\n        this.fastSpriteBatch.setContext(t.gl);\n      }\n      t.spriteBatch.stop();\n      t.shaderManager.setShader(t.shaderManager.fastShader);\n      this.fastSpriteBatch.begin(this, t);\n      this.fastSpriteBatch.render(this);\n      t.spriteBatch.start();\n    }\n  };\n  s.SpriteBatch.prototype._renderCanvas = function (t) {\n    if (this.visible && !(this.alpha <= 0) && this.children.length) {\n      var e = t.context;\n      e.globalAlpha = this.worldAlpha;\n      this.displayObjectUpdateTransform();\n      var i = this.worldTransform;\n      var s = true;\n      for (var n = 0; n < this.children.length; n++) {\n        var o = this.children[n];\n        if (o.visible) {\n          var a = o.texture;\n          var r = a.frame;\n          e.globalAlpha = this.worldAlpha * o.alpha;\n          if (o.rotation % (Math.PI * 2) == 0) {\n            if (s) {\n              e.setTransform(i.a, i.b, i.c, i.d, i.tx, i.ty);\n              s = false;\n            }\n            e.drawImage(a.baseTexture.source, r.x, r.y, r.width, r.height, o.anchor.x * (-r.width * o.scale.x) + o.position.x + 0.5 + t.shakeX | 0, o.anchor.y * (-r.height * o.scale.y) + o.position.y + 0.5 + t.shakeY | 0, r.width * o.scale.x, r.height * o.scale.y);\n          } else {\n            s || (s = true);\n            o.displayObjectUpdateTransform();\n            var h = o.worldTransform;\n            var l = h.tx * t.resolution + t.shakeX;\n            var c = h.ty * t.resolution + t.shakeY;\n            if (t.roundPixels) {\n              e.setTransform(h.a, h.b, h.c, h.d, l | 0, c | 0);\n            } else {\n              e.setTransform(h.a, h.b, h.c, h.d, l, c);\n            }\n            e.drawImage(a.baseTexture.source, r.x, r.y, r.width, r.height, o.anchor.x * -r.width + 0.5 | 0, o.anchor.y * -r.height + 0.5 | 0, r.width, r.height);\n          }\n        }\n      }\n    }\n  };\n  s.hex2rgb = function (t) {\n    return [(t >> 16 & 255) / 255, (t >> 8 & 255) / 255, (t & 255) / 255];\n  };\n  s.rgb2hex = function (t) {\n    return (t[0] * 255 << 16) + (t[1] * 255 << 8) + t[2] * 255;\n  };\n  s.canUseNewCanvasBlendModes = function () {\n    if (document === undefined) {\n      return false;\n    }\n    var t = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/";\n    var e = "AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==";\n    var i = new Image();\n    i.src = t + "AP804Oa6" + e;\n    var n = new Image();\n    n.src = t + "/wCKxvRF" + e;\n    var o = s.CanvasPool.create(this, 6, 1);\n    var a = o.getContext("2d");\n    a.globalCompositeOperation = "multiply";\n    a.drawImage(i, 0, 0);\n    a.drawImage(n, 2, 0);\n    if (!a.getImageData(2, 0, 1, 1)) {\n      return false;\n    }\n    var r = a.getImageData(2, 0, 1, 1).data;\n    s.CanvasPool.remove(this);\n    return r[0] === 255 && r[1] === 0 && r[2] === 0;\n  };\n  s.getNextPowerOfTwo = function (t) {\n    if (t > 0 && (t & t - 1) == 0) {\n      return t;\n    }\n    for (var e = 1; e < t;) {\n      e <<= 1;\n    }\n    return e;\n  };\n  s.isPowerOfTwo = function (t, e) {\n    return t > 0 && (t & t - 1) == 0 && e > 0 && (e & e - 1) == 0;\n  };\n  s.CanvasPool = {\n    create: function create(t, e, i) {\n      var n = s.CanvasPool.getFirst();\n      var o;\n      if (n === -1) {\n        var a = {\n          parent: t,\n          canvas: document.createElement("canvas")\n        };\n        s.CanvasPool.pool.push(a);\n        o = a.canvas;\n      } else {\n        s.CanvasPool.pool[n].parent = t;\n        o = s.CanvasPool.pool[n].canvas;\n      }\n      if (e !== undefined) {\n        o.width = e;\n        o.height = i;\n      }\n      return o;\n    },\n    getFirst: function getFirst() {\n      for (var t = s.CanvasPool.pool, e = 0; e < t.length; e++) {\n        if (!t[e].parent) {\n          return e;\n        }\n      }\n      return -1;\n    },\n    remove: function remove(t) {\n      for (var e = s.CanvasPool.pool, i = 0; i < e.length; i++) {\n        if (e[i].parent === t) {\n          e[i].parent = null;\n          e[i].canvas.width = 1;\n          e[i].canvas.height = 1;\n        }\n      }\n    },\n    removeByCanvas: function removeByCanvas(t) {\n      for (var e = s.CanvasPool.pool, i = 0; i < e.length; i++) {\n        if (e[i].canvas === t) {\n          e[i].parent = null;\n          e[i].canvas.width = 1;\n          e[i].canvas.height = 1;\n        }\n      }\n    },\n    getTotal: function getTotal() {\n      for (var t = s.CanvasPool.pool, e = 0, i = 0; i < t.length; i++) {\n        if (t[i].parent) {\n          e++;\n        }\n      }\n      return e;\n    },\n    getFree: function getFree() {\n      for (var t = s.CanvasPool.pool, e = 0, i = 0; i < t.length; i++) {\n        if (!t[i].parent) {\n          e++;\n        }\n      }\n      return e;\n    }\n  };\n  s.CanvasPool.pool = [];\n  s.initDefaultShaders = function () {};\n  s.CompileVertexShader = function (t, e) {\n    return s._CompileShader(t, e, t.VERTEX_SHADER);\n  };\n  s.CompileFragmentShader = function (t, e) {\n    return s._CompileShader(t, e, t.FRAGMENT_SHADER);\n  };\n  s._CompileShader = function (t, e, i) {\n    var s = e;\n    if (Array.isArray(e)) {\n      s = e.join("\\n");\n    }\n    var n = t.createShader(i);\n    t.shaderSource(n, s);\n    t.compileShader(n);\n    if (t.getShaderParameter(n, t.COMPILE_STATUS)) {\n      return n;\n    } else {\n      window.console.log(t.getShaderInfoLog(n));\n      return null;\n    }\n  };\n  s.compileProgram = function (t, e, i) {\n    var n = s.CompileFragmentShader(t, i);\n    var o = s.CompileVertexShader(t, e);\n    var a = t.createProgram();\n    t.attachShader(a, o);\n    t.attachShader(a, n);\n    t.linkProgram(a);\n    if (!t.getProgramParameter(a, t.LINK_STATUS)) {\n      window.console.log(t.getProgramInfoLog(a));\n      window.console.log("Could not initialise shaders");\n    }\n    return a;\n  };\n  s.PixiShader = function (t) {\n    this._UID = s._UID++;\n    this.gl = t;\n    this.program = null;\n    this.fragmentSrc = ["precision lowp float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"];\n    this.textureCount = 0;\n    this.firstRun = true;\n    this.dirty = true;\n    this.attributes = [];\n    this.init();\n  };\n  s.PixiShader.prototype.constructor = s.PixiShader;\n  s.PixiShader.prototype.init = function () {\n    var t = this.gl;\n    var e = s.compileProgram(t, this.vertexSrc || s.PixiShader.defaultVertexSrc, this.fragmentSrc);\n    t.useProgram(e);\n    this.uSampler = t.getUniformLocation(e, "uSampler");\n    this.projectionVector = t.getUniformLocation(e, "projectionVector");\n    this.offsetVector = t.getUniformLocation(e, "offsetVector");\n    this.dimensions = t.getUniformLocation(e, "dimensions");\n    this.aVertexPosition = t.getAttribLocation(e, "aVertexPosition");\n    this.aTextureCoord = t.getAttribLocation(e, "aTextureCoord");\n    this.colorAttribute = t.getAttribLocation(e, "aColor");\n    if (this.colorAttribute === -1) {\n      this.colorAttribute = 2;\n    }\n    this.attributes = [this.aVertexPosition, this.aTextureCoord, this.colorAttribute];\n    for (var i in this.uniforms) {\n      this.uniforms[i].uniformLocation = t.getUniformLocation(e, i);\n    }\n    this.initUniforms();\n    this.program = e;\n  };\n  s.PixiShader.prototype.initUniforms = function () {\n    this.textureCount = 1;\n    var t = this.gl;\n    var e;\n    for (var i in this.uniforms) {\n      e = this.uniforms[i];\n      var s = e.type;\n      if (s === "sampler2D") {\n        e._init = false;\n        if (e.value !== null) {\n          this.initSampler2D(e);\n        }\n      } else if (s === "mat2" || s === "mat3" || s === "mat4") {\n        e.glMatrix = true;\n        e.glValueLength = 1;\n        if (s === "mat2") {\n          e.glFunc = t.uniformMatrix2fv;\n        } else if (s === "mat3") {\n          e.glFunc = t.uniformMatrix3fv;\n        } else if (s === "mat4") {\n          e.glFunc = t.uniformMatrix4fv;\n        }\n      } else {\n        e.glFunc = t["uniform" + s];\n        e.glValueLength = s === "2f" || s === "2i" ? 2 : s === "3f" || s === "3i" ? 3 : s === "4f" || s === "4i" ? 4 : 1;\n      }\n    }\n  };\n  s.PixiShader.prototype.initSampler2D = function (t) {\n    if (t.value && t.value.baseTexture && t.value.baseTexture.hasLoaded) {\n      var e = this.gl;\n      e.activeTexture(e["TEXTURE" + this.textureCount]);\n      e.bindTexture(e.TEXTURE_2D, t.value.baseTexture._glTextures[e.id]);\n      if (t.textureData) {\n        var i = t.textureData;\n        var s = i.magFilter ? i.magFilter : e.LINEAR;\n        var n = i.minFilter ? i.minFilter : e.LINEAR;\n        var o = i.wrapS ? i.wrapS : e.CLAMP_TO_EDGE;\n        var a = i.wrapT ? i.wrapT : e.CLAMP_TO_EDGE;\n        var r = i.luminance ? e.LUMINANCE : e.RGBA;\n        if (i.repeat) {\n          o = e.REPEAT;\n          a = e.REPEAT;\n        }\n        e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, !!i.flipY);\n        if (i.width) {\n          var h = i.width ? i.width : 512;\n          var l = i.height ? i.height : 2;\n          var c = i.border ? i.border : 0;\n          e.texImage2D(e.TEXTURE_2D, 0, r, h, l, c, r, e.UNSIGNED_BYTE, null);\n        } else {\n          e.texImage2D(e.TEXTURE_2D, 0, r, e.RGBA, e.UNSIGNED_BYTE, t.value.baseTexture.source);\n        }\n        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, s);\n        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, n);\n        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, o);\n        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, a);\n      }\n      e.uniform1i(t.uniformLocation, this.textureCount);\n      t._init = true;\n      this.textureCount++;\n    }\n  };\n  s.PixiShader.prototype.syncUniforms = function () {\n    this.textureCount = 1;\n    var t;\n    var e = this.gl;\n    for (var i in this.uniforms) {\n      t = this.uniforms[i];\n      if (t.glValueLength === 1) {\n        if (t.glMatrix === true) {\n          t.glFunc.call(e, t.uniformLocation, t.transpose, t.value);\n        } else {\n          t.glFunc.call(e, t.uniformLocation, t.value);\n        }\n      } else if (t.glValueLength === 2) {\n        t.glFunc.call(e, t.uniformLocation, t.value.x, t.value.y);\n      } else if (t.glValueLength === 3) {\n        t.glFunc.call(e, t.uniformLocation, t.value.x, t.value.y, t.value.z);\n      } else if (t.glValueLength === 4) {\n        t.glFunc.call(e, t.uniformLocation, t.value.x, t.value.y, t.value.z, t.value.w);\n      } else if (t.type === "sampler2D") {\n        if (t._init) {\n          e.activeTexture(e["TEXTURE" + this.textureCount]);\n          if (t.value.baseTexture._dirty[e.id]) {\n            s.instances[e.id].updateTexture(t.value.baseTexture);\n          } else {\n            e.bindTexture(e.TEXTURE_2D, t.value.baseTexture._glTextures[e.id]);\n          }\n          e.uniform1i(t.uniformLocation, this.textureCount);\n          this.textureCount++;\n        } else {\n          this.initSampler2D(t);\n        }\n      }\n    }\n  };\n  s.PixiShader.prototype.destroy = function () {\n    this.gl.deleteProgram(this.program);\n    this.uniforms = null;\n    this.gl = null;\n    this.attributes = null;\n  };\n  s.PixiShader.defaultVertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "attribute vec4 aColor;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "const vec2 center = vec2(-1.0, 1.0);", "void main(void) {", "   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = vec4(aColor.rgb * aColor.a, aColor.a);", "}"];\n  s.PixiFastShader = function (t) {\n    this._UID = s._UID++;\n    this.gl = t;\n    this.program = null;\n    this.fragmentSrc = ["precision lowp float;", "varying vec2 vTextureCoord;", "varying float vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"];\n    this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aPositionCoord;", "attribute vec2 aScale;", "attribute float aRotation;", "attribute vec2 aTextureCoord;", "attribute float aColor;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform mat3 uMatrix;", "varying vec2 vTextureCoord;", "varying float vColor;", "const vec2 center = vec2(-1.0, 1.0);", "void main(void) {", "   vec2 v;", "   vec2 sv = aVertexPosition * aScale;", "   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);", "   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);", "   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;", "   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = aColor;", "}"];\n    this.textureCount = 0;\n    this.init();\n  };\n  s.PixiFastShader.prototype.constructor = s.PixiFastShader;\n  s.PixiFastShader.prototype.init = function () {\n    var t = this.gl;\n    var e = s.compileProgram(t, this.vertexSrc, this.fragmentSrc);\n    t.useProgram(e);\n    this.uSampler = t.getUniformLocation(e, "uSampler");\n    this.projectionVector = t.getUniformLocation(e, "projectionVector");\n    this.offsetVector = t.getUniformLocation(e, "offsetVector");\n    this.dimensions = t.getUniformLocation(e, "dimensions");\n    this.uMatrix = t.getUniformLocation(e, "uMatrix");\n    this.aVertexPosition = t.getAttribLocation(e, "aVertexPosition");\n    this.aPositionCoord = t.getAttribLocation(e, "aPositionCoord");\n    this.aScale = t.getAttribLocation(e, "aScale");\n    this.aRotation = t.getAttribLocation(e, "aRotation");\n    this.aTextureCoord = t.getAttribLocation(e, "aTextureCoord");\n    this.colorAttribute = t.getAttribLocation(e, "aColor");\n    if (this.colorAttribute === -1) {\n      this.colorAttribute = 2;\n    }\n    this.attributes = [this.aVertexPosition, this.aPositionCoord, this.aScale, this.aRotation, this.aTextureCoord, this.colorAttribute];\n    this.program = e;\n  };\n  s.PixiFastShader.prototype.destroy = function () {\n    this.gl.deleteProgram(this.program);\n    this.uniforms = null;\n    this.gl = null;\n    this.attributes = null;\n  };\n  s.StripShader = function (t) {\n    this._UID = s._UID++;\n    this.gl = t;\n    this.program = null;\n    this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "uniform float alpha;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;", "}"];\n    this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "varying vec2 vTextureCoord;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "}"];\n    this.init();\n  };\n  s.StripShader.prototype.constructor = s.StripShader;\n  s.StripShader.prototype.init = function () {\n    var t = this.gl;\n    var e = s.compileProgram(t, this.vertexSrc, this.fragmentSrc);\n    t.useProgram(e);\n    this.uSampler = t.getUniformLocation(e, "uSampler");\n    this.projectionVector = t.getUniformLocation(e, "projectionVector");\n    this.offsetVector = t.getUniformLocation(e, "offsetVector");\n    this.colorAttribute = t.getAttribLocation(e, "aColor");\n    this.aVertexPosition = t.getAttribLocation(e, "aVertexPosition");\n    this.aTextureCoord = t.getAttribLocation(e, "aTextureCoord");\n    this.attributes = [this.aVertexPosition, this.aTextureCoord];\n    this.translationMatrix = t.getUniformLocation(e, "translationMatrix");\n    this.alpha = t.getUniformLocation(e, "alpha");\n    this.program = e;\n  };\n  s.StripShader.prototype.destroy = function () {\n    this.gl.deleteProgram(this.program);\n    this.uniforms = null;\n    this.gl = null;\n    this.attribute = null;\n  };\n  s.PrimitiveShader = function (t) {\n    this._UID = s._UID++;\n    this.gl = t;\n    this.program = null;\n    this.fragmentSrc = ["precision mediump float;", "varying vec4 vColor;", "void main(void) {", "   gl_FragColor = vColor;", "}"];\n    this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec4 aColor;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform float alpha;", "uniform float flipY;", "uniform vec3 tint;", "varying vec4 vColor;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);", "   vColor = aColor * vec4(tint * alpha, alpha);", "}"];\n    this.init();\n  };\n  s.PrimitiveShader.prototype.constructor = s.PrimitiveShader;\n  s.PrimitiveShader.prototype.init = function () {\n    var t = this.gl;\n    var e = s.compileProgram(t, this.vertexSrc, this.fragmentSrc);\n    t.useProgram(e);\n    this.projectionVector = t.getUniformLocation(e, "projectionVector");\n    this.offsetVector = t.getUniformLocation(e, "offsetVector");\n    this.tintColor = t.getUniformLocation(e, "tint");\n    this.flipY = t.getUniformLocation(e, "flipY");\n    this.aVertexPosition = t.getAttribLocation(e, "aVertexPosition");\n    this.colorAttribute = t.getAttribLocation(e, "aColor");\n    this.attributes = [this.aVertexPosition, this.colorAttribute];\n    this.translationMatrix = t.getUniformLocation(e, "translationMatrix");\n    this.alpha = t.getUniformLocation(e, "alpha");\n    this.program = e;\n  };\n  s.PrimitiveShader.prototype.destroy = function () {\n    this.gl.deleteProgram(this.program);\n    this.uniforms = null;\n    this.gl = null;\n    this.attributes = null;\n  };\n  s.ComplexPrimitiveShader = function (t) {\n    this._UID = s._UID++;\n    this.gl = t;\n    this.program = null;\n    this.fragmentSrc = ["precision mediump float;", "varying vec4 vColor;", "void main(void) {", "   gl_FragColor = vColor;", "}"];\n    this.vertexSrc = ["attribute vec2 aVertexPosition;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform vec3 tint;", "uniform float alpha;", "uniform vec3 color;", "uniform float flipY;", "varying vec4 vColor;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);", "   vColor = vec4(color * alpha * tint, alpha);", "}"];\n    this.init();\n  };\n  s.ComplexPrimitiveShader.prototype.constructor = s.ComplexPrimitiveShader;\n  s.ComplexPrimitiveShader.prototype.init = function () {\n    var t = this.gl;\n    var e = s.compileProgram(t, this.vertexSrc, this.fragmentSrc);\n    t.useProgram(e);\n    this.projectionVector = t.getUniformLocation(e, "projectionVector");\n    this.offsetVector = t.getUniformLocation(e, "offsetVector");\n    this.tintColor = t.getUniformLocation(e, "tint");\n    this.color = t.getUniformLocation(e, "color");\n    this.flipY = t.getUniformLocation(e, "flipY");\n    this.aVertexPosition = t.getAttribLocation(e, "aVertexPosition");\n    this.attributes = [this.aVertexPosition, this.colorAttribute];\n    this.translationMatrix = t.getUniformLocation(e, "translationMatrix");\n    this.alpha = t.getUniformLocation(e, "alpha");\n    this.program = e;\n  };\n  s.ComplexPrimitiveShader.prototype.destroy = function () {\n    this.gl.deleteProgram(this.program);\n    this.uniforms = null;\n    this.gl = null;\n    this.attribute = null;\n  };\n  s.glContexts = [];\n  s.instances = [];\n  s.WebGLRenderer = function (t) {\n    this.game = t;\n    s.defaultRenderer || (s.defaultRenderer = this);\n    this.type = s.WEBGL_RENDERER;\n    this.resolution = t.resolution;\n    this.transparent = t.transparent;\n    this.autoResize = false;\n    this.preserveDrawingBuffer = t.preserveDrawingBuffer;\n    this.clearBeforeRender = t.clearBeforeRender;\n    this.width = t.width;\n    this.height = t.height;\n    this.view = t.canvas;\n    this._contextOptions = {\n      alpha: this.transparent,\n      antialias: t.antialias,\n      premultipliedAlpha: this.transparent && this.transparent !== "notMultiplied",\n      stencil: true,\n      preserveDrawingBuffer: this.preserveDrawingBuffer\n    };\n    this.projection = new s.Point();\n    this.offset = new s.Point();\n    this.shaderManager = new s.WebGLShaderManager();\n    this.spriteBatch = new s.WebGLSpriteBatch();\n    this.maskManager = new s.WebGLMaskManager();\n    this.filterManager = new s.WebGLFilterManager();\n    this.stencilManager = new s.WebGLStencilManager();\n    this.blendModeManager = new s.WebGLBlendModeManager();\n    this.renderSession = {};\n    this.renderSession.game = this.game;\n    this.renderSession.gl = this.gl;\n    this.renderSession.drawCount = 0;\n    this.renderSession.shaderManager = this.shaderManager;\n    this.renderSession.maskManager = this.maskManager;\n    this.renderSession.filterManager = this.filterManager;\n    this.renderSession.blendModeManager = this.blendModeManager;\n    this.renderSession.spriteBatch = this.spriteBatch;\n    this.renderSession.stencilManager = this.stencilManager;\n    this.renderSession.renderer = this;\n    this.renderSession.resolution = this.resolution;\n    this.initContext();\n    this.mapBlendModes();\n  };\n  s.WebGLRenderer.prototype.constructor = s.WebGLRenderer;\n  s.WebGLRenderer.prototype.initContext = function () {\n    var t = this.view.getContext("webgl", this._contextOptions) || this.view.getContext("experimental-webgl", this._contextOptions);\n    this.gl = t;\n    if (!t) {\n      throw new Error("This browser does not support webGL. Try using the canvas renderer");\n    }\n    this.glContextId = t.id = s.WebGLRenderer.glContextId++;\n    s.glContexts[this.glContextId] = t;\n    s.instances[this.glContextId] = this;\n    t.disable(t.DEPTH_TEST);\n    t.disable(t.CULL_FACE);\n    t.enable(t.BLEND);\n    this.shaderManager.setContext(t);\n    this.spriteBatch.setContext(t);\n    this.maskManager.setContext(t);\n    this.filterManager.setContext(t);\n    this.blendModeManager.setContext(t);\n    this.stencilManager.setContext(t);\n    this.renderSession.gl = this.gl;\n    this.resize(this.width, this.height);\n  };\n  s.WebGLRenderer.prototype.render = function (t) {\n    if (!this.contextLost) {\n      var e = this.gl;\n      e.viewport(0, 0, this.width, this.height);\n      e.bindFramebuffer(e.FRAMEBUFFER, null);\n      if (this.game.clearBeforeRender) {\n        e.clearColor(t._bgColor.r, t._bgColor.g, t._bgColor.b, t._bgColor.a);\n        e.clear(e.COLOR_BUFFER_BIT);\n      }\n      this.offset.x = this.game.camera._shake.x;\n      this.offset.y = this.game.camera._shake.y;\n      this.renderDisplayObject(t, this.projection);\n    }\n  };\n  s.WebGLRenderer.prototype.renderDisplayObject = function (t, e, i, n) {\n    this.renderSession.blendModeManager.setBlendMode(s.blendModes.NORMAL);\n    this.renderSession.drawCount = 0;\n    this.renderSession.flipY = i ? -1 : 1;\n    this.renderSession.projection = e;\n    this.renderSession.offset = this.offset;\n    this.spriteBatch.begin(this.renderSession);\n    this.filterManager.begin(this.renderSession, i);\n    t._renderWebGL(this.renderSession, n);\n    this.spriteBatch.end();\n  };\n  s.WebGLRenderer.prototype.resize = function (t, e) {\n    this.width = t * this.resolution;\n    this.height = e * this.resolution;\n    this.view.width = this.width;\n    this.view.height = this.height;\n    if (this.autoResize) {\n      this.view.style.width = this.width / this.resolution + "px";\n      this.view.style.height = this.height / this.resolution + "px";\n    }\n    this.gl.viewport(0, 0, this.width, this.height);\n    this.projection.x = this.width / 2 / this.resolution;\n    this.projection.y = -this.height / 2 / this.resolution;\n  };\n  s.WebGLRenderer.prototype.updateTexture = function (t) {\n    var _t$_glTextures, _e$id;\n    if (!t.hasLoaded) {\n      return false;\n    }\n    var e = this.gl;\n    (_t$_glTextures = t._glTextures)[_e$id = e.id] || (_t$_glTextures[_e$id] = e.createTexture());\n    e.bindTexture(e.TEXTURE_2D, t._glTextures[e.id]);\n    e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t.premultipliedAlpha);\n    e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, e.RGBA, e.UNSIGNED_BYTE, t.source);\n    e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, t.scaleMode === s.scaleModes.LINEAR ? e.LINEAR : e.NEAREST);\n    if (t.mipmap && s.isPowerOfTwo(t.width, t.height)) {\n      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, t.scaleMode === s.scaleModes.LINEAR ? e.LINEAR_MIPMAP_LINEAR : e.NEAREST_MIPMAP_NEAREST);\n      e.generateMipmap(e.TEXTURE_2D);\n    } else {\n      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, t.scaleMode === s.scaleModes.LINEAR ? e.LINEAR : e.NEAREST);\n    }\n    if (t._powerOf2) {\n      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.REPEAT);\n      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.REPEAT);\n    } else {\n      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE);\n      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE);\n    }\n    t._dirty[e.id] = false;\n    return true;\n  };\n  s.WebGLRenderer.prototype.destroy = function () {\n    s.glContexts[this.glContextId] = null;\n    this.projection = null;\n    this.offset = null;\n    this.shaderManager.destroy();\n    this.spriteBatch.destroy();\n    this.maskManager.destroy();\n    this.filterManager.destroy();\n    this.shaderManager = null;\n    this.spriteBatch = null;\n    this.maskManager = null;\n    this.filterManager = null;\n    this.gl = null;\n    this.renderSession = null;\n    s.CanvasPool.remove(this);\n    s.instances[this.glContextId] = null;\n    s.WebGLRenderer.glContextId--;\n  };\n  s.WebGLRenderer.prototype.mapBlendModes = function () {\n    var t = this.gl;\n    if (!s.blendModesWebGL) {\n      var e = [];\n      var i = s.blendModes;\n      e[i.NORMAL] = [t.ONE, t.ONE_MINUS_SRC_ALPHA];\n      e[i.ADD] = [t.SRC_ALPHA, t.DST_ALPHA];\n      e[i.MULTIPLY] = [t.DST_COLOR, t.ONE_MINUS_SRC_ALPHA];\n      e[i.SCREEN] = [t.SRC_ALPHA, t.ONE];\n      e[i.OVERLAY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA];\n      e[i.DARKEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA];\n      e[i.LIGHTEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA];\n      e[i.COLOR_DODGE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA];\n      e[i.COLOR_BURN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA];\n      e[i.HARD_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA];\n      e[i.SOFT_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA];\n      e[i.DIFFERENCE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA];\n      e[i.EXCLUSION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA];\n      e[i.HUE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA];\n      e[i.SATURATION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA];\n      e[i.COLOR] = [t.ONE, t.ONE_MINUS_SRC_ALPHA];\n      e[i.LUMINOSITY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA];\n      s.blendModesWebGL = e;\n    }\n  };\n  s.WebGLRenderer.glContextId = 0;\n  s.WebGLBlendModeManager = function () {\n    this.currentBlendMode = 99999;\n  };\n  s.WebGLBlendModeManager.prototype.constructor = s.WebGLBlendModeManager;\n  s.WebGLBlendModeManager.prototype.setContext = function (t) {\n    this.gl = t;\n  };\n  s.WebGLBlendModeManager.prototype.setBlendMode = function (t) {\n    if (this.currentBlendMode === t) {\n      return false;\n    }\n    this.currentBlendMode = t;\n    var e = s.blendModesWebGL[this.currentBlendMode];\n    if (e) {\n      this.gl.blendFunc(e[0], e[1]);\n    }\n    return true;\n  };\n  s.WebGLBlendModeManager.prototype.destroy = function () {\n    this.gl = null;\n  };\n  s.WebGLMaskManager = function () {};\n  s.WebGLMaskManager.prototype.constructor = s.WebGLMaskManager;\n  s.WebGLMaskManager.prototype.setContext = function (t) {\n    this.gl = t;\n  };\n  s.WebGLMaskManager.prototype.pushMask = function (t, e) {\n    var i = e.gl;\n    if (t.dirty) {\n      s.WebGLGraphics.updateGraphics(t, i);\n    }\n    if (t._webGL[i.id] !== undefined && t._webGL[i.id].data !== undefined && t._webGL[i.id].data.length !== 0) {\n      e.stencilManager.pushStencil(t, t._webGL[i.id].data[0], e);\n    }\n  };\n  s.WebGLMaskManager.prototype.popMask = function (t, e) {\n    var i = this.gl;\n    if (t._webGL[i.id] !== undefined && t._webGL[i.id].data !== undefined && t._webGL[i.id].data.length !== 0) {\n      e.stencilManager.popStencil(t, t._webGL[i.id].data[0], e);\n    }\n  };\n  s.WebGLMaskManager.prototype.destroy = function () {\n    this.gl = null;\n  };\n  s.WebGLStencilManager = function () {\n    this.stencilStack = [];\n    this.reverse = true;\n    this.count = 0;\n  };\n  s.WebGLStencilManager.prototype.setContext = function (t) {\n    this.gl = t;\n  };\n  s.WebGLStencilManager.prototype.pushStencil = function (t, e, i) {\n    var s = this.gl;\n    this.bindGraphics(t, e, i);\n    if (this.stencilStack.length === 0) {\n      s.enable(s.STENCIL_TEST);\n      s.clear(s.STENCIL_BUFFER_BIT);\n      this.reverse = true;\n      this.count = 0;\n    }\n    this.stencilStack.push(e);\n    var n = this.count;\n    s.colorMask(false, false, false, false);\n    s.stencilFunc(s.ALWAYS, 0, 255);\n    s.stencilOp(s.KEEP, s.KEEP, s.INVERT);\n    if (e.mode === 1) {\n      s.drawElements(s.TRIANGLE_FAN, e.indices.length - 4, s.UNSIGNED_SHORT, 0);\n      if (this.reverse) {\n        s.stencilFunc(s.EQUAL, 255 - n, 255);\n        s.stencilOp(s.KEEP, s.KEEP, s.DECR);\n      } else {\n        s.stencilFunc(s.EQUAL, n, 255);\n        s.stencilOp(s.KEEP, s.KEEP, s.INCR);\n      }\n      s.drawElements(s.TRIANGLE_FAN, 4, s.UNSIGNED_SHORT, (e.indices.length - 4) * 2);\n      if (this.reverse) {\n        s.stencilFunc(s.EQUAL, 255 - (n + 1), 255);\n      } else {\n        s.stencilFunc(s.EQUAL, n + 1, 255);\n      }\n      this.reverse = !this.reverse;\n    } else {\n      if (this.reverse) {\n        s.stencilFunc(s.EQUAL, n, 255);\n        s.stencilOp(s.KEEP, s.KEEP, s.INCR);\n      } else {\n        s.stencilFunc(s.EQUAL, 255 - n, 255);\n        s.stencilOp(s.KEEP, s.KEEP, s.DECR);\n      }\n      s.drawElements(s.TRIANGLE_STRIP, e.indices.length, s.UNSIGNED_SHORT, 0);\n      if (this.reverse) {\n        s.stencilFunc(s.EQUAL, n + 1, 255);\n      } else {\n        s.stencilFunc(s.EQUAL, 255 - (n + 1), 255);\n      }\n    }\n    s.colorMask(true, true, true, true);\n    s.stencilOp(s.KEEP, s.KEEP, s.KEEP);\n    this.count++;\n  };\n  s.WebGLStencilManager.prototype.bindGraphics = function (t, e, i) {\n    this._currentGraphics = t;\n    var n = this.gl;\n    var o = i.projection;\n    var a = i.offset;\n    var r;\n    if (e.mode === 1) {\n      r = i.shaderManager.complexPrimitiveShader;\n      i.shaderManager.setShader(r);\n      n.uniform1f(r.flipY, i.flipY);\n      n.uniformMatrix3fv(r.translationMatrix, false, t.worldTransform.toArray(true));\n      n.uniform2f(r.projectionVector, o.x, -o.y);\n      n.uniform2f(r.offsetVector, -a.x, -a.y);\n      n.uniform3fv(r.tintColor, s.hex2rgb(t.tint));\n      n.uniform3fv(r.color, e.color);\n      n.uniform1f(r.alpha, t.worldAlpha * e.alpha);\n      n.bindBuffer(n.ARRAY_BUFFER, e.buffer);\n      n.vertexAttribPointer(r.aVertexPosition, 2, n.FLOAT, false, 8, 0);\n      n.bindBuffer(n.ELEMENT_ARRAY_BUFFER, e.indexBuffer);\n    } else {\n      r = i.shaderManager.primitiveShader;\n      i.shaderManager.setShader(r);\n      n.uniformMatrix3fv(r.translationMatrix, false, t.worldTransform.toArray(true));\n      n.uniform1f(r.flipY, i.flipY);\n      n.uniform2f(r.projectionVector, o.x, -o.y);\n      n.uniform2f(r.offsetVector, -a.x, -a.y);\n      n.uniform3fv(r.tintColor, s.hex2rgb(t.tint));\n      n.uniform1f(r.alpha, t.worldAlpha);\n      n.bindBuffer(n.ARRAY_BUFFER, e.buffer);\n      n.vertexAttribPointer(r.aVertexPosition, 2, n.FLOAT, false, 24, 0);\n      n.vertexAttribPointer(r.colorAttribute, 4, n.FLOAT, false, 24, 8);\n      n.bindBuffer(n.ELEMENT_ARRAY_BUFFER, e.indexBuffer);\n    }\n  };\n  s.WebGLStencilManager.prototype.popStencil = function (t, e, i) {\n    var s = this.gl;\n    this.stencilStack.pop();\n    this.count--;\n    if (this.stencilStack.length === 0) {\n      s.disable(s.STENCIL_TEST);\n    } else {\n      var n = this.count;\n      this.bindGraphics(t, e, i);\n      s.colorMask(false, false, false, false);\n      if (e.mode === 1) {\n        this.reverse = !this.reverse;\n        if (this.reverse) {\n          s.stencilFunc(s.EQUAL, 255 - (n + 1), 255);\n          s.stencilOp(s.KEEP, s.KEEP, s.INCR);\n        } else {\n          s.stencilFunc(s.EQUAL, n + 1, 255);\n          s.stencilOp(s.KEEP, s.KEEP, s.DECR);\n        }\n        s.drawElements(s.TRIANGLE_FAN, 4, s.UNSIGNED_SHORT, (e.indices.length - 4) * 2);\n        s.stencilFunc(s.ALWAYS, 0, 255);\n        s.stencilOp(s.KEEP, s.KEEP, s.INVERT);\n        s.drawElements(s.TRIANGLE_FAN, e.indices.length - 4, s.UNSIGNED_SHORT, 0);\n        if (this.reverse) {\n          s.stencilFunc(s.EQUAL, n, 255);\n        } else {\n          s.stencilFunc(s.EQUAL, 255 - n, 255);\n        }\n      } else {\n        if (this.reverse) {\n          s.stencilFunc(s.EQUAL, n + 1, 255);\n          s.stencilOp(s.KEEP, s.KEEP, s.DECR);\n        } else {\n          s.stencilFunc(s.EQUAL, 255 - (n + 1), 255);\n          s.stencilOp(s.KEEP, s.KEEP, s.INCR);\n        }\n        s.drawElements(s.TRIANGLE_STRIP, e.indices.length, s.UNSIGNED_SHORT, 0);\n        if (this.reverse) {\n          s.stencilFunc(s.EQUAL, n, 255);\n        } else {\n          s.stencilFunc(s.EQUAL, 255 - n, 255);\n        }\n      }\n      s.colorMask(true, true, true, true);\n      s.stencilOp(s.KEEP, s.KEEP, s.KEEP);\n    }\n  };\n  s.WebGLStencilManager.prototype.destroy = function () {\n    this.stencilStack = null;\n    this.gl = null;\n  };\n  s.WebGLShaderManager = function () {\n    this.maxAttibs = 10;\n    this.attribState = [];\n    this.tempAttribState = [];\n    for (var t = 0; t < this.maxAttibs; t++) {\n      this.attribState[t] = false;\n    }\n    this.stack = [];\n  };\n  s.WebGLShaderManager.prototype.constructor = s.WebGLShaderManager;\n  s.WebGLShaderManager.prototype.setContext = function (t) {\n    this.gl = t;\n    this.primitiveShader = new s.PrimitiveShader(t);\n    this.complexPrimitiveShader = new s.ComplexPrimitiveShader(t);\n    this.defaultShader = new s.PixiShader(t);\n    this.fastShader = new s.PixiFastShader(t);\n    this.stripShader = new s.StripShader(t);\n    this.setShader(this.defaultShader);\n  };\n  s.WebGLShaderManager.prototype.setAttribs = function (t) {\n    var e;\n    for (e = 0; e < this.tempAttribState.length; e++) {\n      this.tempAttribState[e] = false;\n    }\n    for (e = 0; e < t.length; e++) {\n      var i = t[e];\n      this.tempAttribState[i] = true;\n    }\n    var s = this.gl;\n    for (e = 0; e < this.attribState.length; e++) {\n      if (this.attribState[e] !== this.tempAttribState[e]) {\n        this.attribState[e] = this.tempAttribState[e];\n        if (this.tempAttribState[e]) {\n          s.enableVertexAttribArray(e);\n        } else {\n          s.disableVertexAttribArray(e);\n        }\n      }\n    }\n  };\n  s.WebGLShaderManager.prototype.setShader = function (t) {\n    return this._currentId !== t._UID && (this._currentId = t._UID, this.currentShader = t, this.gl.useProgram(t.program), this.setAttribs(t.attributes), true);\n  };\n  s.WebGLShaderManager.prototype.destroy = function () {\n    this.attribState = null;\n    this.tempAttribState = null;\n    this.primitiveShader.destroy();\n    this.complexPrimitiveShader.destroy();\n    this.defaultShader.destroy();\n    this.fastShader.destroy();\n    this.stripShader.destroy();\n    this.gl = null;\n  };\n  s.WebGLSpriteBatch = function () {\n    this.vertSize = 5;\n    this.size = 2000;\n    var t = this.size * 4 * 4 * this.vertSize;\n    var e = this.size * 6;\n    this.vertices = new s.ArrayBuffer(t);\n    this.positions = new s.Float32Array(this.vertices);\n    this.colors = new s.Uint32Array(this.vertices);\n    this.indices = new s.Uint16Array(e);\n    this.lastIndexCount = 0;\n    for (var i = 0, n = 0; i < e; i += 6, n += 4) {\n      this.indices[i + 0] = n + 0;\n      this.indices[i + 1] = n + 1;\n      this.indices[i + 2] = n + 2;\n      this.indices[i + 3] = n + 0;\n      this.indices[i + 4] = n + 2;\n      this.indices[i + 5] = n + 3;\n    }\n    this.drawing = false;\n    this.currentBatchSize = 0;\n    this.currentBaseTexture = null;\n    this.dirty = true;\n    this.textures = [];\n    this.blendModes = [];\n    this.shaders = [];\n    this.sprites = [];\n    this.defaultShader = new s.AbstractFilter(["precision lowp float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"]);\n  };\n  s.WebGLSpriteBatch.prototype.setContext = function (t) {\n    this.gl = t;\n    this.vertexBuffer = t.createBuffer();\n    this.indexBuffer = t.createBuffer();\n    t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n    t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.indices, t.STATIC_DRAW);\n    t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer);\n    t.bufferData(t.ARRAY_BUFFER, this.vertices, t.DYNAMIC_DRAW);\n    this.currentBlendMode = 99999;\n    var e = new s.PixiShader(t);\n    e.fragmentSrc = this.defaultShader.fragmentSrc;\n    e.uniforms = {};\n    e.init();\n    this.defaultShader.shaders[t.id] = e;\n  };\n  s.WebGLSpriteBatch.prototype.begin = function (t) {\n    this.renderSession = t;\n    this.shader = this.renderSession.shaderManager.defaultShader;\n    this.start();\n  };\n  s.WebGLSpriteBatch.prototype.end = function () {\n    this.flush();\n  };\n  s.WebGLSpriteBatch.prototype.render = function (t, e) {\n    var i = t.texture;\n    var s = t.worldTransform;\n    if (e) {\n      s = e;\n    }\n    if (this.currentBatchSize >= this.size) {\n      this.flush();\n      this.currentBaseTexture = i.baseTexture;\n    }\n    var n = i._uvs;\n    if (n) {\n      var o = t.anchor.x;\n      var a = t.anchor.y;\n      var r;\n      var h;\n      var l;\n      var c;\n      if (i.trim) {\n        var u = i.trim;\n        h = u.x - o * u.width;\n        r = h + i.crop.width;\n        c = u.y - a * u.height;\n        l = c + i.crop.height;\n      } else {\n        r = i.frame.width * (1 - o);\n        h = i.frame.width * -o;\n        l = i.frame.height * (1 - a);\n        c = i.frame.height * -a;\n      }\n      var d = this.currentBatchSize * 4 * this.vertSize;\n      var p = i.baseTexture.resolution;\n      var f = s.a / p;\n      var y = s.b / p;\n      var g = s.c / p;\n      var m = s.d / p;\n      var v = s.tx;\n      var b = s.ty;\n      var x = this.colors;\n      var _ = this.positions;\n      if (this.renderSession.roundPixels) {\n        _[d] = f * h + g * c + v | 0;\n        _[d + 1] = m * c + y * h + b | 0;\n        _[d + 5] = f * r + g * c + v | 0;\n        _[d + 6] = m * c + y * r + b | 0;\n        _[d + 10] = f * r + g * l + v | 0;\n        _[d + 11] = m * l + y * r + b | 0;\n        _[d + 15] = f * h + g * l + v | 0;\n        _[d + 16] = m * l + y * h + b | 0;\n      } else {\n        _[d] = f * h + g * c + v;\n        _[d + 1] = m * c + y * h + b;\n        _[d + 5] = f * r + g * c + v;\n        _[d + 6] = m * c + y * r + b;\n        _[d + 10] = f * r + g * l + v;\n        _[d + 11] = m * l + y * r + b;\n        _[d + 15] = f * h + g * l + v;\n        _[d + 16] = m * l + y * h + b;\n      }\n      _[d + 2] = n.x0;\n      _[d + 3] = n.y0;\n      _[d + 7] = n.x1;\n      _[d + 8] = n.y1;\n      _[d + 12] = n.x2;\n      _[d + 13] = n.y2;\n      _[d + 17] = n.x3;\n      _[d + 18] = n.y3;\n      var w = t.tint;\n      x[d + 4] = x[d + 9] = x[d + 14] = x[d + 19] = (w >> 16) + (w & 65280) + ((w & 255) << 16) + (t.worldAlpha * 255 << 24);\n      this.sprites[this.currentBatchSize++] = t;\n    }\n  };\n  s.WebGLSpriteBatch.prototype.renderTilingSprite = function (t) {\n    var e = t.tilingTexture;\n    if (this.currentBatchSize >= this.size) {\n      this.flush();\n      this.currentBaseTexture = e.baseTexture;\n    }\n    t._uvs || (t._uvs = new s.TextureUvs());\n    var i = t._uvs;\n    var n = e.baseTexture.width;\n    var o = e.baseTexture.height;\n    t.tilePosition.x %= n * t.tileScaleOffset.x;\n    t.tilePosition.y %= o * t.tileScaleOffset.y;\n    var a = t.tilePosition.x / (n * t.tileScaleOffset.x);\n    var r = t.tilePosition.y / (o * t.tileScaleOffset.y);\n    var h = t.width / n / (t.tileScale.x * t.tileScaleOffset.x);\n    var l = t.height / o / (t.tileScale.y * t.tileScaleOffset.y);\n    i.x0 = 0 - a;\n    i.y0 = 0 - r;\n    i.x1 = h * 1 - a;\n    i.y1 = 0 - r;\n    i.x2 = h * 1 - a;\n    i.y2 = l * 1 - r;\n    i.x3 = 0 - a;\n    i.y3 = l * 1 - r;\n    var c = t.tint;\n    var u = (c >> 16) + (c & 65280) + ((c & 255) << 16) + (t.worldAlpha * 255 << 24);\n    var d = this.positions;\n    var p = this.colors;\n    var f = t.width;\n    var y = t.height;\n    var g = t.anchor.x;\n    var m = t.anchor.y;\n    var v = f * (1 - g);\n    var b = f * -g;\n    var x = y * (1 - m);\n    var _ = y * -m;\n    var w = this.currentBatchSize * 4 * this.vertSize;\n    var C = e.baseTexture.resolution;\n    var P = t.worldTransform;\n    var T = P.a / C;\n    var S = P.b / C;\n    var A = P.c / C;\n    var E = P.d / C;\n    var I = P.tx;\n    var M = P.ty;\n    d[w++] = T * b + A * _ + I;\n    d[w++] = E * _ + S * b + M;\n    d[w++] = i.x0;\n    d[w++] = i.y0;\n    p[w++] = u;\n    d[w++] = T * v + A * _ + I;\n    d[w++] = E * _ + S * v + M;\n    d[w++] = i.x1;\n    d[w++] = i.y1;\n    p[w++] = u;\n    d[w++] = T * v + A * x + I;\n    d[w++] = E * x + S * v + M;\n    d[w++] = i.x2;\n    d[w++] = i.y2;\n    p[w++] = u;\n    d[w++] = T * b + A * x + I;\n    d[w++] = E * x + S * b + M;\n    d[w++] = i.x3;\n    d[w++] = i.y3;\n    p[w++] = u;\n    this.sprites[this.currentBatchSize++] = t;\n  };\n  s.WebGLSpriteBatch.prototype.flush = function () {\n    if (this.currentBatchSize !== 0) {\n      var t = this.gl;\n      var e;\n      if (this.dirty) {\n        this.dirty = false;\n        t.activeTexture(t.TEXTURE0);\n        t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer);\n        t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n        e = this.defaultShader.shaders[t.id];\n        var i = this.vertSize * 4;\n        t.vertexAttribPointer(e.aVertexPosition, 2, t.FLOAT, false, i, 0);\n        t.vertexAttribPointer(e.aTextureCoord, 2, t.FLOAT, false, i, 8);\n        t.vertexAttribPointer(e.colorAttribute, 4, t.UNSIGNED_BYTE, true, i, 16);\n      }\n      if (this.currentBatchSize > this.size * 0.5) {\n        t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertices);\n      } else {\n        var n = this.positions.subarray(0, this.currentBatchSize * 4 * this.vertSize);\n        t.bufferSubData(t.ARRAY_BUFFER, 0, n);\n      }\n      var o;\n      var a;\n      var r;\n      var h = 0;\n      var l = 0;\n      var c = null;\n      var u = this.renderSession.blendModeManager.currentBlendMode;\n      var d = null;\n      var p = false;\n      var f = false;\n      var y;\n      for (var g = 0, m = this.currentBatchSize; g < m; g++) {\n        y = this.sprites[g];\n        o = y.tilingTexture ? y.tilingTexture.baseTexture : y.texture.baseTexture;\n        a = y.blendMode;\n        r = y.shader || this.defaultShader;\n        p = u !== a;\n        f = d !== r;\n        var v = o.skipRender;\n        if (v && y.children.length > 0) {\n          v = false;\n        }\n        if ((c !== o && !v || p || f) && (this.renderBatch(c, h, l), l = g, h = 0, c = o, p && (u = a, this.renderSession.blendModeManager.setBlendMode(u)), f)) {\n          d = r;\n          e = d.shaders[t.id];\n          if (!e) {\n            e = new s.PixiShader(t);\n            e.fragmentSrc = d.fragmentSrc;\n            e.uniforms = d.uniforms;\n            e.init();\n            d.shaders[t.id] = e;\n          }\n          this.renderSession.shaderManager.setShader(e);\n          if (e.dirty) {\n            e.syncUniforms();\n          }\n          var b = this.renderSession.projection;\n          t.uniform2f(e.projectionVector, b.x, b.y);\n          var x = this.renderSession.offset;\n          t.uniform2f(e.offsetVector, x.x, x.y);\n        }\n        h++;\n      }\n      this.renderBatch(c, h, l);\n      this.currentBatchSize = 0;\n    }\n  };\n  s.WebGLSpriteBatch.prototype.renderBatch = function (t, e, i) {\n    if (e !== 0) {\n      var s = this.gl;\n      if (t._dirty[s.id]) {\n        if (!this.renderSession.renderer.updateTexture(t)) {\n          return;\n        }\n      } else {\n        s.bindTexture(s.TEXTURE_2D, t._glTextures[s.id]);\n      }\n      s.drawElements(s.TRIANGLES, e * 6, s.UNSIGNED_SHORT, i * 6 * 2);\n      this.renderSession.drawCount++;\n    }\n  };\n  s.WebGLSpriteBatch.prototype.stop = function () {\n    this.flush();\n    this.dirty = true;\n  };\n  s.WebGLSpriteBatch.prototype.start = function () {\n    this.dirty = true;\n  };\n  s.WebGLSpriteBatch.prototype.destroy = function () {\n    this.vertices = null;\n    this.indices = null;\n    this.gl.deleteBuffer(this.vertexBuffer);\n    this.gl.deleteBuffer(this.indexBuffer);\n    this.currentBaseTexture = null;\n    this.gl = null;\n  };\n  s.WebGLFastSpriteBatch = function (t) {\n    this.vertSize = 10;\n    this.maxSize = 6000;\n    this.size = this.maxSize;\n    var e = this.size * 4 * this.vertSize;\n    var i = this.maxSize * 6;\n    this.vertices = new s.Float32Array(e);\n    this.indices = new s.Uint16Array(i);\n    this.vertexBuffer = null;\n    this.indexBuffer = null;\n    this.lastIndexCount = 0;\n    for (var n = 0, o = 0; n < i; n += 6, o += 4) {\n      this.indices[n + 0] = o + 0;\n      this.indices[n + 1] = o + 1;\n      this.indices[n + 2] = o + 2;\n      this.indices[n + 3] = o + 0;\n      this.indices[n + 4] = o + 2;\n      this.indices[n + 5] = o + 3;\n    }\n    this.drawing = false;\n    this.currentBatchSize = 0;\n    this.currentBaseTexture = null;\n    this.currentBlendMode = 0;\n    this.renderSession = null;\n    this.shader = null;\n    this.matrix = null;\n    this.setContext(t);\n  };\n  s.WebGLFastSpriteBatch.prototype.constructor = s.WebGLFastSpriteBatch;\n  s.WebGLFastSpriteBatch.prototype.setContext = function (t) {\n    this.gl = t;\n    this.vertexBuffer = t.createBuffer();\n    this.indexBuffer = t.createBuffer();\n    t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n    t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.indices, t.STATIC_DRAW);\n    t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer);\n    t.bufferData(t.ARRAY_BUFFER, this.vertices, t.DYNAMIC_DRAW);\n  };\n  s.WebGLFastSpriteBatch.prototype.begin = function (t, e) {\n    this.renderSession = e;\n    this.shader = this.renderSession.shaderManager.fastShader;\n    this.matrix = t.worldTransform.toArray(true);\n    this.start();\n  };\n  s.WebGLFastSpriteBatch.prototype.end = function () {\n    this.flush();\n  };\n  s.WebGLFastSpriteBatch.prototype.render = function (t) {\n    var e = t.children;\n    var i = e[0];\n    if (i.texture._uvs) {\n      this.currentBaseTexture = i.texture.baseTexture;\n      if (i.blendMode !== this.renderSession.blendModeManager.currentBlendMode) {\n        this.flush();\n        this.renderSession.blendModeManager.setBlendMode(i.blendMode);\n      }\n      for (var s = 0, n = e.length; s < n; s++) {\n        this.renderSprite(e[s]);\n      }\n      this.flush();\n    }\n  };\n  s.WebGLFastSpriteBatch.prototype.renderSprite = function (t) {\n    if (t.visible && (t.texture.baseTexture === this.currentBaseTexture || t.texture.baseTexture.skipRender || (this.flush(), this.currentBaseTexture = t.texture.baseTexture, t.texture._uvs))) {\n      var e;\n      var i = this.vertices;\n      var s;\n      var n;\n      var o;\n      var a;\n      var r;\n      var h;\n      var l;\n      e = t.texture._uvs;\n      s = t.texture.frame.width;\n      n = t.texture.frame.height;\n      if (t.texture.trim) {\n        var c = t.texture.trim;\n        a = c.x - t.anchor.x * c.width;\n        o = a + t.texture.crop.width;\n        h = c.y - t.anchor.y * c.height;\n        r = h + t.texture.crop.height;\n      } else {\n        o = t.texture.frame.width * (1 - t.anchor.x);\n        a = t.texture.frame.width * -t.anchor.x;\n        r = t.texture.frame.height * (1 - t.anchor.y);\n        h = t.texture.frame.height * -t.anchor.y;\n      }\n      l = this.currentBatchSize * 4 * this.vertSize;\n      i[l++] = a;\n      i[l++] = h;\n      i[l++] = t.position.x;\n      i[l++] = t.position.y;\n      i[l++] = t.scale.x;\n      i[l++] = t.scale.y;\n      i[l++] = t.rotation;\n      i[l++] = e.x0;\n      i[l++] = e.y1;\n      i[l++] = t.alpha;\n      i[l++] = o;\n      i[l++] = h;\n      i[l++] = t.position.x;\n      i[l++] = t.position.y;\n      i[l++] = t.scale.x;\n      i[l++] = t.scale.y;\n      i[l++] = t.rotation;\n      i[l++] = e.x1;\n      i[l++] = e.y1;\n      i[l++] = t.alpha;\n      i[l++] = o;\n      i[l++] = r;\n      i[l++] = t.position.x;\n      i[l++] = t.position.y;\n      i[l++] = t.scale.x;\n      i[l++] = t.scale.y;\n      i[l++] = t.rotation;\n      i[l++] = e.x2;\n      i[l++] = e.y2;\n      i[l++] = t.alpha;\n      i[l++] = a;\n      i[l++] = r;\n      i[l++] = t.position.x;\n      i[l++] = t.position.y;\n      i[l++] = t.scale.x;\n      i[l++] = t.scale.y;\n      i[l++] = t.rotation;\n      i[l++] = e.x3;\n      i[l++] = e.y3;\n      i[l++] = t.alpha;\n      this.currentBatchSize++;\n      if (this.currentBatchSize >= this.size) {\n        this.flush();\n      }\n    }\n  };\n  s.WebGLFastSpriteBatch.prototype.flush = function () {\n    if (this.currentBatchSize !== 0) {\n      var t = this.gl;\n      if (!this.currentBaseTexture._glTextures[t.id]) {\n        this.renderSession.renderer.updateTexture(this.currentBaseTexture, t);\n      }\n      t.bindTexture(t.TEXTURE_2D, this.currentBaseTexture._glTextures[t.id]);\n      if (this.currentBatchSize > this.size * 0.5) {\n        t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertices);\n      } else {\n        var e = this.vertices.subarray(0, this.currentBatchSize * 4 * this.vertSize);\n        t.bufferSubData(t.ARRAY_BUFFER, 0, e);\n      }\n      t.drawElements(t.TRIANGLES, this.currentBatchSize * 6, t.UNSIGNED_SHORT, 0);\n      this.currentBatchSize = 0;\n      this.renderSession.drawCount++;\n    }\n  };\n  s.WebGLFastSpriteBatch.prototype.stop = function () {\n    this.flush();\n  };\n  s.WebGLFastSpriteBatch.prototype.start = function () {\n    var t = this.gl;\n    t.activeTexture(t.TEXTURE0);\n    t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer);\n    t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n    var e = this.renderSession.projection;\n    t.uniform2f(this.shader.projectionVector, e.x, e.y);\n    t.uniformMatrix3fv(this.shader.uMatrix, false, this.matrix);\n    var i = this.vertSize * 4;\n    t.vertexAttribPointer(this.shader.aVertexPosition, 2, t.FLOAT, false, i, 0);\n    t.vertexAttribPointer(this.shader.aPositionCoord, 2, t.FLOAT, false, i, 8);\n    t.vertexAttribPointer(this.shader.aScale, 2, t.FLOAT, false, i, 16);\n    t.vertexAttribPointer(this.shader.aRotation, 1, t.FLOAT, false, i, 24);\n    t.vertexAttribPointer(this.shader.aTextureCoord, 2, t.FLOAT, false, i, 28);\n    t.vertexAttribPointer(this.shader.colorAttribute, 1, t.FLOAT, false, i, 36);\n  };\n  s.WebGLFilterManager = function () {\n    this.filterStack = [];\n    this.offsetX = 0;\n    this.offsetY = 0;\n  };\n  s.WebGLFilterManager.prototype.constructor = s.WebGLFilterManager;\n  s.WebGLFilterManager.prototype.setContext = function (t) {\n    this.gl = t;\n    this.texturePool = [];\n    this.initShaderBuffers();\n  };\n  s.WebGLFilterManager.prototype.begin = function (t, e) {\n    this.renderSession = t;\n    this.defaultShader = t.shaderManager.defaultShader;\n    var i = this.renderSession.projection;\n    this.width = i.x * 2;\n    this.height = -i.y * 2;\n    this.buffer = e;\n  };\n  s.WebGLFilterManager.prototype.pushFilter = function (t) {\n    var e = this.gl;\n    var i = this.renderSession.projection;\n    var n = this.renderSession.offset;\n    t._filterArea = t.target.filterArea || t.target.getBounds();\n    t._previous_stencil_mgr = this.renderSession.stencilManager;\n    this.renderSession.stencilManager = new s.WebGLStencilManager();\n    this.renderSession.stencilManager.setContext(e);\n    e.disable(e.STENCIL_TEST);\n    this.filterStack.push(t);\n    var o = t.filterPasses[0];\n    this.offsetX += t._filterArea.x;\n    this.offsetY += t._filterArea.y;\n    var a = this.texturePool.pop();\n    if (a) {\n      a.resize(this.width * this.renderSession.resolution, this.height * this.renderSession.resolution);\n    } else {\n      a = new s.FilterTexture(this.gl, this.width * this.renderSession.resolution, this.height * this.renderSession.resolution);\n    }\n    e.bindTexture(e.TEXTURE_2D, a.texture);\n    var r = t._filterArea;\n    var h = o.padding;\n    r.x -= h;\n    r.y -= h;\n    r.width += h * 2;\n    r.height += h * 2;\n    if (r.x < 0) {\n      r.x = 0;\n    }\n    if (r.width > this.width) {\n      r.width = this.width;\n    }\n    if (r.y < 0) {\n      r.y = 0;\n    }\n    if (r.height > this.height) {\n      r.height = this.height;\n    }\n    e.bindFramebuffer(e.FRAMEBUFFER, a.frameBuffer);\n    e.viewport(0, 0, r.width * this.renderSession.resolution, r.height * this.renderSession.resolution);\n    i.x = r.width / 2;\n    i.y = -r.height / 2;\n    n.x = -r.x;\n    n.y = -r.y;\n    e.colorMask(true, true, true, true);\n    e.clearColor(0, 0, 0, 0);\n    e.clear(e.COLOR_BUFFER_BIT);\n    t._glFilterTexture = a;\n  };\n  s.WebGLFilterManager.prototype.popFilter = function () {\n    var t = this.gl;\n    var e = this.filterStack.pop();\n    var i = e._filterArea;\n    var n = e._glFilterTexture;\n    var o = this.renderSession.projection;\n    var a = this.renderSession.offset;\n    if (e.filterPasses.length > 1) {\n      t.viewport(0, 0, i.width * this.renderSession.resolution, i.height * this.renderSession.resolution);\n      t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer);\n      this.vertexArray[0] = 0;\n      this.vertexArray[1] = i.height;\n      this.vertexArray[2] = i.width;\n      this.vertexArray[3] = i.height;\n      this.vertexArray[4] = 0;\n      this.vertexArray[5] = 0;\n      this.vertexArray[6] = i.width;\n      this.vertexArray[7] = 0;\n      t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertexArray);\n      t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer);\n      this.uvArray[2] = i.width / this.width;\n      this.uvArray[5] = i.height / this.height;\n      this.uvArray[6] = i.width / this.width;\n      this.uvArray[7] = i.height / this.height;\n      t.bufferSubData(t.ARRAY_BUFFER, 0, this.uvArray);\n      var r = n;\n      var h = this.texturePool.pop();\n      h || (h = new s.FilterTexture(this.gl, this.width * this.renderSession.resolution, this.height * this.renderSession.resolution));\n      h.resize(this.width * this.renderSession.resolution, this.height * this.renderSession.resolution);\n      t.bindFramebuffer(t.FRAMEBUFFER, h.frameBuffer);\n      t.clear(t.COLOR_BUFFER_BIT);\n      t.disable(t.BLEND);\n      for (var l = 0; l < e.filterPasses.length - 1; l++) {\n        var c = e.filterPasses[l];\n        t.bindFramebuffer(t.FRAMEBUFFER, h.frameBuffer);\n        t.activeTexture(t.TEXTURE0);\n        t.bindTexture(t.TEXTURE_2D, r.texture);\n        this.applyFilterPass(c, i, i.width, i.height);\n        var u = r;\n        r = h;\n        h = u;\n      }\n      t.enable(t.BLEND);\n      n = r;\n      this.texturePool.push(h);\n    }\n    var d = e.filterPasses[e.filterPasses.length - 1];\n    this.offsetX -= i.x;\n    this.offsetY -= i.y;\n    var p = this.width;\n    var f = this.height;\n    var y = 0;\n    var g = 0;\n    var m = this.buffer;\n    if (this.filterStack.length === 0) {\n      t.colorMask(true, true, true, true);\n    } else {\n      var v = this.filterStack[this.filterStack.length - 1];\n      i = v._filterArea;\n      p = i.width;\n      f = i.height;\n      y = i.x;\n      g = i.y;\n      m = v._glFilterTexture.frameBuffer;\n    }\n    o.x = p / 2;\n    o.y = -f / 2;\n    a.x = y;\n    a.y = g;\n    i = e._filterArea;\n    var b = i.x - y;\n    var x = i.y - g;\n    t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer);\n    this.vertexArray[0] = b;\n    this.vertexArray[1] = x + i.height;\n    this.vertexArray[2] = b + i.width;\n    this.vertexArray[3] = x + i.height;\n    this.vertexArray[4] = b;\n    this.vertexArray[5] = x;\n    this.vertexArray[6] = b + i.width;\n    this.vertexArray[7] = x;\n    t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertexArray);\n    t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer);\n    this.uvArray[2] = i.width / this.width;\n    this.uvArray[5] = i.height / this.height;\n    this.uvArray[6] = i.width / this.width;\n    this.uvArray[7] = i.height / this.height;\n    t.bufferSubData(t.ARRAY_BUFFER, 0, this.uvArray);\n    t.viewport(0, 0, p * this.renderSession.resolution, f * this.renderSession.resolution);\n    t.bindFramebuffer(t.FRAMEBUFFER, m);\n    t.activeTexture(t.TEXTURE0);\n    t.bindTexture(t.TEXTURE_2D, n.texture);\n    if (this.renderSession.stencilManager) {\n      this.renderSession.stencilManager.destroy();\n    }\n    this.renderSession.stencilManager = e._previous_stencil_mgr;\n    e._previous_stencil_mgr = null;\n    if (this.renderSession.stencilManager.count > 0) {\n      t.enable(t.STENCIL_TEST);\n    } else {\n      t.disable(t.STENCIL_TEST);\n    }\n    this.applyFilterPass(d, i, p, f);\n    this.texturePool.push(n);\n    e._glFilterTexture = null;\n  };\n  s.WebGLFilterManager.prototype.applyFilterPass = function (t, e, i, n) {\n    var o = this.gl;\n    var a = t.shaders[o.id];\n    if (!a) {\n      a = new s.PixiShader(o);\n      a.fragmentSrc = t.fragmentSrc;\n      a.uniforms = t.uniforms;\n      a.init();\n      t.shaders[o.id] = a;\n    }\n    this.renderSession.shaderManager.setShader(a);\n    o.uniform2f(a.projectionVector, i / 2, -n / 2);\n    o.uniform2f(a.offsetVector, 0, 0);\n    if (t.uniforms.dimensions) {\n      t.uniforms.dimensions.value[0] = this.width;\n      t.uniforms.dimensions.value[1] = this.height;\n      t.uniforms.dimensions.value[2] = this.vertexArray[0];\n      t.uniforms.dimensions.value[3] = this.vertexArray[5];\n    }\n    a.syncUniforms();\n    o.bindBuffer(o.ARRAY_BUFFER, this.vertexBuffer);\n    o.vertexAttribPointer(a.aVertexPosition, 2, o.FLOAT, false, 0, 0);\n    o.bindBuffer(o.ARRAY_BUFFER, this.uvBuffer);\n    o.vertexAttribPointer(a.aTextureCoord, 2, o.FLOAT, false, 0, 0);\n    o.bindBuffer(o.ARRAY_BUFFER, this.colorBuffer);\n    o.vertexAttribPointer(a.colorAttribute, 2, o.FLOAT, false, 0, 0);\n    o.bindBuffer(o.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n    o.drawElements(o.TRIANGLES, 6, o.UNSIGNED_SHORT, 0);\n    this.renderSession.drawCount++;\n  };\n  s.WebGLFilterManager.prototype.initShaderBuffers = function () {\n    var t = this.gl;\n    this.vertexBuffer = t.createBuffer();\n    this.uvBuffer = t.createBuffer();\n    this.colorBuffer = t.createBuffer();\n    this.indexBuffer = t.createBuffer();\n    this.vertexArray = new s.Float32Array([0, 0, 1, 0, 0, 1, 1, 1]);\n    t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer);\n    t.bufferData(t.ARRAY_BUFFER, this.vertexArray, t.STATIC_DRAW);\n    this.uvArray = new s.Float32Array([0, 0, 1, 0, 0, 1, 1, 1]);\n    t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer);\n    t.bufferData(t.ARRAY_BUFFER, this.uvArray, t.STATIC_DRAW);\n    this.colorArray = new s.Float32Array([1, 16777215, 1, 16777215, 1, 16777215, 1, 16777215]);\n    t.bindBuffer(t.ARRAY_BUFFER, this.colorBuffer);\n    t.bufferData(t.ARRAY_BUFFER, this.colorArray, t.STATIC_DRAW);\n    t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n    t.bufferData(t.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 1, 3, 2]), t.STATIC_DRAW);\n  };\n  s.WebGLFilterManager.prototype.destroy = function () {\n    var t = this.gl;\n    this.filterStack = null;\n    this.offsetX = 0;\n    this.offsetY = 0;\n    for (var e = 0; e < this.texturePool.length; e++) {\n      this.texturePool[e].destroy();\n    }\n    this.texturePool = null;\n    t.deleteBuffer(this.vertexBuffer);\n    t.deleteBuffer(this.uvBuffer);\n    t.deleteBuffer(this.colorBuffer);\n    t.deleteBuffer(this.indexBuffer);\n  };\n  s.FilterTexture = function (t, e, i, n) {\n    this.gl = t;\n    this.frameBuffer = t.createFramebuffer();\n    this.texture = t.createTexture();\n    n = n || s.scaleModes.DEFAULT;\n    t.bindTexture(t.TEXTURE_2D, this.texture);\n    t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, n === s.scaleModes.LINEAR ? t.LINEAR : t.NEAREST);\n    t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, n === s.scaleModes.LINEAR ? t.LINEAR : t.NEAREST);\n    t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE);\n    t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE);\n    t.bindFramebuffer(t.FRAMEBUFFER, this.frameBuffer);\n    t.bindFramebuffer(t.FRAMEBUFFER, this.frameBuffer);\n    t.framebufferTexture2D(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.TEXTURE_2D, this.texture, 0);\n    this.renderBuffer = t.createRenderbuffer();\n    t.bindRenderbuffer(t.RENDERBUFFER, this.renderBuffer);\n    t.framebufferRenderbuffer(t.FRAMEBUFFER, t.DEPTH_STENCIL_ATTACHMENT, t.RENDERBUFFER, this.renderBuffer);\n    this.resize(e, i);\n  };\n  s.FilterTexture.prototype.constructor = s.FilterTexture;\n  s.FilterTexture.prototype.clear = function () {\n    var t = this.gl;\n    t.clearColor(0, 0, 0, 0);\n    t.clear(t.COLOR_BUFFER_BIT);\n  };\n  s.FilterTexture.prototype.resize = function (t, e) {\n    if (this.width !== t || this.height !== e) {\n      this.width = t;\n      this.height = e;\n      var i = this.gl;\n      i.bindTexture(i.TEXTURE_2D, this.texture);\n      i.texImage2D(i.TEXTURE_2D, 0, i.RGBA, t, e, 0, i.RGBA, i.UNSIGNED_BYTE, null);\n      i.bindRenderbuffer(i.RENDERBUFFER, this.renderBuffer);\n      i.renderbufferStorage(i.RENDERBUFFER, i.DEPTH_STENCIL, t, e);\n    }\n  };\n  s.FilterTexture.prototype.destroy = function () {\n    var t = this.gl;\n    t.deleteFramebuffer(this.frameBuffer);\n    t.deleteTexture(this.texture);\n    this.frameBuffer = null;\n    this.texture = null;\n  };\n  s.CanvasBuffer = function (t, e) {\n    this.width = t;\n    this.height = e;\n    this.canvas = s.CanvasPool.create(this, this.width, this.height);\n    this.context = this.canvas.getContext("2d");\n    this.canvas.width = t;\n    this.canvas.height = e;\n  };\n  s.CanvasBuffer.prototype.constructor = s.CanvasBuffer;\n  s.CanvasBuffer.prototype.clear = function () {\n    this.context.setTransform(1, 0, 0, 1, 0, 0);\n    this.context.clearRect(0, 0, this.width, this.height);\n  };\n  s.CanvasBuffer.prototype.resize = function (t, e) {\n    this.width = this.canvas.width = t;\n    this.height = this.canvas.height = e;\n  };\n  s.CanvasBuffer.prototype.destroy = function () {\n    s.CanvasPool.remove(this);\n  };\n  s.CanvasMaskManager = function () {};\n  s.CanvasMaskManager.prototype.constructor = s.CanvasMaskManager;\n  s.CanvasMaskManager.prototype.pushMask = function (t, e) {\n    var i = e.context;\n    i.save();\n    var n = t.alpha;\n    var o = t.worldTransform;\n    var a = e.resolution;\n    i.setTransform(o.a * a, o.b * a, o.c * a, o.d * a, o.tx * a, o.ty * a);\n    s.CanvasGraphics.renderGraphicsMask(t, i);\n    i.clip();\n    t.worldAlpha = n;\n  };\n  s.CanvasMaskManager.prototype.popMask = function (t) {\n    t.context.restore();\n  };\n  s.CanvasTinter = function () {};\n  s.CanvasTinter.getTintedTexture = function (t, e) {\n    var i = t.tintedTexture || s.CanvasPool.create(this);\n    s.CanvasTinter.tintMethod(t.texture, e, i);\n    return i;\n  };\n  s.CanvasTinter.tintWithMultiply = function (t, e, i) {\n    var s = i.getContext("2d");\n    var n = t.crop;\n    if (i.width !== n.width || i.height !== n.height) {\n      i.width = n.width;\n      i.height = n.height;\n    }\n    s.clearRect(0, 0, n.width, n.height);\n    s.fillStyle = "#" + ("00000" + (e | 0).toString(16)).substr(-6);\n    s.fillRect(0, 0, n.width, n.height);\n    s.globalCompositeOperation = "multiply";\n    s.drawImage(t.baseTexture.source, n.x, n.y, n.width, n.height, 0, 0, n.width, n.height);\n    s.globalCompositeOperation = "destination-atop";\n    s.drawImage(t.baseTexture.source, n.x, n.y, n.width, n.height, 0, 0, n.width, n.height);\n  };\n  s.CanvasTinter.tintWithPerPixel = function (t, e, i) {\n    var n = i.getContext("2d");\n    var o = t.crop;\n    i.width = o.width;\n    i.height = o.height;\n    n.globalCompositeOperation = "copy";\n    n.drawImage(t.baseTexture.source, o.x, o.y, o.width, o.height, 0, 0, o.width, o.height);\n    var a = s.hex2rgb(e);\n    var r = a[0];\n    var h = a[1];\n    var l = a[2];\n    var c = n.getImageData(0, 0, o.width, o.height);\n    for (var u = c.data, d = 0; d < u.length; d += 4) {\n      u[d + 0] *= r;\n      u[d + 1] *= h;\n      u[d + 2] *= l;\n      if (!s.CanvasTinter.canHandleAlpha) {\n        var p = u[d + 3];\n        u[d + 0] /= 255 / p;\n        u[d + 1] /= 255 / p;\n        u[d + 2] /= 255 / p;\n      }\n    }\n    n.putImageData(c, 0, 0);\n  };\n  s.CanvasTinter.checkInverseAlpha = function () {\n    var t = new s.CanvasBuffer(2, 1);\n    t.context.fillStyle = "rgba(10, 20, 30, 0.5)";\n    t.context.fillRect(0, 0, 1, 1);\n    var e = t.context.getImageData(0, 0, 1, 1);\n    if (e === null) {\n      return false;\n    }\n    t.context.putImageData(e, 1, 0);\n    var i = t.context.getImageData(1, 0, 1, 1);\n    return i.data[0] === e.data[0] && i.data[1] === e.data[1] && i.data[2] === e.data[2] && i.data[3] === e.data[3];\n  };\n  s.CanvasTinter.canHandleAlpha = s.CanvasTinter.checkInverseAlpha();\n  s.CanvasTinter.canUseMultiply = s.canUseNewCanvasBlendModes();\n  s.CanvasTinter.tintMethod = s.CanvasTinter.canUseMultiply ? s.CanvasTinter.tintWithMultiply : s.CanvasTinter.tintWithPerPixel;\n  s.CanvasRenderer = function (t) {\n    this.game = t;\n    s.defaultRenderer || (s.defaultRenderer = this);\n    this.type = s.CANVAS_RENDERER;\n    this.resolution = t.resolution;\n    this.clearBeforeRender = t.clearBeforeRender;\n    this.transparent = t.transparent;\n    this.autoResize = false;\n    this.width = t.width * this.resolution;\n    this.height = t.height * this.resolution;\n    this.view = t.canvas;\n    this.context = this.view.getContext("2d", {\n      alpha: this.transparent\n    });\n    this.refresh = true;\n    this.count = 0;\n    this.maskManager = new s.CanvasMaskManager();\n    this.renderSession = {\n      context: this.context,\n      maskManager: this.maskManager,\n      scaleMode: null,\n      smoothProperty: Phaser.Canvas.getSmoothingPrefix(this.context),\n      roundPixels: false\n    };\n    this.mapBlendModes();\n    this.resize(this.width, this.height);\n  };\n  s.CanvasRenderer.prototype.constructor = s.CanvasRenderer;\n  s.CanvasRenderer.prototype.render = function (t) {\n    this.context.setTransform(1, 0, 0, 1, 0, 0);\n    this.context.globalAlpha = 1;\n    this.renderSession.currentBlendMode = 0;\n    this.renderSession.shakeX = this.game.camera._shake.x;\n    this.renderSession.shakeY = this.game.camera._shake.y;\n    this.context.globalCompositeOperation = "source-over";\n    if (navigator.isCocoonJS && this.view.screencanvas) {\n      this.context.fillStyle = "black";\n      this.context.clear();\n    }\n    if (this.clearBeforeRender) {\n      if (this.transparent) {\n        this.context.clearRect(0, 0, this.width, this.height);\n      } else if (t._bgColor) {\n        this.context.fillStyle = t._bgColor.rgba;\n        this.context.fillRect(0, 0, this.width, this.height);\n      }\n    }\n    this.renderDisplayObject(t);\n  };\n  s.CanvasRenderer.prototype.destroy = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    if (t && this.view.parent) {\n      this.view.parent.removeChild(this.view);\n    }\n    this.view = null;\n    this.context = null;\n    this.maskManager = null;\n    this.renderSession = null;\n  };\n  s.CanvasRenderer.prototype.resize = function (t, e) {\n    this.width = t * this.resolution;\n    this.height = e * this.resolution;\n    this.view.width = this.width;\n    this.view.height = this.height;\n    if (this.autoResize) {\n      this.view.style.width = this.width / this.resolution + "px";\n      this.view.style.height = this.height / this.resolution + "px";\n    }\n    if (this.renderSession.smoothProperty) {\n      this.context[this.renderSession.smoothProperty] = this.renderSession.scaleMode === s.scaleModes.LINEAR;\n    }\n  };\n  s.CanvasRenderer.prototype.renderDisplayObject = function (t, e, i) {\n    this.renderSession.context = e || this.context;\n    this.renderSession.resolution = this.resolution;\n    t._renderCanvas(this.renderSession, i);\n  };\n  s.CanvasRenderer.prototype.mapBlendModes = function () {\n    if (!s.blendModesCanvas) {\n      var t = [];\n      var e = s.blendModes;\n      var i = s.canUseNewCanvasBlendModes();\n      t[e.NORMAL] = "source-over";\n      t[e.ADD] = "lighter";\n      t[e.MULTIPLY] = i ? "multiply" : "source-over";\n      t[e.SCREEN] = i ? "screen" : "source-over";\n      t[e.OVERLAY] = i ? "overlay" : "source-over";\n      t[e.DARKEN] = i ? "darken" : "source-over";\n      t[e.LIGHTEN] = i ? "lighten" : "source-over";\n      t[e.COLOR_DODGE] = i ? "color-dodge" : "source-over";\n      t[e.COLOR_BURN] = i ? "color-burn" : "source-over";\n      t[e.HARD_LIGHT] = i ? "hard-light" : "source-over";\n      t[e.SOFT_LIGHT] = i ? "soft-light" : "source-over";\n      t[e.DIFFERENCE] = i ? "difference" : "source-over";\n      t[e.EXCLUSION] = i ? "exclusion" : "source-over";\n      t[e.HUE] = i ? "hue" : "source-over";\n      t[e.SATURATION] = i ? "saturation" : "source-over";\n      t[e.COLOR] = i ? "color" : "source-over";\n      t[e.LUMINOSITY] = i ? "luminosity" : "source-over";\n      s.blendModesCanvas = t;\n    }\n  };\n  s.BaseTexture = function (t, e) {\n    this.resolution = 1;\n    this.width = 100;\n    this.height = 100;\n    this.scaleMode = e || s.scaleModes.DEFAULT;\n    this.hasLoaded = false;\n    this.source = t;\n    this.premultipliedAlpha = true;\n    this._glTextures = [];\n    this.mipmap = false;\n    this._dirty = [true, true, true, true];\n    if (t) {\n      if ((this.source.complete || this.source.getContext) && this.source.width && this.source.height) {\n        this.hasLoaded = true;\n        this.width = this.source.naturalWidth || this.source.width;\n        this.height = this.source.naturalHeight || this.source.height;\n        this.dirty();\n      }\n      this.skipRender = false;\n      this._powerOf2 = false;\n    }\n  };\n  s.BaseTexture.prototype.constructor = s.BaseTexture;\n  s.BaseTexture.prototype.forceLoaded = function (t, e) {\n    this.hasLoaded = true;\n    this.width = t;\n    this.height = e;\n    this.dirty();\n  };\n  s.BaseTexture.prototype.destroy = function () {\n    if (this.source) {\n      s.CanvasPool.removeByCanvas(this.source);\n    }\n    this.source = null;\n    this.unloadFromGPU();\n  };\n  s.BaseTexture.prototype.updateSourceImage = function (t) {};\n  s.BaseTexture.prototype.dirty = function () {\n    for (var t = 0; t < this._glTextures.length; t++) {\n      this._dirty[t] = true;\n    }\n  };\n  s.BaseTexture.prototype.unloadFromGPU = function () {\n    this.dirty();\n    for (var t = this._glTextures.length - 1; t >= 0; t--) {\n      var e = this._glTextures[t];\n      var i = s.glContexts[t];\n      if (i && e) {\n        i.deleteTexture(e);\n      }\n    }\n    this._glTextures.length = 0;\n    this.dirty();\n  };\n  s.BaseTexture.fromCanvas = function (t, e) {\n    if (t.width === 0) {\n      t.width = 1;\n    }\n    if (t.height === 0) {\n      t.height = 1;\n    }\n    return new s.BaseTexture(t, e);\n  };\n  s.TextureSilentFail = false;\n  s.Texture = function (t, e, i, n) {\n    this.noFrame = false;\n    if (!e) {\n      this.noFrame = true;\n      e = new s.Rectangle(0, 0, 1, 1);\n    }\n    if (t instanceof s.Texture) {\n      t = t.baseTexture;\n    }\n    this.baseTexture = t;\n    this.frame = e;\n    this.trim = n;\n    this.valid = false;\n    this.isTiling = false;\n    this.requiresUpdate = false;\n    this.requiresReTint = false;\n    this._uvs = null;\n    this.width = 0;\n    this.height = 0;\n    this.crop = i || new s.Rectangle(0, 0, 1, 1);\n    if (t.hasLoaded) {\n      if (this.noFrame) {\n        e = new s.Rectangle(0, 0, t.width, t.height);\n      }\n      this.setFrame(e);\n    }\n  };\n  s.Texture.prototype.constructor = s.Texture;\n  s.Texture.prototype.onBaseTextureLoaded = function () {\n    var t = this.baseTexture;\n    if (this.noFrame) {\n      this.frame = new s.Rectangle(0, 0, t.width, t.height);\n    }\n    this.setFrame(this.frame);\n  };\n  s.Texture.prototype.destroy = function (t) {\n    if (t) {\n      this.baseTexture.destroy();\n    }\n    this.valid = false;\n  };\n  s.Texture.prototype.setFrame = function (t) {\n    this.noFrame = false;\n    this.frame = t;\n    this.width = t.width;\n    this.height = t.height;\n    this.crop.x = t.x;\n    this.crop.y = t.y;\n    this.crop.width = t.width;\n    this.crop.height = t.height;\n    if (!this.trim && (t.x + t.width > this.baseTexture.width || t.y + t.height > this.baseTexture.height)) {\n      if (!s.TextureSilentFail) {\n        throw new Error("Texture Error: frame does not fit inside the base Texture dimensions " + this);\n      }\n      this.valid = false;\n      return;\n    }\n    this.valid = t && t.width && t.height && this.baseTexture.source && this.baseTexture.hasLoaded;\n    if (this.trim) {\n      this.width = this.trim.width;\n      this.height = this.trim.height;\n      this.frame.width = this.trim.width;\n      this.frame.height = this.trim.height;\n    }\n    if (this.valid) {\n      this._updateUvs();\n    }\n  };\n  s.Texture.prototype._updateUvs = function () {\n    this._uvs || (this._uvs = new s.TextureUvs());\n    var t = this.crop;\n    var e = this.baseTexture.width;\n    var i = this.baseTexture.height;\n    this._uvs.x0 = t.x / e;\n    this._uvs.y0 = t.y / i;\n    this._uvs.x1 = (t.x + t.width) / e;\n    this._uvs.y1 = t.y / i;\n    this._uvs.x2 = (t.x + t.width) / e;\n    this._uvs.y2 = (t.y + t.height) / i;\n    this._uvs.x3 = t.x / e;\n    this._uvs.y3 = (t.y + t.height) / i;\n  };\n  s.Texture.fromCanvas = function (t, e) {\n    var i = s.BaseTexture.fromCanvas(t, e);\n    return new s.Texture(i);\n  };\n  s.TextureUvs = function () {\n    this.x0 = 0;\n    this.y0 = 0;\n    this.x1 = 0;\n    this.y1 = 0;\n    this.x2 = 0;\n    this.y2 = 0;\n    this.x3 = 0;\n    this.y3 = 0;\n  };\n  s.RenderTexture = function (t, e, i, n, o) {\n    this.width = t || 100;\n    this.height = e || 100;\n    this.resolution = o || 1;\n    this.frame = new s.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution);\n    this.crop = new s.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution);\n    this.baseTexture = new s.BaseTexture();\n    this.baseTexture.width = this.width * this.resolution;\n    this.baseTexture.height = this.height * this.resolution;\n    this.baseTexture._glTextures = [];\n    this.baseTexture.resolution = this.resolution;\n    this.baseTexture.scaleMode = n || s.scaleModes.DEFAULT;\n    this.baseTexture.hasLoaded = true;\n    s.Texture.call(this, this.baseTexture, new s.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution));\n    this.renderer = i || s.defaultRenderer;\n    if (this.renderer.type === s.WEBGL_RENDERER) {\n      var a = this.renderer.gl;\n      this.baseTexture._dirty[a.id] = false;\n      this.textureBuffer = new s.FilterTexture(a, this.width, this.height, this.baseTexture.scaleMode);\n      this.baseTexture._glTextures[a.id] = this.textureBuffer.texture;\n      this.render = this.renderWebGL;\n      this.projection = new s.Point(this.width * 0.5, -this.height * 0.5);\n    } else {\n      this.render = this.renderCanvas;\n      this.textureBuffer = new s.CanvasBuffer(this.width * this.resolution, this.height * this.resolution);\n      this.baseTexture.source = this.textureBuffer.canvas;\n    }\n    this.valid = true;\n    this.tempMatrix = new Phaser.Matrix();\n    this._updateUvs();\n  };\n  s.RenderTexture.prototype = Object.create(s.Texture.prototype);\n  s.RenderTexture.prototype.constructor = s.RenderTexture;\n  s.RenderTexture.prototype.resize = function (t, e, i) {\n    if (t !== this.width || e !== this.height) {\n      this.valid = t > 0 && e > 0;\n      this.width = t;\n      this.height = e;\n      this.frame.width = this.crop.width = t * this.resolution;\n      this.frame.height = this.crop.height = e * this.resolution;\n      if (i) {\n        this.baseTexture.width = this.width * this.resolution;\n        this.baseTexture.height = this.height * this.resolution;\n      }\n      if (this.renderer.type === s.WEBGL_RENDERER) {\n        this.projection.x = this.width / 2;\n        this.projection.y = -this.height / 2;\n      }\n      if (this.valid) {\n        this.textureBuffer.resize(this.width, this.height);\n      }\n    }\n  };\n  s.RenderTexture.prototype.clear = function () {\n    if (this.valid) {\n      if (this.renderer.type === s.WEBGL_RENDERER) {\n        this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER, this.textureBuffer.frameBuffer);\n      }\n      this.textureBuffer.clear();\n    }\n  };\n  s.RenderTexture.prototype.renderWebGL = function (t, e, i) {\n    if (this.valid && t.alpha !== 0) {\n      var s = t.worldTransform;\n      s.identity();\n      s.translate(0, this.projection.y * 2);\n      if (e) {\n        s.append(e);\n      }\n      s.scale(1, -1);\n      for (var n = 0; n < t.children.length; n++) {\n        t.children[n].updateTransform();\n      }\n      var o = this.renderer.gl;\n      o.viewport(0, 0, this.width * this.resolution, this.height * this.resolution);\n      o.bindFramebuffer(o.FRAMEBUFFER, this.textureBuffer.frameBuffer);\n      if (i) {\n        this.textureBuffer.clear();\n      }\n      this.renderer.spriteBatch.dirty = true;\n      this.renderer.renderDisplayObject(t, this.projection, this.textureBuffer.frameBuffer, e);\n      this.renderer.spriteBatch.dirty = true;\n    }\n  };\n  s.RenderTexture.prototype.renderCanvas = function (t, e, i) {\n    if (this.valid && t.alpha !== 0) {\n      var s = t.worldTransform;\n      s.identity();\n      if (e) {\n        s.append(e);\n      }\n      for (var n = 0; n < t.children.length; n++) {\n        t.children[n].updateTransform();\n      }\n      if (i) {\n        this.textureBuffer.clear();\n      }\n      var o = this.renderer.resolution;\n      this.renderer.resolution = this.resolution;\n      this.renderer.renderDisplayObject(t, this.textureBuffer.context, e);\n      this.renderer.resolution = o;\n    }\n  };\n  s.RenderTexture.prototype.getImage = function () {\n    var t = new Image();\n    t.src = this.getBase64();\n    return t;\n  };\n  s.RenderTexture.prototype.getBase64 = function () {\n    return this.getCanvas().toDataURL();\n  };\n  s.RenderTexture.prototype.getCanvas = function () {\n    if (this.renderer.type === s.WEBGL_RENDERER) {\n      var t = this.renderer.gl;\n      var e = this.textureBuffer.width;\n      var i = this.textureBuffer.height;\n      var n = new Uint8Array(e * 4 * i);\n      t.bindFramebuffer(t.FRAMEBUFFER, this.textureBuffer.frameBuffer);\n      t.readPixels(0, 0, e, i, t.RGBA, t.UNSIGNED_BYTE, n);\n      t.bindFramebuffer(t.FRAMEBUFFER, null);\n      var o = new s.CanvasBuffer(e, i);\n      var a = o.context.getImageData(0, 0, e, i);\n      a.data.set(n);\n      o.context.putImageData(a, 0, 0);\n      return o.canvas;\n    }\n    return this.textureBuffer.canvas;\n  };\n  s.AbstractFilter = function (t, e) {\n    this.passes = [this];\n    this.shaders = [];\n    this.dirty = true;\n    this.padding = 0;\n    this.uniforms = e || {};\n    this.fragmentSrc = t || [];\n  };\n  s.AbstractFilter.prototype.constructor = s.AbstractFilter;\n  s.AbstractFilter.prototype.syncUniforms = function () {\n    for (var t = 0, e = this.shaders.length; t < e; t++) {\n      this.shaders[t].dirty = true;\n    }\n  };\n  s.Strip = function (t) {\n    s.DisplayObjectContainer.call(this);\n    this.texture = t;\n    this.uvs = new s.Float32Array([0, 1, 1, 1, 1, 0, 0, 1]);\n    this.vertices = new s.Float32Array([0, 0, 100, 0, 100, 100, 0, 100]);\n    this.colors = new s.Float32Array([1, 1, 1, 1]);\n    this.indices = new s.Uint16Array([0, 1, 2, 3]);\n    this.dirty = true;\n    this.blendMode = s.blendModes.NORMAL;\n    this.canvasPadding = 0;\n    this.drawMode = s.Strip.DrawModes.TRIANGLE_STRIP;\n  };\n  s.Strip.prototype = Object.create(s.DisplayObjectContainer.prototype);\n  s.Strip.prototype.constructor = s.Strip;\n  s.Strip.prototype._renderWebGL = function (t) {\n    if (!!this.visible && !(this.alpha <= 0)) {\n      t.spriteBatch.stop();\n      if (!this._vertexBuffer) {\n        this._initWebGL(t);\n      }\n      t.shaderManager.setShader(t.shaderManager.stripShader);\n      this._renderStrip(t);\n      t.spriteBatch.start();\n    }\n  };\n  s.Strip.prototype._initWebGL = function (t) {\n    var e = t.gl;\n    this._vertexBuffer = e.createBuffer();\n    this._indexBuffer = e.createBuffer();\n    this._uvBuffer = e.createBuffer();\n    this._colorBuffer = e.createBuffer();\n    e.bindBuffer(e.ARRAY_BUFFER, this._vertexBuffer);\n    e.bufferData(e.ARRAY_BUFFER, this.vertices, e.DYNAMIC_DRAW);\n    e.bindBuffer(e.ARRAY_BUFFER, this._uvBuffer);\n    e.bufferData(e.ARRAY_BUFFER, this.uvs, e.STATIC_DRAW);\n    e.bindBuffer(e.ARRAY_BUFFER, this._colorBuffer);\n    e.bufferData(e.ARRAY_BUFFER, this.colors, e.STATIC_DRAW);\n    e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, this._indexBuffer);\n    e.bufferData(e.ELEMENT_ARRAY_BUFFER, this.indices, e.STATIC_DRAW);\n  };\n  s.Strip.prototype._renderStrip = function (t) {\n    var e = t.gl;\n    var i = t.projection;\n    var n = t.offset;\n    var o = t.shaderManager.stripShader;\n    var a = this.drawMode === s.Strip.DrawModes.TRIANGLE_STRIP ? e.TRIANGLE_STRIP : e.TRIANGLES;\n    t.blendModeManager.setBlendMode(this.blendMode);\n    e.uniformMatrix3fv(o.translationMatrix, false, this.worldTransform.toArray(true));\n    e.uniform2f(o.projectionVector, i.x, -i.y);\n    e.uniform2f(o.offsetVector, -n.x, -n.y);\n    e.uniform1f(o.alpha, this.worldAlpha);\n    if (this.dirty) {\n      this.dirty = false;\n      e.bindBuffer(e.ARRAY_BUFFER, this._vertexBuffer);\n      e.bufferData(e.ARRAY_BUFFER, this.vertices, e.STATIC_DRAW);\n      e.vertexAttribPointer(o.aVertexPosition, 2, e.FLOAT, false, 0, 0);\n      e.bindBuffer(e.ARRAY_BUFFER, this._uvBuffer);\n      e.bufferData(e.ARRAY_BUFFER, this.uvs, e.STATIC_DRAW);\n      e.vertexAttribPointer(o.aTextureCoord, 2, e.FLOAT, false, 0, 0);\n      e.activeTexture(e.TEXTURE0);\n      if (this.texture.baseTexture._dirty[e.id]) {\n        t.renderer.updateTexture(this.texture.baseTexture);\n      } else {\n        e.bindTexture(e.TEXTURE_2D, this.texture.baseTexture._glTextures[e.id]);\n      }\n      e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, this._indexBuffer);\n      e.bufferData(e.ELEMENT_ARRAY_BUFFER, this.indices, e.STATIC_DRAW);\n    } else {\n      e.bindBuffer(e.ARRAY_BUFFER, this._vertexBuffer);\n      e.bufferSubData(e.ARRAY_BUFFER, 0, this.vertices);\n      e.vertexAttribPointer(o.aVertexPosition, 2, e.FLOAT, false, 0, 0);\n      e.bindBuffer(e.ARRAY_BUFFER, this._uvBuffer);\n      e.vertexAttribPointer(o.aTextureCoord, 2, e.FLOAT, false, 0, 0);\n      e.activeTexture(e.TEXTURE0);\n      if (this.texture.baseTexture._dirty[e.id]) {\n        t.renderer.updateTexture(this.texture.baseTexture);\n      } else {\n        e.bindTexture(e.TEXTURE_2D, this.texture.baseTexture._glTextures[e.id]);\n      }\n      e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, this._indexBuffer);\n    }\n    e.drawElements(a, this.indices.length, e.UNSIGNED_SHORT, 0);\n  };\n  s.Strip.prototype._renderCanvas = function (t) {\n    var e = t.context;\n    var i = this.worldTransform;\n    var n = i.tx * t.resolution + t.shakeX;\n    var o = i.ty * t.resolution + t.shakeY;\n    if (t.roundPixels) {\n      e.setTransform(i.a, i.b, i.c, i.d, n | 0, o | 0);\n    } else {\n      e.setTransform(i.a, i.b, i.c, i.d, n, o);\n    }\n    if (this.drawMode === s.Strip.DrawModes.TRIANGLE_STRIP) {\n      this._renderCanvasTriangleStrip(e);\n    } else {\n      this._renderCanvasTriangles(e);\n    }\n  };\n  s.Strip.prototype._renderCanvasTriangleStrip = function (t) {\n    var e = this.vertices;\n    var i = this.uvs;\n    var s = e.length / 2;\n    this.count++;\n    for (var n = 0; n < s - 2; n++) {\n      var o = n * 2;\n      this._renderCanvasDrawTriangle(t, e, i, o, o + 2, o + 4);\n    }\n  };\n  s.Strip.prototype._renderCanvasTriangles = function (t) {\n    var e = this.vertices;\n    var i = this.uvs;\n    var s = this.indices;\n    var n = s.length;\n    this.count++;\n    for (var o = 0; o < n; o += 3) {\n      var a = s[o] * 2;\n      var r = s[o + 1] * 2;\n      var h = s[o + 2] * 2;\n      this._renderCanvasDrawTriangle(t, e, i, a, r, h);\n    }\n  };\n  s.Strip.prototype._renderCanvasDrawTriangle = function (t, e, i, s, n, o) {\n    var a = this.texture.baseTexture.source;\n    var r = this.texture.width;\n    var h = this.texture.height;\n    var l = e[s];\n    var c = e[n];\n    var u = e[o];\n    var d = e[s + 1];\n    var p = e[n + 1];\n    var f = e[o + 1];\n    var y = i[s] * r;\n    var g = i[n] * r;\n    var m = i[o] * r;\n    var v = i[s + 1] * h;\n    var b = i[n + 1] * h;\n    var x = i[o + 1] * h;\n    if (this.canvasPadding > 0) {\n      var _ = this.canvasPadding / this.worldTransform.a;\n      var w = this.canvasPadding / this.worldTransform.d;\n      var C = (l + c + u) / 3;\n      var P = (d + p + f) / 3;\n      var T = l - C;\n      var S = d - P;\n      var A = Math.sqrt(T * T + S * S);\n      l = C + T / A * (A + _);\n      d = P + S / A * (A + w);\n      T = c - C;\n      S = p - P;\n      A = Math.sqrt(T * T + S * S);\n      c = C + T / A * (A + _);\n      p = P + S / A * (A + w);\n      T = u - C;\n      S = f - P;\n      A = Math.sqrt(T * T + S * S);\n      u = C + T / A * (A + _);\n      f = P + S / A * (A + w);\n    }\n    t.save();\n    t.beginPath();\n    t.moveTo(l, d);\n    t.lineTo(c, p);\n    t.lineTo(u, f);\n    t.closePath();\n    t.clip();\n    var E = y * b + v * m + g * x - b * m - v * g - y * x;\n    var I = l * b + v * u + c * x - b * u - v * c - l * x;\n    var M = y * c + l * m + g * u - c * m - l * g - y * u;\n    var R = y * b * u + v * c * m + l * g * x - l * b * m - v * g * u - y * c * x;\n    var O = d * b + v * f + p * x - b * f - v * p - d * x;\n    var B = y * p + d * m + g * f - p * m - d * g - y * f;\n    var L = y * b * f + v * p * m + d * g * x - d * b * m - v * g * f - y * p * x;\n    t.transform(I / E, O / E, M / E, B / E, R / E, L / E);\n    t.drawImage(a, 0, 0);\n    t.restore();\n  };\n  s.Strip.prototype.renderStripFlat = function (t) {\n    var e = this.context;\n    var i = t.vertices;\n    var s = i.length / 2;\n    this.count++;\n    e.beginPath();\n    for (var n = 1; n < s - 2; n++) {\n      var o = n * 2;\n      var a = i[o];\n      var r = i[o + 2];\n      var h = i[o + 4];\n      var l = i[o + 1];\n      var c = i[o + 3];\n      var u = i[o + 5];\n      e.moveTo(a, l);\n      e.lineTo(r, c);\n      e.lineTo(h, u);\n    }\n    e.fillStyle = "#FF0000";\n    e.fill();\n    e.closePath();\n  };\n  s.Strip.prototype.onTextureUpdate = function () {\n    this.updateFrame = true;\n  };\n  s.Strip.prototype.getBounds = function (t) {\n    var e = t || this.worldTransform;\n    var i = e.a;\n    var n = e.b;\n    var o = e.c;\n    var a = e.d;\n    var r = e.tx;\n    var h = e.ty;\n    var l = -Infinity;\n    var c = -Infinity;\n    var u = Infinity;\n    var d = Infinity;\n    var p = this.vertices;\n    for (var f = 0, y = p.length; f < y; f += 2) {\n      var g = p[f];\n      var m = p[f + 1];\n      var v = i * g + o * m + r;\n      var b = a * m + n * g + h;\n      u = v < u ? v : u;\n      d = b < d ? b : d;\n      l = v > l ? v : l;\n      c = b > c ? b : c;\n    }\n    if (u === -Infinity || c === Infinity) {\n      return s.EmptyRectangle;\n    }\n    var x = this._bounds;\n    x.x = u;\n    x.width = l - u;\n    x.y = d;\n    x.height = c - d;\n    this._currentBounds = x;\n    return x;\n  };\n  s.Strip.DrawModes = {\n    TRIANGLE_STRIP: 0,\n    TRIANGLES: 1\n  };\n  s.Rope = function (t, e) {\n    s.Strip.call(this, t);\n    this.points = e;\n    this.vertices = new s.Float32Array(e.length * 4);\n    this.uvs = new s.Float32Array(e.length * 4);\n    this.colors = new s.Float32Array(e.length * 2);\n    this.indices = new s.Uint16Array(e.length * 2);\n    this.refresh();\n  };\n  s.Rope.prototype = Object.create(s.Strip.prototype);\n  s.Rope.prototype.constructor = s.Rope;\n  s.Rope.prototype.refresh = function () {\n    var t = this.points;\n    if (!(t.length < 1)) {\n      var e = this.uvs;\n      var i = t[0];\n      var s = this.indices;\n      var n = this.colors;\n      this.count -= 0.2;\n      e[0] = 0;\n      e[1] = 0;\n      e[2] = 0;\n      e[3] = 1;\n      n[0] = 1;\n      n[1] = 1;\n      s[0] = 0;\n      s[1] = 1;\n      for (var o = t.length, a, r, h, l = 1; l < o; l++) {\n        a = t[l];\n        r = l * 4;\n        h = l / (o - 1);\n        e[r] = h;\n        e[r + 1] = 0;\n        e[r + 2] = h;\n        e[r + 3] = 1;\n        r = l * 2;\n        n[r] = 1;\n        n[r + 1] = 1;\n        r = l * 2;\n        s[r] = r;\n        s[r + 1] = r + 1;\n        i = a;\n      }\n    }\n  };\n  s.Rope.prototype.updateTransform = function () {\n    var t = this.points;\n    if (!(t.length < 1)) {\n      var e = t[0];\n      var i;\n      var n = {\n        x: 0,\n        y: 0\n      };\n      this.count -= 0.2;\n      var o = this.vertices;\n      for (var a = t.length, r, h, l, c, u, d = 0; d < a; d++) {\n        r = t[d];\n        h = d * 4;\n        i = d < t.length - 1 ? t[d + 1] : r;\n        n.y = -(i.x - e.x);\n        n.x = i.y - e.y;\n        l = (1 - d / (a - 1)) * 10;\n        if (l > 1) {\n          l = 1;\n        }\n        c = Math.sqrt(n.x * n.x + n.y * n.y);\n        u = this.texture.height / 2;\n        n.x /= c;\n        n.y /= c;\n        n.x *= u;\n        n.y *= u;\n        o[h] = r.x + n.x;\n        o[h + 1] = r.y + n.y;\n        o[h + 2] = r.x - n.x;\n        o[h + 3] = r.y - n.y;\n        e = r;\n      }\n      s.DisplayObjectContainer.prototype.updateTransform.call(this);\n    }\n  };\n  s.Rope.prototype.setTexture = function (t) {\n    this.texture = t;\n  };\n  s.TilingSprite = function (t, e, i) {\n    s.Sprite.call(this, t);\n    this._width = e || 128;\n    this._height = i || 128;\n    this.tileScale = new s.Point(1, 1);\n    this.tileScaleOffset = new s.Point(1, 1);\n    this.tilePosition = new s.Point();\n    this.renderable = true;\n    this.tint = 16777215;\n    this.textureDebug = false;\n    this.blendMode = s.blendModes.NORMAL;\n    this.canvasBuffer = null;\n    this.tilingTexture = null;\n    this.tilePattern = null;\n    this.refreshTexture = true;\n    this.frameWidth = 0;\n    this.frameHeight = 0;\n  };\n  s.TilingSprite.prototype = Object.create(s.Sprite.prototype);\n  s.TilingSprite.prototype.constructor = s.TilingSprite;\n  s.TilingSprite.prototype.setTexture = function (t) {\n    if (this.texture !== t) {\n      this.texture = t;\n      this.refreshTexture = true;\n      this.cachedTint = 16777215;\n    }\n  };\n  s.TilingSprite.prototype._renderWebGL = function (t) {\n    if (this.visible && this.renderable && this.alpha !== 0) {\n      if (this._mask) {\n        t.spriteBatch.stop();\n        t.maskManager.pushMask(this.mask, t);\n        t.spriteBatch.start();\n      }\n      if (this._filters) {\n        t.spriteBatch.flush();\n        t.filterManager.pushFilter(this._filterBlock);\n      }\n      if (this.refreshTexture) {\n        this.generateTilingTexture(true, t);\n        if (!this.tilingTexture) {\n          return;\n        }\n        if (this.tilingTexture.needsUpdate) {\n          t.renderer.updateTexture(this.tilingTexture.baseTexture);\n          this.tilingTexture.needsUpdate = false;\n        }\n      }\n      t.spriteBatch.renderTilingSprite(this);\n      for (var e = 0; e < this.children.length; e++) {\n        this.children[e]._renderWebGL(t);\n      }\n      t.spriteBatch.stop();\n      if (this._filters) {\n        t.filterManager.popFilter();\n      }\n      if (this._mask) {\n        t.maskManager.popMask(this._mask, t);\n      }\n      t.spriteBatch.start();\n    }\n  };\n  s.TilingSprite.prototype._renderCanvas = function (t) {\n    if (this.visible && this.renderable && this.alpha !== 0) {\n      var e = t.context;\n      if (this._mask) {\n        t.maskManager.pushMask(this._mask, t);\n      }\n      e.globalAlpha = this.worldAlpha;\n      var i = this.worldTransform;\n      var n = t.resolution;\n      var o = i.tx * n + t.shakeX;\n      var a = i.ty * n + t.shakeY;\n      e.setTransform(i.a * n, i.b * n, i.c * n, i.d * n, o, a);\n      if (this.refreshTexture) {\n        this.generateTilingTexture(false, t);\n        if (!this.tilingTexture) {\n          return;\n        }\n        this.tilePattern = e.createPattern(this.tilingTexture.baseTexture.source, "repeat");\n      }\n      var r = t.currentBlendMode;\n      if (this.blendMode !== t.currentBlendMode) {\n        t.currentBlendMode = this.blendMode;\n        e.globalCompositeOperation = s.blendModesCanvas[t.currentBlendMode];\n      }\n      var h = this.tilePosition;\n      var l = this.tileScale;\n      h.x %= this.tilingTexture.baseTexture.width;\n      h.y %= this.tilingTexture.baseTexture.height;\n      e.scale(l.x, l.y);\n      e.translate(h.x + this.anchor.x * -this._width, h.y + this.anchor.y * -this._height);\n      e.fillStyle = this.tilePattern;\n      var o = -h.x;\n      var a = -h.y;\n      var c = this._width / l.x;\n      var u = this._height / l.y;\n      if (t.roundPixels) {\n        o |= 0;\n        a |= 0;\n        c |= 0;\n        u |= 0;\n      }\n      e.fillRect(o, a, c, u);\n      e.scale(1 / l.x, 1 / l.y);\n      e.translate(-h.x + this.anchor.x * this._width, -h.y + this.anchor.y * this._height);\n      if (this._mask) {\n        t.maskManager.popMask(t);\n      }\n      for (var d = 0; d < this.children.length; d++) {\n        this.children[d]._renderCanvas(t);\n      }\n      if (r !== this.blendMode) {\n        t.currentBlendMode = r;\n        e.globalCompositeOperation = s.blendModesCanvas[r];\n      }\n    }\n  };\n  s.TilingSprite.prototype.onTextureUpdate = function () {};\n  s.TilingSprite.prototype.generateTilingTexture = function (t, e) {\n    if (this.texture.baseTexture.hasLoaded) {\n      var i = this.texture;\n      var n = i.frame;\n      var o = this._frame.sourceSizeW || this._frame.width;\n      var a = this._frame.sourceSizeH || this._frame.height;\n      var r = 0;\n      var h = 0;\n      if (this._frame.trimmed) {\n        r = this._frame.spriteSourceSizeX;\n        h = this._frame.spriteSourceSizeY;\n      }\n      if (t) {\n        o = s.getNextPowerOfTwo(o);\n        a = s.getNextPowerOfTwo(a);\n      }\n      if (this.canvasBuffer) {\n        this.canvasBuffer.resize(o, a);\n        this.tilingTexture.baseTexture.width = o;\n        this.tilingTexture.baseTexture.height = a;\n        this.tilingTexture.needsUpdate = true;\n      } else {\n        this.canvasBuffer = new s.CanvasBuffer(o, a);\n        this.tilingTexture = s.Texture.fromCanvas(this.canvasBuffer.canvas);\n        this.tilingTexture.isTiling = true;\n        this.tilingTexture.needsUpdate = true;\n      }\n      if (this.textureDebug) {\n        this.canvasBuffer.context.strokeStyle = "#00ff00";\n        this.canvasBuffer.context.strokeRect(0, 0, o, a);\n      }\n      var l = i.crop.width;\n      var c = i.crop.height;\n      if (l !== o || c !== a) {\n        l = o;\n        c = a;\n      }\n      this.canvasBuffer.context.drawImage(i.baseTexture.source, i.crop.x, i.crop.y, i.crop.width, i.crop.height, r, h, l, c);\n      this.tileScaleOffset.x = n.width / o;\n      this.tileScaleOffset.y = n.height / a;\n      this.refreshTexture = false;\n      this.tilingTexture.baseTexture._powerOf2 = true;\n    }\n  };\n  s.TilingSprite.prototype.getBounds = function () {\n    var t = this._width;\n    var e = this._height;\n    var i = t * (1 - this.anchor.x);\n    var s = t * -this.anchor.x;\n    var n = e * (1 - this.anchor.y);\n    var o = e * -this.anchor.y;\n    var a = this.worldTransform;\n    var r = a.a;\n    var h = a.b;\n    var l = a.c;\n    var c = a.d;\n    var u = a.tx;\n    var d = a.ty;\n    var p = r * s + l * o + u;\n    var f = c * o + h * s + d;\n    var y = r * i + l * o + u;\n    var g = c * o + h * i + d;\n    var m = r * i + l * n + u;\n    var v = c * n + h * i + d;\n    var b = r * s + l * n + u;\n    var x = c * n + h * s + d;\n    var _ = -Infinity;\n    var w = -Infinity;\n    var C = Infinity;\n    var P = Infinity;\n    C = p < C ? p : C;\n    C = y < C ? y : C;\n    C = m < C ? m : C;\n    C = b < C ? b : C;\n    P = f < P ? f : P;\n    P = g < P ? g : P;\n    P = v < P ? v : P;\n    P = x < P ? x : P;\n    _ = p > _ ? p : _;\n    _ = y > _ ? y : _;\n    _ = m > _ ? m : _;\n    _ = b > _ ? b : _;\n    w = f > w ? f : w;\n    w = g > w ? g : w;\n    w = v > w ? v : w;\n    w = x > w ? x : w;\n    var T = this._bounds;\n    T.x = C;\n    T.width = _ - C;\n    T.y = P;\n    T.height = w - P;\n    this._currentBounds = T;\n    return T;\n  };\n  s.TilingSprite.prototype.destroy = function () {\n    s.Sprite.prototype.destroy.call(this);\n    if (this.canvasBuffer) {\n      this.canvasBuffer.destroy();\n      this.canvasBuffer = null;\n    }\n    this.tileScale = null;\n    this.tileScaleOffset = null;\n    this.tilePosition = null;\n    if (this.tilingTexture) {\n      this.tilingTexture.destroy(true);\n      this.tilingTexture = null;\n    }\n  };\n  Object.defineProperty(s.TilingSprite.prototype, "width", {\n    get: function get() {\n      return this._width;\n    },\n    set: function set(t) {\n      this._width = t;\n    }\n  });\n  Object.defineProperty(s.TilingSprite.prototype, "height", {\n    get: function get() {\n      return this._height;\n    },\n    set: function set(t) {\n      this._height = t;\n    }\n  });\n  if (module !== undefined && module.exports) {\n    exports = module.exports = s;\n  }\n  exports.PIXI = s;\n  return s;\n}).call(this);\n\n//# sourceURL=webpack://motox3m/./src/lib/PixiLib.js?')},"./src/lib/TBG.js":()=>{eval("//exports.__esModule = true;\n\n//# sourceURL=webpack://motox3m/./src/lib/TBG.js?")},"./src/objects/FrameObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = nape.geom.Ray;\nvar o = nape.geom.Vec2;\nvar a = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar r = __webpack_require__(/*! @/src/utils/PhysicsUtils.js */ "./src/utils/PhysicsUtils.js");\nvar h = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar l = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.END_GROUND_COLLISION_DELAY = 0.1;\n    e.maxFlipVel = 3;\n    e.fire = null;\n    e.type = a.ObjectTypes.CAR;\n    return e;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    t.prototype.create.call(this, e);\n    this.space = h.MaxGameCore.instance.getSpace();\n    var i = e;\n    this.wheelBackDx = i.wheelBackDx;\n    this.wheelFrontDx = i.wheelFrontDx;\n    this.wheelDy = Math.max(i.axisBackY + i.axisBackLen + i.wheelBackR, i.axisFrontY + i.axisFrontLen + i.wheelFrontR);\n    this.ray = new n(o.weak(), o.weak(0, 1));\n    r.NapeUtil.setupStartPos(this.body);\n    this.localSmokePos = o.get(-43, -16);\n    this.localFirePos = o.get(5, -55);\n    this.effector = new a.BodyEffector(this.body);\n    this.restart();\n  };\n  e.prototype.update = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var e = false;\n    for (var i = this.body.arbiters.iterator(); i.hasNext();) {\n      var s = i.next();\n      if (s.isCollisionArbiter()) {\n        if ((s.body1 === this.body ? s.body2 : s.body1).userData.isGround) {\n          e = true;\n          break;\n        }\n      }\n    }\n    if (e) {\n      this.endGroundCollisionDelay = 0;\n      this.hasGround = true;\n    } else if (this.hasGround && this.endGroundCollisionDelay === 0) {\n      this.endGroundCollisionDelay = this.END_GROUND_COLLISION_DELAY;\n    }\n    if (this.hasGround && this.endGroundCollisionDelay > 0) {\n      this.endGroundCollisionDelay -= t;\n      if (this.endGroundCollisionDelay <= 0) {\n        this.hasGround = false;\n      }\n    }\n    this.graphic.update(t);\n    this.effector.update(t);\n  };\n  e.prototype.restart = function () {\n    r.NapeUtil.stopBody(this.body);\n    r.NapeUtil.resetStartPos(this.body);\n    r.NapeUtil.clearUserData(this.body);\n    r.NapeUtil.setupStartPos(this.body);\n    this.effector.reset();\n    this.body.userData.reviewX = this.body.position.x;\n    this.body.userData.reviewY = this.body.position.y;\n  };\n  e.prototype.release = function () {\n    this.localSmokePos.dispose();\n    this.localSmokePos = null;\n    this.localFirePos = null;\n    r.NapeUtil.disposeBody(this.body);\n    this.body = null;\n    this.effector.dispose();\n    this.effector = null;\n    t.prototype.release.call(this);\n  };\n  e.prototype.review = function () {\n    this.body.position.setxy(this.body.userData.reviewX, this.body.userData.reviewY);\n    this.body.rotation = 0;\n  };\n  return e;\n}(a.GameObject);\nexports.FrameObject = l;\n\n//# sourceURL=webpack://motox3m/./src/objects/FrameObject.js?')},"./src/objects/GameObject.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('//exports.__esModule = true;\nvar s = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar n = function () {\n  function t() {\n    this.type = -1;\n  }\n  t.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  };\n  t.prototype.release = function () {\n    if (this.graphic) {\n      if (this.graphic.dispose) {\n        try {\n          this.graphic.dispose();\n        } catch (t) {}\n      }\n      this.graphic = null;\n    }\n    if (this.body) {\n      try {\n        s.NapeUtil.disposeBody(this.body);\n      } catch (t) {}\n      this.body = null;\n    }\n  };\n  return t;\n}();\nexports.GameObject = n;\n\n//# sourceURL=webpack://motox3m/./src/objects/GameObject.js?')},"./src/objects/ai/WaypointObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\nexports.__esModule = true;\nvar n = nape.phys.BodyType;\nvar o = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar a = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar r = __webpack_require__(/*! @/src/config/Materials.js */ "./src/config/Materials.js");\nvar h = function (t) {\n  function e() {\n    return t.call(this) || this;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var i = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    t.prototype.create.call(this, i);\n    var s;\n    var h = i.className;\n    this.body = o.NapeUtil.createRectBody(n.STATIC, a.Filters.SENSOR, true, i.params, undefined, r.Materials.DEFAULT);\n    e.addCarsToUserData(this.body, i.params);\n    if (h === "TiltZone") {\n      this.body.userData.backChance = i.params.backChance;\n      this.body.userData.frontChance = i.params.frontChance;\n    } else if (h === "BrakeZone") {\n      this.body.userData.chance = i.params.chance;\n    }\n  };\n  e.addCarsToUserData = function (t, e) {\n    var i = e.cars;\n    if (i != null && i.length > 0) {\n      var s = i.split(",");\n      t.userData.cars = {};\n      for (var n = 0; n < s.length; n++) {\n        t.userData.cars[s[n]] = true;\n      }\n    }\n  };\n  return e;\n}(o.GameObject);\nexports.WaypointObject = h;\n\n//# sourceURL=webpack://motox3m/./src/objects/ai/WaypointObject.js?')},"./src/objects/background/BgEl.js":(__unused_webpack_module,exports)=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\n/**\r\n * BgEl - Background Element Class\r\n * Represents a background element in the game.\r\n * This class can be extended to create specific types of background elements.\r\n */\nvar BgEl = /*#__PURE__*/_createClass(function BgEl() {\n  _classCallCheck(this, BgEl);\n} // Initialize properties for the background element here if needed\n\n// Add methods to manipulate or render the background element as needed\n);\nexports.BgEl = BgEl;\n\n//# sourceURL=webpack://motox3m/./src/objects/background/BgEl.js?')},"./src/objects/base/RemovedBodyObjects.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/physics/DynamicBodyObject.js */ "./src/physics/DynamicBodyObject.js");\nvar o = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar a = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.INIT_TIME = 1;\n    e.REMOVE_TIME = 1;\n    e.initTimer = 0;\n    return e;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    t.prototype.create.call(this, e);\n    this.space = o.MaxGameCore.instance.getSpace();\n    this.initTimer = this.INIT_TIME;\n  };\n  e.prototype.update = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (this.active) {\n      if (this.timer > 0) {\n        this.timer -= t;\n        if (this.timer <= 0) {\n          this.body.space = null;\n          this.graphic.visible = false;\n        } else if (this.timer < this.REMOVE_TIME * 0.5) {\n          this.graphic.alpha = this.timer / (this.REMOVE_TIME * 0.5);\n        }\n      }\n    } else if (this.initTimer > 0) {\n      this.initTimer -= t;\n    } else if (this.body.velocity.length > 100) {\n      this.active = true;\n      this.timer = this.REMOVE_TIME;\n    }\n  };\n  e.prototype.activate = function () {\n    var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    if (!this.active) {\n      t.prototype.activate.call(this, e);\n    }\n  };\n  e.prototype.restart = function () {\n    this.initTimer = this.INIT_TIME;\n    this.active = false;\n    this.graphic.alpha = 1;\n    this.graphic.visible = true;\n    this.body.space = this.space;\n    t.prototype.restart.call(this);\n  };\n  e.prototype.release = function () {\n    this.space = null;\n    t.prototype.release.call(this);\n  };\n  return e;\n}(n.DynamicBodyObject);\nexports.RemovedBodyObjects = a;\n\n//# sourceURL=webpack://motox3m/./src/objects/base/RemovedBodyObjects.js?')},"./src/objects/effects/Explosion.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar o = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar a = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar r = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar h = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar l = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.create();\n    return e;\n  }\n  s(e, t);\n  e.get = function () {\n    return new e();\n  };\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.type = o.ObjectTypes.EFFECT;\n    this.graphic = r.GraphicUtil.createMovieClip(null, h.AssetsStorage.instance.getByKey("car_exp_anim"), 30, false);\n    var e = h.AssetsStorage.instance.getByKey("car_exp_anim");\n    this.graphic.animations.getAnimation(e).onComplete.add(this.animComplete, this);\n    this.graphic.completeCallback = this.animComplete;\n    this.graphic.scale.set(2);\n    this.graphic.visible = false;\n    a.MaxGameCore.instance.add(this);\n  };\n  e.prototype.animComplete = function (t) {\n    this.active = false;\n    this.graphic.visible = false;\n    if (this.completeCallback !== null) {\n      this.completeCallback();\n      this.completeCallback = null;\n    }\n  };\n  e.prototype.activate = function (t, e) {\n    var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var s = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    var n = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n    this.active = true;\n    this.graphic.x = t;\n    this.graphic.y = e;\n    this.graphic.visible = true;\n    this.maxSizeCallback = i;\n    this.completeCallback = s;\n    this.completeCallbackContext = n;\n    var o = h.AssetsStorage.instance.getByKey("car_exp_anim");\n    this.graphic.animations.getAnimation(o).play(30);\n  };\n  e.prototype.restart = function () {\n    if (this.active) {\n      this.graphic.visible = false;\n      this.active = false;\n      this.maxSizeCallback = null;\n      this.completeCallback = null;\n      this.completeCallbackContext = null;\n    }\n  };\n  e.prototype.update = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (this.active && this.maxSizeCallback !== null) {\n      this.maxSizeCallback(this.completeCallbackContext);\n      this.maxSizeCallback = null;\n      this.completeCallbackContext = null;\n    }\n  };\n  e.prototype.release = function () {\n    this.maxSizeCallback = null;\n    this.completeCallback = null;\n    this.completeCallbackContext = null;\n    t.prototype.release.call(this);\n  };\n  return e;\n}(n.GameObject);\nexports.CarExplodeObject = l;\n\n//# sourceURL=webpack://motox3m/./src/objects/effects/Explosion.js?')},"./src/objects/effects/FrameGraphic.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true; Frame Graphics\nvar n = __webpack_require__(/*! @/src/effects/SmokePartClip.js */ "./src/effects/SmokePartClip.js");\nvar o = Phaser.Image;\nvar a = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar r = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar h = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar l = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar c = __webpack_require__(/*! @/src/effects/FirePartClip.js */ "./src/effects/FirePartClip.js");\nvar u = function (t) {\n  function e(e, i) {\n    var s = t.call(this, r.GraphicUtil.game, 0, 0) || this;\n    s.parts = [];\n    s.parts2 = [];\n    s.inputEnabled = false;\n    s.skinId = a.Inventory.instance.getSkin();\n    var n = l.AssetsStorage.instance;\n    var c = "bike_" + s.skinId + "_base";\n    var Atlases = h.Atlases.Cars;\n    if (s.skinId >= 9) {\n      Atlases = "bike".concat(s.skinId);\n    }\n    s.image = new o(s.game, 0, 0, Atlases, c + "0000");\n    // pivost\n    if (s.skinId >= 9) {\n      //tbg95 - new\n      s.image.scale.set(0.5, 0.5);\n      var pivots = r.GraphicUtil.getPivots(s.skinId);\n      s.image.anchor.set(pivots.base.x / s.image.width, pivots.base.y / s.image.height);\n    } else {\n      s.image.anchor.set(l.AssetsList.FRAMES_ANCHORX[s.skinId - 1], l.AssetsList.FRAMES_ANCHORY[s.skinId - 1]);\n    }\n    s.addChild(s.image);\n    // exploded image\n    s.explodedImage = r.GraphicUtil.createImage(0, 0, 0, "Car" + s.skinId + "FrameExploded");\n    s.explodedImage.visible = false;\n    s.addChild(s.explodedImage);\n    s.boostAnim = r.GraphicUtil.createMovieClip(null, n.getByKey("RocketAnim"), 30, true);\n    s.boostAnim.x = -43;\n    s.boostAnim.y = -16;\n    s.boostAnim.play();\n    s.addChildAt(s.boostAnim, 0);\n    return s;\n  }\n  s(e, t);\n  e.prototype.update2 = function (t) {\n    for (var i = 0; i < e.PART_COUNT; i++) {\n      this.parts[i].update2(t);\n      this.parts2[i].update2(t);\n    }\n  };\n  e.prototype.createSmokeParts = function () {\n    for (var t = 0; t < e.PART_COUNT; t++) {\n      var i = new n.SmokePartClip();\n      this.parts[t] = i;\n      this.parent.addChild(i);\n    }\n    this.partPos = 0;\n    this.createFireParts();\n  };\n  e.prototype.createFireParts = function () {\n    // console.log("createFireParts");\n    for (var t = 0; t < e.PART_COUNT; t++) {\n      var i = new c.FirePartClip(1.3);\n      this.parts2[t] = i;\n      this.parent.addChildAt(i, 0);\n    }\n    this.partPos2 = 0;\n  };\n  e.prototype.emitFire = function (t, i) {\n    if (this.skinId === 5) {\n      this.parts2[this.partPos2].emit(t - 5 + Math.random() * 10, i - 5 + Math.random() * 10);\n      this.partPos2++;\n      if (this.partPos2 >= e.PART_COUNT) {\n        this.partPos2 = 0;\n      }\n    }\n  };\n  e.prototype.emitSmoke = function (t, i, s) {\n    this.parts[this.partPos].emit(t, i, s);\n    if (++this.partPos >= e.PART_COUNT) {\n      this.partPos = 0;\n    }\n  };\n  e.PART_COUNT = 60;\n  return e;\n}(Phaser.Sprite);\nexports.FrameGraphic = u;\n\n//# sourceURL=webpack://motox3m/./src/objects/effects/FrameGraphic.js?')},"./src/objects/effects/TrailParticlesSystem.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('// TrailParticlesSystem - Class for creating particle trail effects\n// Manages emission of trail particles with consistent spacing\n\n// Key features:\n// - Creates continuous particle trails\n// - Maintains consistent particle spacing\n// - Uses object pooling for performance\n// - Handles both short and long distances\n// - Calculates proper particle positions\n\n// Constants:\n// - MIN_DIST: Minimum distance between particles (16 pixels)\n\n// Methods:\n// - init(x, y): Initialize system with starting position\n// - emit(x, y): Emit particles between previous and current position\n//   * Handles both short movements (single particle)\n//   * And long movements (multiple particles with proper spacing)\n\n// Properties:\n// - prevX: Previous emission X position\n// - prevY: Previous emission Y position\n// - prevDist: Previous emission distance\n\n// Usage example:\n// const trail = new TrailParticlesSystem();\n// trail.init(startX, startY);\n// \n// // In update loop:\n// trail.emit(currentX, currentY);//exports.__esModule = true;\nvar s = __webpack_require__(/*! @/src/physics/TrailPartObject.js */ "./src/physics/TrailPartObject.js");\nvar n = function () {\n  function t() {}\n  t.prototype.init = function (t, e) {\n    this.prevX = t;\n    this.prevY = e;\n    this.prevDist = 0;\n  };\n  t.prototype.emit = function (e, i) {\n    var n = Math.sqrt((e - this.prevX) * (e - this.prevX) + (i - this.prevY) * (i - this.prevY));\n    if (n < t.MIN_DIST) {\n      s.TrailPartObject.get().put(e, i);\n      this.prevX = e;\n      this.prevY = i;\n      this.prevDist = n;\n    } else {\n      var o = Math.atan2(i - this.prevY, e - this.prevX);\n      var a = Math.cos(o);\n      var r = Math.sin(o);\n      while (n > t.MIN_DIST) {\n        this.prevX += t.MIN_DIST * a;\n        this.prevY += t.MIN_DIST * r;\n        s.TrailPartObject.get().put(this.prevX, this.prevY);\n        n -= t.MIN_DIST;\n      }\n    }\n  };\n  t.MIN_DIST = 16;\n  return t;\n}();\nexports.TrailParticlesSystem = n;\n\n//# sourceURL=webpack://motox3m/./src/objects/effects/TrailParticlesSystem.js?')},"./src/objects/environment/WaterShape.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// WaterShape - Animated water surface graphics\n// Extends Phaser.Graphics to create animated water effects\n\n// Key features:\n// - Animated wave effect\n// - Vector-based water surface\n// - Vertex-based shape\n// - Continuous animation\n// - Semi-transparent fill\n\n// Properties:\n// - WAVE_SPEED: Animation speed (50)\n// - waveX: Wave position\n// - isBg: Background flag\n// - vertices[]: Shape vertices\n// - dx/dy: Position offsets\n\n// Methods:\n// - draw(): Render water shape\n//   * Creates wave effect\n//   * Draws outline\n//   * Fills with semi-transparent color\n//   * Uses sine wave for animation\n//\n// - update2(delta): Animate waves\n//   * Updates wave position\n//   * Triggers redraw\n//\n// - dispose(): Cleanup resources\n\n// Usage example:\n// const water = new WaterShape(\n//   { params: {\n//     x: 100,\n//     y: 100,\n//     vertices: [/*...*/]\n//   }},\n//   0,    // x offset\n//   0,    // y offset\n//   false // is background\n// );\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar o = function (t) {\n  function e(e, i, s) {\n    var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    var a = t.call(this, n.GraphicUtil.game) || this;\n    a.WAVE_SPEED = 50;\n    a.waveX = 0;\n    a.isBg = o;\n    a.x = e.params.x - i;\n    a.y = e.params.y - s;\n    a.vertices = e.params.vertices;\n    a.dx = i;\n    a.dy = s;\n    a.draw();\n    return a;\n  }\n  s(e, t);\n  e.prototype.draw = function () {\n    // var theme = n.RacesData.map.settings.theme;\n    // var isBgCheck = this.isBg && t === 0;\n    var t = 0;\n    var e = this;\n    e.clear();\n    var i = 0;\n    e.lineStyle(2, 12575231);\n    e.beginFill(34815, 0.4);\n    var s = this.vertices[0];\n    var n;\n    e.moveTo(s.x + this.dx, s.y + this.dy + 0);\n    var o = this.vertices[1].x - this.vertices[0].x;\n    var a = this.vertices[0].x;\n    var r = this.vertices[0].y;\n    var h = 16;\n    var l = 4;\n    var c = o / 16 >> 0;\n    var u = o / c;\n    for (n = 0; n < c; n++) {\n      var d = (n + 1) * u;\n      e.lineTo(a + d + this.dx, r + Math.sin((this.waveX + d) * 0.05) * 4 + this.dy);\n    }\n    c = this.vertices.length;\n    n = 2;\n    for (; n < c; n++) {\n      s = this.vertices[n];\n      e.lineTo(s.x + this.dx, s.y + this.dy);\n    }\n    e.endFill();\n  };\n  e.prototype.update2 = function (t) {\n    this.waveX += t * this.WAVE_SPEED;\n    this.draw();\n  };\n  e.prototype.dispose = function () {\n    this.vertices = null;\n  };\n  return e;\n}(Phaser.Graphics);\nexports.WaterShape = o;\n\n//# sourceURL=webpack://motox3m/./src/objects/environment/WaterShape.js?')},"./src/objects/interactive/BoostObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = nape.phys.BodyType;\nvar o = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar a = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar r = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar h = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar l = __webpack_require__(/*! @/src/config/CbTypes.js */ "./src/config/CbTypes.js");\nvar u = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.collided = false;\n    return e;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.safeId = e.params.safeId;\n    this.type = a.ObjectTypes.OBJECT;\n    t.prototype.create.call(this, e);\n    var i = e.params;\n    this.body = o.NapeUtil.createCircleBody(n.STATIC, r.Filters.SENSOR, true, 32, i.x, i.y, 0, l.CbTypes.BOOST);\n    this.clip = h.GraphicUtil.createMovieClip(i, "BoostAnim", 15, true);\n    this.clip.animations.play("boost_anim", 30, true);\n    this.graphic = this.clip;\n    this.body.userData.collideCallback = this.processCollide;\n    this.body.userData.collideCallbackContext = this;\n    this.body.userData.time = i.time;\n    this.body.userData.force = i.force;\n    this.collided = false;\n  };\n  e.prototype.processCollide = function (t) {\n    return !t.collided && (t.collided = true, t.body.space = null, t.graphic.visible = false, true);\n  };\n  e.prototype.restart = function () {\n    this.collided = false;\n    this.graphic.visible = true;\n    this.body.space = o.NapePhysics.space;\n  };\n  e.prototype.review = function () {\n    this.restart();\n  };\n  e.prototype.release = function () {\n    t.prototype.release.call(this);\n  };\n  e.prototype.update = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  };\n  return e;\n}(o.GameObject);\nexports.BoostObject = u;\n\n//# sourceURL=webpack://motox3m/./src/objects/interactive/BoostObject.js?')},"./src/objects/interactive/FinishObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = nape.phys.BodyType;\nvar o = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar a = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar r = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar h = __webpack_require__(/*! @/src/config/CbTypes.js */ "./src/config/CbTypes.js");\nvar l = __webpack_require__(/*! @/src/config/Materials.js */ "./src/config/Materials.js");\nvar c = __webpack_require__(/*! @/src/lib/PhaserLib.js */ "./src/lib/PhaserLib.js");\nvar u = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.type = a.ObjectTypes.LANDSCAPE;\n    return e;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.body = o.NapeUtil.createRectBody(n.STATIC, r.Filters.SENSOR, true, t.params, h.CbTypes.ZONE_FINISH, l.Materials.DEFAULT);\n    var e = o.GraphicUtil.createGround(0, 0, [new c.Point(t.params.width * -0.5, t.params.height * -0.5), new c.Point(t.params.width * 0.5, t.params.height * -0.5), new c.Point(t.params.width * 0.5, t.params.height * 0.5), new c.Point(t.params.width * -0.5, t.params.height * 0.5)], false, true, 0, 100);\n    e.x = t.params.x;\n    e.y = t.params.y;\n    this.graphic = e;\n    o.RacesData.data.finishX = t.params.x;\n  };\n  return e;\n}(o.GameObject);\nexports.FinishObject = u;\n\n//# sourceURL=webpack://motox3m/./src/objects/interactive/FinishObject.js?')},"./src/objects/interactive/GeyserObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\nvar n = nape.phys.BodyType;\nvar o = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar a = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar r = __webpack_require__(/*! @/src/config/CbTypes.js */ "./src/config/CbTypes.js");\nvar h = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar l = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar c = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar u = __webpack_require__(/*! @/src/config/Materials.js */ "./src/config/Materials.js");\nvar d = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar p = __webpack_require__(/*! @/src/effects/GeyserPartClip.js */ "./src/effects/GeyserPartClip.js");\nvar AllAtlas = (__webpack_require__(/*! @/src/data/AtlasesData.js */ "./src/data/AtlasesData.js")["default"]);\nvar f = function (t) {\n  function e() {\n    var i = t.call(this) || this;\n    i.parts = new Array(e.PART_COUNT);\n    i.id = -1;\n    i.safeId = -1;\n    return i;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.type = l.ObjectTypes.OBJECT;\n    var e = t.params;\n    var i = e.x;\n    var s = e.y;\n    if (e.id != null) {\n      this.id = e.id;\n    }\n    if (e.safeId != null) {\n      this.safeId = e.id;\n    }\n    this.emitCounter = 0;\n    this.emitRate = e.rate == null ? 1 : e.rate;\n    this.body = o.NapeUtil.createRectBodyWH(n.STATIC, h.Filters.SENSOR, true, e.width, e.height, i, s, c["default"].TO_RAD * e.rotation, r.CbTypes.GEYSER, u.Materials.DEFAULT);\n    this.width = e.width;\n    var p = this.body.rotation;\n    var f = t.params.speed;\n    this.velX = f * Math.cos(p);\n    this.velY = f * Math.sin(p);\n    var y = a.GraphicUtil.game.add.group();\n    this.graphic = y;\n    var g = d.AssetsStorage.instance;\n    this.partPos = 0;\n    this.partMinX = this.width * -0.5 + 16;\n    this.partDeltaX = 32;\n    var m = a.GraphicUtil.game.add.sprite(0, 0, AllAtlas.Theme, "GeyserBase0000");\n    m.x = this.width * -0.5;\n    m.anchor.set(0.7, 0.5);\n    y.addChild(m);\n    this.anim = a.GraphicUtil.createMovieClip(null, g.getByKey("geyser_anim"), 15, true);\n    this.anim = a.GraphicUtil.game.add.sprite(0, 0, AllAtlas.Theme, "geyser_anim0000");\n    this.anim.animations.add("geyser_anim", Phaser.Animation.generateFrameNames("geyser_anim", 0, 5, "", 4));\n    this.anim.anchor.set(-0.1, 0.5);\n    this.anim.animations.getAnimation("geyser_anim").play(30, true);\n    this.anim.x = m.x;\n    y.addChild(this.anim);\n    this.createBoostParts(1000, this.width / f);\n    this.partMinY = e.height * -0.5;\n    this.partDeltaY = e.height;\n    this.body.userData.handler = this;\n    this.activate(this.id < 0);\n    y.x = this.body.position.x;\n    y.y = this.body.position.y;\n    y.rotation = c["default"].TO_RAD * e.rotation;\n  };\n  e.prototype.createBoostParts = function (t, i) {\n    for (var s = 0; s < e.PART_COUNT; s++) {\n      var n = new p.GeyserPartClip(t, i);\n      this.parts[s] = n;\n      this.graphic.addChild(n);\n    }\n  };\n  e.prototype.emit = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    if (this.partPos >= 0) {\n      while (t > 0) {\n        var i = this.parts[this.partPos];\n        var s = this.partMinX + Math.random() * this.partDeltaX;\n        var n = this.partMinY + Math.random() * this.partDeltaY;\n        i.emit(s, n);\n        this.partPos++;\n        if (this.partPos >= e.PART_COUNT) {\n          this.partPos = 0;\n        }\n        t--;\n      }\n    }\n  };\n  e.prototype.update = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (this.active) {\n      this.emitCounter += this.emitRate;\n      var i = this.emitCounter >> 0;\n      this.emit(i);\n      this.emitCounter -= i;\n      if (this.partPos >= 0) {\n        for (var s = 0; s < e.PART_COUNT; s++) {\n          var n = this.parts[s];\n          n.update(t);\n        }\n      }\n    }\n  };\n  e.prototype.release = function () {\n    for (var i = 0; i < e.PART_COUNT; i++) {\n      var s = this.parts[i];\n      if (s.parent) {\n        s.parent.removeChild(s);\n      }\n    }\n    this.parts.splice(0, this.parts.length);\n    this.partPos = -1;\n    t.prototype.release.call(this);\n  };\n  e.prototype.activate = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    this.active = t;\n    if (!this.active) {\n      for (var i = 0; i < e.PART_COUNT; i++) {\n        var s = this.parts[i];\n        s.visible = false;\n      }\n    }\n  };\n  e.prototype.isActive = function () {\n    return true;\n  };\n  e.prototype.restart = function () {\n    this.review();\n  };\n  e.prototype.review = function () {\n    if (this.id >= 0) {\n      this.activate(false);\n    }\n  };\n  e.PART_COUNT = 60;\n  return e;\n}(o.GameObject);\nexports.GeyserObject = f;\n\n//# sourceURL=webpack://motox3m/./src/objects/interactive/GeyserObject.js?')},"./src/objects/interactive/MotorObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\nvar n = nape.constraint.MotorJoint;\nvar o = nape.constraint.PivotJoint;\nvar a = nape.constraint.WeldJoint;\nvar r = nape.geom.Vec2;\nvar h = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar l = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar c = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar u = __webpack_require__(/*! @/src/config/CbTypes.js */ "./src/config/CbTypes.js");\nvar d = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar p = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar f = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar y = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.isDynamic = false;\n    return e;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.type = l.ObjectTypes.OBJECT;\n    this.time = t.params.time;\n    this.space = c.MaxGameCore.instance.getSpace();\n    this.id = t.params.id;\n    this.safeId = t.params.safeId;\n    if (this.safeId <= -10) {\n      this.skipRevive = true;\n    }\n    var e = r.get(t.params.x, t.params.y);\n    this.x = t.params.x;\n    this.y = t.params.y;\n    for (var i = h.NapeUtil.bodiesUnderPoint(this.space, e), s; !i.empty() && (s = i.pop(), !s.isDynamic());) {\n      s = null;\n    }\n    if (s) {\n      i = h.NapeUtil.bodiesUnderPoint(this.space, e);\n      for (var y = undefined; !i.empty() && ((y = i.pop()) === s || y.cbTypes.has(u.CbTypes.TOGGLE));) {\n        y = null;\n      }\n      y || (y = this.space.world);\n      if (y.isDynamic() || s.isDynamic()) {\n        this.isDynamic = true;\n      }\n      var g = undefined;\n      if (y.userData.isWheel) {\n        g = y;\n        y = s;\n        s = g;\n      }\n      var m = s.worldPointToLocal(e);\n      var v = y.worldPointToLocal(e);\n      this.pivot = new o(y, s, v, m);\n      this.pivot.ignore = true;\n      this.pivot.space = this.space;\n      this.motor = new n(y, s, t.params.rate * p["default"].TO_RAD);\n      this.motor.active = false;\n      this.motor.userData.id = this.id;\n      this.motor.ignore = true;\n      this.motor.space = this.space;\n      m.dispose();\n      v.dispose();\n      if (t.params.graphic > 0) {\n        this.graphic = d.GraphicUtil.createImageWithObj(t.params, f.AssetsStorage.instance.getByKey("Motor" + (t.params.graphic - 1).toString()));\n        this.graphicRot = 0;\n      }\n      this.useWeldJoint = t.params.useWeld === true;\n      if (this.useWeldJoint) {\n        this.phaseBase = this.pivot.body2.rotation - this.pivot.body1.rotation;\n        this.weldJoint = new a(this.pivot.body1, this.pivot.body2, this.pivot.anchor1, this.pivot.anchor2, this.phaseBase);\n        this.weldJoint.ignore = true;\n        this.weldJoint.space = this.space;\n      } else {\n        s.allowRotation = false;\n      }\n    }\n    this.snd = t.params.snd === true;\n    e.dispose();\n  };\n  e.prototype.activate = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    this.useWeldJoint;\n    if (t) {\n      if (this.active) {\n        return;\n      }\n      if (this.motor) {\n        if (this.useWeldJoint) {\n          this.weldJoint.active = false;\n        } else {\n          this.motor.body2.allowRotation = true;\n        }\n        this.motor.active = t;\n        this.timer = this.time;\n        this.active = true;\n      }\n    } else {\n      var e = this.motor.body2;\n      this.motor.active = false;\n      e.angularVel = 0;\n      if (this.useWeldJoint) {\n        this.weldJoint.phase = this.weldJoint.body2.rotation - this.weldJoint.body1.rotation;\n        this.weldJoint.active = true;\n      } else {\n        e.allowRotation = false;\n      }\n    }\n  };\n  e.prototype.restart = function () {\n    if (this.motor) {\n      this.motor.space = null;\n      this.motor.space = this.space;\n      this.pivot.space = null;\n      this.pivot.space = this.space;\n      this.motor.active = false;\n      if (this.useWeldJoint) {\n        this.weldJoint.active = false;\n        this.weldJoint.phase = this.phaseBase;\n        this.weldJoint.active = true;\n      } else {\n        this.motor.body2.allowRotation = false;\n      }\n    }\n    this.active = false;\n  };\n  e.prototype.release = function () {\n    if (this.pivot) {\n      this.pivot.body1 = null;\n      this.pivot.body2 = null;\n      this.pivot.space = null;\n      this.motor.body1 = null;\n      this.motor.body2 = null;\n      this.motor.space = null;\n    }\n    if (this.useWeldJoint) {\n      this.weldJoint.body1 = null;\n      this.weldJoint.body2 = null;\n      this.weldJoint.space = null;\n    }\n    this.space = null;\n    t.prototype.release.call(this);\n  };\n  e.prototype.update = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var e = this.motor.body2;\n    if (this.active && (this.timer > 0 && (this.graphic && (this.graphicRot += t * this.motor.rate, this.graphic.rotation = this.graphicRot % (Math.PI * 2)), this.timer > 0 && (this.timer -= t, this.useWeldJoint, this.timer <= 0 && (this.motor.active = false, e.angularVel = 0, this.useWeldJoint ? (this.weldJoint.phase = this.weldJoint.body2.rotation - this.weldJoint.body1.rotation, this.weldJoint.active = true) : e.allowRotation = false))), this.graphic && this.isDynamic)) {\n      var i = e.localPointToWorld(this.pivot.anchor2, false);\n      this.graphic.x = i.x;\n      this.graphic.y = i.y;\n      i.dispose();\n    }\n  };\n  e.prototype.review = function () {\n    if (!this.skipRevive) {\n      this.restart();\n    }\n  };\n  e.prototype.isActive = function () {\n    return true;\n  };\n  return e;\n}(h.GameObject);\nexports.MotorObject = y;\n\n//# sourceURL=webpack://motox3m/./src/objects/interactive/MotorObject.js?')},"./src/objects/interactive/MoverPatherObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = nape.geom.Vec2;\nvar o = nape.phys.Body;\nvar a = nape.phys.BodyType;\nvar r = nape.shape.Circle;\nvar h = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar l = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar c = __webpack_require__(/*! @/src/config/Materials.js */ "./src/config/Materials.js");\nvar u = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar d = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar p = function (t) {\n  function e() {\n    var e = t !== null && t.apply(this, arguments) || this;\n    e.cpId = -1;\n    e.accelDist = 0;\n    e.accel = 0;\n    e.breaked = false;\n    e.dir = 1;\n    e.prevDir = 1;\n    return e;\n  }\n  s(e, t);\n  e.prototype.switchOn = function (t) {\n    if (!this.active || !this.stopOnPoint && !this.stopOnEnd) {\n      this.dir += t;\n      this.active = this.dir !== 0;\n      if (this.active) {\n        this.checkChangePointDir();\n      } else {\n        this.body.velocity.x = 0;\n        this.body.velocity.y = 0;\n        this.updateBodyGraphic();\n      }\n    }\n  };\n  e.prototype.switchOff = function (t) {\n    if (this.stopOnEnd || this.stopOnPoint) {\n      if (this.dir !== 0) {\n        return;\n      }\n      this.dir += t;\n      this.active = this.dir !== 0;\n      if (this.active) {\n        this.checkChangePointDir();\n      } else {\n        this.body.velocity.x = 0;\n        this.body.velocity.y = 0;\n        this.updateBodyGraphic();\n      }\n    } else {\n      this.dir -= t;\n      this.active = this.dir !== 0;\n      if (this.active) {\n        this.checkChangePointDir();\n      } else {\n        this.body.velocity.x = 0;\n        this.body.velocity.y = 0;\n        this.updateBodyGraphic();\n      }\n    }\n  };\n  e.prototype.checkChangePointDir = function () {\n    if (this.dir * this.prevDir < 0) {\n      this.pointDir *= -1;\n      this.velocity.muleq(-1);\n      this.timeToPoint = this.timeToPointTotal - this.timeToPoint;\n    }\n    this.prevDir = this.dir;\n  };\n  e.prototype.release = function () {\n    this.velocity.dispose();\n    this.velocity = null;\n    this.body = null;\n    t.prototype.release.call(this);\n  };\n  e.prototype.restart = function () {\n    this.startTime = this.baseStartTime;\n    this.active = this.baseActive;\n    this.angleSpeed = 0;\n    if (this.baseActive) {\n      this.dir = 1;\n    } else {\n      this.dir = 0;\n    }\n    this.pointId = 0;\n    this.pointDir = 1;\n    if (this.body.userData.graphic) {\n      this.body.userData.graphic.visible = true;\n    }\n    this.body.space = this.space;\n    var t = 0;\n    var e = false;\n    for (var i = 0; i < this.points.length; i++) {\n      if (i > 0) {\n        var s = this.points[i].sub(this.points[i - 1]);\n        var n = s.length;\n        t += n;\n        if (!e && t >= this.position) {\n          this.pointId = i - 1;\n          var o = 1 - (t - this.position) / n;\n          this.body.position.x = this.points[i - 1].x + o * (this.points[i].x - this.points[i - 1].x);\n          this.body.position.y = this.points[i - 1].y + o * (this.points[i].y - this.points[i - 1].y);\n          this.calcVel();\n          e = true;\n        }\n        s.dispose();\n      }\n    }\n    this.breaked = false;\n    this.body.type = a.KINEMATIC;\n    this.body.allowRotation = false;\n    this.updateBodyGraphic();\n  };\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.space = l.MaxGameCore.instance.getSpace();\n    this.id = t.params.id;\n    this.safeId = t.params.safeId;\n    var e = null;\n    if (t.params.body) {\n      this.body = new o(a.KINEMATIC, n.weak());\n      this.body.shapes.add(new r(16, null, c.Materials.DEFAULT, u.Filters.NOTHING));\n      this.body.space = this.space;\n    } else {\n      var i = n.get(t.params.x, t.params.y);\n      for (var s = h.NapeUtil.bodiesUnderPoint(this.space, i); !s.empty() && (e = s.pop(), !e.isDynamic());) {\n        e = null;\n      }\n      if (e) {\n        this.body = e;\n        e.type = a.KINEMATIC;\n        h.NapeUtil.stopBody(e);\n      }\n      i.dispose();\n    }\n    this.speed = this.baseSpeed = t.params.speed;\n    this.accelDist = t.params.accelDist === null ? 0 : t.params.accelDist;\n    if (this.accelDist > 0) {\n      this.minSpeed = this.baseSpeed * 0.05;\n      this.accel = (this.baseSpeed * this.baseSpeed - this.minSpeed * this.minSpeed) / (this.accelDist * 2);\n    }\n    this.cycle = t.params.cycle === 1;\n    this.active = this.baseActive = t.params.active === 1;\n    this.startTime = this.baseStartTime = t.params.startTime;\n    this.sideWait = t.params.sideWait ? t.params.sideWait : 0;\n    this.sideAngle = t.params.sideAngle ? t.params.sideAngle * d["default"].TO_RAD : 0;\n    this.cpId = t.params.cpId;\n    this.body.userData.correct = true;\n    this.space = this.body.space;\n    this.baseRot = this.body.rotation;\n    this.stopOnEnd = t.params.stopOnEnd === true;\n    this.stopOnPoint = t.params.stopOnPoint === true;\n    if (this.baseActive) {\n      this.dir = 1;\n    } else {\n      this.dir = 0;\n    }\n    this.pointId = 0;\n    this.pointDir = 1;\n    var p = t.params.vertices;\n    this.points = new Array(p.length);\n    this.position = t.params.position;\n    this.velocity = n.get();\n    var f = 0;\n    var y = false;\n    for (var g = 0; g < this.points.length; g++) {\n      this.points[g] = n.get(t.params.x + p[g].x, t.params.y + p[g].y);\n      if (g > 0) {\n        var m = this.points[g].sub(this.points[g - 1]);\n        var v = m.length;\n        f += v;\n        if (!y && f >= this.position) {\n          this.pointId = g - 1;\n          var b = 1 - (f - this.position) / v;\n          this.body.position.x = this.points[g - 1].x + b * (this.points[g].x - this.points[g - 1].x);\n          this.body.position.y = this.points[g - 1].y + b * (this.points[g].y - this.points[g - 1].y);\n          this.calcVel();\n          y = true;\n        }\n        m.dispose();\n      }\n    }\n    this.totalLength = f;\n    this.body.userData.handler = this;\n    this.body.userData.hasMover = true;\n  };\n  e.prototype.calcVel = function () {\n    var t = this.body.position;\n    var e = this.getNextPoint();\n    var i = e.sub(t, true);\n    var s = i.angle;\n    this.velocity.x = Math.cos(s) * this.speed;\n    this.velocity.y = Math.sin(s) * this.speed;\n    var n = i.length;\n    this.timeToPointTotal = this.timeToPoint = n / this.speed;\n  };\n  e.prototype.calcAccelVel = function (t) {\n    var e = 0;\n    var i;\n    if (this.pointDir > 0) {\n      for (i = 1; i <= this.pointId; i++) {\n        e += n.distance(this.points[i - 1], this.points[i]);\n      }\n      e += n.distance(this.points[this.pointId], this.body.position);\n    } else {\n      for (i = this.points.length - 2; i >= this.pointId; i--) {\n        e += n.distance(this.points[i + 1], this.points[i]);\n      }\n      e += n.distance(this.points[this.pointId], this.body.position);\n      e = this.totalLength - e;\n    }\n    if (e < this.accelDist) {\n      this.speed = this.minSpeed + e / this.accelDist * (this.baseSpeed - this.minSpeed);\n    } else if (e > this.totalLength - this.accelDist) {\n      this.speed = this.minSpeed + (this.totalLength - e) / this.accelDist * (this.baseSpeed - this.minSpeed);\n    } else {\n      this.speed = this.baseSpeed;\n    }\n    var s = this.body.position;\n    var o = this.getNextPoint();\n    var a = o.sub(s, true);\n    var r = a.angle;\n    this.velocity.x = Math.cos(r) * this.speed;\n    this.velocity.y = Math.sin(r) * this.speed;\n    var h = a.length;\n    this.timeToPointTotal = this.timeToPoint = h / this.speed;\n  };\n  e.prototype.getNextPoint = function () {\n    if (this.pointDir > 0) {\n      if (this.pointId >= this.points.length - 1) {\n        return this.points[0];\n      } else {\n        return this.points[this.pointId + 1];\n      }\n    } else if (this.pointId <= 0) {\n      return this.points[this.points.length - 1];\n    } else {\n      return this.points[this.pointId - 1];\n    }\n  };\n  e.prototype.update = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (!this.breaked) {\n      if (this.active) {\n        if (this.body.userData.skipMove === true) {\n          this.body.velocity.x = this.body.velocity.y = 0;\n        } else if (this.startTime > 0) {\n          this.body.velocity.x = this.body.velocity.y = 0;\n          this.startTime -= t;\n          if (this.startTime <= 0) {\n            if (this.sideAngle !== 0 && this.angleSpeed !== 0) {\n              this.angleSpeed = 0;\n              this.body.rotation = this.sideTarget;\n            }\n          } else if (this.sideAngle !== 0 && this.angleSpeed !== 0) {\n            this.body.rotation += this.angleSpeed * t;\n          }\n        } else {\n          if (this.timeToPoint > 0) {\n            if (this.accelDist > 0) {\n              this.calcAccelVel(t);\n            }\n          } else {\n            this.pointId += this.pointDir;\n            if (this.pointId === 0 || this.pointId === this.points.length - 1) {\n              if (this.sideWait > 0) {\n                this.startTime = this.sideWait;\n                if (this.sideAngle !== 0) {\n                  if (this.pointId === 0) {\n                    this.sideTarget = this.baseRot;\n                    this.angleSpeed = -this.sideAngle / this.sideWait;\n                  } else {\n                    this.sideTarget = this.baseRot + this.sideAngle;\n                    this.angleSpeed = this.sideAngle / this.sideWait;\n                  }\n                }\n              }\n              if (!this.cycle) {\n                this.pointDir *= -1;\n              }\n              if (this.stopOnEnd) {\n                this.active = false;\n                this.dir = 0;\n                if (this.body !== null) {\n                  this.body.position.set(this.points[this.pointId]);\n                }\n              }\n            } else if (this.pointId < 0 || this.pointId > this.points.length - 1) {\n              if (this.pointDir > 0) {\n                this.pointId = 0;\n              } else {\n                this.pointId = this.points.length - 1;\n              }\n            }\n            if (this.accelDist > 0) {\n              this.calcAccelVel(t);\n            } else {\n              this.calcVel();\n            }\n            if (this.stopOnPoint) {\n              this.active = false;\n            }\n          }\n          if (this.active) {\n            this.body.velocity.x = this.velocity.x;\n            this.body.velocity.y = this.velocity.y;\n          } else {\n            this.body.velocity.x = 0;\n            this.body.velocity.y = 0;\n          }\n          this.timeToPoint -= t;\n        }\n        this.updateBodyGraphic();\n      } else {\n        this.body.allowMovement = false;\n        this.body.velocity.x = 0;\n        this.body.velocity.y = 0;\n      }\n    }\n  };\n  e.prototype.updateBodyGraphic = function () {\n    var t = this.body.userData.graphic;\n    if (t) {\n      t.x = this.body.position.x;\n      t.y = this.body.position.y;\n      t.rotation = this.body.rotation;\n    } else if (t = this.body.userData.graphicEx) {\n      t.x = this.body.position.x;\n      t.y = this.body.position.y;\n      t.rotation = this.body.rotation;\n    }\n  };\n  e.prototype.review = function () {\n    this.restart();\n  };\n  e.prototype.activate = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    if (t) {\n      this.switchOn(1);\n    } else {\n      this.switchOff(1);\n    }\n  };\n  e.prototype.isActive = function () {\n    return true;\n  };\n  return e;\n}(h.GameObject);\nexports.MoverPatherObject = p;\n\n//# sourceURL=webpack://motox3m/./src/objects/interactive/MoverPatherObject.js?')},"./src/objects/interactive/SpikesObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = nape.phys.BodyType;\nvar o = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar a = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar r = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar h = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar l = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar c = __webpack_require__(/*! @/src/config/CbTypes.js */ "./src/config/CbTypes.js");\nvar u = __webpack_require__(/*! @/src/config/Materials.js */ "./src/config/Materials.js");\nvar d = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar p = function (t) {\n  function e() {\n    return t.call(this) || this;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.type = a.ObjectTypes.OBJECT;\n    var e = d.AssetsStorage.instance;\n    var i = t.className;\n    console.log("tbg95-1", i);\n    var s = e.getByKey(i + "_data");\n    var p = t.params;\n    var f = p.x;\n    var y = p.y;\n    var g = t.params.rotation * h["default"].TO_RAD;\n    var m = r.Filters.GROUND;\n    this.body = o.NapeUtil.createRectBodyWH(n.STATIC, m, false, s.w, s.h, f, y, g, c.CbTypes.SPIKES, u.Materials.DEFAULT);\n    this.graphic = l.GraphicUtil.createImageWithObj(p, e.getByKey(i));\n  };\n  return e;\n}(o.GameObject);\nexports.SpikesObject = p;\n\n//# sourceURL=webpack://motox3m/./src/objects/interactive/SpikesObject.js?')},"./src/objects/interactive/TntObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = nape.geom.Ray;\nvar o = nape.geom.Vec2;\nvar a = nape.phys.BodyType;\nvar r = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar h = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar l = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar c = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar u = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar d = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar p = __webpack_require__(/*! @/src/config/Materials.js */ "./src/config/Materials.js");\nvar f = __webpack_require__(/*! @/src/objects/effects/Explosion.js */ "./src/objects/effects/Explosion.js");\nvar y = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar g = __webpack_require__(/*! @/src/controllers/SoundController.js */ "./src/controllers/SoundController.js");\nvar m = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar v = function (t) {\n  function e() {\n    return t.call(this) || this;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.id = t.params.id;\n    this.safeId = t.params.safeId;\n    this.type = h.ObjectTypes.OBJECT;\n    var e = y.AssetsStorage.instance;\n    var i = t.className;\n    var s = e.getByKey(i + "_data");\n    var f = t.params;\n    var g = f.x;\n    var m = f.y;\n    this.x = g;\n    this.y = m;\n    this.graphic = l.GraphicUtil.createImageWithObj(f, e.getByKey(i));\n    if (t.params.physic) {\n      this.body = r.NapeUtil.createRectBodyWH(a.DYNAMIC, c.Filters.WITH_EARTH_ONLY, false, s.w, s.h, g, m, d["default"].TO_RAD * f.rotation, null, p.Materials.DEFAULT);\n      this.body.userData.handler = this;\n      this.body.userData.graphicEx = this.graphic;\n      r.NapeUtil.setupStartPos(this.body);\n    }\n    this.space = u.MaxGameCore.instance.getSpace();\n    if (f.impulse > 0) {\n      this.impulse = f.impulse;\n      this.count = f.count;\n      this.angle = Math.PI * 2 / this.count;\n      this.ray = new n(o.weak(g, m), o.weak(1, 0));\n      this.radius = f.radius;\n      this.ray.maxDistance = this.radius;\n    } else {\n      this.impulse = 0;\n    }\n    this.stones = t.params.stones === true;\n  };\n  e.prototype.processCollide = function () {\n    if (this.body) {\n      this.body.space = null;\n    }\n    if (this.impulse > 0) {\n      for (var t = 0; t < this.count; t++) {\n        var e = t * this.angle;\n        this.ray.direction.angle = e;\n        var i = this.space.rayCast(this.ray);\n        if (i) {\n          var s = i.shape.body;\n          if (s.isDynamic()) {\n            var n = o.fromPolar(this.impulse * (this.radius - i.distance) / this.radius, e);\n            var a = this.ray.at(i.distance);\n            s.applyImpulse(n, a);\n            a.dispose();\n            n.dispose();\n          }\n          i.dispose();\n        }\n      }\n    }\n    this.active = true;\n    if (r.RaceCamera.inCamera(this.x, this.y, 256)) {\n      f.CarExplodeObject.get().activate(this.x, this.y, this.hideGraphic, null, this);\n      r.RacesData.data.camera.shake();\n      g["default"].getInstance().play(m.Sounds.Explode1);\n      if (this.stones) {\n        g["default"].getInstance().play(m.Sounds.Stones);\n      }\n    } else {\n      this.graphic.visible = false;\n    }\n  };\n  e.prototype.hideGraphic = function (t) {\n    t.graphic.visible = false;\n  };\n  e.prototype.applyDamage = function (t) {\n    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    this.processCollide();\n    return true;\n  };\n  e.prototype.release = function () {\n    this.space = null;\n    t.prototype.release.call(this);\n  };\n  e.prototype.restart = function () {\n    if (this.body) {\n      r.NapeUtil.stopBody(this.body);\n      r.NapeUtil.resetStartPos(this.body);\n      this.body.space = this.space;\n    }\n    this.active = false;\n    this.graphic.visible = true;\n    this.dead = false;\n  };\n  e.prototype.activate = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    if (!this.active) {\n      if (t) {\n        this.processCollide();\n      }\n    }\n  };\n  e.prototype.review = function () {\n    this.restart();\n  };\n  e.prototype.isActive = function () {\n    return true;\n  };\n  return e;\n}(r.GameObject);\nexports.TntObject = v;\n\n//# sourceURL=webpack://motox3m/./src/objects/interactive/TntObject.js?')},"./src/objects/landscape/LandscapeShape.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// LandscapeShape - Visual component for landscape elements\n// Extends Phaser.Group to manage landscape shape graphics\n\n// Key features:\n// - Manages landscape visual elements\n// - Position offset handling\n// - Resource cleanup\n// - Group-based composition\n// - Simple positioning system\n\n// Properties:\n// Inherited from Phaser.Group:\n// - x: Horizontal position (with offset)\n// - y: Vertical position (with offset)\n\n// Constructor params:\n// @param params - Creation parameters\n// @param offsetX - Horizontal offset\n// @param offsetY - Vertical offset\n\n// Methods:\n// - dispose(): Cleanup resources\n//   * Properly destroys group\n//   * Handles resource cleanup\n\n// Usage example:\n// const landscape = new LandscapeShape(\n//   { params: { x: 100, y: 100 } },\n//   10,  // x offset\n//   20   // y offset\n// );\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar o = function (t) {\n  function e(e, i, s) {\n    var o = t.call(this, n.GraphicUtil.game) || this;\n    o.x = e.params.x - i;\n    o.y = e.params.y - s;\n    return o;\n  }\n  s(e, t);\n  e.prototype.dispose = function () {\n    this.destroy();\n  };\n  return e;\n}(Phaser.Group);\nexports.LandscapeShape = o;\n\n//# sourceURL=webpack://motox3m/./src/objects/landscape/LandscapeShape.js?')},"./src/objects/physics/PivotObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// PivotObject - Physics-based pivot joint object\n// Extends GameObject to create pivot connections between bodies\n\n// Key features:\n// - Creates Nape PivotJoint between bodies\n// - Visual representation support\n// - Dynamic/static body handling\n// - Position tracking\n// - Resource cleanup\n\n// Properties:\n// - pivot: Nape PivotJoint instance\n// - space: Physics space reference\n// - isDynamic: Dynamic state flag\n// - body2: Secondary connected body\n// - graphic: Visual representation\n\n// Key Methods:\n// - create(): Initialize pivot joint\n//   * Finds bodies at point\n//   * Creates joint connection\n//   * Sets up graphics\n//\n// - update(): Update graphics position\n// - restart(): Reset joint state\n// - release(): Cleanup resources\n\n// Usage example:\n// const pivot = new PivotObject();\n// pivot.create({\n//   params: {\n//     x: 100,\n//     y: 100,\n//     graphic: 1  // graphic type\n//   }\n// });\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = nape.constraint.PivotJoint;\nvar o = nape.geom.Vec2;\nvar a = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar r = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar h = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar l = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar objTypes = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar c = function (t) {\n  function e() {\n    return t.call(this) || this;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.type = objTypes.ObjectTypes.OBJECT;\n    this.space = r.MaxGameCore.instance.getSpace();\n    var e = t.params;\n    this.id = e.id;\n    this.safeId = e.safeId;\n    var i = o.get(e.x, e.y);\n    for (var s = a.NapeUtil.bodiesUnderPoint(this.space, i), c = null, u = null, d = true; !s.empty();) {\n      var p = s.pop();\n      if (p.isDynamic()) {\n        if (c === null) {\n          c = p;\n        } else if (c.userData.isPT !== true && p.userData.isPT === true) {\n          u = c;\n          c = p;\n        } else if (u === null) {\n          u = p;\n          if (u.userData.isPT === true) {\n            break;\n          }\n        } else if (u.userData.isPT !== true && p.userData.isPT === true) {\n          u = p;\n          break;\n        }\n      } else if (u === null) {\n        u = p;\n      }\n    }\n    if (c) {\n      if (u === null) {\n        u = this.space.world;\n      }\n      var f = c.worldPointToLocal(i);\n      var y = u.worldPointToLocal(i);\n      this.pivot = new n(c, u, f, y);\n      this.pivot.ignore = true;\n      this.pivot.space = this.space;\n      f.dispose();\n      y.dispose();\n      var g = e.graphic === null ? 0 : e.graphic;\n      if (g > 0) {\n        var m = l.AssetsStorage.instance;\n        var v = "Pivot" + (g - 1).toString();\n        console.log("v", v);\n        this.graphic = h.GraphicUtil.createImageWithObj(e, m.getByKey(v));\n        if (this.graphic) {\n          this.isDynamic = !c.isStatic() && !u.isStatic();\n          this.body2 = u;\n        }\n      }\n    }\n    i.dispose();\n  };\n  e.prototype.activate = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    if (!this.active) {\n      this.pivot.active = false;\n      this.active = true;\n    }\n  };\n  e.prototype.restart = function () {\n    if (this.pivot) {\n      this.pivot.space = null;\n      this.pivot.space = this.space;\n      if (this.pivot.userData.skipActive !== true) {\n        this.pivot.active = true;\n      }\n    }\n    this.active = false;\n  };\n  e.prototype.release = function () {\n    if (this.pivot) {\n      this.pivot.body1 = null;\n      this.pivot.body2 = null;\n      this.pivot.space = null;\n    }\n    this.body2 = null;\n    this.space = null;\n    t.prototype.release.call(this);\n  };\n  e.prototype.review = function () {\n    this.restart();\n  };\n  e.prototype.isActive = function () {\n    return true;\n  };\n  e.prototype.update = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (this.isDynamic) {\n      var e = this.body2.localPointToWorld(this.pivot.anchor2, false);\n      this.graphic.x = e.x;\n      this.graphic.y = e.y;\n      e.dispose();\n    }\n  };\n  return e;\n}(a.GameObject);\nexports.PivotObject = c;\n\n//# sourceURL=webpack://motox3m/./src/objects/physics/PivotObject.js?')},"./src/objects/triggers/ToggleObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// ToggleObject - Interactive trigger object with state management\n// Extends GameObject to create state-changing trigger zones\n\n// Key features:\n// - Static physics sensor\n// - Multiple state tracking\n// - Sound effect support\n// - Activation counting\n// - Deactivation support\n\n// Properties:\n// - id: Primary activation target\n// - id_off: Secondary deactivation target\n// - sensCount: Active sensor count\n// - sndId: Sound effect ID\n// - deactivated: Disabled state\n// - active: Current state\n\n// Key Methods:\n// - create(): Initialize trigger\n//   * Creates physics sensor\n//   * Sets up collision handling\n//   * Configures states\n//\n// - activate(): Handle trigger events\n//   * Manages activation counts\n//   * Triggers state changes\n//   * Plays sound effects\n//\n// - restart(): Reset trigger state\n\n// Usage example:\n// const trigger = new ToggleObject();\n// trigger.create({\n//   params: {\n//     id: 1,        // activate object 1\n//     id_off: 2,    // deactivate object 2\n//     sndId: 1,     // play sound 1\n//     off: false    // initially active\n//   }\n// });\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = nape.phys.BodyType;\nvar o = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar a = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar r = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar h = __webpack_require__(/*! @/src/config/CbTypes.js */ "./src/config/CbTypes.js");\nvar l = __webpack_require__(/*! @/src/config/Materials.js */ "./src/config/Materials.js");\nvar c = __webpack_require__(/*! @/src/controllers/SoundController.js */ "./src/controllers/SoundController.js");\nvar u = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar d = function (t) {\n  function e() {\n    var e = t !== null && t.apply(this, arguments) || this;\n    e.id_off = -1;\n    e.sensCount = 0;\n    e.sndId = -1;\n    return e;\n  }\n  s(e, t);\n  e.prototype.restart = function () {\n    this.active = false;\n    this.body.space = this.space;\n    this.sensCount = 0;\n  };\n  e.prototype.dispose = function () {\n    this.body.userData.collideCallback = null;\n    this.body.userData.collideCallbackContext = null;\n    this.body.space = null;\n    this.body = null;\n    this.space = null;\n  };\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.space = a.MaxGameCore.instance.getSpace();\n    this.safeId = t.params.safeId;\n    this.id = t.params.id;\n    if (t.params.id_off) {\n      this.id_off = t.params.id_off;\n    }\n    this.body = o.NapeUtil.createRectBody(n.STATIC, r.Filters.TOGGLE, true, t.params, h.CbTypes.TOGGLE, l.Materials.DEFAULT);\n    if (t.params.off === true) {\n      this.deactivated = true;\n      this.body.cbTypes.add(h.CbTypes.TOGGLE_OFF);\n    } else {\n      this.deactivated = false;\n    }\n    if (t.params.bot === true) {\n      this.body.userData.bot = true;\n    }\n    this.body.userData.collideCallback = this.activate;\n    this.body.userData.collideCallbackContext = this;\n    this.sndId = t.params.sndId;\n  };\n  e.prototype.activate = function (t, e, i) {\n    if (!e) {\n      if (i.id >= 0 && t) {\n        a.MaxGameCore.instance.activate(i.id, true);\n        if (!i.deactivated) {\n          i.body.space = null;\n        }\n        i.sensCount++;\n      }\n      if (i.id_off >= 0 && t) {\n        a.MaxGameCore.instance.activate(i.id_off, false);\n        if (!i.deactivated) {\n          i.body.space = null;\n        }\n      }\n    }\n    if (!t) {\n      if (--i.sensCount <= 0) {\n        a.MaxGameCore.instance.activate(i.id, t);\n      }\n    }\n    if (t) {\n      if (!i.active) {\n        if (i.sndId >= 0) {\n          c["default"].getInstance().play(i.sndId === 1 ? u.Sounds.Wendy : u.Sounds.FlySound());\n        }\n      }\n      i.active = true;\n    }\n  };\n  e.prototype.review = function () {\n    this.restart();\n  };\n  return e;\n}(o.GameObject);\nexports.ToggleObject = d;\n\n//# sourceURL=webpack://motox3m/./src/objects/triggers/ToggleObject.js?')},"./src/objects/vehicles/BikeObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;  Bike Object\nvar n = __webpack_require__(/*! @/src/objects/vehicles/CarObject.js */ "./src/objects/vehicles/CarObject.js");\nvar o = nape.geom.Vec2;\nvar a = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar r = __webpack_require__(/*! @/src/objects/effects/Explosion.js */ "./src/objects/effects/Explosion.js");\nvar h = __webpack_require__(/*! @/src/controllers/SoundController.js */ "./src/controllers/SoundController.js");\nvar l = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar c = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.MIN_AC_BR_TIME = 1;\n    e.MAX_VEL_TIME = 2;\n    e.maxVelTimer = 0;\n    return e;\n  }\n  s(e, t);\n  e.prototype.restart = function () {\n    if (this.suspendBack) {\n      this.suspendBack.graphic.visible = true;\n    }\n    if (this.suspendFront) {\n      this.suspendFront.graphic.visible = true;\n    }\n    this.accelWithBrakeTimer = 0;\n    this.maxVelTimer = 0;\n    this.exploded = false;\n    t.prototype.restart.call(this);\n  };\n  e.prototype.applyDrive = function (t, e, i) {\n    var s = this.controller.accell;\n    var n = this.controller.brake;\n    this.accell = this.controller.accell;\n    var o = this.accelTorque;\n    var a = this.maxAngularVel;\n    if (this.deltaTorque > 0 && s) {\n      var r = this.speed / this.wheelRadius;\n      if (r < a) {\n        var h = undefined;\n        var l = 0.5;\n        var c = 2.5;\n        var u = 1 / 9;\n        var d = 4;\n        var p = 0.5 + r * 2.5 / a;\n        h = (1 / (p * p) - 1 / 9) / (4 - 1 / 9);\n        o = this.accelTorque + h * this.deltaTorque;\n      }\n    }\n    if (s && n) {\n      this.accelWithBrakeTimer += t;\n    } else {\n      if (this.accelWithBrakeTimer > this.MIN_AC_BR_TIME) {\n        this.maxVelTimer = this.MAX_VEL_TIME;\n      }\n      this.accelWithBrakeTimer = 0;\n    }\n    this.brakePart = this.accelWithBrakeTimer / this.MIN_AC_BR_TIME;\n    if (this.brakePart > 1) {\n      this.brakePart = 1;\n    }\n    var f;\n    if (n) {\n      f = this.frontWheel.body;\n      if (Math.abs(f.angularVel) < 1) {\n        this.brakeJoint.jointMin = this.brakeJoint.jointMax = f.rotation - this.frame.body.rotation;\n        this.brakeJoint.active = true;\n      }\n      f.angularVel *= 0.25;\n      this.backWheel.brake(true);\n      if (!s) {\n        this.backWheel.body.angularVel = 0;\n      }\n    } else {\n      this.brakeJoint.active = false;\n      this.backWheel.brake(false);\n    }\n    if (s) {\n      f = this.backWheel.body;\n      if (this.maxVelTimer > 0) {\n        if (f.angularVel < a * 1.2) {\n          f.applyAngularImpulse(t * 1.5 * o);\n        }\n        this.maxVelTimer -= t;\n      } else {\n        if (f.angularVel < 0) {\n          f.angularVel *= 0.5;\n        }\n        if (f.angularVel < a) {\n          f.applyAngularImpulse(t * o);\n        }\n      }\n    } else {\n      this.maxVelTimer = 0;\n    }\n  };\n  e.prototype.explode = function () {\n    if (!this.exploded) {\n      if (this.suspendBack) {\n        this.suspendBack.graphic.visible = false;\n      }\n      if (this.suspendFront) {\n        this.suspendFront.graphic.visible = false;\n      }\n      this.exploded = true;\n      var t;\n      t = this.backWheel.body.position.sub(this.frame.body.position);\n      t.normalise();\n      t.muleq(500);\n      this.backWheel.connect(false);\n      this.backWheel.body.velocity.addeq(t);\n      t.dispose();\n      t = this.frontWheel.body.position.sub(this.frame.body.position);\n      t.normalise();\n      t.muleq(500);\n      this.frontWheel.connect(false);\n      this.frontWheel.body.velocity.addeq(t);\n      t.dispose();\n      t = o.fromPolar(100, Math.PI * -0.5);\n      this.frame.body.velocity.addeq(t);\n      t.dispose();\n      r.CarExplodeObject.get().activate(this.frame.body.position.x, this.frame.body.position.y);\n      a.RacesData.data.camera.shake();\n      h["default"].getInstance().play(l.Sounds.Explode2);\n      var e = this.frame.graphic;\n      e.image.visible = false;\n      e.explodedImage.visible = true;\n    }\n  };\n  e.prototype.processDriverSpikes = function () {\n    this.driver.pricessSpikes();\n  };\n  e.prototype.processDriverGround = function () {\n    if (!this.dead) {\n      this._drive = false;\n      this.dead = true;\n      this.driver.connectDriver(false);\n      this.driver.disableMuscle();\n      this.driver.activateMirrorParts(true);\n      this.applyTilt(0, 0);\n      if (this.callbackDie) {\n        this.callbackDie.call(this.callbackContext);\n      }\n    }\n  };\n  e.prototype.review = function () {\n    if (this.suspendBack) {\n      this.suspendBack.graphic.visible = true;\n    }\n    if (this.suspendFront) {\n      this.suspendFront.graphic.visible = true;\n    }\n    this.exploded = false;\n    if (this.brakeJoint) {\n      this.brakeJoint.active = false;\n    }\n    var e = this.frame.graphic;\n    e.image.visible = true;\n    e.explodedImage.visible = false;\n    t.prototype.review.call(this);\n  };\n  return e;\n}(n.CarObject);\nexports.BikeObject = c;\n\n//# sourceURL=webpack://motox3m/./src/objects/vehicles/BikeObject.js?')},"./src/objects/vehicles/CarBuilder.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('//exports.__esModule = true; Bike Builder\nvar s = Phaser.Signal;\nvar n = nape.constraint.AngleJoint;\nvar o = nape.constraint.DistanceJoint;\nvar a = nape.constraint.LineJoint;\nvar r = nape.constraint.WeldJoint;\nvar h = nape.geom.GeomPoly;\nvar l = nape.geom.GeomPolyList;\nvar c = nape.geom.Vec2;\nvar u = nape.phys.Body;\nvar d = nape.phys.BodyType;\nvar p = nape.phys.Material;\nvar f = nape.shape.Circle;\nvar y = nape.shape.Polygon;\nvar g = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar m = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar v = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar b = __webpack_require__(/*! @/src/config/CbTypes.js */ "./src/config/CbTypes.js");\nvar x = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar _ = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar w = __webpack_require__(/*! @/src/config/Materials.js */ "./src/config/Materials.js");\nvar C = __webpack_require__(/*! @/src/objects/vehicles/DriverPartObject.js */ "./src/objects/vehicles/DriverPartObject.js");\nvar P = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar T = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar S = function () {\n  function t() {\n    this.complete = new s();\n  }\n  t.prototype.createAllCars = function () {\n    this.cars = g.CarsData.cars;\n    this.createPlayerCar();\n    this.carsCreated();\n  };\n  t.prototype.carsCreated = function () {\n    var t = g.CarsData.cars.cars;\n    this.playerParams = null;\n    t = null;\n    this.complete.dispatch(this);\n  };\n  t.prototype.dispose = function () {\n    this.complete.removeAll();\n  };\n  t.prototype.createPlayerCar = function () {\n    this.playerParams = g.CarsData.params;\n    var e = g.CarsData.cars.player.x;\n    var i = g.CarsData.cars.player.y;\n    var s = t.createCar(this.playerParams, e, i, true, false);\n    s.controller = new g.PlayerController(s);\n    s.frontWheel.graphic.createGroundParts();\n    s.backWheel.graphic.createGroundParts();\n    //if(g.CarsData.params != 4){\n    s.frame.graphic.createSmokeParts();\n    //}\n    // alien smoke\n    if (g.CarsData.params != 4) {\n      //s.frame.graphic.createAlienSmokeParts();\n    }\n    m.MaxGameCore.instance.car = s;\n    // newcar-tbg95\n    // if(m.MaxGameCore.instance.carGhost)\n    // {\n    //   m.MaxGameCore.instance.carGhost.playerCar = s;\n    // }\n  };\n  t.createWheel = function (t, e, i, s) {\n    var r = i ? t.wheelBackFriction : t.wheelFrontFriction;\n    var h = i ? t.wheelBackDensity : t.wheelFrontDensity;\n    var l = new u(d.DYNAMIC);\n    l.disableCCD = true;\n    var y = new p(0, r, r, h);\n    var m = i ? t.wheelBackR : t.wheelFrontR;\n    var x;\n    x = new f(m, null, y, v.Filters.WHEEL);\n    l.cbTypes.add(b.CbTypes.WHEEL);\n    l.shapes.add(x);\n    l.compound = e;\n    var w;\n    w = i ? -t.wheelBackDx : t.wheelFrontDx;\n    var C = i ? t.axisBackY : t.axisFrontY;\n    var P = i ? t.axisBackLen : t.axisFrontLen;\n    var T = i ? t.damperBackY : t.damperFrontY;\n    var S = i ? t.damperBackLen : t.damperFrontLen;\n    var A = S * 2;\n    var E = i ? t.damperBackFreq : t.damperFrontFreq;\n    var I = i ? t.damperBackDamp : t.damperFrontDamp;\n    l.position.setxy(s.position.x + w, s.position.y + S);\n    var M = c.fromPolar(1, i ? t.axisBackAngle : t.axisFrontAngle);\n    var R = new a(s, l, c.weak(w, C), c.weak(), M, 0, P);\n    R.compound = l.compound;\n    M.dispose();\n    var O = new o(s, l, c.weak(w, T), c.weak(), S, A);\n    O.frequency = E;\n    O.damping = I;\n    O.ignore = true;\n    O.stiff = false;\n    O.compound = l.compound;\n    var B = new g.WheelObject();\n    if (!i) {\n      var L = new n(s, l, 0, 0, 1);\n      L.active = false;\n      L.stiff = false;\n      L.damping = 100;\n      L.compound = l.compound;\n      B.brakeJoint = L;\n    }\n    B.skinId = t.skinId;\n    B.body = l;\n    B.graphic = _.GraphicUtil.createCarWheelGraphic(t, i ? t.wheelBackR : t.wheelFrontR, i);\n    B.material = y;\n    B.lineJoint = R;\n    B.distanceJoint = O;\n    B.isPlayer = true;\n    B.create();\n    return B;\n  };\n  t.createDriver = function (t, e, i) {\n    var s = i.body;\n    var n = new g.DriverObject();\n    var o = new u(d.DYNAMIC);\n    var a = new p(0, 0, 0, t.driverDensity, 0.001);\n    o.shapes.add(new y(y.box(t.driverW, t.driverH, true), a, v.Filters.NOTHING));\n    o.userData.dx = 0;\n    o.userData.dy = t.driverDy;\n    n.body = o;\n    o.compound = e;\n    var h = new r(s, o, c.weak(0, t.driverDy), c.weak(), 0);\n    h.ignore = true;\n    h.compound = o.compound;\n    n.weld = h;\n    n.dx = t.driverDx;\n    n.create();\n    var l = g.CarsData.geom[1];\n    var f = s.position.x;\n    var m = s.position.y;\n    var P = w.Materials.DEFAULT;\n    var S = "driver_shin";\n    var A = l[S];\n    var E = new C.DriverPartObject();\n    E.graphic = _.GraphicUtil.createImage(f + A.x, m + A.y, A.r, T.AssetsStorage.instance.getByKey(S));\n    E.body = g.NapeUtil.createRectBodyWH(d.DYNAMIC, v.Filters.DRIVER_PART, false, A.w, A.h, A.x + f, A.y + m, A.r, b.CbTypes.DRIVER_PART, P);\n    E.body.compound = e;\n    E.create(A);\n    var I = new C.DriverPartObject();\n    I.graphic = _.GraphicUtil.createImage(f + A.x, m + A.y, A.r, T.AssetsStorage.instance.getByKey(S));\n    I.body = g.NapeUtil.createRectBodyWH(d.DYNAMIC, v.Filters.DRIVER_PART, false, A.w, A.h, A.x + f, A.y + m, A.r, b.CbTypes.DRIVER_PART, P);\n    I.body.compound = e;\n    I.create(A);\n    S = "driver_hip";\n    A = l[S];\n    var M = new C.DriverPartObject();\n    M.graphic = _.GraphicUtil.createImage(f + A.x, m + A.y, A.r, T.AssetsStorage.instance.getByKey(S));\n    M.body = g.NapeUtil.createRectBodyWH(d.DYNAMIC, v.Filters.DRIVER_PART, false, A.w, A.h, A.x + f, A.y + m, A.r, b.CbTypes.DRIVER_PART, P);\n    M.body.compound = e;\n    M.create(A);\n    var R = new C.DriverPartObject();\n    R.graphic = _.GraphicUtil.createImage(f + A.x, m + A.y, A.r, T.AssetsStorage.instance.getByKey(S));\n    R.body = g.NapeUtil.createRectBodyWH(d.DYNAMIC, v.Filters.DRIVER_PART, false, A.w, A.h, A.x + f, A.y + m, A.r, b.CbTypes.DRIVER_PART, P);\n    R.body.compound = e;\n    R.create(A);\n    S = "driver_corpse";\n    A = l[S];\n    var O = new C.DriverPartObject();\n    O.graphic = _.GraphicUtil.createImage(f + A.x, m + A.y, A.r, T.AssetsStorage.instance.getByKey(S));\n    O.body = g.NapeUtil.createRectBodyWH(d.DYNAMIC, v.Filters.DRIVER_PART, false, A.w, A.h, A.x + f, A.y + m, A.r, b.CbTypes.DRIVER_PART, P);\n    O.body.compound = e;\n    O.create(A);\n    S = "driver_arm";\n    A = l[S];\n    var B = new C.DriverPartObject();\n    B.graphic = _.GraphicUtil.createImage(f + A.x, m + A.y, A.r, T.AssetsStorage.instance.getByKey(S));\n    B.body = g.NapeUtil.createRectBodyWH(d.DYNAMIC, v.Filters.DRIVER_PART, false, A.w, A.h, A.x + f, A.y + m, A.r, b.CbTypes.DRIVER_PART, P);\n    B.body.compound = e;\n    B.create(A);\n    var L = new C.DriverPartObject();\n    L.graphic = _.GraphicUtil.createImage(f + A.x, m + A.y, A.r, T.AssetsStorage.instance.getByKey(S));\n    L.body = g.NapeUtil.createRectBodyWH(d.DYNAMIC, v.Filters.DRIVER_PART, false, A.w, A.h, A.x + f, A.y + m, A.r, b.CbTypes.DRIVER_PART, P);\n    L.body.compound = e;\n    L.create(A);\n    S = "driver_forearm";\n    A = l[S];\n    var k = new C.DriverPartObject();\n    k.graphic = _.GraphicUtil.createImage(f + A.x, m + A.y, A.r, T.AssetsStorage.instance.getByKey(S));\n    k.body = g.NapeUtil.createRectBodyWH(d.DYNAMIC, v.Filters.DRIVER_PART, false, A.w, A.h, A.x + f, A.y + m, A.r, b.CbTypes.DRIVER_PART, P);\n    k.body.compound = e;\n    k.create(A);\n    var D = new C.DriverPartObject();\n    D.graphic = _.GraphicUtil.createImage(f + A.x, m + A.y, A.r, T.AssetsStorage.instance.getByKey(S));\n    D.body = g.NapeUtil.createRectBodyWH(d.DYNAMIC, v.Filters.DRIVER_PART, false, A.w, A.h, A.x + f, A.y + m, A.r, b.CbTypes.DRIVER_PART, P);\n    D.body.compound = e;\n    D.create(A);\n    S = "driver_head";\n    A = l[S];\n    var F = new C.DriverPartObject();\n    F.graphic = _.GraphicUtil.createImage(f + A.x, m + A.y, A.r, T.AssetsStorage.instance.getByKey(S));\n    F.body = g.NapeUtil.createRectBodyWH(d.DYNAMIC, v.Filters.DRIVER_PART, false, A.w, A.h, A.x + f, A.y + m, A.r, b.CbTypes.DRIVER, P);\n    F.body.compound = e;\n    F.create(A);\n    var G = x["default"].TO_RAD * 10;\n    E.createJoints(M, l.hip_joint, f, m, G);\n    I.createJoints(R, l.hip_joint, f, m, G);\n    M.createJoints(O, l.corpse_joint, f, m, G);\n    R.createJoints(O, l.corpse_joint, f, m, G);\n    k.createJoints(B, l.forearm_joint, f, m, G);\n    D.createJoints(L, l.forearm_joint, f, m, G);\n    B.createJoints(O, l.arm_joint, f, m, G);\n    L.createJoints(O, l.arm_joint, f, m, G);\n    F.createJoints(O, l.head_joint, f, m, G);\n    n.frameBody = i.body;\n    n.connectArm(k, l.steer_joint, f, m, G);\n    n.connectLeg(E, l.shin_joint, f, m, G);\n    n.parts[0] = F;\n    n.parts[1] = O;\n    n.parts[2] = M;\n    n.parts[3] = E;\n    n.parts[4] = B;\n    n.parts[5] = k;\n    n.parts_mirror[0] = null;\n    n.parts_mirror[1] = null;\n    n.parts_mirror[2] = R;\n    n.parts_mirror[3] = I;\n    n.parts_mirror[4] = L;\n    n.parts_mirror[5] = D;\n    return n;\n  };\n  t.createFrame = function (e, i, s, n) {\n    var o = new g.FrameObject();\n    var a = new u(d.DYNAMIC, c.weak(i, s));\n    a.cbTypes.add(b.CbTypes.BODY_COLLIDER);\n    var r = new p(0, 0, 0, e.bodyDensity, 0.001);\n    var l;\n    if (e.bodyMassType === 0) {\n      l = new y(y.box(e.bodyW * 0.5, e.bodyH, true), r, v.Filters.NOTHING);\n      l.translate(c.weak(-e.wheelBackDx, 0));\n      a.shapes.add(l);\n      l = new y(y.box(e.bodyW * 0.5, e.bodyH, true), r, v.Filters.NOTHING);\n      l.translate(c.weak(e.wheelFrontDx, 0));\n      a.shapes.add(l);\n    } else {\n      a.shapes.add(new y(y.box(e.bodyW, e.bodyH, true), r, v.Filters.NOTHING));\n    }\n    var f;\n    f = v.Filters.BODY_COLLIDER;\n    var m = g.CarsData.geom[1];\n    if (m) {\n      var x = m.points;\n      if (x !== null) {\n        var C = [];\n        for (var P = x.length, T = 0; T < P; T++) {\n          C[C.length] = c.weak(x[T].x >> 0, x[T].y >> 0);\n        }\n        var S = new h(C);\n        if (S.isConvex()) {\n          l = new y(S, w.Materials.WIEGHTLESS, f);\n          S.dispose();\n          a.shapes.add(l);\n        } else {\n          S.convexDecomposition(false, t.polyList);\n          S.dispose();\n          while (!t.polyList.empty()) {\n            S = t.polyList.pop();\n            l = new y(S, w.Materials.WIEGHTLESS, f);\n            a.shapes.add(l);\n            S.dispose();\n          }\n          t.polyList.clear();\n        }\n      }\n    }\n    a.align();\n    a.compound = n;\n    a.userData.skinId = e.skinId;\n    o.body = a;\n    o.skinId = e.skinId;\n    o.graphic = _.GraphicUtil.createCarFrameGraphic(e, m);\n    o.create(e);\n    return o;\n  };\n  t.createCar = function (e, i, s, n, o) {\n    var a = new g.BikeObject();\n    // create frame\n    var r = t.createFrame(e, i, s, a.compound);\n    a.frame = r;\n    // create wheel\n    var h;\n    //wheel back\n    h = t.createWheel(e, a.compound, true, r.body);\n    a.backWheel = h;\n    //wheel front\n    h = t.createWheel(e, a.compound, false, r.body);\n    a.frontWheel = h;\n    a.brakeJoint = h.brakeJoint;\n    // create driver\n    var l;\n    if (e.driverDensity > 0) {\n      l = t.createDriver(e, a.compound, r);\n      a.driver = l;\n    }\n    // Setup brake material\n    a.backWheel.brakeMaterial = a.backWheel.material.copy();\n    a.backWheel.brakeMaterial.dynamicFriction = a.backWheel.brakeMaterial.staticFriction = a.backWheel.material.staticFriction * 0.1;\n    var u = g.Inventory.instance.getSkin();\n    var d = g.CarsData.geom[1];\n    var p;\n    // no back suspension\n    if (u !== 2 && u !== 16 && u !== 17 && u !== 19) {\n      p = new g.DecorObject(true);\n      p.graphic = _.GraphicUtil.createImage(0, 0, 0, T.AssetsStorage.instance.getByKey("suspend_back"));\n      a.suspendBack = p;\n      p.type = P.ObjectTypes.CAR;\n      a.suspendBackLocal = c.get(d.suspend_back.x, d.suspend_back.y);\n      a.suspendBackW = d.suspend_back_w;\n    }\n    if (u !== 2 && u !== 16 && u !== 17 && u !== 19 && u !== 23) {\n      p = new g.DecorObject(true);\n      p.graphic = _.GraphicUtil.createImage(0, 0, 0, T.AssetsStorage.instance.getByKey("suspend_front"));\n      a.suspendFront = p;\n      a.suspendFrontAngle = e.axisFrontAngle;\n      p.type = P.ObjectTypes.CAR;\n    }\n    // create bike ofject\n    a.create(e);\n    a.x = i;\n    a.y = s;\n    a.rotation = 0;\n    var f = m.MaxGameCore.instance;\n    if (u !== 2 && u !== 16 && u !== 17 && u !== 19) {\n      f.add(a.backWheel);\n      f.add(a.frontWheel);\n    }\n    if (a.suspendBack) {\n      f.add(a.suspendBack);\n    }\n    var y = false;\n    if (u === 3 || u === 6 || u === 24 || u === 18 || u === 14 || u === 12 || u === 9 || u === 10 || u === 25 || u === 22 || u === 26 || u === 21) {\n      y = true;\n      if (a.suspendFront) {\n        f.add(a.suspendFront);\n      }\n    }\n    f.add(a.frame);\n    if (u === 2 || u === 16 || u === 17 || u === 19) {\n      f.add(a.backWheel);\n      f.add(a.frontWheel);\n    }\n    if (!y) {\n      if (a.suspendFront) {\n        f.add(a.suspendFront);\n      }\n    }\n    if (a.driver) {\n      f.add(a.driver);\n      a.driver.activateMirrorParts(true);\n      f.add(a.driver.parts_mirror[4]);\n      f.add(a.driver.parts_mirror[5]);\n      f.add(a.driver.parts_mirror[2]);\n      f.add(a.driver.parts_mirror[3]);\n      a.driver.activateMirrorParts(false);\n      if (u === 4 || u === 6) {\n        f.add(a.driver.parts[2]);\n        f.add(a.driver.parts[1]);\n        f.add(a.driver.parts[0]);\n        f.add(a.driver.parts[3]);\n        f.add(a.driver.parts[4]);\n        f.add(a.driver.parts[5]);\n      } else if (u === 2 || u === 16 || u === 17 || u === 19) {\n        f.add(a.driver.parts[1]);\n        f.add(a.driver.parts[0]);\n        f.add(a.driver.parts[2]);\n        f.add(a.driver.parts[3]);\n        f.add(a.driver.parts[4]);\n        f.add(a.driver.parts[5]);\n      } else {\n        f.add(a.driver.parts[0]);\n        f.add(a.driver.parts[1]);\n        f.add(a.driver.parts[2]);\n        f.add(a.driver.parts[3]);\n        f.add(a.driver.parts[4]);\n        f.add(a.driver.parts[5]);\n      }\n      // for (var v = 0; v < 6; v++) {\n      //   var b = a.driver.parts[v].graphic;\n      // }\n      a.driver.parts_mirror[2].body.userData.handler = a;\n      a.driver.parts_mirror[3].body.userData.handler = a;\n      a.driver.parts_mirror[4].body.userData.handler = a;\n      a.driver.parts_mirror[5].body.userData.handler = a;\n      a.driver.parts[0].body.userData.handler = a;\n      a.driver.parts[1].body.userData.handler = a;\n      a.driver.parts[2].body.userData.handler = a;\n      a.driver.parts[3].body.userData.handler = a;\n      a.driver.parts[4].body.userData.handler = a;\n      a.driver.parts[5].body.userData.handler = a;\n    }\n    if (l && l.head) {\n      f.add(l.head.trailAnimObject);\n    }\n    f.add(a);\n    if (!o) {\n      a.id = g.CarsData.cars.cars.length;\n      g.CarsData.cars.cars.push(a);\n    }\n    return a;\n  };\n  t.prototype.createParticles = function (param1) {\n    return param1 == 11;\n  };\n  t.prototype.isFrontSuspendFirst = function (param1) {\n    return param1 == 3 || param1 == 6 || param1 == 8 || param1 == 9 || param1 == 10 || param1 == 11 || param1 == 12 || param1 == 13 || param1 == 16 || param1 == 21 || param1 == 22 || param1 == 23 || param1 == 24 || param1 == 28 || param1 == 27 || param1 == 29 || param1 == 30 || param1 == 32 || param1 == 33 || param1 == 34;\n  };\n  t.prototype.isBackSuspendFirst = function (param1) {\n    return param1 == 2 || param1 == 3 || param1 == 4 || param1 == 5 || param1 == 6 || param1 == 7 || param1 == 10 || param1 == 12 || param1 == 13 || param1 == 15 || param1 == 16 || param1 == 17 || param1 == 21 || param1 == 22 || param1 == 23 || param1 == 24 || param1 == 28 || param1 == 27 || param1 == 30 || param1 == 32 || param1 == 33;\n  };\n  t.prototype.isDriverFirst = function (param1) {\n    return param1 == 28;\n  };\n  t.prototype.isMirrorFirst = function (param1) {\n    return param1 == 27 || param1 == 28;\n  };\n  t.prototype.isWheelsFirst = function (param1) {\n    return !(param1 == 14 || param1 == 25 || param1 == 26 || param1 == 31) || param1 == 28;\n  };\n  t.prototype.isSuspenfBeforeWheels = function (param1) {\n    return param1 == 28;\n  };\n  t.prototype.isParticlesFirst = function (param1) {\n    return param1 != 11;\n  };\n  Object.defineProperty(t, "instance", {\n    get: function get() {\n      if (t._instance === null) {\n        t._instance = new t();\n      }\n      return t._instance;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  t.polyList = new l();\n  return t;\n}();\nexports.CarBuilder = S;\n\n//# sourceURL=webpack://motox3m/./src/objects/vehicles/CarBuilder.js?')},"./src/objects/vehicles/CarObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\nexports.__esModule = true;\nvar n = nape.geom.Ray;\nvar o = nape.geom.Vec2;\nvar a = nape.phys.Compound;\nvar r = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar h = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar l = __webpack_require__(/*! @/src/controllers/SoundController.js */ "./src/controllers/SoundController.js");\nvar c = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar u = __webpack_require__(/*! @/src/states/GameState.js */ "./src/states/GameState.js");\nvar d = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.LONG_FLY_TIME = 0.1;\n    e.dampingDelta = 0.99;\n    e._drive = true;\n    e.ray = new n(o.weak(), o.weak(0, 1));\n    e.itemId = -1;\n    e.accell = false;\n    e.smokeTimer = 0;\n    e.wheelieTimer = 0;\n    e.tilt = 0;\n    e.compound = new a();\n    return e;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.space = h.MaxGameCore.instance.getSpace();\n    this.setParams(t);\n    this.finished = false;\n    this.boost = new r.BoostEffector(this.frame.body);\n    this.boost.anim = this.frame.graphic.boostAnim;\n    this.restart();\n  };\n  e.prototype.setParams = function (t) {\n    this.skinId = t.skinId;\n    var e;\n    if (t.wd === 0) {\n      this.wdWheels = [this.backWheel.body];\n      e = this.backWheel.body.shapes.at(0).radius;\n    } else if (t.wd === 1) {\n      e = this.frontWheel.body.shapes.at(0).radius;\n      this.wdWheels = [this.frontWheel.body];\n    } else {\n      this.wdWheels = [this.backWheel.body, this.frontWheel.body];\n      e = Math.max(this.backWheel.body.shapes.at(0).radius, this.frontWheel.body.shapes.at(0).radius);\n    }\n    console.log("e", e);\n    this.wheelRadius = e;\n    var i = Math.PI * 2 * e;\n    var s = t.maxSpeed / i;\n    console.log("speed", s);\n    this.maxAngularVel = s * 2 * Math.PI;\n    this.accelTorque = t.torque;\n    if (t.maxTorque > t.torque) {\n      this.deltaTorque = t.maxTorque - t.torque;\n    } else {\n      this.deltaTorque = 0;\n    }\n    this.tiltTorque = t.flipTorque;\n    this.frame.maxFlipVel = this.maxTiltSpeed = t.maxFlipSpeed;\n  };\n  e.prototype.restart = function () {\n    this.wheelieTimer = 0;\n    this.accell = false;\n    this.safeId = -1;\n    this.finished = false;\n    this.maxFlyAngle = this.minFlyAngle = this.startFlyAngle = this.rotation = this.frame.body.rotation;\n    this.fallTime = this.flyTime = 0;\n    this.frame.body.userData.handler = this;\n    this.backWheel.body.userData.handler = this;\n    this.frontWheel.body.userData.handler = this;\n    this.frame.body.userData.graphic = this.frame.graphic;\n    this.backWheel.body.userData.graphicEx = this.backWheel.graphic;\n    this.frontWheel.body.userData.graphicEx = this.frontWheel.graphic;\n    this._drive = true;\n    this._deadDelay = 0;\n    this.dead = false;\n    this.itemId = -1;\n    this.setVisible(true);\n    this.setAlpha(1);\n    this.review();\n    this.compound.space = this.space;\n  };\n  e.prototype.release = function () {\n    this.space = null;\n    this.compound.space = null;\n    this.compound = null;\n    this.frame = null;\n    this.backWheel = null;\n    this.frontWheel = null;\n    this.callbackFinish = null;\n    this.callbackDie = null;\n    this.callbackStunt = null;\n    this.callbackFight = null;\n    this.suspendBack = null;\n    if (this.suspendBackLocal) {\n      this.suspendBackLocal.dispose();\n    }\n    this.suspendBackLocal = null;\n    this.suspendFront = null;\n    this.boost.dispose();\n    this.boost = null;\n    t.prototype.release.call(this);\n  };\n  Object.defineProperty(e.prototype, "drive", {\n    get: function get() {\n      return this._drive;\n    },\n    set: function set(t) {\n      if (t && !this._drive) {\n        this.frontWheel.startSpin();\n        this.backWheel.startSpin();\n      }\n      this._drive = t;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  e.prototype.addBoost = function (t, e) {\n    // console.log("addBoost", t, e);\n    this.boost.add(t, e);\n  };\n  e.prototype.update = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (this.dead && this.driver) {\n      this.x = this.driver.parts[0].body.position.x;\n      this.y = this.driver.parts[0].body.position.y;\n    } else {\n      this.x = this.frame.body.position.x;\n      this.y = this.frame.body.position.y;\n    }\n    this.rotation = this.frame.body.rotation;\n    var i = this.speed;\n    this.speed = this.frame.body.velocity.length;\n    this.speedV = this.frame.body.velocity.y;\n    this.hasGround = this.frame.hasGround || this.backWheel.hasGround || this.frontWheel.hasGround;\n    if (this.hasGround) {\n      if (this.flyTime > this.LONG_FLY_TIME) {\n        this.processLand();\n        if (i > 500) {\n          l["default"].getInstance().play(c.Sounds.Landing);\n        }\n      }\n      this.flyTime = 0;\n      this.fallTime = 0;\n    } else {\n      if (this.flyTime === 0) {\n        this.maxFlyAngle = this.minFlyAngle = this.startFlyAngle = this.rotation;\n      }\n      if (this.rotation > this.maxFlyAngle) {\n        this.maxFlyAngle = this.rotation;\n      } else if (this.rotation < this.minFlyAngle) {\n        this.minFlyAngle = this.rotation;\n      }\n      this.flyTime += t;\n      if (this.speedV > 0) {\n        this.fallTime += t;\n      } else {\n        this.fallTime = 0;\n      }\n    }\n    var s;\n    if (this._drive) {\n      var n = this.controller.getDrive();\n      this.applyDrive(t, false, n);\n      if (this.finished) {\n        this.applyTilt(t, 0);\n      } else {\n        var o = this.controller.getTilt();\n        this.applyTilt(t, o);\n      }\n      if (this.skinId !== 4 && (this.controller.accell ? this.smokeTimer -= t * 2 : this.smokeTimer -= t, this.smokeTimer <= 0)) {\n        this.smokeTimer += e.SMOKE_TIME;\n        s = this.frame.graphic;\n        var a = this.frame.body.localPointToWorld(this.frame.localSmokePos);\n        var h = Math.PI * 0.1;\n        if (this.controller.accell) {\n          s.emitSmoke(a.x, a.y, this.rotation - h * 0.5 + Math.random() * h);\n          s.emitSmoke(a.x, a.y, this.rotation - Math.PI * 0.1 + h * 0.5 + Math.random() * h);\n          s.emitSmoke(a.x, a.y, this.rotation + Math.PI * 0.1 + h * 0.5 + Math.random() * h);\n          a.dispose();\n        } else {\n          s.emitSmoke(a.x, a.y, this.rotation - h * 0.5 + Math.random() * h);\n          a.dispose();\n        }\n      } else {\n        // alien smoke\n        this.backWheel.graphic.emitAlienBlur(this.backWheel.body.position.x, this.backWheel.body.position.y);\n        this.frontWheel.graphic.emitAlienBlur(this.frontWheel.body.position.x, this.frontWheel.body.position.y);\n      }\n      s = this.frame.graphic;\n      s.emitFire(this.driver.parts[0].body.position.x, this.driver.parts[0].body.position.y);\n      this.updateWheelie(t);\n    } else {\n      if (this._deadDelay > 0) {\n        this._deadDelay -= t;\n        if (this._deadDelay <= 0 && this.skinId !== 9) {\n          this._drive = true;\n          this._deadDelay = 0;\n          this.dead = false;\n          this.setVisible(true);\n          this.compound.space = this.space;\n        }\n      }\n      if (this.finished) {\n        this.frontWheel.body.angularVel *= 0.8;\n        this.backWheel.body.angularVel *= 0.8;\n      }\n    }\n    if (this.suspendBack) {\n      var u = this.frame.body.localPointToWorld(this.suspendBackLocal);\n      var d = this.backWheel.body.position.sub(u);\n      var skinIdtmp = r.Inventory.instance.getSkin();\n      if (skinIdtmp >= 9) {\n        r.Drawing.setTransform(this.suspendBack.graphic, u.x, u.y, d.angle, NaN, NaN, 0.5, 0.5);\n      } else {\n        r.Drawing.setTransform(this.suspendBack.graphic, u.x, u.y, d.angle, NaN, NaN, d.length / this.suspendBackW, 1);\n      }\n\n      // console.log("this.suspendBack.graphic",this.suspendBack.graphic);\n      d.dispose();\n      u.dispose();\n    }\n    if (this.suspendFront) {\n      this.suspendFront.graphic.x = this.frontWheel.body.position.x;\n      this.suspendFront.graphic.y = this.frontWheel.body.position.y;\n      this.suspendFront.graphic.rotation = (this.suspendFrontAngle + this.frame.body.rotation) % (Math.PI * 2);\n    }\n    if (this.driver.head) {\n      if (this.driver.head.trail) {\n        this.driver.head.trail.emit(this.driver.head.body.position.x, this.driver.head.body.position.y);\n      }\n      this.driver.head.update(t);\n    }\n    this.boost.update(t, this.hasGround);\n  };\n  e.prototype.updateWheelie = function (t) {\n    if (!h.MaxGameCore.instance.finished) {\n      if (this.hasGround) {\n        if (this.frame.hasGround) {\n          if (this.wheelieTimer > 0) {\n            this.wheelieComplete();\n          }\n        } else if (this.backWheel.hasGround && !this.frontWheel.hasGround || !this.backWheel.hasGround && this.frontWheel.hasGround) {\n          this.wheelieTimer += t;\n          if (this.wheelieTimer > 1 && this.callbackWheelie) {\n            this.callbackWheelie(this.wheelieTimer, false);\n          }\n        } else if (this.wheelieTimer > 0) {\n          this.wheelieComplete();\n        }\n      } else if (this.wheelieTimer > 0) {\n        this.wheelieComplete();\n      }\n    }\n  };\n  e.prototype.wheelieComplete = function () {\n    if (this.wheelieTimer > 1 && this.callbackWheelie) {\n      this.callbackWheelie(this.wheelieTimer, true);\n    }\n    this.wheelieTimer = 0;\n  };\n  e.prototype.setAlpha = function (t) {\n    this.frame.graphic.alpha = this.backWheel.graphic.alpha = this.frontWheel.graphic.alpha = t;\n  };\n  e.prototype.processLand = function () {\n    if (!h.MaxGameCore.instance.finished) {\n      if (!this.dead && (this.backWheel.hasGround || this.frontWheel.hasGround)) {\n        var t = undefined;\n        var e = Math.PI;\n        t = this.startFlyAngle - this.minFlyAngle;\n        var i = t / (Math.PI * 2) >> 0;\n        t -= i * 2 * Math.PI;\n        if (t >= e) {\n          i++;\n        }\n        var s = i;\n        t = this.maxFlyAngle - this.startFlyAngle;\n        i = t / (Math.PI * 2) >> 0;\n        t -= i * 2 * Math.PI;\n        if (t >= e) {\n          i++;\n        }\n        var n = i;\n        if (s > 0 && this.callbackStunt) {\n          this.callbackStunt.call(this.callbackContext, s, true);\n        }\n        if (n > 0 && this.callbackStunt) {\n          this.callbackStunt.call(this.callbackContext, n, false);\n        }\n      }\n      this.startFlyAngle = this.maxFlyAngle = this.minFlyAngle = this.rotation;\n    }\n  };\n  e.prototype.applyDrive = function (t, e, i) {\n    var s = false;\n    var n = false;\n    if (!this.finished) {\n      if (i === 1) {\n        s = true;\n      } else if (i === -1) {\n        n = true;\n      }\n    }\n    var o = this.accelTorque;\n    var a = this.maxAngularVel;\n    if (this.deltaTorque > 0 && (s || n)) {\n      var r = this.speed / this.wheelRadius;\n      if (r < a) {\n        var h = undefined;\n        var l = 0.5;\n        var c = 2.5;\n        var u = 1 / 9;\n        var d = 4;\n        var p = 0.5 + r * 2.5 / a;\n        h = (1 / (p * p) - 1 / 9) / (4 - 1 / 9);\n        o = this.accelTorque + h * this.deltaTorque;\n      }\n    }\n    this.frontWheel.brake(n);\n    this.backWheel.brake(n);\n    for (var f = this.wdWheels.length, y = a, g = 0; g < f; g++) {\n      var m = this.wdWheels[g];\n      if (this.finished) {\n        m.angularVel *= 0.8;\n      } else {\n        if (s) {\n          if (m.angularVel < 0) {\n            m.angularVel *= 0.5;\n          }\n          if (m.angularVel < a) {\n            m.applyAngularImpulse(t * o / f);\n          }\n        } else if (n) {\n          if (m.angularVel > 0) {\n            m.angularVel *= 0.5;\n          }\n          if (m.angularVel > -a) {\n            m.applyAngularImpulse(-t * o / f);\n          }\n        } else if (!e) {\n          m.angularVel *= this.dampingDelta;\n        }\n        if (Math.abs(m.angularVel) < y) {\n          y = Math.abs(m.angularVel);\n        }\n      }\n    }\n  };\n  e.prototype.applyTilt = function (t, e) {\n    this.tilt = e;\n    var i = this.frame.body;\n    i.torque = e * this.tiltTorque;\n    var s = i.angularVel;\n    if (s < 0 && s < -this.maxTiltSpeed) {\n      i.angularVel = -this.maxTiltSpeed;\n    } else if (s > 0 && s > this.maxTiltSpeed) {\n      i.angularVel = this.maxTiltSpeed;\n    }\n    if (this.driver) {\n      var n = e;\n      if (n === 0) {\n        if (this.hasGround) {\n          if (this.controller.accell) {\n            n = -1;\n          }\n        } else {\n          var o = this.frame.body.velocity.y;\n          if (o < -20) {\n            n = 1;\n          } else if (o > 20) {\n            n = -1;\n          }\n        }\n      }\n      this.driver.move(e, n);\n    }\n  };\n  e.prototype.setReviewPos = function (t, e, i) {\n    this.safeId = i;\n    this.frame.body.userData.reviewX = t;\n    this.frame.body.userData.reviewY = e;\n  };\n  e.prototype.review = function () {\n    h.MaxGameCore.instance.stopAllSounds();\n    if (u["default"].loadedLevel) {\n      h.MaxGameCore.instance.engineStart = l["default"].getInstance().play(c.Sounds.Start);\n    }\n    this.wheelieTimer = 0;\n    this.backWheel.connect(false);\n    this.frontWheel.connect(false);\n    this.driver.connectDriver(false);\n    this.driver.connect(false);\n    r.NapeUtil.stopBody(this.frame.body);\n    r.NapeUtil.stopBody(this.backWheel.body);\n    r.NapeUtil.stopBody(this.frontWheel.body);\n    this.driver.stop();\n    this.frame.review();\n    this.startFlyAngle = this.maxFlyAngle = this.minFlyAngle = this.rotation = this.frame.body.rotation;\n    var t = o.get(-this.frame.wheelBackDx, this.frame.wheelDy);\n    var e = this.frame.body.localPointToWorld(t);\n    this.backWheel.body.position.set(e);\n    e.dispose();\n    t.setxy(this.frame.wheelFrontDx, this.frame.wheelDy);\n    e = this.frame.body.localPointToWorld(t);\n    this.frontWheel.body.position.set(e);\n    e.dispose();\n    t.dispose();\n    this.driver.review(this.frame.body.position);\n    this.backWheel.connect(true);\n    this.frontWheel.connect(true);\n    this.driver.connectDriver(true);\n    this.driver.connect(true);\n    this.driver.activateMirrorParts(false);\n    this.dead = false;\n    this._drive = true;\n    this.boost.restart();\n  };\n  e.prototype.setVisible = function (t) {\n    this.frame.graphic.visible = this.backWheel.graphic.visible = this.frontWheel.graphic.visible = t;\n  };\n  e.prototype.processFinish = function (t) {\n    this.wheelieComplete();\n    this._drive = false;\n    this.finished = true;\n    this.applyTilt(0, 0);\n    h.MaxGameCore.instance.processFinish();\n  };\n  e.SMOKE_TIME = 0.2;\n  return e;\n}(r.GameObject);\nexports.CarObject = d;\n\n//# sourceURL=webpack://motox3m/./src/objects/vehicles/CarObject.js?')},"./src/objects/vehicles/CorpseObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = nape.phys.BodyType;\nvar o = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar a = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar r = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar h = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar l = __webpack_require__(/*! @/src/config/Materials.js */ "./src/config/Materials.js");\nvar c = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar u = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar d = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.type = a.ObjectTypes.CAR;\n    return e;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var e = t;\n    this.space = r.MaxGameCore.instance.getSpace();\n    this.graphic = h.GraphicUtil.createImageWithObj(null, u.AssetsStorage.instance.getByKey("car_corpse" + e.skinId.toString()));\n    this.body = o.NapeUtil.createPolyBody(u.AssetsStorage.instance.getByKey("car_corpse_points" + e.skinId.toString()), l.Materials.DEFAULT, c.Filters.WITH_EARTH_ONLY, n.DYNAMIC);\n    this.restart();\n  };\n  e.prototype.activate = function (t, e, i, s) {\n    this.body.position.set(t);\n    this.body.rotation = e;\n    this.body.velocity.set(i);\n    this.body.angularVel = s;\n    this.graphic.visible = true;\n    this.body.space = this.space;\n  };\n  e.prototype.restart = function () {\n    this.deactivate();\n  };\n  e.prototype.release = function () {\n    t.prototype.release.call(this);\n  };\n  e.prototype.deactivate = function () {\n    this.graphic.visible = false;\n    this.body.space = null;\n  };\n  return e;\n}(o.GameObject);\nexports.CorpseObject = d;\n\n//# sourceURL=webpack://motox3m/./src/objects/vehicles/CorpseObject.js?')},"./src/objects/vehicles/DriverObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// DriverObject - Complex physics-based driver character\n// Extends GameObject to create an articulated driver with limbs and joints\n\n// Key features:\n// - Physics-based character\n// - Multiple body parts management\n// - Joint system for limbs\n// - Mirror parts for effects\n// - Complex movement control\n\n// Properties:\n// - parts[]: Array of body parts\n// - parts_mirror[]: Mirrored body parts\n// - frameBody: Main body reference\n// - head: Head part reference\n// - Multiple joints:\n//   * pivotJointArm/Leg\n//   * angleJointArm/Leg\n//   * angleJointArmStiff/LegStiff\n// - spiked: Damage state\n\n// Key methods:\n// - move(dx, angle): Control character movement\n// - connect(active): Toggle joint connections\n// - connectArm/Leg(): Setup limb joints\n// - review(position): Reset character state\n// - disableMuscle(): Disable movement constraints\n// - activateMirrorParts(): Toggle mirror effects\n// - pricessSpikes(): Handle spike damage\n\n// Usage example:\n// const driver = new DriverObject();\n// driver.create();\n// driver.connectArm(armPart, anchor, x, y, angle);\n// driver.move(1, 0.5);\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = nape.constraint.AngleJoint;\nvar o = nape.constraint.PivotJoint;\nvar a = nape.geom.Vec2;\nvar r = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar h = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar l = __webpack_require__(/*! @/src/utils/PhysicsUtils.js */ "./src/utils/PhysicsUtils.js");\nvar c = __webpack_require__(/*! @/src/controllers/SoundController.js */ "./src/controllers/SoundController.js");\nvar u = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar d = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.parts = [];\n    e.parts_mirror = [];\n    return e;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  };\n  e.prototype.move = function (t, e) {\n    var i = this.dx * t;\n    this.body.shapes.at(0).localCOM.x = i;\n    this.parts[3].move(e, h["default"].TO_RAD * 30);\n    this.parts[2].move(e, h["default"].TO_RAD * -45);\n    this.parts[4].move(e, h["default"].TO_RAD * -45);\n    var s = e * 15 * h["default"].TO_RAD;\n    this.angleJointLegStiff.jointMin = this.basePhaseLeg - this.deltaAngleLeg + s;\n    this.angleJointLegStiff.jointMax = this.basePhaseLeg + this.deltaAngleLeg + s;\n    this.angleJointLeg.jointMin = this.basePhaseLeg + s;\n    this.angleJointLeg.jointMax = this.basePhaseLeg + s;\n  };\n  e.prototype.release = function () {\n    this.frameBody = null;\n    this.head = null;\n    this.pivotJointArm.body1 = null;\n    this.pivotJointArm.body2 = null;\n    this.pivotJointArm.compound = null;\n    this.angleJointArm.body1 = null;\n    this.angleJointArm.body2 = null;\n    this.angleJointArm.compound = null;\n    this.angleJointArmStiff.body1 = null;\n    this.angleJointArmStiff.body2 = null;\n    this.angleJointArmStiff.compound = null;\n    this.pivotJointLeg.body1 = null;\n    this.pivotJointLeg.body2 = null;\n    this.pivotJointLeg.compound = null;\n    this.angleJointLeg.body1 = null;\n    this.angleJointLeg.body2 = null;\n    this.angleJointLeg.compound = null;\n    this.angleJointLegStiff.body1 = null;\n    this.angleJointLegStiff.body2 = null;\n    this.angleJointLegStiff.compound = null;\n    this.weld.active = false;\n    this.weld.compound = null;\n    this.weld.body1 = null;\n    this.weld.body2 = null;\n    this.weld = null;\n    t.prototype.release.call(this);\n  };\n  e.prototype.restart = function () {\n    this.spiked = false;\n  };\n  e.prototype.connect = function (t) {\n    this.weld.active = t;\n    for (var e = 0; e < this.parts.length; e++) {\n      this.parts[e].connect(t);\n    }\n  };\n  e.prototype.stop = function () {\n    l.NapeUtil.stopBody(this.body);\n    for (var t = 0; t < this.parts.length; t++) {\n      var e = this.parts[t];\n      l.NapeUtil.stopBody(e.body);\n    }\n  };\n  e.prototype.review = function (t) {\n    this.spiked = false;\n    this.move(0, 0);\n    this.body.position.x = t.x + this.body.userData.dx;\n    this.body.position.y = t.y + this.body.userData.dy;\n    this.body.rotation = 0;\n    for (var e = 0; e < this.parts.length; e++) {\n      var i = this.parts[e].body;\n      i.position.x = t.x + i.userData.dx;\n      i.position.y = t.y + i.userData.dy;\n      i.rotation = i.userData.dr;\n      i.allowMovement = i.allowRotation = true;\n      if (this.parts_mirror[e]) {\n        i = this.parts_mirror[e].body;\n        i.allowMovement = i.allowRotation = true;\n      }\n    }\n  };\n  e.prototype.disableMuscle = function () {\n    for (var t = this.parts.length, e = 0; e < t; e++) {\n      this.parts[e].disableMuscles();\n    }\n  };\n  e.prototype.activateMirrorParts = function (t) {\n    for (var e = this.parts.length, i = 0; i < e; i++) {\n      var s = this.parts[i];\n      var n = this.parts_mirror[i];\n      if (n) {\n        if (t) {\n          l.NapeUtil.stopBody(n.body);\n          n.body.position.set(s.body.position);\n          n.body.rotation = s.body.rotation;\n        }\n        n.body.compound = t ? n.compound : null;\n        n.connect(t);\n        n.graphic.visible = t;\n      }\n    }\n  };\n  e.prototype.connectArm = function (t, e, i, s, r) {\n    var h = a.get(i + e.x, s + e.y);\n    var l = this.frameBody.worldPointToLocal(h);\n    var c = t.body.worldPointToLocal(h);\n    this.pivotJointArm = new o(this.frameBody, t.body, l, c);\n    this.pivotJointArm.compound = this.frameBody.compound;\n    var u = t.body.rotation - this.frameBody.rotation;\n    this.basePhaseArm = u;\n    this.angleJointArm = new n(this.frameBody, t.body, u, u, 1);\n    this.angleJointArm.stiff = false;\n    this.angleJointArm.damping = 50;\n    this.angleJointArm.frequency = 50;\n    this.angleJointArm.compound = this.frameBody.compound;\n    this.deltaAngleArm = r;\n    this.angleJointArmStiff = new n(this.frameBody, t.body, u - r, u + r, 1);\n    this.angleJointArmStiff.compound = this.frameBody.compound;\n    l.dispose();\n    c.dispose();\n    h.dispose();\n  };\n  e.prototype.connectLeg = function (t, e, i, s, r) {\n    var h = a.get(i + e.x, s + e.y);\n    var l = this.frameBody.worldPointToLocal(h);\n    var c = t.body.worldPointToLocal(h);\n    this.pivotJointLeg = new o(this.frameBody, t.body, l, c);\n    this.pivotJointLeg.compound = this.frameBody.compound;\n    var u = t.body.rotation - this.frameBody.rotation;\n    this.basePhaseLeg = u;\n    this.angleJointLeg = new n(this.frameBody, t.body, u, u, 1);\n    this.angleJointLeg.stiff = false;\n    this.angleJointLeg.damping = 100;\n    this.angleJointLeg.frequency = 50;\n    this.angleJointLeg.compound = this.frameBody.compound;\n    this.deltaAngleLeg = r;\n    this.angleJointLegStiff = new n(this.frameBody, t.body, u - r, u + r, 1);\n    this.angleJointLegStiff.compound = this.frameBody.compound;\n    l.dispose();\n    c.dispose();\n    h.dispose();\n  };\n  e.prototype.connectDriver = function (t) {\n    if (this.pivotJointArm) {\n      this.pivotJointArm.active = t;\n    }\n    if (this.angleJointArm) {\n      this.angleJointArm.active = t;\n    }\n    if (this.angleJointArmStiff) {\n      this.angleJointArmStiff.active = t;\n    }\n    if (this.pivotJointLeg) {\n      this.pivotJointLeg.active = t;\n    }\n    if (this.angleJointLeg) {\n      this.angleJointLeg.active = t;\n    }\n    if (this.angleJointLegStiff) {\n      this.angleJointLegStiff.active = t;\n    }\n  };\n  e.prototype.pricessSpikes = function () {\n    if (!this.spiked) {\n      this.spiked = true;\n      c["default"].getInstance().play(u.Sounds.DriverSpikes);\n    }\n  };\n  return e;\n}(r.GameObject);\nexports.DriverObject = d;\n\n//# sourceURL=webpack://motox3m/./src/objects/vehicles/DriverObject.js?')},"./src/objects/vehicles/DriverPartObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\nexports.__esModule = true;\nvar n = nape.constraint.AngleJoint;\nvar o = nape.constraint.PivotJoint;\nvar a = nape.constraint.WeldJoint;\nvar r = nape.geom.Vec2;\nvar h = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar l = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar c = __webpack_require__(/*! @/src/objects/effects/TrailParticlesSystem.js */ "./src/objects/effects/TrailParticlesSystem.js");\nvar u = __webpack_require__(/*! @/src/utils/PhysicsUtils.js */ "./src/utils/PhysicsUtils.js");\nvar d = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.started = false;\n    return e;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.body.userData.graphicEx = this.graphic;\n    this.type = l.ObjectTypes.CAR;\n    this.body.userData.dx = t.x;\n    this.body.userData.dy = t.y;\n    this.body.userData.dr = t.r;\n    this.compound = this.body.compound;\n    this.pinJoint = new a(this.body, null, r.weak(), r.weak());\n    this.pinJoint.active = false;\n    this.pinJoint.compound = this.compound;\n    this.body.userData.driverPart = this;\n    this.effector = new h.BodyEffector(this.body);\n  };\n  e.prototype.pinTo = function (t) {\n    if (!this.pinJoint.active) {\n      this.pinJoint.body2 = t;\n      var e = t.worldPointToLocal(this.body.position);\n      this.pinJoint.anchor2 = e;\n      e.dispose();\n      this.pinJoint.phase = t.rotation - this.body.rotation;\n      this.pinJoint.active = true;\n    }\n  };\n  e.prototype.restart = function () {\n    this.body.allowMovement = this.body.allowRotation = true;\n    if (this.trail) {\n      this.trail.init(this.body.position.x, this.body.position.y);\n    }\n    if (this.trailAnimObject) {\n      this.trailAnimObject.graphic.position.set(this.body.position.x, this.body.position.y);\n    }\n    this.started = false;\n  };\n  e.prototype.connect = function (t) {\n    if (this.pivotJoint) {\n      this.pivotJoint.active = t;\n    }\n    if (this.angleJoint) {\n      this.angleJoint.active = t;\n      if (t) {\n        this.angleJointStiff.jointMin = this.basePhase - this.deltaAngle;\n        this.angleJointStiff.jointMax = this.basePhase + this.deltaAngle;\n      }\n      this.angleJointStiff.active = t;\n    }\n    if (t && this.trail) {\n      this.trail.init(this.body.position.x, this.body.position.y);\n    }\n    if (this.trailAnimObject) {\n      this.trailAnimObject.graphic.visible = t;\n    }\n    this.pinJoint.active = false;\n    this.pinJoint.body2 = null;\n  };\n  e.prototype.move = function (t, e) {\n    this.angleJointStiff.jointMin = this.basePhase - this.deltaAngle + t * e;\n    this.angleJointStiff.jointMax = this.basePhase + this.deltaAngle + t * e;\n    this.angleJoint.jointMin = this.basePhase + t * e;\n    this.angleJoint.jointMax = this.basePhase + t * e;\n  };\n  e.prototype.release = function () {\n    this.compound = null;\n    if (this.pivotJoint) {\n      this.pivotJoint.body1 = null;\n      this.pivotJoint.body2 = null;\n      this.pivotJoint.compound = null;\n      this.angleJoint.body1 = null;\n      this.angleJoint.body2 = null;\n      this.angleJoint.compound = null;\n      this.angleJointStiff.body1 = null;\n      this.angleJointStiff.body2 = null;\n      this.angleJointStiff.compound = null;\n    }\n    u.NapeUtil.disposeJoint(this.pinJoint);\n    this.pinJoint = null;\n    this.trail && (this.trail = null);\n    this.trailAnimObject && (this.trailAnimObject = null);\n    this.effector.dispose();\n    this.effector = null;\n    t.prototype.release.call(this);\n  };\n  e.prototype.createJoints = function (t, e, i, s) {\n    var a = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n    var h = r.get(i + e.x, s + e.y);\n    var l = this.body.worldPointToLocal(h);\n    var c = t.body.worldPointToLocal(h);\n    this.pivotJoint = new o(this.body, t.body, l, c);\n    this.pivotJoint.compound = this.body.compound;\n    var u = t.body.rotation - this.body.rotation;\n    this.basePhase = u;\n    this.deltaAngle = a;\n    if (a > 0) {\n      this.angleJoint = new n(this.body, t.body, u, u, 1);\n      this.angleJoint.stiff = false;\n      this.angleJoint.damping = 1;\n      this.angleJoint.frequency = 10;\n      this.angleJoint.compound = this.body.compound;\n      this.angleJointStiff = new n(this.body, t.body, u - a, u + a, 1);\n      this.angleJointStiff.compound = this.body.compound;\n    }\n    l.dispose();\n    c.dispose();\n    h.dispose();\n  };\n  e.prototype.disableMuscles = function () {\n    if (this.angleJoint) {\n      this.angleJoint.active = false;\n      this.angleJointStiff.jointMin = this.basePhase - this.deltaAngle * 5;\n      this.angleJointStiff.jointMax = this.basePhase + this.deltaAngle * 5;\n    }\n  };\n  e.prototype.createTrail = function () {\n    this.trail = new c.TrailParticlesSystem();\n    this.trail.init(this.body.position.x, this.body.position.y);\n  };\n  e.prototype.update = function (t) {\n    if (this.trailAnimObject) {\n      var e = this.trailAnimObject.graphic;\n      e.position.set(this.body.position.x, this.body.position.y);\n      var i = this.body.velocity;\n      var s = i.length;\n      if ((this.started || s > 400) && (this.started = true, s > 50)) {\n        var n = i.angle;\n        if (n > Math.PI * 0.25) {\n          n = Math.PI * 0.25;\n        } else if (n < Math.PI * -0.25) {\n          n = Math.PI * -0.25;\n        }\n        e.rotation = n;\n      }\n    }\n    this.effector.update(t);\n  };\n  return e;\n}(h.GameObject);\nexports.DriverPartObject = d;\n\n//# sourceURL=webpack://motox3m/./src/objects/vehicles/DriverPartObject.js?')},"./src/objects/vehicles/WheelGraphic.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true; Wheel Graphics\nvar n = __webpack_require__(/*! @/src/effects/GroundPartClip.js */ "./src/effects/GroundPartClip.js");\nvar o = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar a = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar r = function (t) {\n  function e(e, i) {\n    var Atlases = a.Atlases.Cars;\n    var skinId = o.Inventory.instance.getSkin();\n    if (skinId >= 9) {\n      Atlases = "bike".concat(skinId);\n    }\n    if (skinId === 22 || skinId === 25) {\n      if (i == true) {\n        var s = t.call(this, o.GraphicUtil.game, 0, 0, Atlases, "Wheel_" + o.Inventory.instance.getSkin() + "_10000") || this;\n      } else {\n        var s = t.call(this, o.GraphicUtil.game, 0, 0, Atlases, "Wheel_" + o.Inventory.instance.getSkin() + "_20000") || this;\n      }\n    } else {\n      var s = t.call(this, o.GraphicUtil.game, 0, 0, Atlases, "Wheel_" + o.Inventory.instance.getSkin() + "_" + e.wheels.toString() + "0000") || this;\n    }\n    ;\n    s.parts = [];\n    s.parts2 = [];\n    s.anchor.set(0.5);\n    if (skinId >= 9) {\n      s.scale.set(0.5, 0.5);\n    }\n    return s;\n  }\n  s(e, t);\n  e.prototype.createGroundParts = function () {\n    for (var t = 0; t < e.PART_COUNT; t++) {\n      var i = new n.GroundPartClip();\n      this.parts[t] = i;\n      this.parent.addChild(i);\n    }\n    this.partPos = 0;\n    this.createAlienParts();\n  };\n  e.prototype.emitGround = function (t, i, s, n) {\n    var o = this.parts[this.partPos];\n    var a = e.PART_SPEED + e.PART_DELTA * Math.random();\n    var r = Math.random() * e.ANGLE_DELTA;\n    r = n ? s - r : s + r;\n    var h = Math.PI * 2 * Math.random();\n    o.emit(t + Math.cos(h) * 8, i + Math.cos(h) * 8, a * Math.cos(r), a * Math.sin(r));\n    this.partPos++;\n    if (this.partPos >= e.PART_COUNT) {\n      this.partPos = 0;\n    }\n    this.hasParts = true;\n  };\n  e.prototype.update2 = function (t) {\n    if (this.hasParts) {\n      this.hasParts = false;\n      for (var i = 0; i < e.PART_COUNT; i++) {\n        var s = this.parts[i];\n        s.update2(t);\n        if (s.anim.isPlaying) {\n          this.hasParts = true;\n        }\n      }\n    }\n  };\n  e.prototype.restart = function () {\n    if (this.hasParts) {\n      for (var t = 0; t < e.PART_COUNT; t++) {\n        this.parts[t].visible = false;\n      }\n      this.hasParts = false;\n    }\n  };\n  // alien wheel\n  e.prototype.createAlienParts = function () {\n    for (var t = 0; t < e.PART_COUNT; t++) {\n      var tmp = new o.TrailPart();\n      this.parts2[t] = tmp;\n      this.parent.addChildAt(tmp, 0);\n    }\n    this.partPos2 = 0;\n  };\n  e.prototype.emitAlienBlur = function (t, tmp) {\n    if (o.Inventory.instance.getSkin() == 23) {\n      // console.log("emitAlienBlur",this.parts2);\n      this.parts2[this.partPos2].emit(t, tmp);\n      if (++this.partPos2 >= e.PART_COUNT) {\n        this.partPos2 = 0;\n      }\n    }\n  };\n  e.PART_COUNT = 60;\n  e.PART_SPEED = 128;\n  e.PART_DELTA = 64;\n  e.ANGLE_DELTA = Math.PI * 0.1;\n  return e;\n}(Phaser.Sprite);\nexports.WheelGraphic = r;\n\n//# sourceURL=webpack://motox3m/./src/objects/vehicles/WheelGraphic.js?')},"./src/objects/vehicles/WheelObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar o = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar a = __webpack_require__(/*! @/src/utils/PhysicsUtils.js */ "./src/utils/PhysicsUtils.js");\nvar r = __webpack_require__(/*! @/src/objects/effects/TrailParticlesSystem.js */ "./src/objects/effects/TrailParticlesSystem.js");\nvar h = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.landFlyTime = 0;\n    e.DISABLECCD_OFF_TIME = 0.25;\n    e.DISABLECCD_ON_TIME = 0.05;\n    e.hasGround = false;\n    e.endGroundCollisionDelay = 0;\n    e.END_GROUND_COLLISION_DELAY = 0.25;\n    e.START_SPIN_FRICTION = 0.01;\n    e.START_SPIN_DELAY = 1;\n    e.SMOKE_INIT_DELTA = 250;\n    e.isPlayer = true;\n    e.braked = false;\n    e.type = o.ObjectTypes.CAR;\n    return e;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    t.prototype.create.call(this, e);\n    this.friction = this.material.dynamicFriction;\n    this.circle = this.body.shapes.at(0);\n    this.radius = this.circle.radius;\n    a.NapeUtil.setupStartPos(this.body);\n    this.freq = this.distanceJoint.frequency;\n    this.jointMax = this.distanceJoint.jointMax;\n    this.jointMin = this.distanceJoint.jointMin;\n    this.lineMax = this.lineJoint.jointMax;\n    this.effector = new n.BodyEffector(this.body);\n    this.restart();\n  };\n  e.prototype.restart = function () {\n    if (this.body.constraints.length > 0) {\n      this.body.constraints.at(0).active = false;\n      this.body.constraints.at(1).active = false;\n    }\n    this.flyTime = 0;\n    this.material.staticFriction = this.material.dynamicFriction = this.friction;\n    this.body.disableCCD = true;\n    this.disableOnDelay = 0;\n    this.startSpinDelay = 0;\n    a.NapeUtil.stopBody(this.body);\n    a.NapeUtil.resetStartPos(this.body);\n    if (this.body.constraints.length > 0) {\n      this.body.constraints.at(0).active = true;\n      this.body.constraints.at(1).active = true;\n    }\n    if (this.brakeJoint) {\n      this.brakeJoint.active = false;\n    }\n    if (this.trail) {\n      this.trail.init(this.body.position.x, this.body.position.y);\n    }\n    this.effector.reset();\n  };\n  e.prototype.release = function () {\n    this.lineJoint.compound = null;\n    this.lineJoint.body1 = null;\n    this.lineJoint.body2 = null;\n    this.lineJoint = null;\n    this.distanceJoint.compound = null;\n    this.distanceJoint.body1 = null;\n    this.distanceJoint.body2 = null;\n    this.distanceJoint = null;\n    a.NapeUtil.disposeBody(this.body);\n    this.body = null;\n    this.circle = null;\n    this.trail = null;\n    this.effector.dispose();\n    this.effector = null;\n    t.prototype.release.call(this);\n  };\n  e.prototype.update = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (this.startSpinDelay > 0) {\n      this.startSpinDelay -= t;\n      if (this.startSpinDelay <= 0) {\n        this.material.staticFriction = this.material.dynamicFriction = this.friction;\n      } else if (this.startSpinDelay < this.START_SPIN_DELAY * 0.5) {\n        this.material.staticFriction = this.START_SPIN_FRICTION + (this.friction - this.START_SPIN_FRICTION) * (this.START_SPIN_DELAY * 0.5 - this.startSpinDelay) / (this.START_SPIN_DELAY * 0.5);\n        this.material.dynamicFriction = this.material.staticFriction;\n      }\n    }\n    var e = false;\n    for (var i = this.body.arbiters.iterator(), s = 0, n = 0, o; i.hasNext();) {\n      var a = i.next();\n      if (a.isCollisionArbiter()) {\n        if ((a.body1 === this.body ? a.body2 : a.body1).userData.isGround) {\n          e = true;\n          var r = a.collisionArbiter.contacts.at(0).position;\n          s = r.x;\n          n = r.y;\n          o = a.collisionArbiter.normal.angle;\n          if (a.body1 === this.body) {\n            o += Math.PI;\n          }\n          break;\n        }\n      }\n    }\n    if (e && this.graphic && this.isPlayer && this.skinId !== 4) {\n      var h = this.body.velocity.length;\n      var l = this.body.angularVel * this.radius;\n      if (Math.abs(l) - Math.abs(h) > this.SMOKE_INIT_DELTA) {\n        this.graphic.emitGround(s, n, o, l > 0);\n        this.graphic.emitGround(s, n, o, l > 0);\n        this.graphic.emitGround(s, n, o, l > 0);\n      }\n    }\n    if (e) {\n      this.endGroundCollisionDelay = 0;\n      this.hasGround = true;\n      this.landFlyTime = this.flyTime;\n      this.flyTime = 0;\n    } else if (this.hasGround && this.endGroundCollisionDelay === 0) {\n      this.endGroundCollisionDelay = this.END_GROUND_COLLISION_DELAY;\n    }\n    if (this.hasGround) {\n      if (this.disableOnDelay > 0) {\n        this.disableOnDelay -= t;\n        if (this.disableOnDelay <= 0) {\n          this.disableOnDelay = 0;\n          this.body.disableCCD = true;\n        }\n      }\n      if (this.endGroundCollisionDelay > 0) {\n        this.endGroundCollisionDelay -= t;\n        if (this.endGroundCollisionDelay <= 0) {\n          this.hasGround = false;\n        }\n      }\n    } else {\n      this.flyTime += t;\n      if (this.flyTime > this.DISABLECCD_OFF_TIME) {\n        if (this.disableOnDelay === 0) {\n          this.body.disableCCD = false;\n        }\n        this.disableOnDelay = this.DISABLECCD_ON_TIME;\n      }\n    }\n    if (this.isPlayer) {\n      this.graphic.update2(t);\n    }\n    if (this.trail) {\n      this.trail.emit(this.body.position.x, this.body.position.y);\n    }\n    this.effector.update(t);\n  };\n  e.prototype.startSpin = function () {\n    this.distanceJoint.frequency = this.freq;\n    this.startSpinDelay = this.START_SPIN_DELAY;\n  };\n  e.prototype.brake = function (t) {\n    if (t) {\n      if (!this.braked) {\n        this.circle.material = this.brakeMaterial;\n        this.body.shapes.remove(this.circle);\n        this.body.shapes.add(this.circle);\n      }\n    } else if (this.braked) {\n      this.circle.material = this.material;\n      this.body.shapes.remove(this.circle);\n      this.body.shapes.add(this.circle);\n    }\n    this.braked = t;\n  };\n  e.prototype.connect = function (t) {\n    if (this.body.constraints.length > 1) {\n      this.body.constraints.at(0).active = t;\n      this.body.constraints.at(1).active = t;\n    }\n    if (t && this.trail) {\n      this.trail.init(this.body.position.x, this.body.position.y);\n    }\n  };\n  e.prototype.createTrail = function () {\n    this.trail = new r.TrailParticlesSystem();\n    this.trail.init(this.body.position.x, this.body.position.y);\n  };\n  return e;\n}(n.GameObject);\nexports.WheelObject = h;\n\n//# sourceURL=webpack://motox3m/./src/objects/vehicles/WheelObject.js?')},"./src/objects/world/Background.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar o = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar a = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar camera = __webpack_require__(/*! @/src/core/RaceCamera.js */ "./src/core/RaceCamera.js");\nvar r = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.PART_1 = -0.2;\n    e.PART_2 = -0.4;\n    e.wasStarted = false;\n    e.type = o.ObjectTypes.BG;\n    return e;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var e = a.AssetsStorage.instance;\n    this.graphic = n.GraphicUtil.game.add.group();\n    var i = new a.SpriteData(e.getByKey("Bg0"));\n    this.layer0 = i.bitmapData;\n    this.graphic.addChild(this.layer0);\n    /*i = new a.SpriteData(e.getByKey("Bg1"));\r\n    var s = null;\r\n    if (i) {\r\n      this.layer1 = i.bitmapData;\r\n      this.layer1W = i.rect.width;\r\n      this.layer1Rect = i.rect.clone(this.layer1Rect);\r\n      this.graphic.addChild(this.layer1);\r\n      s = i.bitmapData;\r\n      s.x = this.layer1Rect.width - 1;\r\n      this.layer1.addChild(s);\r\n      s = i.bitmapData;\r\n      s.x = (this.layer1Rect.width - 1) * 2;\r\n      this.layer1.addChild(s);\r\n      s = i.bitmapData;\r\n      s.x = (this.layer1Rect.width - 1) * 3;\r\n      this.layer1.addChild(s);\r\n      s = i.bitmapData;\r\n      s.x = (this.layer1Rect.width - 1) * 4;\r\n      this.layer1.addChild(s);\r\n      s = i.bitmapData;\r\n      s.x = (this.layer1Rect.width - 1) * 5;\r\n      this.layer1.addChild(s);\r\n      this.layer1.y = 125;\r\n    }*/\n    i = new a.SpriteData(e.getByKey("Bg2"));\n    if (i) {\n      this.layer2 = i.bitmapData;\n      this.layer2W = i.rect.width;\n      this.layer2Rect = i.rect.clone(this.layer2Rect);\n      this.graphic.addChild(this.layer2);\n      s = i.bitmapData;\n      s.x = this.layer2Rect.width - 1;\n      this.layer2.addChild(s);\n      s = i.bitmapData;\n      s.x = (this.layer2Rect.width - 1) * 2;\n      this.layer2.addChild(s);\n      s = i.bitmapData;\n      s.x = (this.layer2Rect.width - 1) * 3;\n      this.layer2.addChild(s);\n      s = i.bitmapData;\n      s.x = (this.layer2Rect.width - 1) * 4;\n      this.layer2.addChild(s);\n      s = i.bitmapData;\n      s.x = (this.layer2Rect.width - 1) * 5;\n      this.layer2.addChild(s);\n      this.layer2.y = 135;\n    }\n    this.startDx = Math.random() * this.layer2W;\n  };\n  e.prototype.update = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var e = n.RacesData.TARGET_X + this.startDx;\n    // var e;\n    // if (this.wasStarted) {\n    //   e = this.prevViewX + (n.RacesData.TARGET_X - this.prevTargetX) * camera.RaceCamera.scale;\n    // } else {\n    //   e = n.RacesData.TARGET_X + this.startDx;\n    //   this.wasStarted = true;\n    // }\n    this.prevViewX = e;\n    this.prevTargetX = n.RacesData.TARGET_X;\n    if (this.layer1) {\n      this.updateLayer(e, this.PART_1, this.layer1, this.layer1W);\n    }\n    if (this.layer2) {\n      this.updateLayer(e, this.PART_2, this.layer2, this.layer2W);\n    }\n  };\n  e.prototype.updateLayer = function (t, e, i, s) {\n    var n = -t * e % s;\n    i.x = -n;\n  };\n  e.prototype.restart = function () {};\n  e.EL_COUNT = [0, 0, 0];\n  return e;\n}(n.GameObject);\nexports.BgObject = r;\n\n//# sourceURL=webpack://motox3m/./src/objects/world/Background.js?')},"./src/objects/world/DecorActObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval("// DecorActObject - Interactive decorative object\n// Extends DecorObject to add activation/deactivation functionality\n\n// Key features:\n// - Extends basic decoration object\n// - Adds activation state\n// - ID tracking\n// - Visibility toggle\n// - State querying\n\n// Properties:\n// - id: Object identifier\n// - Inherited from DecorObject:\n//   * graphic: Visual representation\n//   * position\n//   * other decoration properties\n\n// Methods:\n// - create(params): Initialize with ID\n//   * Sets object ID from params\n//   * Calls parent creation\n//\n// - activate(state): Toggle activation\n//   * Inverts graphic visibility\n//   * Optional state parameter\n//\n// - isActive(): Query state\n//   * Always returns true in base implementation\n//   * Meant to be overridden\n\n// Usage example:\n// const decor = new DecorActObject(params);\n// decor.create({ params: { id: 'decor1' }});\n// decor.activate(true); // Hide graphic\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/objects/world/Decorations.js */ \"./src/objects/world/Decorations.js\");\nvar o = function (t) {\n  function e(e) {\n    return t.call(this, e) || this;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.id = e.params.id;\n    t.prototype.create.call(this, e);\n  };\n  e.prototype.activate = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    this.graphic.visible = !t;\n  };\n  e.prototype.isActive = function () {\n    return true;\n  };\n  return e;\n}(n.DecorObject);\nexports.DecorActObject = o;\n\n//# sourceURL=webpack://motox3m/./src/objects/world/DecorActObject.js?")},"./src/objects/world/DecorMultiObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// DecorMultiObject - Complex decorative object with multiple parts\n// Extends GameObject to create grouped decorative elements\n\n// Key features:\n// - Group-based decoration\n// - Theme-aware rendering\n// - Scale support\n// - Rotation support\n// - Multiple object types (LANDSCAPE, FRONT, LANDSCAPE_BACK)\n\n// Properties:\n// - type: Object type (LANDSCAPE/FRONT/LANDSCAPE_BACK)\n// - graphic: Phaser.Group instance\n//   * Contains multiple decoration elements\n//   * Supports transformation\n\n// Methods:\n// - create(params): Initialize decoration\n//   * Handles class name processing\n//   * Creates Phaser group\n//   * Sets position/scale/rotation\n//   * Handles theme-specific types\n//   * Supports duplicate naming (_dup)\n\n// Usage example:\n// const decor = new DecorMultiObject(true); // landscape type\n// decor.create({\n//   className: \'decoration_1\',\n//   params: {\n//     x: 100,\n//     y: 100,\n//     scaleX: 1.5,\n//     scaleY: 1.5,\n//     rotation: 0.5\n//   }\n// });\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar o = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar a = function (t) {\n  function e(e) {\n    var i = t.call(this) || this;\n    i.type = e ? o.ObjectTypes.LANDSCAPE : o.ObjectTypes.FRONT;\n    return i;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var e = t.className;\n    if (n.RacesData.map.settings.theme === 2) {\n      this.type = o.ObjectTypes.LANDSCAPE_BACK;\n    }\n    var i = e.indexOf("_dup");\n    if (i >= 0) {\n      e = e.substring(0, i);\n    }\n    var s = n.GraphicUtil.game.add.group();\n    s.x = t.params.x;\n    s.y = t.params.y;\n    if (!isNaN(t.params.scaleX)) {\n      s.scale.x = t.params.scaleX;\n    }\n    if (!isNaN(t.params.scaleY)) {\n      s.scale.y = t.params.scaleY;\n    }\n    s.rotation = t.params.rotation;\n    this.graphic = s;\n  };\n  return e;\n}(n.GameObject);\nexports.DecorMultiObject = a;\n\n//# sourceURL=webpack://motox3m/./src/objects/world/DecorMultiObject.js?')},"./src/objects/world/Decorations.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar o = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar a = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar r = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar h = function (t) {\n  function e(e) {\n    var i = t.call(this) || this;\n    i.type = e ? o.ObjectTypes.LANDSCAPE : o.ObjectTypes.FRONT;\n    return i;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    // var e = t.className;\n    // if (n.RacesData.map.settings.theme === 0 || n.RacesData.map.settings.theme === 2) {\n    //   this.type = o.ObjectTypes.LANDSCAPE_BACK;\n    //   if (e.indexOf("Dec") === 0 && Number(e.slice(3, e.length)) <= 7) {\n    //     this.type = o.ObjectTypes.FRONT;\n    //   }\n    // }\n    var e = t.className;\n    var i = parseInt(e.substr(3));\n    if (i === 13 || i === 14 || i === 15 || i === 16 || i === 36 || i === 42 || i >= 50 && i <= 60) {\n      this.type = o.ObjectTypes.LANDSCAPE_BACK;\n    }\n    var i = e.indexOf("_dup");\n    if (i >= 0) {\n      e = e.substring(0, i);\n    }\n    var s = r.AssetsStorage.instance.getByKey(e);\n    if (s) {\n      var h = s + "0000";\n      this.graphic = n.GraphicUtil.game.add.sprite(0, 0, n.GraphicUtil.currentAtlass, h);\n      n.Drawing.setTransform(this.graphic, t.params.x, t.params.y, a["default"].TO_RAD * t.params.rotation, 0, 0, t.params.scaleX, t.params.scaleY);\n      this.graphic.anchor.set(0.5);\n      if (h.indexOf("Sign") === 0 && h !== "SignPillar0000") {\n        this.type = o.ObjectTypes.LANDSCAPE;\n      }\n      if (h === "Dec120000") {\n        var l = this.graphic;\n        l.animations.add(e, Phaser.Animation.generateFrameNames(e, 0, 22, "", 4));\n        l.anchor.set(0.5, 0.7);\n        l.animations.getAnimation(e).play(30, true);\n      } else if (h === "Dec130000") {\n        var l = this.graphic;\n        l.anchor.set(0.22142857142857142, 0.4854771784232365);\n      } else if (h === "Dec140000") {\n        var l = this.graphic;\n        l.anchor.set(0.7979274611398963, 0.5563380281690141);\n      } else if (h === "Dec150000") {\n        var l = this.graphic;\n        l.anchor.set(0.4943820224719101, 0.023255813953488372);\n      } else if (h === "Dec160000") {\n        var l = this.graphic;\n        l.anchor.set(0.6333333333333333, 0.4309623430962343);\n      } else if (h === "Dec290000") {\n        var l = this.graphic;\n        l.anchor.set(0.453125, 0.6987951807228916);\n      } else if (h === "Dec300000") {\n        var l = this.graphic;\n        l.anchor.set(0.6375, 1);\n      } else if (h === "Dec310000") {\n        var l = this.graphic;\n        l.anchor.set(0.5, 1);\n      } else if (h === "Dec320000") {\n        var l = this.graphic;\n        l.anchor.set(0.5, 1);\n      } else if (h === "Dec330000") {\n        var l = this.graphic;\n        l.anchor.set(0.5025641025641026, 0.5116279069767442);\n      } else if (h === "Dec340000") {\n        var l = this.graphic;\n        l.anchor.set(0.5, 0.5);\n      } else if (h === "Dec350000") {\n        var l = this.graphic;\n        l.anchor.set(0.5, 0.5);\n      }\n    }\n  };\n  return e;\n}(n.GameObject);\nexports.DecorObject = h;\n\n//# sourceURL=webpack://motox3m/./src/objects/world/Decorations.js?')},"./src/objects/world/GlassBlock.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/physics/GlassBlockPart.js */ "./src/physics/GlassBlockPart.js");\nvar o = nape.geom.Vec2;\nvar a = nape.phys.BodyType;\nvar r = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar h = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar l = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar c = __webpack_require__(/*! @/src/config/CbTypes.js */ "./src/config/CbTypes.js");\nvar u = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar d = __webpack_require__(/*! @/src/config/Game.js */ "./src/config/Game.js");\nvar p = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar f = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar y = __webpack_require__(/*! @/src/config/Materials.js */ "./src/config/Materials.js");\nvar g = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar m = __webpack_require__(/*! @/src/controllers/SoundController.js */ "./src/controllers/SoundController.js");\nvar v = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar b = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.switchOffDelay = 0;\n    e.isCrashed = false;\n    return e;\n  }\n  s(e, t);\n  e.getParts = function () {\n    var t = e.pool[e.poolPos];\n    e.poolPos++;\n    if (e.poolPos >= e.POOL_SIZE) {\n      e.poolPos = 0;\n    }\n    return t;\n  };\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.step = d["default"].STEP;\n    this.type = p.ObjectTypes.OBJECT;\n    this.space = h.MaxGameCore.instance.getSpace();\n    var e = t.params;\n    this.safeId = e.safeId;\n    this.ttl = e.ttl;\n    var i = g.AssetsStorage.instance;\n    this.className = t.className;\n    console.log(this.className);\n    var s = i.getByKey(this.className + "_data");\n    var n = e.x;\n    var o = e.y;\n    var m = t.params.rotation * f["default"].TO_RAD;\n    var v = u.Filters.GROUND;\n    this.bodyW = s.w;\n    this.bodyHHalf = s.h * 0.5;\n    this.body = r.NapeUtil.createRectBodyWH(a.STATIC, v, false, s.w, s.h, n, o, m, null, y.Materials.DEFAULT);\n    this.body.cbTypes.add(c.CbTypes.GLASS);\n    this.body.cbTypes.add(c.CbTypes.GROUND);\n    this.body.userData.collideCallback = this.processCollide;\n    this.body.userData.collideCallbackContext = this;\n    var b = l.GraphicUtil.createImageWithObj(e, this.className);\n    this.graphic = b;\n    if (this.className.indexOf("Crashed") >= 0) {\n      this.createParts(this.className);\n      this.isCrashed = true;\n      this.partScale = this.className === "GlassCrashed0" ? 1 : 0.5;\n    }\n    this.counter = 0;\n  };\n  e.prototype.createParts = function (t) {\n    if (e.pool == null) {\n      e.pool = [];\n      for (var i = 0; i < e.POOL_SIZE; i++) {\n        var s = [];\n        for (var o = 0; o < e.VECTOR_SIZE; o++) {\n          var a = new n.GlassBlockPart(o, "GlassCrashed0_");\n          a.create();\n          h.MaxGameCore.instance.add(a);\n          a.restart();\n          s[o] = a;\n        }\n        e.pool[i] = s;\n      }\n    }\n  };\n  e.prototype.update = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (this.counter < 10) {\n      this.counter++;\n    }\n    if (this.switchOffDelay > 0) {\n      this.switchOffDelay -= t;\n      if (this.switchOffDelay <= 0) {\n        this.switchOff();\n      }\n    }\n  };\n  e.prototype.restart = function () {\n    this.switchOffDelay = 0;\n    this.collided = false;\n    this.body.space = this.space;\n    this.graphic.visible = true;\n    this.graphic.alpha = 1;\n    this.graphic.scale.x = 1;\n    this.graphic.scale.y = 1;\n  };\n  e.prototype.release = function () {\n    this.space = null;\n    this.clearPool();\n    t.prototype.release.call(this);\n  };\n  e.prototype.clearPool = function () {\n    if (e.pool !== null) {\n      for (var t = 0; t < e.pool.length; t++) {\n        e.pool[t].splice(0, e.pool[t].length);\n        e.pool[t] = null;\n      }\n      e.pool.splice(0, e.pool.length);\n      e.pool = null;\n    }\n  };\n  e.prototype.review = function () {\n    this.restart();\n  };\n  e.prototype.switchOff = function () {\n    this.body.space = null;\n    this.graphic.visible = false;\n    if (this.isCrashed) {\n      this.crashGlass();\n    }\n  };\n  e.prototype.processCollide = function (t, i) {\n    if (!i.collided) {\n      i.collided = true;\n      if (i.isCrashed) {\n        i.collidePos = t.copy();\n        i.explodeX = i.collidePos.x;\n        i.explodeY = i.collidePos.y + i.bodyHHalf;\n        i.switchOffDelay = i.ttl;\n      } else if (!(i.ttl > e.ANIM_TIME)) {\n        i.startAnim(i);\n      }\n    }\n  };\n  e.prototype.startAnim = function (t) {\n    t.isCrashed;\n  };\n  e.prototype.crashGlass = function () {\n    if (r.RaceCamera.inCamera(this.explodeX, this.explodeY, 256)) {\n      var t = new Date().getTime();\n      if (t - e.lastCrashTime > e.MIN_CRASH_DELTA) {\n        e.lastCrashTime = t;\n        m["default"].getInstance().play(v.Sounds.GlassCrash);\n      }\n    }\n    var i = e.getParts();\n    var s = i.length;\n    var n = o.get();\n    n.setxy(this.bodyW * -0.25 + Math.random() * 0.5 * this.bodyW, this.bodyHHalf);\n    var a = this.collidePos;\n    a.y += this.bodyHHalf * 2;\n    var h = e.PARTS_DATA[this.className];\n    var l = this.body.rotation;\n    for (var c = 0; c < s; c++) {\n      var u = i[c];\n      n.setxy(h[c].x, h[c].y);\n      var d = this.body.localPointToWorld(n);\n      u.activate(d, l, this.partScale);\n      var p = o.get(u.body.position.x + Math.random() * 0.5 - a.x, u.body.position.y - a.y);\n      p.normalise();\n      p.length = 5;\n      d.dispose();\n      u.body.applyImpulse(p, a);\n      p.dispose();\n    }\n    n.dispose();\n    a.dispose();\n  };\n  e.lastCrashTime = 0;\n  e.MIN_CRASH_DELTA = 200;\n  e.PARTS_DATA = {\n    GlassCrashed0: [{\n      x: -47,\n      y: -6\n    }, {\n      x: -35,\n      y: 2\n    }, {\n      x: 13,\n      y: 2\n    }, {\n      x: 48,\n      y: 2\n    }, {\n      x: 47,\n      y: -4\n    }, {\n      x: 4,\n      y: -4\n    }],\n    GlassCrashed1: [{\n      x: -23,\n      y: -6\n    }, {\n      x: -17,\n      y: 2\n    }, {\n      x: 7,\n      y: 2\n    }, {\n      x: 25,\n      y: 2\n    }, {\n      x: 24,\n      y: -4\n    }, {\n      x: 3,\n      y: -4\n    }]\n  };\n  e.POOL_SIZE = 10;\n  e.VECTOR_SIZE = 6;\n  e.poolPos = 0;\n  e.ANIM_TIME = 0.6;\n  return e;\n}(r.GameObject);\nexports.GlassBlock = b;\n\n//# sourceURL=webpack://motox3m/./src/objects/world/GlassBlock.js?')},"./src/objects/world/Ground.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = Phaser.Point;\nvar o = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar a = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar r = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar h = __webpack_require__(/*! @/src/physics/PhysicsUtils.js */ "./src/physics/PhysicsUtils.js");\nvar l = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar c = function (t) {\n  function e() {\n    return t.call(this) || this;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var e = t.params;\n    var i = t.className;\n    var s = i.indexOf("BonesPather") >= 0;\n    var c = false;\n    if (s && (c = e.isPillar === true)) {\n      e.physic = false;\n    }\n    var u = o.RacesData.map.settings.theme;\n    if (e.lineId === 3 && u === 0) {\n      this.type = a.ObjectTypes.FRONT;\n    } else if (e.lineId === 3 && u === 1) {\n      this.type = a.ObjectTypes.OBJECT;\n    } else {\n      this.type = a.ObjectTypes.LANDSCAPE;\n    }\n    if (e.rotation !== 0) {\n      var d = r["default"].normalizeVertices(t);\n      t = d;\n      e = d.params;\n    }\n    var p = e.vertices;\n    var f = p.length;\n    var y = e.x;\n    var g = e.y;\n    if (s && !c || e.physic === true) {\n      this.body = h.PhysicUtil.createGroundBody(t);\n    }\n    if (e.physic === true) {\n      this.body = h.PhysicUtil.createGroundBody(t);\n    }\n    var m = [];\n    var v = 0;\n    var b;\n    var x;\n    var _;\n    var w;\n    for (w = 0; w < f; w++) {\n      b = p[w];\n      if (w === 0) {\n        x = b.x;\n        _ = b.y;\n      }\n      var C = new n(b.x - x, b.y - _);\n      m.push(C);\n      if (C.y > v) {\n        v = C.y;\n      }\n    }\n    y += x;\n    g += _;\n    if (s) {\n      e.shape = false;\n      e.line = true;\n      e.lineId = 13;\n    }\n    if (e.shape === true || e.line === true) {\n      this.graphic = l.GraphicUtil.createGround(y, g, m, e.line, e.shape, v, e.lineId);\n    }\n    if (e.camera === true) {\n      f = m.length;\n      var P = e.cameraOffsetY;\n      for (w = 0; w < f; w++) {\n        m[w].x += y;\n        m[w].y += g + P;\n      }\n      o.CameraPathes.instance.addPathByPoints(m);\n    }\n  };\n  return e;\n}(o.GameObject);\nexports.GroundObject = c;\n\n//# sourceURL=webpack://motox3m/./src/objects/world/Ground.js?')},"./src/objects/world/PlankObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar o = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar a = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar r = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar h = __webpack_require__(/*! @/src/config/Materials.js */ "./src/config/Materials.js");\nvar l = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar c = __webpack_require__(/*! @/src/config/CbTypes.js */ "./src/config/CbTypes.js");\nvar u = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar d = __webpack_require__(/*! @/src/lib/PhaserLib.js */ "./src/lib/PhaserLib.js");\nvar p = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar f = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.id = -1;\n    return e;\n  }\n  s(e, t);\n  e.prototype.activate = function (t, e) {\n    if (t) {\n      this.graphic.visible = false;\n    }\n  };\n  e.prototype.isActive = function () {\n    return true;\n  };\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.type = o.ObjectTypes.LANDSCAPE;\n    this.space = r.MaxGameCore.instance.getSpace();\n    var e = t.params;\n    this.safeId = e.safeId;\n    if (e.id != null) {\n      this.id = e.id;\n      this.id;\n    }\n    if (e.rotation !== 0) {\n      var i = a["default"].normalizeVertices(t);\n      t = i;\n      e = i.params;\n    }\n    var s = e.vertices;\n    var f = s.length;\n    var y;\n    if (e.rotation !== 0) {\n      var g = a["default"].TO_RAD * e.rotation;\n      for (y = 0; y < f; y++) {\n        var m = s[y].x;\n        var v = s[y].y;\n        if (m === 0 && v === 0) ;else {\n          var b = Math.atan2(v, m);\n          var x = Math.sqrt(m * m + v * v);\n          b += g;\n          s[y].x = Math.cos(b) * x;\n          s[y].y = Math.sin(b) * x;\n        }\n      }\n    }\n    var _ = e.type;\n    var w = 0;\n    var P = 0;\n    if (e.physic) {\n      var C = t.params.shapeH;\n      if (_ === 4 || _ === 5 || _ === 6) {\n        e.shapeH = 20;\n        C = 20;\n      }\n      this.body = _ === 3 || _ === 7 ? n.NapeUtil.createPatherBody(t, h.Materials.GROUND, l.Filters.NOTHING, C) : n.NapeUtil.createPatherBody(t, h.Materials.GROUND, l.Filters.GROUND, C);\n      if (_ === 4 || _ === 5) {\n        this.body.cbTypes.add(c.CbTypes.SPIKES);\n      } else {\n        this.body.cbTypes.add(c.CbTypes.GROUND);\n      }\n      this.body.userData.isGround = true;\n      this.body.space = this.space;\n      w = e.x - this.body.position.x;\n      P = e.y - this.body.position.y;\n    }\n    var T = t.className.indexOf("PillarPather") >= 0;\n    var S = null;\n    var A = false;\n    if (T || e.graphic) {\n      var E = null;\n      if (T) {\n        S = "pillar_line" + _.toString();\n      } else if (_ === 1) {\n        E = "CandyPather";\n      } else if (_ == 5) {\n        E = "line_spike";\n        A = true;\n      } else if (_ == 6) {\n        E = "line_wood_pather_pool";\n      } else if (_ == 8) {\n        E = "line_tube_bot";\n      } else if (_ == 9) {\n        E = "line_tube_top";\n      } else if (_ == 10) {\n        E = "line_tube_blick";\n      } else {\n        S = _ === 4 || _ === 5 || _ === 6 ? "road_line9" : "road_line" + (_ + 5).toString();\n      }\n      if (E == null) {\n        E = p.AssetsStorage.instance.getByKey(S);\n      }\n      if (E) {\n        var I = u.GraphicUtil.game.add.group();\n        I.inputEnableChildren = false;\n        f = s.length;\n        var M = [];\n        var O = undefined;\n        var R = undefined;\n        for (y = 0; y < f; y++) {\n          M[M.length] = new d.Point(s[y].x + w, s[y].y + P);\n          if (T) {\n            if (y === 0) {\n              O = Math.atan2(s[y + 1].y - s[y].y, s[y + 1].x - s[y].x);\n            }\n            if (y === f - 2) {\n              R = Math.atan2(s[y + 1].y - s[y].y, s[y + 1].x - s[y].x);\n            }\n          }\n        }\n        if (A) {\n          n.Drawing.drawBitmapPath2(E, I, M);\n        } else {\n          n.Drawing.drawBitmapPath(E, I, M);\n        }\n        if (this.body) {\n          I.x = this.body.position.x;\n          I.y = this.body.position.y;\n        } else {\n          I.x = e.x;\n          I.y = e.y;\n        }\n        this.graphic = I;\n      }\n    }\n    if (this.body && this.body.isDynamic()) {\n      n.NapeUtil.setupStartPos(this.body);\n      this.body.userData.graphic = this.graphic;\n    }\n  };\n  e.prototype.restart = function () {\n    if (this.body && this.body.isDynamic()) {\n      n.NapeUtil.stopBody(this.body);\n      n.NapeUtil.resetStartPos(this.body);\n    }\n    if (this.graphic) {\n      this.graphic.visible = true;\n    }\n  };\n  e.prototype.release = function () {\n    this.space = null;\n    t.prototype.release.call(this);\n  };\n  e.prototype.review = function () {\n    this.restart();\n  };\n  return e;\n}(n.GameObject);\nexports.PlankObject = f;\n\n//# sourceURL=webpack://motox3m/./src/objects/world/PlankObject.js?')},"./src/objects/world/SafePointObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// SafePointObject - Checkpoint/save point object with animation\n// Extends GameObject to create interactive checkpoint locations\n\n// Key features:\n// - Static physics sensor\n// - Animated checkpoint visual\n// - Collision detection\n// - Sound effects\n// - State management\n\n// Properties:\n// - type: OBJECT type\n// - body: Static physics sensor body\n// - graphic: Animated sprite\n// - active: Checkpoint state\n\n// Key Methods:\n// - create(): Initialize checkpoint\n//   * Creates physics sensor\n//   * Sets up animation\n//   * Configures collision\n//\n// - processCollide(): Handle activation\n//   * Plays activation sound\n//   * Starts animation\n//   * Sets active state\n//\n// - restart(): Reset checkpoint\n//   * Resets animation\n//   * Clears active state\n\n// Usage example:\n// const checkpoint = new SafePointObject();\n// checkpoint.create({\n//   params: {\n//     x: 100,\n//     y: 100,\n//     width: 32,\n//     height: 32\n//   }\n// });\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = nape.phys.BodyType;\nvar o = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar a = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar r = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar h = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar l = __webpack_require__(/*! @/src/config/CbTypes.js */ "./src/config/CbTypes.js");\nvar c = __webpack_require__(/*! @/src/config/Materials.js */ "./src/config/Materials.js");\nvar u = __webpack_require__(/*! @/src/controllers/SoundController.js */ "./src/controllers/SoundController.js");\nvar d = __webpack_require__(/*! @/src/ui/Sound.js */ "./src/ui/Sound.js");\nvar p = function (t) {\n  function e() {\n    return t.call(this) || this;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.type = a.ObjectTypes.OBJECT;\n    this.body = o.NapeUtil.createRectBody(n.STATIC, r.Filters.SENSOR, true, t.params, l.CbTypes.SAFE_POINT, c.Materials.DEFAULT);\n    this.body.userData.id = t.params.id;\n    this.body.userData.collideCallback = this.processCollide;\n    this.body.userData.collideCallbackContext = this;\n    this.graphic = h.GraphicUtil.createMovieClip(t.params, "SafePointAnim");\n  };\n  e.prototype.processCollide = function (t) {\n    if (!t.active) {\n      t.active = true;\n      u["default"].getInstance().play(d["default"].SavePoint);\n      t.graphic.animations.getAnimation("SafePointAnim").play(30, false);\n    }\n  };\n  e.prototype.restart = function () {\n    this.active = false;\n    var t = this.graphic.animations.getAnimation("SafePointAnim");\n    t.play(30, false, false);\n    t.frame = 0;\n    t.restart();\n    t.stop();\n  };\n  return e;\n}(o.GameObject);\nexports.SafePointObject = p;\n\n//# sourceURL=webpack://motox3m/./src/objects/world/SafePointObject.js?')},"./src/objects/world/ShaperObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = nape.constraint.PivotJoint;\nvar o = nape.geom.Vec2;\nvar a = nape.phys.BodyType;\nvar r = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar h = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar l = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar c = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar u = __webpack_require__(/*! @/src/config/Materials.js */ "./src/config/Materials.js");\nvar d = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar p = __webpack_require__(/*! @/src/config/CbTypes.js */ "./src/config/CbTypes.js");\nvar f = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar y = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.id = -1;\n    e.removeOnToogle = true;\n    e.skipRevive = false;\n    return e;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.space = c.MaxGameCore.instance.getSpace();\n    var e = t.params;\n    var i = e.layer;\n    var s = t.className.indexOf("Finish") >= 0;\n    this.type = s || i === 1 ? h.ObjectTypes.LANDSCAPE_SHAPE : h.ObjectTypes.LANDSCAPE;\n    if (e.rotation !== 0) {\n      var i = l["default"].normalizeVertices(t);\n      t = i;\n      e = i.params;\n    }\n    if (!s) {\n      this.id = e.id;\n      this.safeId = e.safeId;\n      if (this.safeId <= -10) {\n        this.skipRevive = true;\n      }\n      if (e.rem !== null && e.rem === false) {\n        this.removeOnToogle = false;\n      }\n    }\n    this.isStatic = s || e.isStatic;\n    var n = e.x;\n    var y = e.y;\n    if (s || e.physic === true) {\n      var g = undefined;\n      if (s) {\n        g = u.Materials.DEFAULT;\n      } else if (e.density === 1) {\n        g = u.Materials.GROUND;\n      } else {\n        g = u.Materials.GROUND.copy();\n        g.density = e.density;\n      }\n      var m = undefined;\n      m = s ? d.Filters.SENSOR : e.plr === true ? d.Filters.PLAYER_ONLY : e.ignore === true ? d.Filters.NOTHING : d.Filters.GROUND;\n      this.body = r.NapeUtil.createPolyBody(e, g, m, this.isStatic ? a.STATIC : a.DYNAMIC);\n      this.body.userData.isGround = true;\n      this.body.cbTypes.add(p.CbTypes.GROUND);\n      // console.log("tbg95",i,s);\n      if (s) {\n        for (var v = this.body.shapes.iterator(); v.hasNext();) {\n          v.next().sensorEnabled = true;\n        }\n        this.body.cbTypes.add(p.CbTypes.ZONE_FINISH);\n      } else {\n        this.body.cbTypes.add(p.CbTypes.GROUND);\n        if (i === 3) {\n          this.body.cbTypes.add(p.CbTypes.SAW);\n        }\n        if (i === 9) {\n          this.body.cbTypes.add(p.CbTypes.SPIKES);\n        }\n      }\n      this.body.align();\n      if (e.isWheel === true) {\n        this.body.userData.isWheel = true;\n      }\n    }\n    if (s || e.graphic === true) {\n      var b = 0;\n      var x = 0;\n      if (this.body) {\n        b = -this.body.position.x + n;\n        x = -this.body.position.y + y;\n      }\n      var _ = f.GraphicUtil.createLandscapeShape(t, b, x, s);\n      this.graphic = _;\n    }\n    if (this.body) {\n      if (e.rotation !== 0) {\n        if (!this.body.isDynamic()) {\n          this.body.space = null;\n        }\n        var w = o.get(n, y);\n        this.body.rotate(w, l["default"].TO_RAD * e.rotation);\n        w.dispose();\n        if (!this.body.isDynamic()) {\n          this.body.space = this.space;\n        }\n      }\n      if (this.graphic) {\n        this.graphic.x = this.body.position.x;\n        this.graphic.y = this.body.position.y;\n        this.graphic;\n        r.LandscapeShape;\n        this.graphic.rotation = this.body.rotation;\n      }\n      this.body.space = c.MaxGameCore.instance.getSpace();\n    } else {\n      // this.graphic.rotation = l.default.TO_RAD * e.rotation;\n    }\n    if (this.body && !this.isStatic) {\n      r.NapeUtil.setupStartPos(this.body);\n      if (this.graphic instanceof r.LandscapeShape) {\n        this.body.userData.graphic = this.graphic;\n      } else {\n        this.body.userData.graphicEx = this.graphic;\n      }\n    }\n    if (!this.removeOnToogle) {\n      if (this.id >= 0) {\n        this.activate(false);\n      }\n    }\n  };\n  e.prototype.release = function () {\n    if (e.textures) {\n      for (var i in e.textures) {\n        var _e$textures, _i;\n        (_e$textures = e.textures)[_i = i] && (_e$textures[_i] = null);\n      }\n      e.textures = null;\n    }\n    this.space = null;\n    t.prototype.release.call(this);\n  };\n  e.prototype.activate = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    if (this.removeOnToogle) {\n      if (this.graphic) {\n        this.graphic.visible = false;\n      }\n      if (this.body) {\n        for (var e = this.body.constraints.iterator(); e.hasNext();) {\n          var i = e.next();\n          if (i instanceof n) {\n            i.active = false;\n          }\n        }\n        this.body.space = null;\n      }\n    } else if (this.body && this.body.constraints.length <= 0) {\n      this.body.space = t ? this.space : null;\n    }\n  };\n  e.prototype.restart = function () {\n    var t;\n    var e;\n    if (this.removeOnToogle) {\n      if (this.graphic) {\n        this.graphic.visible = true;\n      }\n      if (this.body) {\n        this.body.space = this.space;\n        t = this.body.constraints.iterator();\n        while (t.hasNext()) {\n          if ((e = t.next()) instanceof n) {\n            e.active = true;\n          }\n        }\n      }\n    } else if (this.id >= 0) {\n      this.activate(false);\n    }\n    if (this.body && !this.isStatic) {\n      r.NapeUtil.stopBody(this.body);\n      r.NapeUtil.resetStartPos(this.body);\n    }\n  };\n  e.prototype.review = function () {\n    if (!this.skipRevive || !this.body || !this.body.isKinematic()) {\n      this.restart();\n    }\n  };\n  e.prototype.isActive = function () {\n    return true;\n  };\n  return e;\n}(r.GameObject);\nexports.ShaperObject = y;\n\n//# sourceURL=webpack://motox3m/./src/objects/world/ShaperObject.js?')},"./src/objects/world/SphereObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\nexports.__esModule = true;\nvar n = nape.constraint.LineJoint;\nvar o = nape.constraint.DistanceJoint;\nvar a = nape.phys.Material;\nvar r = nape.phys.BodyType;\nvar h = nape.geom.Vec2;\nvar l = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar c = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar u = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar d = __webpack_require__(/*! @/src/config/Materials.js */ "./src/config/Materials.js");\nvar p = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar f = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar y = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar g = __webpack_require__(/*! @/src/physics/NapePhysics.js */ "./src/physics/NapePhysics.js");\nvar m = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.id = -1;\n    return e;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.space = g.NapePhysics.space;\n    this.type = c.ObjectTypes.OBJECT;\n    if (t.params.id != null) {\n      this.id = t.params.id;\n    }\n    var e = y.AssetsStorage.instance;\n    var i = t.className;\n    var s = e.getByKey(i + "_data");\n    var m = t.params;\n    var v = m.x;\n    var b = m.y;\n    var x = m.len;\n    var _ = b + x;\n    b = _ - m.pos * x;\n    var w = m.rotation * u["default"].TO_RAD;\n    var P = m.scale == null ? 1 : m.scale;\n    var C = p.Filters.GROUND;\n    var T = f.GraphicUtil.createImageWithObj(m, i);\n    this.graphic = T;\n    this.graphic.y = b;\n    T.scale.set(P);\n    T.anchor.set(0.5, 0.5);\n    var S;\n    S = m.density != 1 ? new a(m.density) : d.Materials.DEFAULT;\n    this.body = l.NapeUtil.createCircleBody(r.DYNAMIC, C, false, s.w * 0.5 * P, v, b, w, null, S);\n    this.body.allowRotation = false;\n    l.NapeUtil.setupStartPos(this.body);\n    this.body.userData.graphicEx = this.graphic;\n    this.lineJoint = new n(this.space.world, this.body, h.weak(v, _), h.weak(), h.weak(0, -1), 0, x);\n    this.distanceJoint = new o(this.space.world, this.body, h.weak(v, _ + m.dySpring), h.weak(), m.lenSpring, m.lenSpring);\n    this.distanceJoint.damping = m.damp;\n    this.distanceJoint.frequency = m.freq;\n    this.distanceJoint.stiff = false;\n    this.lineJoint.space = this.distanceJoint.space = this.space;\n    if (t.params.active == 0) {\n      this.activeOnStart = false;\n    } else {\n      this.activeOnStart = true;\n    }\n  };\n  e.prototype.activate = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    var e;\n    var i;\n    if (t) {\n      this.body.space = this.space;\n      e = this.body.constraints.iterator();\n      while (e.hasNext()) {\n        i = e.next();\n        i.active = true;\n      }\n    } else {\n      for (e = this.body.constraints.iterator(); e.hasNext();) {\n        i = e.next();\n        i.active = false;\n        i.userData.skipActive = true;\n      }\n      this.body.space = null;\n    }\n  };\n  e.prototype.isActive = function () {\n    return this.activeOnStart;\n  };\n  e.prototype.restart = function () {\n    l.NapeUtil.stopBody(this.body);\n    l.NapeUtil.resetStartPos(this.body);\n    if (!this.activeOnStart) {\n      this.graphic.x = this.body.position.x;\n      this.graphic.y = this.body.position.y;\n      this.graphic.rotation = this.body.rotation;\n      this.activate(false);\n    }\n  };\n  e.prototype.review = function () {\n    this.restart();\n  };\n  e.prototype.release = function () {\n    t.prototype.release.call(this);\n    l.NapeUtil.disposeJoint(this.lineJoint);\n    l.NapeUtil.disposeJoint(this.distanceJoint);\n    this.lineJoint = null;\n    this.distanceJoint = null;\n    this.space = null;\n  };\n  return e;\n}(l.GameObject);\nexports.SphereObject = m;\n\n//# sourceURL=webpack://motox3m/./src/objects/world/SphereObject.js?')},"./src/objects/world/VectorDecor.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// VectorDecor - Base class for vector-based decorative elements\n// Extends GameObject to provide foundation for vector decorations\n\n// Key features:\n// - Base vector decoration class\n// - Minimal implementation\n// - Extensible design\n// - GameObject integration\n// - Vector graphics support\n\n// Properties:\n// Inherited from GameObject:\n// - graphic: Visual representation\n// - type: Object type\n// - other base properties\n\n// Methods:\n// - create(params): Empty implementation\n//   * Meant to be overridden by subclasses\n//   * Will handle vector graphic creation\n//   * Parameters for vector configuration\n\n// Usage example:\n// class CustomVectorDecor extends VectorDecor {\n//   create(params) {\n//     // Create vector graphics\n//     const graphics = new PIXI.Graphics();\n//     graphics.beginFill(0xFF0000);\n//     graphics.drawRect(0, 0, 100, 100);\n//     this.graphic = graphics;\n//   }\n// }\nvar s;\nvar n = this && this.__extends || (s = Object.setPrototypeOf || {\n  __proto__: []\n} instanceof Array && function (t, e) {\n  t.__proto__ = e;\n} || function (t, e) {\n  for (var i in e) {\n    if (e.hasOwnProperty(i)) {\n      t[i] = e[i];\n    }\n  }\n}, function (t, e) {\n  function i() {\n    this.constructor = t;\n  }\n  s(t, e);\n  t.prototype = e === null ? Object.create(e) : (i.prototype = e.prototype, new i());\n});\n//exports.__esModule = true;\nvar o = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar a = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar r = function (e) {\n  function t() {\n    var t = e.call(this) || this;\n    t.type = o.ObjectTypes.FRONT;\n    return t;\n  }\n  n(t, e);\n  t.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var e = t.className;\n    if (e === "VecDec_0") {\n      var i = "x" + e + "0000";\n      this.graphic = o.GraphicUtil.game.add.sprite(0, 0, "theme0", i);\n      this.graphic.anchor.set(0.5);\n      var s = this.graphic;\n      e = "xtop_prop";\n      var n = o.GraphicUtil.game.add.sprite(-65, -62, "theme0", "bg0000");\n      n.animations.add(e, Phaser.Animation.generateFrameNames(e, 0, 5, "", 4));\n      n.anchor.set(0.5);\n      n.animations.getAnimation(e).play(40, true);\n      s.addChild(n);\n      e = "xback_prop";\n      (n = o.GraphicUtil.game.add.sprite(240, -39, "theme0", "bg0000")).animations.add(e, Phaser.Animation.generateFrameNames(e, 0, 5, "", 4));\n      n.anchor.set(0.5);\n      n.animations.getAnimation(e).play(40, true);\n      s.addChild(n);\n      o.Drawing.setTransform(this.graphic, t.params.x, t.params.y, a["default"].TO_RAD * t.params.rotation, 0, 0, t.params.scaleX, t.params.scaleY);\n    }\n  };\n  return t;\n}(o.GameObject);\nexports.VectorDecor = r;\n\n//# sourceURL=webpack://motox3m/./src/objects/world/VectorDecor.js?')},"./src/objects/world/WaterObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = nape.geom.Vec2;\nvar o = nape.phys.BodyType;\nvar a = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar r = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar h = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar l = __webpack_require__(/*! @/src/config/CbTypes.js */ "./src/config/CbTypes.js");\nvar c = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar u = __webpack_require__(/*! @/src/config/Materials.js */ "./src/config/Materials.js");\nvar d = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar p = __webpack_require__(/*! @/src/objects/environment/WaterShape.js */ "./src/objects/environment/WaterShape.js");\nvar f = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.id = -1;\n    return e;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.type = h.ObjectTypes.LANDSCAPE;\n    var e = t.params;\n    this.id = e.id;\n    var i = e.x;\n    var s = e.y;\n    var f;\n    f = u.Materials.GROUND;\n    var y = c.Filters.WATER;\n    this.body = a.NapeUtil.createPolyBody(e, f, y, o.STATIC);\n    this.body.cbTypes.add(l.CbTypes.WATER);\n    if (e.layer === 3) {\n      this.body.cbTypes.add(l.CbTypes.SAW);\n    }\n    this.body.align();\n    var g = 0;\n    var m = 0;\n    if (this.body) {\n      g = -this.body.position.x + i;\n      m = -this.body.position.y + s;\n    }\n    if (a.RacesData.map.settings.theme === 0) {\n      this.bgShape = new p.WaterShape(t, g, m, true);\n    }\n    this.graphic = new p.WaterShape(t, g, m);\n    if (this.body) {\n      if (e.rotation !== 0) {\n        var v = n.get(i, s);\n        this.body.rotate(v, r["default"].TO_RAD * e.rotation);\n        v.dispose();\n      }\n      if (this.graphic) {\n        this.graphic.x = this.body.position.x;\n        this.graphic.y = this.body.position.y;\n        if (this.graphic instanceof a.LandscapeShape) {\n          this.graphic.rotation = r["default"].TO_DEG * this.body.rotation;\n        } else {\n          this.graphic.rotation = this.body.rotation;\n        }\n      }\n      this.body.space = d.MaxGameCore.instance.getSpace();\n      for (var b = 0; b < this.body.shapes.length; b++) {\n        var x = this.body.shapes.at(b);\n        x.fluidProperties.viscosity = t.params.viscosity;\n        x.fluidProperties.density = t.params.density;\n        x.fluidEnabled = true;\n      }\n    }\n  };\n  e.prototype.release = function () {\n    if (this.bgShape) {\n      this.bgShape.dispose();\n    }\n    this.bgShape = null;\n    t.prototype.release.call(this);\n  };\n  e.prototype.update = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (this.active) {\n      this.graphic.update(t);\n    }\n  };\n  e.prototype.activate = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    this.active = t;\n  };\n  e.prototype.isActive = function () {\n    return false;\n  };\n  return e;\n}(a.GameObject);\nexports.WaterObject = f;\n\n//# sourceURL=webpack://motox3m/./src/objects/world/WaterObject.js?')},"./src/physics/BodyEffector.js":(__unused_webpack_module,exports)=>{eval("// BodyEffector - Physics body velocity effect manager\n// Handles smooth velocity transitions for physics bodies\n\n// Key features:\n// - Velocity effect application\n// - Smooth transitions\n// - Reset capability\n// - Resource cleanup\n// - Simple API\n\n// Properties:\n// - body: Physics body reference\n// - userData:\n//   * effectVelX: Target X velocity\n//   * effectVelY: Target Y velocity\n\n// Methods:\n// - update(delta): Apply velocity effects\n//   * Smoothly transitions to target velocity\n//   * Uses time-based interpolation\n//   * Clears effect after application\n//\n// - reset(): Clear velocity effects\n//   * Resets target velocities to 0\n//\n// - dispose(): Cleanup resources\n//   * Removes body reference\n\n// Usage example:\n// const effector = new BodyEffector(physicsBody);\n// \n// // Set target velocity\n// body.userData.effectVelX = 100;\n// body.userData.effectVelY = 50;\n// \n// // In update loop:\n// effector.update(deltaTime);\n//exports.__esModule = true;\nvar s = function () {\n  function t(t) {\n    this.body = t;\n    this.reset();\n  }\n  t.prototype.update = function (t) {\n    var e = this.body.userData.effectVelX;\n    var i = this.body.userData.effectVelY;\n    if (e !== 0 || i !== 0) {\n      var s = t * 2 * (e - this.body.velocity.x);\n      var n = t * 2 * (i - this.body.velocity.y);\n      this.body.velocity.x += s;\n      this.body.velocity.y += n;\n      this.body.userData.effectVelX = 0;\n      this.body.userData.effectVelY = 0;\n    }\n  };\n  t.prototype.reset = function () {\n    this.body.userData.effectVelX = 0;\n    this.body.userData.effectVelY = 0;\n  };\n  t.prototype.dispose = function () {\n    this.body = null;\n  };\n  return t;\n}();\nexports.BodyEffector = s;\n\n//# sourceURL=webpack://motox3m/./src/physics/BodyEffector.js?")},"./src/physics/BoostEffector.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('// BoostEffector - Physics-based boost/thrust effect manager\n// Handles directional force application with visual feedback\n\n// Key features:\n// - Timed force application\n// - Visual effect management\n// - Force accumulation\n// - Angular velocity damping\n// - Center of mass calculations\n\n// Properties:\n// - timeLeft: Remaining boost duration\n// - force: Current force magnitude\n// - body: Physics body reference\n// - compound: Compound body reference\n// - anim: Visual effect reference\n\n// Methods:\n// - add(duration, magnitude): Add boost effect\n//   * Accumulates duration\n//   * Takes maximum force\n//   * Shows visual effect\n//\n// - update(delta, allowSpin): Apply boost\n//   * Applies directional force\n//   * Optional spin damping\n//   * Updates duration\n//   * Manages visual effect\n//\n// - restart()/dispose(): State management\n\n// Usage example:\n// const boost = new BoostEffector(physicsBody);\n// boost.anim = boostVisual;\n// \n// // Add boost:\n// boost.add(1.0, 1000); // 1 second, 1000 force\n// \n// // In update loop:\n// boost.update(deltaTime, false);\n//exports.__esModule = true;\n\n/**\r\n * BoostEffector - Physics-based boost/thrust effect manager\r\n * Handles directional force application with visual feedback.\r\n *\r\n * Key features:\r\n * - Timed force application\r\n * - Visual effect management\r\n * - Force accumulation\r\n * - Angular velocity damping\r\n * - Center of mass calculations\r\n */\nvar s = nape.geom.Vec2;\nvar n = __webpack_require__(/*! @/src/controllers/SoundController.js */ "./src/controllers/SoundController.js");\nvar o = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar a = function () {\n  function t(t) {\n    this.timeLeft = 0;\n    this.force = 0;\n    this.snd = null;\n    this.body = t;\n    this.compound = t.compound;\n  }\n  t.prototype.add = function (t, e) {\n    var i = this.timeLeft <= 0;\n    console.log("addBoost", i, t, e);\n    if (i) {\n      this.force = e;\n      this.timeLeft = t;\n      this.anim.visible = true;\n    } else {\n      this.force = Math.max(this.force, e);\n      this.timeLeft += t;\n    }\n    if (this.snd == null) {\n      this.snd = n["default"].getInstance().play(o.Sounds.Boost);\n    } else {\n      if (this.snd.isPlaying) {\n        this.snd.stop();\n      }\n      this.snd.play();\n    }\n    return i;\n  };\n  t.prototype.update = function (t, e) {\n    if (this.timeLeft > 0) {\n      var i = this.compound.COM();\n      var n = this.body.rotation;\n      var o = s.get(t * this.force * Math.cos(n), t * this.force * Math.sin(n));\n      this.body.applyImpulse(o, i);\n      o.dispose();\n      i.dispose();\n      if (!e) {\n        this.body.angularVel *= 0.8;\n      }\n      this.timeLeft -= t;\n      if (this.timeLeft <= 0) {\n        this.anim.visible = false;\n        if (this.snd != null) {\n          this.snd.stop();\n        }\n        return true;\n      }\n    }\n    return false;\n  };\n  t.prototype.dispose = function () {\n    this.anim = null;\n    this.body = null;\n    this.compound = null;\n  };\n  t.prototype.restart = function () {\n    this.anim.visible = false;\n    this.timeLeft = 0;\n    this.force = 0;\n  };\n  return t;\n}();\nexports.BoostEffector = a;\n\n//# sourceURL=webpack://motox3m/./src/physics/BoostEffector.js?')},"./src/physics/CarParams.js":(__unused_webpack_module,exports)=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\n// CarParams - Configuration class for vehicle physics parameters\n// Manages all physical properties for vehicle simulation\n// Key features:\n// - Complete vehicle physics configuration\n// - Body dimensions and properties\n// - Wheel physics parameters\n// - Suspension system settings\n// - Performance characteristics\n// Properties:\n// Body Configuration:\n// - bodyW/H: Body dimensions\n// - bodyDensity: Mass density\n// - bodyMassType: Mass distribution type\n// - driverDensity/Dx/Dy/W/H: Driver physics properties\n// Wheel Configuration:\n// - wheelBack/FrontR: Wheel radii\n// - wheelBack/FrontDensity: Wheel mass\n// - wheelBack/FrontFriction: Tire friction\n// - wheelBack/FrontDx: Wheel positions\n// Suspension:\n// - axis[Back/Front][Y/Len/Angle]: Axle properties\n// - damper[Back/Front][Y/Len/Freq/Damp]: Suspension properties\n// Performance:\n// - maxSpeed: Maximum vehicle speed\n// - torque/maxTorque: Engine power\n// - flipTorque: Flip control power\n// - boostForce: Boost power\n// - Various upgrade percentages and counts\n// Methods:\n// - setData/setData2: Load parameters\n// - getData: Export parameters\n// - cloneWheel: Copy wheel settings\n//exports.__esModule = true; Physics Parameters\n/**\r\n * CarParams - Configuration class for vehicle physics parameters.\r\n * Manages all physical properties for vehicle simulation.\r\n *\r\n * Key features:\r\n * - Complete vehicle physics configuration\r\n * - Body dimensions and properties\r\n * - Wheel physics parameters\r\n * - Suspension system settings\r\n * - Performance characteristics\r\n */\nvar CarParams = /*#__PURE__*/function () {\n  function CarParams() {\n    _classCallCheck(this, CarParams);\n    // Body Configuration\n    this.bodyW = 64; // Body width\n    this.bodyH = 32; // Body height\n    this.bodyDensity = 1; // Mass density\n    this.bodyMassType = 0; // Mass distribution type\n\n    // Driver physics properties\n    this.driverDensity = 0;\n    this.driverDx = 32;\n    this.driverDy = 0;\n    this.driverW = 64;\n    this.driverH = 64;\n\n    // Wheel Configuration\n    this.wheelBackR = 16; // Back wheel radius\n    this.wheelBackDx = 32; // Back wheel position\n    this.wheelBackDensity = 1; // Back wheel mass\n    this.wheelBackFriction = 2; // Back wheel friction\n\n    this.wheelFrontR = 16; // Front wheel radius\n    this.wheelFrontDx = 32; // Front wheel position\n    this.wheelFrontDensity = 1; // Front wheel mass\n    this.wheelFrontFriction = 2; // Front wheel friction\n\n    // Suspension\n    this.axisBackY = 2; // Back axle properties\n    this.axisBackLen = 30;\n    //   this.axisBackAngle = Math.PI * 0.5;\n    this.axisBackAngle = 1.5707963267948966;\n    this.damperBackY = 0;\n    this.damperBackLen = 32;\n    this.damperBackFreq = 10;\n    this.damperBackDamp = 1;\n    this.axisFrontY = 0; // Front axle properties\n    this.axisFrontLen = 32;\n    //   this.axisFrontAngle = Math.PI * 0.5;\n    this.axisFrontAngle = 1.5707963267948966;\n    this.damperFrontY = 2;\n    this.damperFrontLen = 30;\n    this.damperFrontFreq = 10;\n    this.damperFrontDamp = 1;\n    // Performance\n    this.maxSpeed = 1000; // Maximum vehicle speed\n    this.torque = 1000; // Engine power\n    this.maxTorque = 2000; // Maximum torque\n    this.flipTorque = 1000; // Flip control power\n    this.maxFlipSpeed = 3; // Maximum flip speed\n    this.boostForce = 1000; // Boost power\n\n    // Upgrade characteristics\n    this.skinId = 1; // Skin identifier\n    this.maxSpeedPct = 5; // Max speed percentage\n    this.torquePct = 5; // Torque percentage\n    this.wheelFrictionPct = 10; // Wheel friction percentage\n    this.wheelRadiusValue = 1; // Wheel radius value\n    this.boostValue = 1; // Boost value\n    this.handlingPct = 5; // Handling percentage\n\n    // Engine and wheel counts\n    this.engineCount = 3;\n    this.handlingCount = 3;\n    this.boostCount = 3;\n    this.wheelsCount = 3;\n    this.wheels = 0; // Total wheels\n    this.colorId = 1; // Color identifier\n\n    this.obj = null; // Object to hold parameter data\n  }\n\n  /**\r\n   * Load parameters into the CarParams instance.\r\n   * @param {Object} data - The data to load.\r\n   */\n  return _createClass(CarParams, [{\n    key: "setData",\n    value: function setData(data) {\n      this.setData2(data);\n      this.getData();\n    }\n\n    /**\r\n     * Load parameters into the CarParams instance (internal method).\r\n     * @param {Object} data - The data to load.\r\n     */\n  }, {\n    key: "setData2",\n    value: function setData2(data) {\n      this.bodyW = data.bodyW;\n      this.bodyH = data.bodyH;\n      this.bodyDensity = data.bodyDensity;\n      this.bodyMassType = data.bodyMassType;\n      this.wheelBackDx = data.wheelBackDx;\n      this.wheelFrontDx = data.wheelFrontDx;\n      this.driverDensity = data.driverDensity;\n      this.driverDx = data.driverDx;\n      this.driverDy = data.driverDy;\n      this.driverW = data.driverW;\n      this.driverH = data.driverH;\n      this.wheelBackR = data.wheelBackR;\n      this.wheelBackDensity = data.wheelBackDensity;\n      this.wheelBackFriction = data.wheelBackFriction;\n      this.axisBackAngle = data.axisBackAngle;\n      this.axisBackY = data.axisBackY;\n      this.axisBackLen = data.axisBackLen;\n      this.damperBackY = data.damperBackY;\n      this.damperBackLen = data.damperBackLen;\n      this.damperBackFreq = data.damperBackFreq;\n      this.damperBackDamp = data.damperBackDamp;\n      this.wheelFrontR = data.wheelFrontR;\n      this.wheelFrontDensity = data.wheelFrontDensity;\n      this.wheelFrontFriction = data.wheelFrontFriction;\n      this.axisFrontAngle = data.axisFrontAngle;\n      this.axisFrontY = data.axisFrontY;\n      this.axisFrontLen = data.axisFrontLen;\n      this.damperFrontY = data.damperFrontY;\n      this.damperFrontLen = data.damperFrontLen;\n      this.damperFrontFreq = data.damperFrontFreq;\n      this.damperFrontDamp = data.damperFrontDamp;\n      this.wd = data.wd;\n      this.maxSpeed = data.maxSpeed;\n      this.torque = data.torque;\n      this.maxTorque = data.maxTorque;\n      this.flipTorque = data.flipTorque;\n      this.maxFlipSpeed = data.maxFlipSpeed;\n      this.boostForce = data.boostForce;\n      this.skinId = data.skinId;\n      this.maxSpeedPct = data.maxSpeedPct;\n      this.torquePct = data.torquePct;\n      this.wheelFrictionPct = data.wheelFrictionPct;\n      this.wheelRadiusValue = data.wheelRadiusValue;\n      this.boostValue = data.boostValue;\n      this.handlingPct = data.handlingPct;\n      this.engineCount = data.engineCount;\n      this.handlingCount = data.handlingCount;\n      this.boostCount = data.boostCount;\n      this.wheelsCount = data.wheelsCount;\n      this.wheels = data.wheels;\n    }\n\n    /**\r\n     * Export parameters from the CarParams instance.\r\n     * @returns {Object} - The exported parameters.\r\n     */\n  }, {\n    key: "getData",\n    value: function getData() {\n      if (this.obj === null) {\n        this.obj = {};\n      }\n      this.obj.bodyW = this.bodyW;\n      this.obj.bodyH = this.bodyH;\n      this.obj.bodyDensity = this.bodyDensity;\n      this.obj.bodyMassType = this.bodyMassType;\n      this.obj.wheelBackDx = this.wheelBackDx;\n      this.obj.wheelFrontDx = this.wheelFrontDx;\n      this.obj.driverDensity = this.driverDensity;\n      this.obj.driverDx = this.driverDx;\n      this.obj.driverDy = this.driverDy;\n      this.obj.driverW = this.driverW;\n      this.obj.driverH = this.driverH;\n      this.obj.wheelBackR = this.wheelBackR;\n      this.obj.wheelBackDensity = this.wheelBackDensity;\n      this.obj.wheelBackFriction = this.wheelBackFriction;\n      this.obj.axisBackAngle = this.axisBackAngle;\n      this.obj.axisBackY = this.axisBackY;\n      this.obj.axisBackLen = this.axisBackLen;\n      this.obj.damperBackY = this.damperBackY;\n      this.obj.damperBackLen = this.damperBackLen;\n      this.obj.damperBackFreq = this.damperBackFreq;\n      this.obj.damperBackDamp = this.damperBackDamp;\n      this.obj.wheelFrontR = this.wheelFrontR;\n      this.obj.wheelFrontDensity = this.wheelFrontDensity;\n      this.obj.wheelFrontFriction = this.wheelFrontFriction;\n      this.obj.axisFrontAngle = this.axisFrontAngle;\n      this.obj.axisFrontY = this.axisFrontY;\n      this.obj.axisFrontLen = this.axisFrontLen;\n      this.obj.damperFrontY = this.damperFrontY;\n      this.obj.damperFrontLen = this.damperFrontLen;\n      this.obj.damperFrontFreq = this.damperFrontFreq;\n      this.obj.damperFrontDamp = this.damperFrontDamp;\n      this.obj.wd = this.wd;\n      this.obj.maxSpeed = this.maxSpeed;\n      this.obj.torque = this.torque;\n      this.obj.maxTorque = this.maxTorque;\n      this.obj.flipTorque = this.flipTorque;\n      this.obj.maxFlipSpeed = this.maxFlipSpeed;\n      this.obj.boostForce = this.boostForce;\n      this.obj.skinId = this.skinId;\n      this.obj.maxSpeedPct = this.maxSpeedPct;\n      this.obj.torquePct = this.torquePct;\n      this.obj.wheelFrictionPct = this.wheelFrictionPct;\n      this.obj.wheelRadiusValue = this.wheelRadiusValue;\n      this.obj.boostValue = this.boostValue;\n      this.obj.handlingPct = this.handlingPct;\n      this.obj.engineCount = this.engineCount;\n      this.obj.handlingCount = this.handlingCount;\n      this.obj.boostCount = this.boostCount;\n      this.obj.wheelsCount = this.wheelsCount;\n      this.obj.wheels = this.wheels;\n      return this.obj;\n    }\n\n    /**\r\n     * Clone wheel settings.\r\n     * @param {boolean} cloneFront - Whether to clone front settings to back.\r\n     */\n  }, {\n    key: "cloneWheel",\n    value: function cloneWheel() {\n      var cloneFront = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (cloneFront) {\n        this.wheelFrontR = this.wheelBackR;\n        this.wheelFrontDensity = this.wheelBackDensity;\n        this.wheelFrontFriction = this.wheelBackFriction;\n        this.axisFrontY = this.axisBackY;\n        this.axisFrontLen = this.axisBackLen;\n        this.damperFrontY = this.damperBackY;\n        this.damperFrontLen = this.damperBackLen;\n        this.damperFrontFreq = this.damperBackFreq;\n        this.damperFrontDamp = this.damperBackDamp;\n      } else {\n        this.wheelBackR = this.wheelFrontR;\n        this.wheelBackDensity = this.wheelFrontDensity;\n        this.wheelBackFriction = this.wheelFrontFriction;\n        this.axisBackY = this.axisFrontY;\n        this.axisBackLen = this.axisFrontLen;\n        this.damperBackY = this.damperFrontY;\n        this.damperBackLen = this.damperFrontLen;\n        this.damperBackFreq = this.damperFrontFreq;\n        this.damperBackDamp = this.damperFrontDamp;\n      }\n    }\n  }]);\n}();\nexports.CarParams = CarParams;\n\n//# sourceURL=webpack://motox3m/./src/physics/CarParams.js?')},"./src/physics/DynamicBodyObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\nexports.__esModule = true;\nvar n = nape.phys.BodyType;\nvar o = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar a = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar r = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar h = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar l = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar c = __webpack_require__(/*! @/src/config/CbTypes.js */ "./src/config/CbTypes.js");\nvar u = __webpack_require__(/*! @/src/config/Materials.js */ "./src/config/Materials.js");\nvar d = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar p = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar f = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.activeOnStart = true;\n    return e;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.type = a.ObjectTypes.OBJECT;\n    if (t.params.id !== null) {\n      this.id = t.params.id;\n    }\n    this.safeId = t.params.safeId;\n    if (this.safeId <= -10) {\n      this.skipRevive = true;\n    }\n    var e = p.AssetsStorage.instance;\n    var i = t.className;\n    console.log("i", i);\n    var s = e.getByKey(i + "_data");\n    var d = t.params;\n    var f = d.x;\n    var y = d.y;\n    var g = t.params.rotation * h["default"].TO_RAD;\n    this.activateGraphic = d.ag == 1;\n    this.showGraphicOnStart = d.sgos == 1;\n    var m = false;\n    var v;\n    v = d.plr == 1 ? r.Filters.PLAYER_ONLY : r.Filters.GROUND;\n    if (s == null) {\n      if (i.indexOf("Ball") == 0) {\n        var b = parseFloat(i.substring(4, i.length - 1)) * 0.5 * d.scaleX;\n        this.body = o.NapeUtil.createCircleBody(n.DYNAMIC, v, false, b, f, y, g, c.CbTypes.GROUND, u.Materials.DEFAULT);\n      } else if (i.indexOf("SpikeBall") == 0) {\n        var b = parseFloat(i.substring(9, i.length - 1)) * 0.5 * d.scaleX;\n        this.body = o.NapeUtil.createCircleBody(n.DYNAMIC, v, false, b, f, y, g, c.CbTypes.SPIKES, u.Materials.DEFAULT);\n      }\n      m = d.btg == 1;\n    } else if (s.shape === "reg") {\n      this.body = o.NapeUtil.createRegularBody(n.DYNAMIC, v, false, s.w, s.h, 8, f, y, g, null, u.Materials.DEFAULT);\n    } else if (s.shape === "rect") {\n      this.body = o.NapeUtil.createRectBodyWH(n.DYNAMIC, v, false, s.w, s.h, f, y, g, null, u.Materials.DEFAULT);\n    } else if (s.shape === "circ") {\n      this.body = o.NapeUtil.createCircleBody(n.DYNAMIC, v, false, s.w * 0.5, f, y, g, null, u.Materials.DEFAULT);\n    }\n    var x = true;\n    var _;\n    if (i.indexOf("Removed") >= 0) {\n      this.graphic = l.GraphicUtil.createImageWithObj(d, "RemovedBlue");\n      this.graphic.scaleY = s.h / this.graphic.height;\n    } else {\n      this.graphic = l.GraphicUtil.createImageWithObj(d, i);\n    }\n    this.type = m ? a.ObjectTypes.LANDSCAPE_BACK : a.ObjectTypes.LANDSCAPE;\n    o.NapeUtil.setupStartPos(this.body);\n    this.body.userData.graphicEx = this.graphic;\n    if (i.indexOf("Barrel") >= 0) {\n      this.body.cbTypes.add(c.CbTypes.BARREL);\n    }\n    if (i.indexOf("Removed") === 0) {\n      this.body.cbTypes.add(c.CbTypes.WOOD);\n    }\n    this.body.userData.isGround = true;\n    this.body.userData.isPT = true;\n    if (t.params.active === false) {\n      this.activeOnStart = false;\n    } else {\n      this.activeOnStart = true;\n    }\n  };\n  e.prototype.restart = function () {\n    o.NapeUtil.stopBody(this.body);\n    o.NapeUtil.resetStartPos(this.body);\n    if (this.showGraphicOnStart) {\n      this.isInitial = true;\n    }\n    this.graphic.x = this.body.position.x;\n    this.graphic.y = this.body.position.y;\n    this.graphic.rotation = this.body.rotation;\n    this.activate(this.activeOnStart);\n  };\n  e.prototype.review = function () {\n    if (!this.skipRevive) {\n      this.restart();\n    }\n  };\n  e.prototype.activate = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    var e;\n    var i;\n    if (t) {\n      this.body.space = d.MaxGameCore.instance.getSpace();\n      e = this.body.constraints.iterator();\n      while (e.hasNext()) {\n        i = e.next();\n        i.active = true;\n      }\n      if (this.activateGraphic) {\n        this.graphic.visible = true;\n      }\n    } else {\n      for (e = this.body.constraints.iterator(); e.hasNext();) {\n        i = e.next();\n        i.active = false;\n        i.userData.skipActive = true;\n      }\n      this.body.space = null;\n      if (this.activateGraphic) {\n        if (this.isInitial && this.showGraphicOnStart) {\n          this.graphic.visible = true;\n        } else {\n          this.graphic.visible = false;\n        }\n      }\n    }\n    this.isInitial = false;\n  };\n  e.prototype.isActive = function () {\n    return this.activeOnStart;\n  };\n  e.CANDIES = ["PlankCandy0", "PlankCandy1", "PlankCandy2", "PlankCandy3"];\n  e.CANDIES_COUNT = 4;\n  return e;\n}(o.GameObject);\nexports.DynamicBodyObject = f;\n\n//# sourceURL=webpack://motox3m/./src/physics/DynamicBodyObject.js?')},"./src/physics/GamePhysics.js":(__unused_webpack_module,exports)=>{eval("// GamePhysics - Abstract base class for physics system implementations\n// Defines the interface that all physics systems must implement\n\n// Key features:\n// - Abstract class pattern\n// - Defines core physics methods\n// - Base for different physics implementations\n// - Standardized interface\n// - Minimal implementation requirements\n\n// Interface Methods:\n// - add(object): Add physics object to system\n//   * @param object: Physics object to add\n//   * Used for adding bodies, constraints, etc.\n//\n// - release(): Clean up physics resources\n//   * Called when shutting down physics\n//   * Should clean up all physics objects\n//\n// - update(delta): Update physics simulation\n//   * @param delta: Time since last update\n//   * Main physics step method\n//\n// - start(): Initialize physics system\n//   * Called when starting physics\n//   * Set up initial state\n\n// Usage example:\n// class MyPhysics extends GamePhysics {\n//   add(obj) {\n//     // Add to physics world\n//   }\n//   update(delta) {\n//     // Update physics simulation\n//   }\n//   // etc...\n// }\n//exports.__esModule = true;\n/**\r\n * GamePhysics - Abstract base class for physics system implementations\r\n * Defines the interface that all physics systems must implement.\r\n * \r\n * Key features:\r\n * - Abstract class pattern\r\n * - Defines core physics methods\r\n * - Base for different physics implementations\r\n * - Standardized interface\r\n * - Minimal implementation requirements\r\n */\nvar GamePhysics = function () {\n  function GamePhysicsBase() {}\n\n  /**\r\n   * Add a physics object to the system\r\n   * @param {Object} physicsObject - Physics object to add (bodies, constraints, etc.)\r\n   * @abstract\r\n   */\n  GamePhysicsBase.prototype.add = function (physicsObject) {};\n\n  /**\r\n   * Clean up physics resources\r\n   * Called when shutting down physics system\r\n   * Should clean up all physics objects\r\n   * @abstract\r\n   */\n  GamePhysicsBase.prototype.release = function () {};\n\n  /**\r\n   * Update physics simulation\r\n   * @param {number} deltaTime - Time elapsed since last update\r\n   * @abstract\r\n   */\n  GamePhysicsBase.prototype.update = function (deltaTime) {};\n\n  /**\r\n   * Initialize physics system\r\n   * Called when starting physics\r\n   * Set up initial state\r\n   * @abstract\r\n   */\n  GamePhysicsBase.prototype.start = function () {};\n  return GamePhysicsBase;\n}();\nexports.GamePhysics = GamePhysics;\n\n//# sourceURL=webpack://motox3m/./src/physics/GamePhysics.js?")},"./src/physics/GlassBlockPart.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\nexports.__esModule = true;\nvar n = nape.phys.BodyType;\nvar o = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar a = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar r = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar h = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nvar l = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar c = function (t) {\n  function e(e, i) {\n    var s = t.call(this) || this;\n    s.id = e;\n    s.parentKey = i;\n    return s;\n  }\n  s(e, t);\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.type = a.ObjectTypes.LANDSCAPE;\n    var e = l.AssetsStorage.instance;\n    var i = this.parentKey + this.id.toString();\n    this.graphic = r.GraphicUtil.createImage(0, 0, 0, i);\n    this.body = o.NapeUtil.createCircleBody(n.DYNAMIC, h.Filters.NOTHING, false, 4);\n    this.body.userData.graphicEx = this.graphic;\n  };\n  e.prototype.restart = function () {\n    this.killTweenLite();\n    this.body.space = null;\n    this.graphic.visible = false;\n  };\n  e.prototype.release = function () {\n    this.killTweenLite();\n    t.prototype.release.call(this);\n  };\n  e.prototype.activate = function (t, e, i) {\n    this.killTweenLite();\n    o.NapeUtil.stopBody(this.body);\n    this.tweenLite = r.GraphicUtil.game.add.tween(this);\n    this.tweenLite.to({\n      x: 100\n    }, 5000);\n    this.tweenLite.start();\n    this.tweenLite.onComplete.addOnce(this.deactivate, this, 0, this);\n    this.body.position = t;\n    this.body.rotation = e;\n    this.body.space = o.NapePhysics.space;\n    this.graphic.visible = true;\n  };\n  e.prototype.killTweenLite = function () {\n    if (this.tweenLite) {\n      this.tweenLite.onComplete.removeAll();\n      this.tweenLite = null;\n    }\n  };\n  e.prototype.deactivate = function (t) {\n    t.restart();\n  };\n  return e;\n}(o.GameObject);\nexports.GlassBlockPart = c;\n\n//# sourceURL=webpack://motox3m/./src/physics/GlassBlockPart.js?')},"./src/physics/MaxPhysics.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = nape.callbacks.CbEvent;\nvar o = nape.callbacks.CbType;\nvar a = nape.callbacks.CbTypeList;\nvar r = nape.callbacks.InteractionListener;\nvar h = nape.callbacks.InteractionType;\nvar l = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar c = __webpack_require__(/*! @/src/controllers/SoundController.js */ "./src/controllers/SoundController.js");\nvar u = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar d = __webpack_require__(/*! @/src/core/RaceCamera.js */ "./src/core/RaceCamera.js");\nvar p = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.hasListeners = false;\n    return e;\n  }\n  s(e, t);\n  e.prototype.start = function () {\n    t.prototype.start.call(this);\n    l.RacesData.data = new l.RaceData();\n    l.NapePhysics.space.gravity.setxy(0, l.RacesData.data.gravityY);\n    if (!this.hasListeners) {\n      this.setupListners();\n    }\n  };\n  e.prototype.setupListners = function () {\n    this.hasListeners = true;\n    var t;\n    t = new r(n.ONGOING, h.SENSOR, l.CbTypes.BODY_COLLIDER, l.CbTypes.GEYSER, this.onGeyser);\n    t.space = l.NapePhysics.space;\n    t = new r(n.ONGOING, h.SENSOR, l.CbTypes.DRIVER_PART, l.CbTypes.GEYSER, this.onGeyser);\n    t.space = l.NapePhysics.space;\n    t = new r(n.ONGOING, h.SENSOR, l.CbTypes.WHEEL, l.CbTypes.GEYSER, this.onGeyser);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.SENSOR, l.CbTypes.BODY_COLLIDER, l.CbTypes.BOOST, this.onBoost);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.SENSOR, l.CbTypes.DRIVER_PART, l.CbTypes.BOOST, this.onBoost);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.SENSOR, l.CbTypes.WHEEL, l.CbTypes.BOOST, this.onBoost);\n    t.space = l.NapePhysics.space;\n    var i = new a();\n    i.add(l.CbTypes.WHEEL);\n    i.add(l.CbTypes.BODY_COLLIDER);\n    t = new r(n.BEGIN, h.SENSOR, i, l.CbTypes.TOGGLE, e.onToggleSens);\n    t.space = l.NapePhysics.space;\n    t = new r(n.END, h.SENSOR, i, l.CbTypes.TOGGLE_OFF, e.onToggleSens);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.SENSOR, i, l.CbTypes.DESTOYED, this.onDestroyedSens);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.SENSOR, l.CbTypes.DRIVER, l.CbTypes.ZONE_FINISH, this.onFinish);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.SENSOR, l.CbTypes.DRIVER_PART, l.CbTypes.ZONE_FINISH, this.onFinish);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.SENSOR, l.CbTypes.DRIVER, l.CbTypes.SAFE_POINT, this.onCarSafePoint);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.SENSOR, l.CbTypes.DRIVER_PART, l.CbTypes.SAFE_POINT, this.onCarSafePoint);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.COLLISION, i, l.CbTypes.GLASS, this.onCarGlass);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.COLLISION, l.CbTypes.DRIVER, l.CbTypes.GLASS, this.onCarGlass);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.COLLISION, l.CbTypes.DRIVER_PART, l.CbTypes.GLASS, this.onCarGlass);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.COLLISION, l.CbTypes.DRIVER, l.CbTypes.GROUND, this.onDriverGround);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.COLLISION, i, l.CbTypes.SPIKES, this.onCarSpikes);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.COLLISION, l.CbTypes.DRIVER, l.CbTypes.SPIKES, this.onDriverSpikes);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.COLLISION, l.CbTypes.DRIVER_PART, l.CbTypes.SPIKES, this.onDriverSpikes);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.COLLISION, i, l.CbTypes.SAW, this.onCarSaw);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.COLLISION, l.CbTypes.DRIVER, l.CbTypes.SAW, this.onDriverSaw);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.COLLISION, l.CbTypes.DRIVER_PART, l.CbTypes.SAW, this.onDriverSaw);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.COLLISION, l.CbTypes.BARREL, o.ANY_BODY, this.onBarrelHit);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.COLLISION, l.CbTypes.WOOD, o.ANY_BODY, this.onWoodHit);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.FLUID, l.CbTypes.DRIVER, l.CbTypes.WATER, this.onWater);\n    t.space = l.NapePhysics.space;\n    t = new r(n.BEGIN, h.FLUID, l.CbTypes.DRIVER_PART, l.CbTypes.WATER, this.onWater);\n    t.space = l.NapePhysics.space;\n  };\n  e.prototype.onGeyser = function (t) {\n    var e = t.int1.castBody.userData;\n    var i = t.int2.castBody.userData.handler;\n    e.effectVelX = i.velX;\n    e.effectVelY = i.velY;\n  };\n  e.prototype.onWater = function (t) {\n    t.int1.castBody.userData.handler.processDriverGround();\n    t.int1.castBody.userData.handler.explode();\n  };\n  e.prototype.onWoodHit = function (t) {\n    if (t.arbiters.at(0).collisionArbiter.normalImpulse().length > 400) {\n      var e = t.int1.castBody.position;\n      if (d.RaceCamera.inCamera(e.x, e.y, 0)) {\n        c["default"].getInstance().play(u.Sounds.Wood);\n      }\n    }\n  };\n  e.prototype.onBarrelHit = function (t) {\n    if (t.arbiters.at(0).collisionArbiter.normalImpulse().length > 400) {\n      var e = t.int1.castBody.position;\n      if (d.RaceCamera.inCamera(e.x, e.y, 0)) {\n        c["default"].getInstance().play(Math.random() > 0.5 ? u.Sounds.Barrel1 : u.Sounds.Barrel2);\n      }\n    }\n  };\n  e.prototype.onDriverSaw = function (t) {\n    var e = t.int1.castBody.userData.handler;\n    if (e) {\n      e.processDriverSpikes();\n      e.processDriverGround();\n      e.explode();\n    }\n  };\n  e.prototype.onCarSaw = function (t) {\n    t.int1.castBody.userData.handler.processDriverGround();\n    t.int1.castBody.userData.handler.explode();\n  };\n  e.prototype.onCarSpikes = function (t) {\n    t.int1.castBody.userData.handler.processDriverGround();\n    t.int1.castBody.userData.handler.explode();\n  };\n  e.prototype.onDriverSpikes = function (t) {\n    // var e = t.int1.castBody.userData.handler;\n    // if (e) {\n    //   e.processDriverGround();\n    //   e.processDriverSpikes();\n    // }\n    // l.NapeUtil.stopBody(t.int1.castBody);\n    // t.int1.castBody.allowMovement = t.int1.castBody.allowRotation = false;\n    var e = t.int2.castBody;\n    var i = t.int1.castBody;\n    if (e.isStatic()) {\n      l.NapeUtil.stopBody(i);\n      i.allowMovement = i.allowRotation = false;\n    } else {\n      i.userData.driverPart.pinTo(e);\n    }\n    t.int1.castBody.userData.handler.processDriverSpikes();\n    t.int1.castBody.userData.handler.processDriverGround();\n  };\n  e.prototype.onDriverGround = function (t) {\n    t.int1.castBody.userData.handler.processDriverGround();\n    t.int1.castBody.userData.handler.explode();\n  };\n  e.prototype.onCarSafePoint = function (t) {\n    var e = t.int2.castBody;\n    var i = t.int1.castBody.userData.handler;\n    if (i && !i.dead) {\n      i.setReviewPos(e.position.x, e.position.y, e.userData.id);\n      var s = t.int2.castBody.userData.collideCallbackContext;\n      t.int2.castBody.userData.collideCallback(s);\n    }\n  };\n  e.prototype.onCarGlass = function (t) {\n    var e = t.int2.castBody.userData.collideCallbackContext;\n    t.int2.castBody.userData.collideCallback(t.arbiters.at(0).collisionArbiter.contacts.at(0).position, e);\n  };\n  e.prototype.onFinish = function (t) {\n    var e = t.int1.castBody.userData.handler;\n    if (e) {\n      e.processFinish(t.int1.castBody.userData.collideCallbackContext);\n    }\n  };\n  e.prototype.onDestroyedSens = function (t) {\n    var e = t.int2.castBody;\n    var i = t.int1.castBody;\n    var s = e.userData.collideCallback;\n    if (s(e.userData.collideCallbackContext)) {\n      s(i);\n    }\n  };\n  e.prototype.onBoost = function (t) {\n    var e = t.int2.castBody.userData;\n    if ((0, e.collideCallback)(e.collideCallbackContext)) {\n      console.log("boost", e.time, e.force);\n      t.int1.castBody.userData.handler.addBoost(e.time, e.force);\n    }\n  };\n  e.onToggleSens = function (t) {\n    if (t.event === n.BEGIN) {\n      var e = t.int2.castBody;\n      if (e.space === null) {\n        return;\n      }\n      var i = t.int1.castShape === null ? t.int1.castBody : t.int1.castShape.body;\n      var s = e.userData.collideCallback;\n      var o = e.userData.collideCallbackContext;\n      s(true, i.userData.handler.dead, o);\n    } else {\n      var s = t.int2.castBody.userData.collideCallback;\n      if (s) {\n        var o = t.int2.castBody.userData.collideCallbackContext;\n        s(false, false, o);\n      }\n    }\n  };\n  e.proccessZoneSens = function (t, e, i, s) {\n    if (s) {\n      t.userData[i] = false;\n    } else if (e.userData.cars === null || e.userData.cars[t.userData.skinId] === true) {\n      var n = e.userData.chance;\n      if (Math.random() < n) {\n        t.userData[i] = true;\n      }\n    }\n  };\n  return e;\n}(l.NapePhysics);\nexports.MaxPhysics = p;\n\n//# sourceURL=webpack://motox3m/./src/physics/MaxPhysics.js?')},"./src/physics/NapePhysics.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// NapePhysics - Concrete implementation of GamePhysics using Nape\n// Handles physics simulation and synchronization with graphics\n\n// Key features:\n// - Extends GamePhysics base class\n// - Uses Nape physics engine\n// - Manages physics space and bodies\n// - Syncs physics with graphics\n// - Handles compound bodies\n\n// Implementation details:\n// - Creates Nape physics space\n// - Double step physics (2x 0.5 delta) for stability\n// - Updates graphics positions from physics\n// - Handles both simple and compound bodies\n// - Proper cleanup of physics resources\n\n// Methods:\n// - start(): Initialize physics system\n// - update(delta): Step physics and sync graphics\n//   * Updates positions and rotations\n//   * Handles both graphic and graphicEx objects\n// - add(object): Add physics body to space\n// - release(): Clean up all physics bodies\n\n// Usage example:\n// const physics = new NapePhysics();\n// physics.start();\n// physics.add(somePhysicsObject);\n// \n// // In update loop:\n// physics.update(deltaTime);\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = nape.space.Space;\nvar o = __webpack_require__(/*! @/src/physics/GamePhysics.js */ "./src/physics/GamePhysics.js");\nvar a = __webpack_require__(/*! @/src/utils/PhysicsUtils.js */ "./src/utils/PhysicsUtils.js");\nvar r = function (t) {\n  function e() {\n    var i = t.call(this) || this;\n    e.space = new n();\n    return i;\n  }\n  s(e, t);\n  e.prototype.start = function () {};\n  e.prototype.update = function (t) {\n    e.space.step(t * 0.5);\n    e.space.step(t * 0.5);\n    for (var i = e.space.liveBodies.iterator(), s; i.hasNext();) {\n      var n = i.next();\n      var o = n.userData;\n      if (o.graphic) {\n        s = o.graphic;\n        s.x = n.position.x;\n        s.y = n.position.y;\n        s.rotation = n.rotation % (Math.PI * 2);\n      } else if (o.graphicEx) {\n        s = o.graphicEx;\n        s.x = n.position.x;\n        s.y = n.position.y;\n        s.rotation = n.rotation % (Math.PI * 2);\n      }\n    }\n  };\n  e.prototype.add = function (t) {\n    if (t.body.compound !== null) {\n      t.body.compound.space = e.space;\n    } else {\n      t.body.space = e.space;\n    }\n  };\n  e.prototype.release = function () {\n    for (t.prototype.release.call(this); !e.space.bodies.empty();) {\n      a.NapeUtil.disposeBody(e.space.bodies.at(0));\n    }\n  };\n  return e;\n}(o.GamePhysics);\nexports.NapePhysics = r;\n\n//# sourceURL=webpack://motox3m/./src/physics/NapePhysics.js?')},"./src/physics/PartObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = nape.geom.Vec2;\nvar o = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar a = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar r = __webpack_require__(/*! @/src/utils/PhysicsUtils.js */ "./src/utils/PhysicsUtils.js");\nvar h = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.type = o.ObjectTypes.CAR_PART;\n    return e;\n  }\n  s(e, t);\n  e.prototype.restart = function () {\n    this.timer = 0;\n    this.hide();\n  };\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.space = this.body.space;\n    this.localPos = t;\n    this.body.userData.graphicEx = this.graphic;\n    this.restart();\n  };\n  e.prototype.put = function (t) {\n    var i = t.localPointToWorld(this.localPos, false);\n    this.body.position.set(i);\n    i.dispose();\n    this.body.rotation = t.rotation % (Math.PI * 2);\n    var s = Math.PI * -0.25 - Math.PI * 0.5 * Math.random();\n    if (this.localPos.x > 0) {\n      s += Math.PI * 0.25;\n    } else {\n      s -= Math.PI * 0.25;\n    }\n    var o = 250;\n    var a = n.fromPolar(250, s);\n    a.addeq(t.velocity);\n    this.body.velocity.set(a);\n    a.dispose();\n    this.body.angularVel = Math.random() * 2 - 1;\n    this.body.space = this.space;\n    this.graphic.visible = true;\n    this.graphic.position.set(this.body.position.x, this.body.position.y);\n    this.graphic.rotation = this.body.rotation;\n    this.timer = e.LIFE_TIME;\n  };\n  e.prototype.hide = function () {\n    this.body.space = null;\n    this.graphic.visible = false;\n  };\n  e.prototype.release = function () {\n    this.localPos = null;\n    this.body.space = null;\n    this.space = null;\n    r.NapeUtil.disposeBody(this.body);\n    this.body = null;\n  };\n  e.prototype.update = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (this.timer > 0) {\n      this.timer -= t;\n      if (this.timer <= 0) {\n        if (a.RaceCamera.inCamera(this.graphic.x, this.graphic.y, 32)) {\n          this.timer = e.LIFE_TIME;\n        } else {\n          this.hide();\n        }\n      }\n    }\n  };\n  e.LIFE_TIME = 2;\n  return e;\n}(a.GameObject);\nexports.PartObject = h;\n\n//# sourceURL=webpack://motox3m/./src/physics/PartObject.js?')},"./src/physics/PhysicsEngine.js":module=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nvar s;\nvar s;\n(function (e) {\n  var i;\n  module.exports = e();\n})(function () {\n  var t;\n  var e;\n  var i;\n  return function t(e, i, n) {\n    function o(r, h) {\n      if (!i[r]) {\n        if (!e[r]) {\n          var l = typeof s == "function" && s;\n          if (!h && l) {\n            return s(r, true);\n          }\n          if (a) {\n            return a(r, true);\n          }\n          throw new Error("Cannot find module \'" + r + "\'");\n        }\n        var c = i[r] = {\n          exports: {}\n        };\n        e[r][0].call(c.exports, function (t) {\n          var i = e[r][1][t];\n          return o(i || t);\n        }, c, c.exports, t, e, i, n);\n      }\n      return i[r].exports;\n    }\n    var a = typeof s == "function" && s;\n    for (var r = 0; r < n.length; r++) {\n      o(n[r]);\n    }\n    return o;\n  }({\n    1: [function (t, e, i) {\n      function s() {}\n      var n = t("./Scalar");\n      e.exports = s;\n      s.lineInt = function (t, e, i) {\n        i = i || 0;\n        var s = [0, 0];\n        var o;\n        var a;\n        var r;\n        var h;\n        var l;\n        var c;\n        var u;\n        o = t[1][1] - t[0][1];\n        a = t[0][0] - t[1][0];\n        r = o * t[0][0] + a * t[0][1];\n        h = e[1][1] - e[0][1];\n        l = e[0][0] - e[1][0];\n        c = h * e[0][0] + l * e[0][1];\n        u = o * l - h * a;\n        if (!n.eq(u, 0, i)) {\n          s[0] = (l * r - a * c) / u;\n          s[1] = (o * c - h * r) / u;\n        }\n        return s;\n      };\n      s.segmentsIntersect = function (t, e, i, s) {\n        var n = e[0] - t[0];\n        var o = e[1] - t[1];\n        var a = s[0] - i[0];\n        var r = s[1] - i[1];\n        if (a * o - r * n == 0) {\n          return false;\n        }\n        var h = (n * (i[1] - t[1]) + o * (t[0] - i[0])) / (a * o - r * n);\n        var l = (a * (t[1] - i[1]) + r * (i[0] - t[0])) / (r * n - a * o);\n        return h >= 0 && h <= 1 && l >= 0 && l <= 1;\n      };\n    }, {\n      "./Scalar": 4\n    }],\n    2: [function (t, e, i) {\n      function s() {}\n      e.exports = s;\n      s.area = function (t, e, i) {\n        return (e[0] - t[0]) * (i[1] - t[1]) - (i[0] - t[0]) * (e[1] - t[1]);\n      };\n      s.left = function (t, e, i) {\n        return s.area(t, e, i) > 0;\n      };\n      s.leftOn = function (t, e, i) {\n        return s.area(t, e, i) >= 0;\n      };\n      s.right = function (t, e, i) {\n        return s.area(t, e, i) < 0;\n      };\n      s.rightOn = function (t, e, i) {\n        return s.area(t, e, i) <= 0;\n      };\n      var n = [];\n      var o = [];\n      s.collinear = function (t, e, i, a) {\n        if (a) {\n          var r = n;\n          var h = o;\n          r[0] = e[0] - t[0];\n          r[1] = e[1] - t[1];\n          h[0] = i[0] - e[0];\n          h[1] = i[1] - e[1];\n          var l = r[0] * h[0] + r[1] * h[1];\n          var c = Math.sqrt(r[0] * r[0] + r[1] * r[1]);\n          var u = Math.sqrt(h[0] * h[0] + h[1] * h[1]);\n          return Math.acos(l / (c * u)) < a;\n        }\n        return s.area(t, e, i) == 0;\n      };\n      s.sqdist = function (t, e) {\n        var i = e[0] - t[0];\n        var s = e[1] - t[1];\n        return i * i + s * s;\n      };\n    }, {}],\n    3: [function (t, e, i) {\n      function s() {\n        this.vertices = [];\n      }\n      function n(t, e, i, s, n) {\n        n = n || 0;\n        var o = e[1] - t[1];\n        var a = t[0] - e[0];\n        var h = o * t[0] + a * t[1];\n        var l = s[1] - i[1];\n        var c = i[0] - s[0];\n        var u = l * i[0] + c * i[1];\n        var d = o * c - l * a;\n        if (r.eq(d, 0, n)) {\n          return [0, 0];\n        } else {\n          return [(c * h - a * u) / d, (o * u - l * h) / d];\n        }\n      }\n      var o = t("./Line");\n      var a = t("./Point");\n      var r = t("./Scalar");\n      e.exports = s;\n      s.prototype.at = function (t) {\n        var e = this.vertices;\n        var i = e.length;\n        return e[t < 0 ? t % i + i : t % i];\n      };\n      s.prototype.first = function () {\n        return this.vertices[0];\n      };\n      s.prototype.last = function () {\n        return this.vertices[this.vertices.length - 1];\n      };\n      s.prototype.clear = function () {\n        this.vertices.length = 0;\n      };\n      s.prototype.append = function (t, e, i) {\n        if (e === undefined) {\n          throw new Error("From is not given!");\n        }\n        if (i === undefined) {\n          throw new Error("To is not given!");\n        }\n        if (i - 1 < e) {\n          throw new Error("lol1");\n        }\n        if (i > t.vertices.length) {\n          throw new Error("lol2");\n        }\n        if (e < 0) {\n          throw new Error("lol3");\n        }\n        for (var s = e; s < i; s++) {\n          this.vertices.push(t.vertices[s]);\n        }\n      };\n      s.prototype.makeCCW = function () {\n        var t = 0;\n        var e = this.vertices;\n        for (var i = 1; i < this.vertices.length; ++i) {\n          if (e[i][1] < e[t][1] || e[i][1] == e[t][1] && e[i][0] > e[t][0]) {\n            t = i;\n          }\n        }\n        if (!a.left(this.at(t - 1), this.at(t), this.at(t + 1))) {\n          this.reverse();\n        }\n      };\n      s.prototype.reverse = function () {\n        var t = [];\n        for (var e = 0, i = this.vertices.length; e !== i; e++) {\n          t.push(this.vertices.pop());\n        }\n        this.vertices = t;\n      };\n      s.prototype.isReflex = function (t) {\n        return a.right(this.at(t - 1), this.at(t), this.at(t + 1));\n      };\n      var h = [];\n      var l = [];\n      s.prototype.canSee = function (t, e) {\n        var i;\n        var s;\n        var n = h;\n        var r = l;\n        if (a.leftOn(this.at(t + 1), this.at(t), this.at(e)) && a.rightOn(this.at(t - 1), this.at(t), this.at(e))) {\n          return false;\n        }\n        s = a.sqdist(this.at(t), this.at(e));\n        for (var c = 0; c !== this.vertices.length; ++c) {\n          if ((c + 1) % this.vertices.length !== t && c !== t && a.leftOn(this.at(t), this.at(e), this.at(c + 1)) && a.rightOn(this.at(t), this.at(e), this.at(c)) && (n[0] = this.at(t), n[1] = this.at(e), r[0] = this.at(c), r[1] = this.at(c + 1), i = o.lineInt(n, r), a.sqdist(this.at(t), i) < s)) {\n            return false;\n          }\n        }\n        return true;\n      };\n      s.prototype.copy = function (t, e, i) {\n        var n = i || new s();\n        n.clear();\n        if (t < e) {\n          for (var o = t; o <= e; o++) {\n            n.vertices.push(this.vertices[o]);\n          }\n        } else {\n          for (var o = 0; o <= e; o++) {\n            n.vertices.push(this.vertices[o]);\n          }\n          for (var o = t; o < this.vertices.length; o++) {\n            n.vertices.push(this.vertices[o]);\n          }\n        }\n        return n;\n      };\n      s.prototype.getCutEdges = function () {\n        var t = [];\n        var e = [];\n        var i = [];\n        var n = new s();\n        var o = Number.MAX_VALUE;\n        for (var a = 0; a < this.vertices.length; ++a) {\n          if (this.isReflex(a)) {\n            for (var r = 0; r < this.vertices.length; ++r) {\n              if (this.canSee(a, r)) {\n                e = this.copy(a, r, n).getCutEdges();\n                i = this.copy(r, a, n).getCutEdges();\n                for (var h = 0; h < i.length; h++) {\n                  e.push(i[h]);\n                }\n                if (e.length < o) {\n                  t = e;\n                  o = e.length;\n                  t.push([this.at(a), this.at(r)]);\n                }\n              }\n            }\n          }\n        }\n        return t;\n      };\n      s.prototype.decomp = function () {\n        var t = this.getCutEdges();\n        if (t.length > 0) {\n          return this.slice(t);\n        } else {\n          return [this];\n        }\n      };\n      s.prototype.slice = function (t) {\n        if (t.length == 0) {\n          return [this];\n        }\n        if (t instanceof Array && t.length && t[0] instanceof Array && t[0].length == 2 && t[0][0] instanceof Array) {\n          var e = [this];\n          for (var i = 0; i < t.length; i++) {\n            var s = t[i];\n            for (var n = 0; n < e.length; n++) {\n              var o = e[n];\n              var a = o.slice(s);\n              if (a) {\n                e.splice(n, 1);\n                e.push(a[0], a[1]);\n                break;\n              }\n            }\n          }\n          return e;\n        }\n        var s = t;\n        var i = this.vertices.indexOf(s[0]);\n        var n = this.vertices.indexOf(s[1]);\n        return i != -1 && n != -1 && [this.copy(i, n), this.copy(n, i)];\n      };\n      s.prototype.isSimple = function () {\n        for (var t = this.vertices, e = 0; e < t.length - 1; e++) {\n          for (var i = 0; i < e - 1; i++) {\n            if (o.segmentsIntersect(t[e], t[e + 1], t[i], t[i + 1])) {\n              return false;\n            }\n          }\n        }\n        for (var e = 1; e < t.length - 2; e++) {\n          if (o.segmentsIntersect(t[0], t[t.length - 1], t[e], t[e + 1])) {\n            return false;\n          }\n        }\n        return true;\n      };\n      s.prototype.quickDecomp = function (t, e, i, o, r, h) {\n        r = r || 100;\n        h = h || 0;\n        o = o || 25;\n        t = t !== undefined ? t : [];\n        e = e || [];\n        i = i || [];\n        var l = [0, 0];\n        var c = [0, 0];\n        var u = [0, 0];\n        var d = 0;\n        var p = 0;\n        var f = 0;\n        var y = 0;\n        var g = 0;\n        var m = 0;\n        var v = 0;\n        var b = new s();\n        var x = new s();\n        var _ = this;\n        var w = this.vertices;\n        if (w.length < 3) {\n          return t;\n        }\n        if (++h > r) {\n          return t;\n        }\n        for (var C = 0; C < this.vertices.length; ++C) {\n          if (_.isReflex(C)) {\n            e.push(_.vertices[C]);\n            d = p = Number.MAX_VALUE;\n            for (var P = 0; P < this.vertices.length; ++P) {\n              if (a.left(_.at(C - 1), _.at(C), _.at(P)) && a.rightOn(_.at(C - 1), _.at(C), _.at(P - 1))) {\n                u = n(_.at(C - 1), _.at(C), _.at(P), _.at(P - 1));\n                if (a.right(_.at(C + 1), _.at(C), u) && (f = a.sqdist(_.vertices[C], u)) < p) {\n                  p = f;\n                  c = u;\n                  m = P;\n                }\n              }\n              if (a.left(_.at(C + 1), _.at(C), _.at(P + 1)) && a.rightOn(_.at(C + 1), _.at(C), _.at(P))) {\n                u = n(_.at(C + 1), _.at(C), _.at(P), _.at(P + 1));\n                if (a.left(_.at(C - 1), _.at(C), u) && (f = a.sqdist(_.vertices[C], u)) < d) {\n                  d = f;\n                  l = u;\n                  g = P;\n                }\n              }\n            }\n            if (m == (g + 1) % this.vertices.length) {\n              u[0] = (c[0] + l[0]) / 2;\n              u[1] = (c[1] + l[1]) / 2;\n              i.push(u);\n              if (C < g) {\n                b.append(_, C, g + 1);\n                b.vertices.push(u);\n                x.vertices.push(u);\n                if (m != 0) {\n                  x.append(_, m, _.vertices.length);\n                }\n                x.append(_, 0, C + 1);\n              } else {\n                if (C != 0) {\n                  b.append(_, C, _.vertices.length);\n                }\n                b.append(_, 0, g + 1);\n                b.vertices.push(u);\n                x.vertices.push(u);\n                x.append(_, m, C + 1);\n              }\n            } else {\n              if (m > g) {\n                g += this.vertices.length;\n              }\n              y = Number.MAX_VALUE;\n              if (g < m) {\n                return t;\n              }\n              for (var P = m; P <= g; ++P) {\n                if (a.leftOn(_.at(C - 1), _.at(C), _.at(P)) && a.rightOn(_.at(C + 1), _.at(C), _.at(P)) && (f = a.sqdist(_.at(C), _.at(P))) < y) {\n                  y = f;\n                  v = P % this.vertices.length;\n                }\n              }\n              if (C < v) {\n                b.append(_, C, v + 1);\n                if (v != 0) {\n                  x.append(_, v, w.length);\n                }\n                x.append(_, 0, C + 1);\n              } else {\n                if (C != 0) {\n                  b.append(_, C, w.length);\n                }\n                b.append(_, 0, v + 1);\n                x.append(_, v, C + 1);\n              }\n            }\n            if (b.vertices.length < x.vertices.length) {\n              b.quickDecomp(t, e, i, o, r, h);\n              x.quickDecomp(t, e, i, o, r, h);\n            } else {\n              x.quickDecomp(t, e, i, o, r, h);\n              b.quickDecomp(t, e, i, o, r, h);\n            }\n            return t;\n          }\n        }\n        t.push(this);\n        return t;\n      };\n      s.prototype.removeCollinearPoints = function (t) {\n        var e = 0;\n        for (var i = this.vertices.length - 1; this.vertices.length > 3 && i >= 0; --i) {\n          if (a.collinear(this.at(i - 1), this.at(i), this.at(i + 1), t)) {\n            this.vertices.splice(i % this.vertices.length, 1);\n            i--;\n            e++;\n          }\n        }\n        return e;\n      };\n    }, {\n      "./Line": 1,\n      "./Point": 2,\n      "./Scalar": 4\n    }],\n    4: [function (t, e, i) {\n      function s() {}\n      e.exports = s;\n      s.eq = function (t, e, i) {\n        i = i || 0;\n        return Math.abs(t - e) < i;\n      };\n    }, {}],\n    5: [function (t, e, i) {\n      e.exports = {\n        Polygon: t("./Polygon"),\n        Point: t("./Point")\n      };\n    }, {\n      "./Point": 2,\n      "./Polygon": 3\n    }],\n    6: [function (t, e, i) {\n      e.exports = {\n        name: "p2",\n        version: "0.7.0",\n        description: "A JavaScript 2D physics engine.",\n        author: "Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",\n        keywords: ["p2.js", "p2", "physics", "engine", "2d"],\n        main: "./src/p2.js",\n        engines: {\n          node: "*"\n        },\n        repository: {\n          type: "git",\n          url: "https://github.com/schteppe/p2.js.git"\n        },\n        bugs: {\n          url: "https://github.com/schteppe/p2.js/issues"\n        },\n        licenses: [{\n          type: "MIT"\n        }],\n        devDependencies: {\n          grunt: "^0.4.5",\n          "grunt-contrib-jshint": "^0.11.2",\n          "grunt-contrib-nodeunit": "^0.4.1",\n          "grunt-contrib-uglify": "~0.4.0",\n          "grunt-contrib-watch": "~0.5.0",\n          "grunt-browserify": "~2.0.1",\n          "grunt-contrib-concat": "^0.4.0"\n        },\n        dependencies: {\n          "poly-decomp": "0.1.0"\n        }\n      };\n    }, {}],\n    7: [function (t, e, i) {\n      function s(t) {\n        this.lowerBound = n.create();\n        if (t && t.lowerBound) {\n          n.copy(this.lowerBound, t.lowerBound);\n        }\n        this.upperBound = n.create();\n        if (t && t.upperBound) {\n          n.copy(this.upperBound, t.upperBound);\n        }\n      }\n      var n = t("../math/vec2");\n      var o = t("../utils/Utils");\n      e.exports = s;\n      var a = n.create();\n      s.prototype.setFromPoints = function (t, e, i, s) {\n        var o = this.lowerBound;\n        var r = this.upperBound;\n        if (typeof i != "number") {\n          i = 0;\n        }\n        if (i !== 0) {\n          n.rotate(o, t[0], i);\n        } else {\n          n.copy(o, t[0]);\n        }\n        n.copy(r, o);\n        var h = Math.cos(i);\n        var l = Math.sin(i);\n        for (var c = 1; c < t.length; c++) {\n          var u = t[c];\n          if (i !== 0) {\n            var d = u[0];\n            var p = u[1];\n            a[0] = h * d - l * p;\n            a[1] = l * d + h * p;\n            u = a;\n          }\n          for (var f = 0; f < 2; f++) {\n            if (u[f] > r[f]) {\n              r[f] = u[f];\n            }\n            if (u[f] < o[f]) {\n              o[f] = u[f];\n            }\n          }\n        }\n        if (e) {\n          n.add(this.lowerBound, this.lowerBound, e);\n          n.add(this.upperBound, this.upperBound, e);\n        }\n        if (s) {\n          this.lowerBound[0] -= s;\n          this.lowerBound[1] -= s;\n          this.upperBound[0] += s;\n          this.upperBound[1] += s;\n        }\n      };\n      s.prototype.copy = function (t) {\n        n.copy(this.lowerBound, t.lowerBound);\n        n.copy(this.upperBound, t.upperBound);\n      };\n      s.prototype.extend = function (t) {\n        for (var e = 2; e--;) {\n          var i = t.lowerBound[e];\n          if (this.lowerBound[e] > i) {\n            this.lowerBound[e] = i;\n          }\n          var s = t.upperBound[e];\n          if (this.upperBound[e] < s) {\n            this.upperBound[e] = s;\n          }\n        }\n      };\n      s.prototype.overlaps = function (t) {\n        var e = this.lowerBound;\n        var i = this.upperBound;\n        var s = t.lowerBound;\n        var n = t.upperBound;\n        return (s[0] <= i[0] && i[0] <= n[0] || e[0] <= n[0] && n[0] <= i[0]) && (s[1] <= i[1] && i[1] <= n[1] || e[1] <= n[1] && n[1] <= i[1]);\n      };\n      s.prototype.containsPoint = function (t) {\n        var e = this.lowerBound;\n        var i = this.upperBound;\n        return e[0] <= t[0] && t[0] <= i[0] && e[1] <= t[1] && t[1] <= i[1];\n      };\n      s.prototype.overlapsRay = function (t) {\n        var e = 0;\n        var i = 1 / t.direction[0];\n        var s = 1 / t.direction[1];\n        var n = (this.lowerBound[0] - t.from[0]) * i;\n        var o = (this.upperBound[0] - t.from[0]) * i;\n        var a = (this.lowerBound[1] - t.from[1]) * s;\n        var r = (this.upperBound[1] - t.from[1]) * s;\n        var h = Math.max(Math.max(Math.min(n, o), Math.min(a, r)));\n        var l = Math.min(Math.min(Math.max(n, o), Math.max(a, r)));\n        if (l < 0) {\n          return -1;\n        } else if (h > l) {\n          return -1;\n        } else {\n          return h;\n        }\n      };\n    }, {\n      "../math/vec2": 30,\n      "../utils/Utils": 57\n    }],\n    8: [function (t, e, i) {\n      function s(t) {\n        this.type = t;\n        this.result = [];\n        this.world = null;\n        this.boundingVolumeType = s.AABB;\n      }\n      var n = t("../math/vec2");\n      var o = t("../objects/Body");\n      e.exports = s;\n      s.AABB = 1;\n      s.BOUNDING_CIRCLE = 2;\n      s.prototype.setWorld = function (t) {\n        this.world = t;\n      };\n      s.prototype.getCollisionPairs = function (t) {};\n      var a = n.create();\n      s.boundingRadiusCheck = function (t, e) {\n        n.sub(a, t.position, e.position);\n        var i = n.squaredLength(a);\n        var s = t.boundingRadius + e.boundingRadius;\n        return i <= s * s;\n      };\n      s.aabbCheck = function (t, e) {\n        return t.getAABB().overlaps(e.getAABB());\n      };\n      s.prototype.boundingVolumeCheck = function (t, e) {\n        var i;\n        switch (this.boundingVolumeType) {\n          case s.BOUNDING_CIRCLE:\n            i = s.boundingRadiusCheck(t, e);\n            break;\n          case s.AABB:\n            i = s.aabbCheck(t, e);\n            break;\n          default:\n            throw new Error("Bounding volume type not recognized: " + this.boundingVolumeType);\n        }\n        return i;\n      };\n      s.canCollide = function (t, e) {\n        var i = o.KINEMATIC;\n        var s = o.STATIC;\n        return (t.type !== s || e.type !== s) && (t.type !== i || e.type !== s) && (t.type !== s || e.type !== i) && (t.type !== i || e.type !== i) && (t.sleepState !== o.SLEEPING || e.sleepState !== o.SLEEPING) && (t.sleepState !== o.SLEEPING || e.type !== s) && (e.sleepState !== o.SLEEPING || t.type !== s);\n      };\n      s.NAIVE = 1;\n      s.SAP = 2;\n    }, {\n      "../math/vec2": 30,\n      "../objects/Body": 31\n    }],\n    9: [function (t, e, i) {\n      function s() {\n        h.call(this, h.NAIVE);\n      }\n      var n = t("../shapes/Circle");\n      var o = t("../shapes/Plane");\n      var a = t("../shapes/Shape");\n      var r = t("../shapes/Particle");\n      var h = t("../collision/Broadphase");\n      var l = t("../math/vec2");\n      e.exports = s;\n      s.prototype = new h();\n      s.prototype.constructor = s;\n      s.prototype.getCollisionPairs = function (t) {\n        var e = t.bodies;\n        var i = this.result;\n        i.length = 0;\n        for (var s = 0, n = e.length; s !== n; s++) {\n          var o = e[s];\n          for (var a = 0; a < s; a++) {\n            var r = e[a];\n            if (h.canCollide(o, r) && this.boundingVolumeCheck(o, r)) {\n              i.push(o, r);\n            }\n          }\n        }\n        return i;\n      };\n      s.prototype.aabbQuery = function (t, e, i) {\n        i = i || [];\n        for (var s = t.bodies, n = 0; n < s.length; n++) {\n          var o = s[n];\n          if (o.aabbNeedsUpdate) {\n            o.updateAABB();\n          }\n          if (o.aabb.overlaps(e)) {\n            i.push(o);\n          }\n        }\n        return i;\n      };\n    }, {\n      "../collision/Broadphase": 8,\n      "../math/vec2": 30,\n      "../shapes/Circle": 39,\n      "../shapes/Particle": 43,\n      "../shapes/Plane": 44,\n      "../shapes/Shape": 45\n    }],\n    10: [function (t, e, i) {\n      function s() {\n        this.contactEquations = [];\n        this.frictionEquations = [];\n        this.enableFriction = true;\n        this.enabledEquations = true;\n        this.slipForce = 10;\n        this.frictionCoefficient = 0.3;\n        this.surfaceVelocity = 0;\n        this.contactEquationPool = new u({\n          size: 32\n        });\n        this.frictionEquationPool = new d({\n          size: 64\n        });\n        this.restitution = 0;\n        this.stiffness = f.DEFAULT_STIFFNESS;\n        this.relaxation = f.DEFAULT_RELAXATION;\n        this.frictionStiffness = f.DEFAULT_STIFFNESS;\n        this.frictionRelaxation = f.DEFAULT_RELAXATION;\n        this.enableFrictionReduction = true;\n        this.collidingBodiesLastStep = new p();\n        this.contactSkinSize = 0.01;\n      }\n      function n(t, e) {\n        a.set(t.vertices[0], -e.length * 0.5, -e.radius);\n        a.set(t.vertices[1], e.length * 0.5, -e.radius);\n        a.set(t.vertices[2], e.length * 0.5, e.radius);\n        a.set(t.vertices[3], -e.length * 0.5, e.radius);\n      }\n      function o(t, e, i, s) {\n        var n = K;\n        var o = J;\n        var l = Z;\n        var c = Q;\n        var u = t;\n        for (var d = e.vertices, p = null, f = 0; f !== d.length + 1; f++) {\n          var y = d[f % d.length];\n          var g = d[(f + 1) % d.length];\n          a.rotate(n, y, s);\n          a.rotate(o, g, s);\n          h(n, n, i);\n          h(o, o, i);\n          r(l, n, u);\n          r(c, o, u);\n          var m = a.crossLength(l, c);\n          if (p === null) {\n            p = m;\n          }\n          if (m * p <= 0) {\n            return false;\n          }\n          p = m;\n        }\n        return true;\n      }\n      var a = t("../math/vec2");\n      var r = a.sub;\n      var h = a.add;\n      var l = a.dot;\n      var c = t("../utils/Utils");\n      var u = t("../utils/ContactEquationPool");\n      var d = t("../utils/FrictionEquationPool");\n      var p = t("../utils/TupleDictionary");\n      var f = t("../equations/Equation");\n      var y = t("../equations/ContactEquation");\n      var g = t("../equations/FrictionEquation");\n      var m = t("../shapes/Circle");\n      var v = t("../shapes/Convex");\n      var b = t("../shapes/Shape");\n      var x = t("../objects/Body");\n      var _ = t("../shapes/Box");\n      e.exports = s;\n      var w = a.fromValues(0, 1);\n      var C = a.fromValues(0, 0);\n      var P = a.fromValues(0, 0);\n      var T = a.fromValues(0, 0);\n      var S = a.fromValues(0, 0);\n      var A = a.fromValues(0, 0);\n      var E = a.fromValues(0, 0);\n      var I = a.fromValues(0, 0);\n      var M = a.fromValues(0, 0);\n      var R = a.fromValues(0, 0);\n      var O = a.fromValues(0, 0);\n      var B = a.fromValues(0, 0);\n      var L = a.fromValues(0, 0);\n      var k = a.fromValues(0, 0);\n      var D = a.fromValues(0, 0);\n      var F = a.fromValues(0, 0);\n      var G = a.fromValues(0, 0);\n      var U = a.fromValues(0, 0);\n      var N = a.fromValues(0, 0);\n      var j = [];\n      var W = a.create();\n      var X = a.create();\n      s.prototype.bodiesOverlap = function (t, e) {\n        var i = W;\n        var s = X;\n        for (var n = 0, o = t.shapes.length; n !== o; n++) {\n          var a = t.shapes[n];\n          t.toWorldFrame(i, a.position);\n          for (var r = 0, h = e.shapes.length; r !== h; r++) {\n            var l = e.shapes[r];\n            e.toWorldFrame(s, l.position);\n            if (this[a.type | l.type](t, a, i, a.angle + t.angle, e, l, s, l.angle + e.angle, true)) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n      s.prototype.collidedLastStep = function (t, e) {\n        var i = t.id | 0;\n        var s = e.id | 0;\n        return !!this.collidingBodiesLastStep.get(i, s);\n      };\n      s.prototype.reset = function () {\n        this.collidingBodiesLastStep.reset();\n        var t = this.contactEquations;\n        for (var e = t.length; e--;) {\n          var i = t[e];\n          var s = i.bodyA.id;\n          var n = i.bodyB.id;\n          this.collidingBodiesLastStep.set(s, n, true);\n        }\n        for (var o = this.contactEquations, a = this.frictionEquations, r = 0; r < o.length; r++) {\n          this.contactEquationPool.release(o[r]);\n        }\n        for (var r = 0; r < a.length; r++) {\n          this.frictionEquationPool.release(a[r]);\n        }\n        this.contactEquations.length = this.frictionEquations.length = 0;\n      };\n      s.prototype.createContactEquation = function (t, e, i, s) {\n        var n = this.contactEquationPool.get();\n        n.bodyA = t;\n        n.bodyB = e;\n        n.shapeA = i;\n        n.shapeB = s;\n        n.restitution = this.restitution;\n        n.firstImpact = !this.collidedLastStep(t, e);\n        n.stiffness = this.stiffness;\n        n.relaxation = this.relaxation;\n        n.needsUpdate = true;\n        n.enabled = this.enabledEquations;\n        n.offset = this.contactSkinSize;\n        return n;\n      };\n      s.prototype.createFrictionEquation = function (t, e, i, s) {\n        var n = this.frictionEquationPool.get();\n        n.bodyA = t;\n        n.bodyB = e;\n        n.shapeA = i;\n        n.shapeB = s;\n        n.setSlipForce(this.slipForce);\n        n.frictionCoefficient = this.frictionCoefficient;\n        n.relativeVelocity = this.surfaceVelocity;\n        n.enabled = this.enabledEquations;\n        n.needsUpdate = true;\n        n.stiffness = this.frictionStiffness;\n        n.relaxation = this.frictionRelaxation;\n        n.contactEquations.length = 0;\n        return n;\n      };\n      s.prototype.createFrictionFromContact = function (t) {\n        var e = this.createFrictionEquation(t.bodyA, t.bodyB, t.shapeA, t.shapeB);\n        a.copy(e.contactPointA, t.contactPointA);\n        a.copy(e.contactPointB, t.contactPointB);\n        a.rotate90cw(e.t, t.normalA);\n        e.contactEquations.push(t);\n        return e;\n      };\n      s.prototype.createFrictionFromAverage = function (t) {\n        var e = this.contactEquations[this.contactEquations.length - 1];\n        var i = this.createFrictionEquation(e.bodyA, e.bodyB, e.shapeA, e.shapeB);\n        var s = e.bodyA;\n        var n = e.bodyB;\n        a.set(i.contactPointA, 0, 0);\n        a.set(i.contactPointB, 0, 0);\n        a.set(i.t, 0, 0);\n        for (var o = 0; o !== t; o++) {\n          e = this.contactEquations[this.contactEquations.length - 1 - o];\n          if (e.bodyA === s) {\n            a.add(i.t, i.t, e.normalA);\n            a.add(i.contactPointA, i.contactPointA, e.contactPointA);\n            a.add(i.contactPointB, i.contactPointB, e.contactPointB);\n          } else {\n            a.sub(i.t, i.t, e.normalA);\n            a.add(i.contactPointA, i.contactPointA, e.contactPointB);\n            a.add(i.contactPointB, i.contactPointB, e.contactPointA);\n          }\n          i.contactEquations.push(e);\n        }\n        var r = 1 / t;\n        a.scale(i.contactPointA, i.contactPointA, r);\n        a.scale(i.contactPointB, i.contactPointB, r);\n        a.normalize(i.t, i.t);\n        a.rotate90cw(i.t, i.t);\n        return i;\n      };\n      s.prototype[b.LINE | b.CONVEX] = s.prototype.convexLine = function (t, e, i, s, n, o, a, r, h) {\n        return !h && 0;\n      };\n      s.prototype[b.LINE | b.BOX] = s.prototype.lineBox = function (t, e, i, s, n, o, a, r, h) {\n        return !h && 0;\n      };\n      var H = new _({\n        width: 1,\n        height: 1\n      });\n      var V = a.create();\n      s.prototype[b.CAPSULE | b.CONVEX] = s.prototype[b.CAPSULE | b.BOX] = s.prototype.convexCapsule = function (t, e, i, s, o, r, h, l, c) {\n        var u = V;\n        a.set(u, r.length / 2, 0);\n        a.rotate(u, u, l);\n        a.add(u, u, h);\n        var d = this.circleConvex(o, r, u, l, t, e, i, s, c, r.radius);\n        a.set(u, -r.length / 2, 0);\n        a.rotate(u, u, l);\n        a.add(u, u, h);\n        var p = this.circleConvex(o, r, u, l, t, e, i, s, c, r.radius);\n        if (c && (d || p)) {\n          return true;\n        }\n        var f = H;\n        n(f, r);\n        return this.convexConvex(t, e, i, s, o, f, h, l, c) + d + p;\n      };\n      s.prototype[b.CAPSULE | b.LINE] = s.prototype.lineCapsule = function (t, e, i, s, n, o, a, r, h) {\n        return !h && 0;\n      };\n      var Y = a.create();\n      var q = a.create();\n      var z = new _({\n        width: 1,\n        height: 1\n      });\n      s.prototype[b.CAPSULE | b.CAPSULE] = s.prototype.capsuleCapsule = function (t, e, i, s, o, r, h, l, c) {\n        var u;\n        var d = Y;\n        var p = q;\n        var f = 0;\n        for (var y = 0; y < 2; y++) {\n          a.set(d, (y === 0 ? -1 : 1) * e.length / 2, 0);\n          a.rotate(d, d, s);\n          a.add(d, d, i);\n          for (var g = 0; g < 2; g++) {\n            a.set(p, (g === 0 ? -1 : 1) * r.length / 2, 0);\n            a.rotate(p, p, l);\n            a.add(p, p, h);\n            if (this.enableFrictionReduction) {\n              u = this.enableFriction;\n              this.enableFriction = false;\n            }\n            var m = this.circleCircle(t, e, d, s, o, r, p, l, c, e.radius, r.radius);\n            if (this.enableFrictionReduction) {\n              this.enableFriction = u;\n            }\n            if (c && m) {\n              return true;\n            }\n            f += m;\n          }\n        }\n        if (this.enableFrictionReduction) {\n          u = this.enableFriction;\n          this.enableFriction = false;\n        }\n        var v = z;\n        n(v, e);\n        var b = this.convexCapsule(t, v, i, s, o, r, h, l, c);\n        if (this.enableFrictionReduction) {\n          this.enableFriction = u;\n        }\n        if (c && b) {\n          return true;\n        }\n        f += b;\n        if (this.enableFrictionReduction) {\n          var u = this.enableFriction;\n          this.enableFriction = false;\n        }\n        n(v, r);\n        var x = this.convexCapsule(o, v, h, l, t, e, i, s, c);\n        if (this.enableFrictionReduction) {\n          this.enableFriction = u;\n        }\n        return !!c && !!x || (f += x, this.enableFrictionReduction && f && this.enableFriction && this.frictionEquations.push(this.createFrictionFromAverage(f)), f);\n      };\n      s.prototype[b.LINE | b.LINE] = s.prototype.lineLine = function (t, e, i, s, n, o, a, r, h) {\n        return !h && 0;\n      };\n      s.prototype[b.PLANE | b.LINE] = s.prototype.planeLine = function (t, e, i, s, n, o, c, u, d) {\n        var p = C;\n        var f = P;\n        var y = T;\n        var g = S;\n        var m = A;\n        var v = E;\n        var b = I;\n        var x = M;\n        var _ = R;\n        var O = j;\n        var B = 0;\n        a.set(p, -o.length / 2, 0);\n        a.set(f, o.length / 2, 0);\n        a.rotate(y, p, u);\n        a.rotate(g, f, u);\n        h(y, y, c);\n        h(g, g, c);\n        a.copy(p, y);\n        a.copy(f, g);\n        r(m, f, p);\n        a.normalize(v, m);\n        a.rotate90cw(_, v);\n        a.rotate(x, w, s);\n        O[0] = p;\n        O[1] = f;\n        for (var L = 0; L < O.length; L++) {\n          var k = O[L];\n          r(b, k, i);\n          var D = l(b, x);\n          if (D < 0) {\n            if (d) {\n              return true;\n            }\n            var F = this.createContactEquation(t, n, e, o);\n            B++;\n            a.copy(F.normalA, x);\n            a.normalize(F.normalA, F.normalA);\n            a.scale(b, x, D);\n            r(F.contactPointA, k, b);\n            r(F.contactPointA, F.contactPointA, t.position);\n            r(F.contactPointB, k, c);\n            h(F.contactPointB, F.contactPointB, c);\n            r(F.contactPointB, F.contactPointB, n.position);\n            this.contactEquations.push(F);\n            if (!this.enableFrictionReduction) {\n              if (this.enableFriction) {\n                this.frictionEquations.push(this.createFrictionFromContact(F));\n              }\n            }\n          }\n        }\n        return !d && (this.enableFrictionReduction || B && this.enableFriction && this.frictionEquations.push(this.createFrictionFromAverage(B)), B);\n      };\n      s.prototype[b.PARTICLE | b.CAPSULE] = s.prototype.particleCapsule = function (t, e, i, s, n, o, a, r, h) {\n        return this.circleLine(t, e, i, s, n, o, a, r, h, o.radius, 0);\n      };\n      s.prototype[b.CIRCLE | b.LINE] = s.prototype.circleLine = function (t, e, i, s, n, o, c, u, d, p, f) {\n        var p = p || 0;\n        var f = f !== undefined ? f : e.radius;\n        var y = C;\n        var g = P;\n        var m = T;\n        var v = S;\n        var b = A;\n        var x = E;\n        var _ = I;\n        var w = M;\n        var F = R;\n        var G = O;\n        var U = B;\n        var N = L;\n        var W = k;\n        var X = D;\n        var H = j;\n        a.set(w, -o.length / 2, 0);\n        a.set(F, o.length / 2, 0);\n        a.rotate(G, w, u);\n        a.rotate(U, F, u);\n        h(G, G, c);\n        h(U, U, c);\n        a.copy(w, G);\n        a.copy(F, U);\n        r(x, F, w);\n        a.normalize(_, x);\n        a.rotate90cw(b, _);\n        r(N, i, w);\n        var V = l(N, b);\n        r(v, w, c);\n        r(W, i, c);\n        var Y = f + p;\n        if (Math.abs(V) < Y) {\n          a.scale(y, b, V);\n          r(m, i, y);\n          a.scale(g, b, l(b, W));\n          a.normalize(g, g);\n          a.scale(g, g, p);\n          h(m, m, g);\n          var q = l(_, m);\n          var z = l(_, w);\n          var K = l(_, F);\n          if (q > z && q < K) {\n            if (d) {\n              return true;\n            }\n            var J = this.createContactEquation(t, n, e, o);\n            a.scale(J.normalA, y, -1);\n            a.normalize(J.normalA, J.normalA);\n            a.scale(J.contactPointA, J.normalA, f);\n            h(J.contactPointA, J.contactPointA, i);\n            r(J.contactPointA, J.contactPointA, t.position);\n            r(J.contactPointB, m, c);\n            h(J.contactPointB, J.contactPointB, c);\n            r(J.contactPointB, J.contactPointB, n.position);\n            this.contactEquations.push(J);\n            if (this.enableFriction) {\n              this.frictionEquations.push(this.createFrictionFromContact(J));\n            }\n            return 1;\n          }\n        }\n        H[0] = w;\n        H[1] = F;\n        for (var Z = 0; Z < H.length; Z++) {\n          var Q = H[Z];\n          r(N, Q, i);\n          if (a.squaredLength(N) < Math.pow(Y, 2)) {\n            if (d) {\n              return true;\n            }\n            var J = this.createContactEquation(t, n, e, o);\n            a.copy(J.normalA, N);\n            a.normalize(J.normalA, J.normalA);\n            a.scale(J.contactPointA, J.normalA, f);\n            h(J.contactPointA, J.contactPointA, i);\n            r(J.contactPointA, J.contactPointA, t.position);\n            r(J.contactPointB, Q, c);\n            a.scale(X, J.normalA, -p);\n            h(J.contactPointB, J.contactPointB, X);\n            h(J.contactPointB, J.contactPointB, c);\n            r(J.contactPointB, J.contactPointB, n.position);\n            this.contactEquations.push(J);\n            if (this.enableFriction) {\n              this.frictionEquations.push(this.createFrictionFromContact(J));\n            }\n            return 1;\n          }\n        }\n        return 0;\n      };\n      s.prototype[b.CIRCLE | b.CAPSULE] = s.prototype.circleCapsule = function (t, e, i, s, n, o, a, r, h) {\n        return this.circleLine(t, e, i, s, n, o, a, r, h, o.radius);\n      };\n      s.prototype[b.CIRCLE | b.CONVEX] = s.prototype[b.CIRCLE | b.BOX] = s.prototype.circleConvex = function (t, e, i, s, n, l, c, u, d, p) {\n        var p = typeof p == "number" ? p : e.radius;\n        var f = C;\n        var y = P;\n        var g = T;\n        var m = S;\n        var v = A;\n        var b = E;\n        var x = I;\n        var _ = M;\n        var w = R;\n        var U = O;\n        var N = B;\n        var j = -1;\n        var W = null;\n        var X = L;\n        var H = k;\n        var V = D;\n        var Y = F;\n        var q = G;\n        var z = false;\n        var K = Number.MAX_VALUE;\n        var J = 0;\n        for (var Z = l.vertices, Q = 0; Q !== Z.length + 1; Q++) {\n          var $ = Z[Q % Z.length];\n          var tt = Z[(Q + 1) % Z.length];\n          a.rotate(f, $, u);\n          a.rotate(y, tt, u);\n          h(f, f, c);\n          h(y, y, c);\n          r(g, y, f);\n          a.normalize(m, g);\n          a.rotate90cw(v, m);\n          a.scale(V, v, -e.radius);\n          h(V, V, i);\n          if (o(V, l, c, u)) {\n            a.sub(Y, f, V);\n            var et = Math.abs(a.dot(Y, v));\n            if (et < K) {\n              a.copy(q, V);\n              K = et;\n              a.scale(H, v, et);\n              a.add(H, H, V);\n              z = true;\n            }\n          }\n        }\n        if (z) {\n          if (d) {\n            return true;\n          }\n          var it = this.createContactEquation(t, n, e, l);\n          a.sub(it.normalA, q, i);\n          a.normalize(it.normalA, it.normalA);\n          a.scale(it.contactPointA, it.normalA, p);\n          h(it.contactPointA, it.contactPointA, i);\n          r(it.contactPointA, it.contactPointA, t.position);\n          r(it.contactPointB, H, c);\n          h(it.contactPointB, it.contactPointB, c);\n          r(it.contactPointB, it.contactPointB, n.position);\n          this.contactEquations.push(it);\n          if (this.enableFriction) {\n            this.frictionEquations.push(this.createFrictionFromContact(it));\n          }\n          return 1;\n        }\n        if (p > 0) {\n          for (var Q = 0; Q < Z.length; Q++) {\n            var st = Z[Q];\n            a.rotate(N, st, u);\n            h(N, N, c);\n            r(U, N, i);\n            if (a.squaredLength(U) < Math.pow(p, 2)) {\n              if (d) {\n                return true;\n              }\n              var it = this.createContactEquation(t, n, e, l);\n              a.copy(it.normalA, U);\n              a.normalize(it.normalA, it.normalA);\n              a.scale(it.contactPointA, it.normalA, p);\n              h(it.contactPointA, it.contactPointA, i);\n              r(it.contactPointA, it.contactPointA, t.position);\n              r(it.contactPointB, N, c);\n              h(it.contactPointB, it.contactPointB, c);\n              r(it.contactPointB, it.contactPointB, n.position);\n              this.contactEquations.push(it);\n              if (this.enableFriction) {\n                this.frictionEquations.push(this.createFrictionFromContact(it));\n              }\n              return 1;\n            }\n          }\n        }\n        return 0;\n      };\n      var K = a.create();\n      var J = a.create();\n      var Z = a.create();\n      var Q = a.create();\n      s.prototype[b.PARTICLE | b.CONVEX] = s.prototype[b.PARTICLE | b.BOX] = s.prototype.particleConvex = function (t, e, i, s, n, c, u, d, p) {\n        var f = C;\n        var y = P;\n        var g = T;\n        var m = S;\n        var v = A;\n        var b = E;\n        var x = I;\n        var _ = M;\n        var w = R;\n        var j = O;\n        var W = B;\n        var X = -1;\n        var H = null;\n        var V = L;\n        var Y = k;\n        var q = D;\n        var z = F;\n        var K = G;\n        var J = U;\n        var Z = N;\n        var Q = Number.MAX_VALUE;\n        var $ = 0;\n        var tt = false;\n        var et = c.vertices;\n        if (!o(i, c, u, d)) {\n          return 0;\n        }\n        if (p) {\n          return true;\n        }\n        var it = null;\n        for (var st = 0; st !== et.length + 1; st++) {\n          var nt = et[st % et.length];\n          var ot = et[(st + 1) % et.length];\n          a.rotate(f, nt, d);\n          a.rotate(y, ot, d);\n          h(f, f, u);\n          h(y, y, u);\n          r(g, y, f);\n          a.normalize(m, g);\n          a.rotate90cw(v, m);\n          r(j, i, f);\n          var at = l(j, v);\n          r(b, f, u);\n          r(x, i, u);\n          a.sub(J, f, i);\n          var rt = Math.abs(a.dot(J, v));\n          if (rt < Q) {\n            Q = rt;\n            a.scale(Y, v, rt);\n            a.add(Y, Y, i);\n            a.copy(Z, v);\n            tt = true;\n          }\n        }\n        if (tt) {\n          var ht = this.createContactEquation(t, n, e, c);\n          a.scale(ht.normalA, Z, -1);\n          a.normalize(ht.normalA, ht.normalA);\n          a.set(ht.contactPointA, 0, 0);\n          h(ht.contactPointA, ht.contactPointA, i);\n          r(ht.contactPointA, ht.contactPointA, t.position);\n          r(ht.contactPointB, Y, u);\n          h(ht.contactPointB, ht.contactPointB, u);\n          r(ht.contactPointB, ht.contactPointB, n.position);\n          this.contactEquations.push(ht);\n          if (this.enableFriction) {\n            this.frictionEquations.push(this.createFrictionFromContact(ht));\n          }\n          return 1;\n        }\n        return 0;\n      };\n      s.prototype[b.CIRCLE] = s.prototype.circleCircle = function (t, e, i, s, n, o, l, c, u, d, p) {\n        var f = C;\n        var d = d || e.radius;\n        var p = p || o.radius;\n        r(f, i, l);\n        var y = d + p;\n        if (a.squaredLength(f) > Math.pow(y, 2)) {\n          return 0;\n        }\n        if (u) {\n          return true;\n        }\n        var g = this.createContactEquation(t, n, e, o);\n        r(g.normalA, l, i);\n        a.normalize(g.normalA, g.normalA);\n        a.scale(g.contactPointA, g.normalA, d);\n        a.scale(g.contactPointB, g.normalA, -p);\n        h(g.contactPointA, g.contactPointA, i);\n        r(g.contactPointA, g.contactPointA, t.position);\n        h(g.contactPointB, g.contactPointB, l);\n        r(g.contactPointB, g.contactPointB, n.position);\n        this.contactEquations.push(g);\n        if (this.enableFriction) {\n          this.frictionEquations.push(this.createFrictionFromContact(g));\n        }\n        return 1;\n      };\n      s.prototype[b.PLANE | b.CONVEX] = s.prototype[b.PLANE | b.BOX] = s.prototype.planeConvex = function (t, e, i, s, n, o, c, u, d) {\n        var p = C;\n        var f = P;\n        var y = T;\n        var g = 0;\n        a.rotate(f, w, s);\n        for (var m = 0; m !== o.vertices.length; m++) {\n          var v = o.vertices[m];\n          a.rotate(p, v, u);\n          h(p, p, c);\n          r(y, p, i);\n          if (l(y, f) <= 0) {\n            if (d) {\n              return true;\n            }\n            g++;\n            var b = this.createContactEquation(t, n, e, o);\n            r(y, p, i);\n            a.copy(b.normalA, f);\n            var x = l(y, b.normalA);\n            a.scale(y, b.normalA, x);\n            r(b.contactPointB, p, n.position);\n            r(b.contactPointA, p, y);\n            r(b.contactPointA, b.contactPointA, t.position);\n            this.contactEquations.push(b);\n            if (!this.enableFrictionReduction) {\n              if (this.enableFriction) {\n                this.frictionEquations.push(this.createFrictionFromContact(b));\n              }\n            }\n          }\n        }\n        if (this.enableFrictionReduction && this.enableFriction && g) {\n          this.frictionEquations.push(this.createFrictionFromAverage(g));\n        }\n        return g;\n      };\n      s.prototype[b.PARTICLE | b.PLANE] = s.prototype.particlePlane = function (t, e, i, s, n, o, h, c, u) {\n        var d = C;\n        var p = P;\n        c = c || 0;\n        r(d, i, h);\n        a.rotate(p, w, c);\n        var f = l(d, p);\n        if (f > 0) {\n          return 0;\n        }\n        if (u) {\n          return true;\n        }\n        var y = this.createContactEquation(n, t, o, e);\n        a.copy(y.normalA, p);\n        a.scale(d, y.normalA, f);\n        r(y.contactPointA, i, d);\n        r(y.contactPointA, y.contactPointA, n.position);\n        r(y.contactPointB, i, t.position);\n        this.contactEquations.push(y);\n        if (this.enableFriction) {\n          this.frictionEquations.push(this.createFrictionFromContact(y));\n        }\n        return 1;\n      };\n      s.prototype[b.CIRCLE | b.PARTICLE] = s.prototype.circleParticle = function (t, e, i, s, n, o, l, c, u) {\n        var d = C;\n        r(d, l, i);\n        if (a.squaredLength(d) > Math.pow(e.radius, 2)) {\n          return 0;\n        }\n        if (u) {\n          return true;\n        }\n        var p = this.createContactEquation(t, n, e, o);\n        a.copy(p.normalA, d);\n        a.normalize(p.normalA, p.normalA);\n        a.scale(p.contactPointA, p.normalA, e.radius);\n        h(p.contactPointA, p.contactPointA, i);\n        r(p.contactPointA, p.contactPointA, t.position);\n        r(p.contactPointB, l, n.position);\n        this.contactEquations.push(p);\n        if (this.enableFriction) {\n          this.frictionEquations.push(this.createFrictionFromContact(p));\n        }\n        return 1;\n      };\n      var $ = new m({\n        radius: 1\n      });\n      var tt = a.create();\n      var et = a.create();\n      var it = a.create();\n      s.prototype[b.PLANE | b.CAPSULE] = s.prototype.planeCapsule = function (t, e, i, s, n, o, r, l, c) {\n        var u = tt;\n        var d = et;\n        var p = $;\n        var f = it;\n        a.set(u, -o.length / 2, 0);\n        a.rotate(u, u, l);\n        h(u, u, r);\n        a.set(d, o.length / 2, 0);\n        a.rotate(d, d, l);\n        h(d, d, r);\n        p.radius = o.radius;\n        var y;\n        if (this.enableFrictionReduction) {\n          y = this.enableFriction;\n          this.enableFriction = false;\n        }\n        var g = this.circlePlane(n, p, u, 0, t, e, i, s, c);\n        var m = this.circlePlane(n, p, d, 0, t, e, i, s, c);\n        if (this.enableFrictionReduction) {\n          this.enableFriction = y;\n        }\n        if (c) {\n          return g || m;\n        }\n        var v = g + m;\n        if (this.enableFrictionReduction && v) {\n          this.frictionEquations.push(this.createFrictionFromAverage(v));\n        }\n        return v;\n      };\n      s.prototype[b.CIRCLE | b.PLANE] = s.prototype.circlePlane = function (t, e, i, s, n, o, c, u, d) {\n        var p = t;\n        var f = e;\n        var y = i;\n        var g = n;\n        var m = o;\n        var v = c;\n        var b = u;\n        b = b || 0;\n        var x = C;\n        var _ = P;\n        var S = T;\n        r(x, y, v);\n        a.rotate(_, w, b);\n        var A = l(_, x);\n        if (A > f.radius) {\n          return 0;\n        }\n        if (d) {\n          return true;\n        }\n        var E = this.createContactEquation(g, p, o, e);\n        a.copy(E.normalA, _);\n        a.scale(E.contactPointB, E.normalA, -f.radius);\n        h(E.contactPointB, E.contactPointB, y);\n        r(E.contactPointB, E.contactPointB, p.position);\n        a.scale(S, E.normalA, A);\n        r(E.contactPointA, x, S);\n        h(E.contactPointA, E.contactPointA, v);\n        r(E.contactPointA, E.contactPointA, g.position);\n        this.contactEquations.push(E);\n        if (this.enableFriction) {\n          this.frictionEquations.push(this.createFrictionFromContact(E));\n        }\n        return 1;\n      };\n      s.prototype[b.CONVEX] = s.prototype[b.CONVEX | b.BOX] = s.prototype[b.BOX] = s.prototype.convexConvex = function (t, e, i, n, o, c, u, d, p, f) {\n        var y = C;\n        var g = P;\n        var m = T;\n        var v = S;\n        var b = A;\n        var x = E;\n        var _ = I;\n        var w = M;\n        var O = R;\n        var B = 0;\n        var f = typeof f == "number" ? f : 0;\n        if (!s.findSeparatingAxis(e, i, n, c, u, d, y)) {\n          return 0;\n        }\n        r(w, u, i);\n        if (l(y, w) > 0) {\n          a.scale(y, y, -1);\n        }\n        var L = s.getClosestEdge(e, n, y, true);\n        var k = s.getClosestEdge(c, d, y);\n        if (L === -1 || k === -1) {\n          return 0;\n        }\n        for (var D = 0; D < 2; D++) {\n          var F = L;\n          var G = k;\n          var U = e;\n          var N = c;\n          var j = i;\n          var W = u;\n          var X = n;\n          var H = d;\n          var V = t;\n          var Y = o;\n          if (D === 0) {\n            var q;\n            q = F;\n            F = G;\n            G = q;\n            q = U;\n            U = N;\n            N = q;\n            q = j;\n            j = W;\n            W = q;\n            q = X;\n            X = H;\n            H = q;\n            q = V;\n            V = Y;\n            Y = q;\n          }\n          for (var z = G; z < G + 2; z++) {\n            var K = N.vertices[(z + N.vertices.length) % N.vertices.length];\n            a.rotate(g, K, H);\n            h(g, g, W);\n            var J = 0;\n            for (var Z = F - 1; Z < F + 2; Z++) {\n              var Q = U.vertices[(Z + U.vertices.length) % U.vertices.length];\n              var $ = U.vertices[(Z + 1 + U.vertices.length) % U.vertices.length];\n              a.rotate(m, Q, X);\n              a.rotate(v, $, X);\n              h(m, m, j);\n              h(v, v, j);\n              r(b, v, m);\n              a.rotate90cw(O, b);\n              a.normalize(O, O);\n              r(w, g, m);\n              var tt = l(O, w);\n              if (Z === F && tt <= f || Z !== F && tt <= 0) {\n                J++;\n              }\n            }\n            if (J >= 3) {\n              if (p) {\n                return true;\n              }\n              var et = this.createContactEquation(V, Y, U, N);\n              B++;\n              var Q = U.vertices[F % U.vertices.length];\n              var $ = U.vertices[(F + 1) % U.vertices.length];\n              a.rotate(m, Q, X);\n              a.rotate(v, $, X);\n              h(m, m, j);\n              h(v, v, j);\n              r(b, v, m);\n              a.rotate90cw(et.normalA, b);\n              a.normalize(et.normalA, et.normalA);\n              r(w, g, m);\n              var tt = l(et.normalA, w);\n              a.scale(_, et.normalA, tt);\n              r(et.contactPointA, g, j);\n              r(et.contactPointA, et.contactPointA, _);\n              h(et.contactPointA, et.contactPointA, j);\n              r(et.contactPointA, et.contactPointA, V.position);\n              r(et.contactPointB, g, W);\n              h(et.contactPointB, et.contactPointB, W);\n              r(et.contactPointB, et.contactPointB, Y.position);\n              this.contactEquations.push(et);\n              if (!this.enableFrictionReduction) {\n                if (this.enableFriction) {\n                  this.frictionEquations.push(this.createFrictionFromContact(et));\n                }\n              }\n            }\n          }\n        }\n        if (this.enableFrictionReduction && this.enableFriction && B) {\n          this.frictionEquations.push(this.createFrictionFromAverage(B));\n        }\n        return B;\n      };\n      var st = a.fromValues(0, 0);\n      s.projectConvexOntoAxis = function (t, e, i, s, n) {\n        var o = null;\n        var r = null;\n        var h;\n        var c;\n        var u = st;\n        a.rotate(u, s, -i);\n        for (var d = 0; d < t.vertices.length; d++) {\n          h = t.vertices[d];\n          c = l(h, u);\n          if (o === null || c > o) {\n            o = c;\n          }\n          if (r === null || c < r) {\n            r = c;\n          }\n        }\n        if (r > o) {\n          var p = r;\n          r = o;\n          o = p;\n        }\n        var f = l(e, s);\n        a.set(n, r + f, o + f);\n      };\n      var nt = a.fromValues(0, 0);\n      var ot = a.fromValues(0, 0);\n      var at = a.fromValues(0, 0);\n      var rt = a.fromValues(0, 0);\n      var ht = a.fromValues(0, 0);\n      var lt = a.fromValues(0, 0);\n      s.findSeparatingAxis = function (t, e, i, n, o, h, l) {\n        var c = null;\n        var u = false;\n        var d = false;\n        var p = nt;\n        var f = ot;\n        var y = at;\n        var g = rt;\n        var m = ht;\n        var v = lt;\n        if (t instanceof _ && n instanceof _) {\n          for (var b = 0; b !== 2; b++) {\n            var x = t;\n            var w = i;\n            if (b === 1) {\n              x = n;\n              w = h;\n            }\n            for (var C = 0; C !== 2; C++) {\n              if (C === 0) {\n                a.set(g, 0, 1);\n              } else if (C === 1) {\n                a.set(g, 1, 0);\n              }\n              if (w !== 0) {\n                a.rotate(g, g, w);\n              }\n              s.projectConvexOntoAxis(t, e, i, g, m);\n              s.projectConvexOntoAxis(n, o, h, g, v);\n              var P = m;\n              var T = v;\n              var S = false;\n              if (m[0] > v[0]) {\n                T = m;\n                P = v;\n                S = true;\n              }\n              var A = T[0] - P[1];\n              u = A <= 0;\n              if (c === null || A > c) {\n                a.copy(l, g);\n                c = A;\n                d = u;\n              }\n            }\n          }\n        } else {\n          for (var b = 0; b !== 2; b++) {\n            var x = t;\n            var w = i;\n            if (b === 1) {\n              x = n;\n              w = h;\n            }\n            for (var C = 0; C !== x.vertices.length; C++) {\n              a.rotate(f, x.vertices[C], w);\n              a.rotate(y, x.vertices[(C + 1) % x.vertices.length], w);\n              r(p, y, f);\n              a.rotate90cw(g, p);\n              a.normalize(g, g);\n              s.projectConvexOntoAxis(t, e, i, g, m);\n              s.projectConvexOntoAxis(n, o, h, g, v);\n              var P = m;\n              var T = v;\n              var S = false;\n              if (m[0] > v[0]) {\n                T = m;\n                P = v;\n                S = true;\n              }\n              var A = T[0] - P[1];\n              u = A <= 0;\n              if (c === null || A > c) {\n                a.copy(l, g);\n                c = A;\n                d = u;\n              }\n            }\n          }\n        }\n        return d;\n      };\n      var ct = a.fromValues(0, 0);\n      var ut = a.fromValues(0, 0);\n      var dt = a.fromValues(0, 0);\n      s.getClosestEdge = function (t, e, i, s) {\n        var n = ct;\n        var o = ut;\n        var h = dt;\n        a.rotate(n, i, -e);\n        if (s) {\n          a.scale(n, n, -1);\n        }\n        var c = -1;\n        for (var u = t.vertices.length, d = -1, p = 0; p !== u; p++) {\n          r(o, t.vertices[(p + 1) % u], t.vertices[p % u]);\n          a.rotate90cw(h, o);\n          a.normalize(h, h);\n          var f = l(h, n);\n          if (c === -1 || f > d) {\n            c = p % u;\n            d = f;\n          }\n        }\n        return c;\n      };\n      var pt = a.create();\n      var ft = a.create();\n      var yt = a.create();\n      var gt = a.create();\n      var mt = a.create();\n      var vt = a.create();\n      var bt = a.create();\n      s.prototype[b.CIRCLE | b.HEIGHTFIELD] = s.prototype.circleHeightfield = function (t, e, i, s, n, o, l, c, u, d) {\n        var p = o.heights;\n        var d = d || e.radius;\n        var f = o.elementWidth;\n        var y = ft;\n        var g = pt;\n        var m = mt;\n        var v = bt;\n        var b = vt;\n        var x = yt;\n        var _ = gt;\n        var w = Math.floor((i[0] - d - l[0]) / f);\n        var C = Math.ceil((i[0] + d - l[0]) / f);\n        if (w < 0) {\n          w = 0;\n        }\n        if (C >= p.length) {\n          C = p.length - 1;\n        }\n        var P = p[w];\n        var T = p[C];\n        for (var S = w; S < C; S++) {\n          if (p[S] < T) {\n            T = p[S];\n          }\n          if (p[S] > P) {\n            P = p[S];\n          }\n        }\n        if (i[1] - d > P) {\n          return !u && 0;\n        }\n        var A = false;\n        for (var S = w; S < C; S++) {\n          a.set(x, S * f, p[S]);\n          a.set(_, (S + 1) * f, p[S + 1]);\n          a.add(x, x, l);\n          a.add(_, _, l);\n          a.sub(b, _, x);\n          a.rotate(b, b, Math.PI / 2);\n          a.normalize(b, b);\n          a.scale(g, b, -d);\n          a.add(g, g, i);\n          a.sub(y, g, x);\n          var E = a.dot(y, b);\n          if (g[0] >= x[0] && g[0] < _[0] && E <= 0) {\n            if (u) {\n              return true;\n            }\n            A = true;\n            a.scale(y, b, -E);\n            a.add(m, g, y);\n            a.copy(v, b);\n            var I = this.createContactEquation(n, t, o, e);\n            a.copy(I.normalA, v);\n            a.scale(I.contactPointB, I.normalA, -d);\n            h(I.contactPointB, I.contactPointB, i);\n            r(I.contactPointB, I.contactPointB, t.position);\n            a.copy(I.contactPointA, m);\n            a.sub(I.contactPointA, I.contactPointA, n.position);\n            this.contactEquations.push(I);\n            if (this.enableFriction) {\n              this.frictionEquations.push(this.createFrictionFromContact(I));\n            }\n          }\n        }\n        A = false;\n        if (d > 0) {\n          for (var S = w; S <= C; S++) {\n            a.set(x, S * f, p[S]);\n            a.add(x, x, l);\n            a.sub(y, i, x);\n            if (a.squaredLength(y) < Math.pow(d, 2)) {\n              if (u) {\n                return true;\n              }\n              A = true;\n              var I = this.createContactEquation(n, t, o, e);\n              a.copy(I.normalA, y);\n              a.normalize(I.normalA, I.normalA);\n              a.scale(I.contactPointB, I.normalA, -d);\n              h(I.contactPointB, I.contactPointB, i);\n              r(I.contactPointB, I.contactPointB, t.position);\n              r(I.contactPointA, x, l);\n              h(I.contactPointA, I.contactPointA, l);\n              r(I.contactPointA, I.contactPointA, n.position);\n              this.contactEquations.push(I);\n              if (this.enableFriction) {\n                this.frictionEquations.push(this.createFrictionFromContact(I));\n              }\n            }\n          }\n        }\n        if (A) {\n          return 1;\n        } else {\n          return 0;\n        }\n      };\n      var xt = a.create();\n      var _t = a.create();\n      var wt = a.create();\n      var Ct = new v({\n        vertices: [a.create(), a.create(), a.create(), a.create()]\n      });\n      s.prototype[b.BOX | b.HEIGHTFIELD] = s.prototype[b.CONVEX | b.HEIGHTFIELD] = s.prototype.convexHeightfield = function (t, e, i, s, n, o, r, h, l) {\n        var c = o.heights;\n        var u = o.elementWidth;\n        var d = xt;\n        var p = _t;\n        var f = wt;\n        var y = Ct;\n        var g = Math.floor((t.aabb.lowerBound[0] - r[0]) / u);\n        var m = Math.ceil((t.aabb.upperBound[0] - r[0]) / u);\n        if (g < 0) {\n          g = 0;\n        }\n        if (m >= c.length) {\n          m = c.length - 1;\n        }\n        var v = c[g];\n        var b = c[m];\n        for (var x = g; x < m; x++) {\n          if (c[x] < b) {\n            b = c[x];\n          }\n          if (c[x] > v) {\n            v = c[x];\n          }\n        }\n        if (t.aabb.lowerBound[1] > v) {\n          return !l && 0;\n        }\n        var _ = false;\n        var w = 0;\n        for (var x = g; x < m; x++) {\n          a.set(d, x * u, c[x]);\n          a.set(p, (x + 1) * u, c[x + 1]);\n          a.add(d, d, r);\n          a.add(p, p, r);\n          var C = 100;\n          a.set(f, (p[0] + d[0]) * 0.5, (p[1] + d[1] - 100) * 0.5);\n          a.sub(y.vertices[0], p, f);\n          a.sub(y.vertices[1], d, f);\n          a.copy(y.vertices[2], y.vertices[1]);\n          a.copy(y.vertices[3], y.vertices[0]);\n          y.vertices[2][1] -= 100;\n          y.vertices[3][1] -= 100;\n          w += this.convexConvex(t, e, i, s, n, y, f, 0, l);\n        }\n        return w;\n      };\n    }, {\n      "../equations/ContactEquation": 21,\n      "../equations/Equation": 22,\n      "../equations/FrictionEquation": 23,\n      "../math/vec2": 30,\n      "../objects/Body": 31,\n      "../shapes/Box": 37,\n      "../shapes/Circle": 39,\n      "../shapes/Convex": 40,\n      "../shapes/Shape": 45,\n      "../utils/ContactEquationPool": 48,\n      "../utils/FrictionEquationPool": 49,\n      "../utils/TupleDictionary": 56,\n      "../utils/Utils": 57\n    }],\n    11: [function (t, e, i) {\n      function s(t) {\n        t = t || {};\n        this.from = t.from ? o.fromValues(t.from[0], t.from[1]) : o.create();\n        this.to = t.to ? o.fromValues(t.to[0], t.to[1]) : o.create();\n        this.checkCollisionResponse = t.checkCollisionResponse === undefined || t.checkCollisionResponse;\n        this.skipBackfaces = !!t.skipBackfaces;\n        this.collisionMask = t.collisionMask !== undefined ? t.collisionMask : -1;\n        this.collisionGroup = t.collisionGroup !== undefined ? t.collisionGroup : -1;\n        this.mode = t.mode !== undefined ? t.mode : s.ANY;\n        this.callback = t.callback || function (t) {};\n        this.direction = o.create();\n        this.length = 1;\n        this.update();\n      }\n      function n(t, e, i) {\n        o.sub(u, i, t);\n        var s = o.dot(u, e);\n        o.scale(d, e, s);\n        o.add(d, d, t);\n        return o.squaredDistance(i, d);\n      }\n      e.exports = s;\n      var o = t("../math/vec2");\n      var a = t("../collision/RaycastResult");\n      var r = t("../shapes/Shape");\n      var h = t("../collision/AABB");\n      s.prototype.constructor = s;\n      s.CLOSEST = 1;\n      s.ANY = 2;\n      s.ALL = 4;\n      s.prototype.update = function () {\n        var t = this.direction;\n        o.sub(t, this.to, this.from);\n        this.length = o.length(t);\n        o.normalize(t, t);\n      };\n      s.prototype.intersectBodies = function (t, e) {\n        for (var i = 0, s = e.length; !t.shouldStop(this) && i < s; i++) {\n          var n = e[i];\n          var o = n.getAABB();\n          if (o.overlapsRay(this) >= 0 || o.containsPoint(this.from)) {\n            this.intersectBody(t, n);\n          }\n        }\n      };\n      var l = o.create();\n      s.prototype.intersectBody = function (t, e) {\n        var i = this.checkCollisionResponse;\n        if (!i || e.collisionResponse) {\n          var s = l;\n          for (var n = 0, a = e.shapes.length; n < a; n++) {\n            var r = e.shapes[n];\n            if ((!i || r.collisionResponse) && (this.collisionGroup & r.collisionMask) != 0 && (r.collisionGroup & this.collisionMask) != 0) {\n              o.rotate(s, r.position, e.angle);\n              o.add(s, s, e.position);\n              var h = r.angle + e.angle;\n              this.intersectShape(t, r, h, s, e);\n              if (t.shouldStop(this)) {\n                break;\n              }\n            }\n          }\n        }\n      };\n      s.prototype.intersectShape = function (t, e, i, s, o) {\n        if (!(n(this.from, this.direction, s) > e.boundingRadius * e.boundingRadius)) {\n          this._currentBody = o;\n          this._currentShape = e;\n          e.raycast(t, this, s, i);\n          this._currentBody = this._currentShape = null;\n        }\n      };\n      s.prototype.getAABB = function (t) {\n        var e = this.to;\n        var i = this.from;\n        o.set(t.lowerBound, Math.min(e[0], i[0]), Math.min(e[1], i[1]));\n        o.set(t.upperBound, Math.max(e[0], i[0]), Math.max(e[1], i[1]));\n      };\n      var c = o.create();\n      s.prototype.reportIntersection = function (t, e, i, n) {\n        var a = this.from;\n        var r = this.to;\n        var h = this._currentShape;\n        var l = this._currentBody;\n        if (!this.skipBackfaces || !(o.dot(i, this.direction) > 0)) {\n          switch (this.mode) {\n            case s.ALL:\n              t.set(i, h, l, e, n);\n              this.callback(t);\n              break;\n            case s.CLOSEST:\n              if (e < t.fraction || !t.hasHit()) {\n                t.set(i, h, l, e, n);\n              }\n              break;\n            case s.ANY:\n              t.set(i, h, l, e, n);\n          }\n        }\n      };\n      var u = o.create();\n      var d = o.create();\n    }, {\n      "../collision/AABB": 7,\n      "../collision/RaycastResult": 12,\n      "../math/vec2": 30,\n      "../shapes/Shape": 45\n    }],\n    12: [function (t, e, i) {\n      function s() {\n        this.normal = n.create();\n        this.shape = null;\n        this.body = null;\n        this.faceIndex = -1;\n        this.fraction = -1;\n        this.isStopped = false;\n      }\n      var n = t("../math/vec2");\n      var o = t("../collision/Ray");\n      e.exports = s;\n      s.prototype.reset = function () {\n        n.set(this.normal, 0, 0);\n        this.shape = null;\n        this.body = null;\n        this.faceIndex = -1;\n        this.fraction = -1;\n        this.isStopped = false;\n      };\n      s.prototype.getHitDistance = function (t) {\n        return n.distance(t.from, t.to) * this.fraction;\n      };\n      s.prototype.hasHit = function () {\n        return this.fraction !== -1;\n      };\n      s.prototype.getHitPoint = function (t, e) {\n        n.lerp(t, e.from, e.to, this.fraction);\n      };\n      s.prototype.stop = function () {\n        this.isStopped = true;\n      };\n      s.prototype.shouldStop = function (t) {\n        return this.isStopped || this.fraction !== -1 && t.mode === o.ANY;\n      };\n      s.prototype.set = function (t, e, i, s, o) {\n        n.copy(this.normal, t);\n        this.shape = e;\n        this.body = i;\n        this.fraction = s;\n        this.faceIndex = o;\n      };\n    }, {\n      "../collision/Ray": 11,\n      "../math/vec2": 30\n    }],\n    13: [function (t, e, i) {\n      function s() {\n        o.call(this, o.SAP);\n        this.axisList = [];\n        this.axisIndex = 0;\n        var t = this;\n        this._addBodyHandler = function (e) {\n          t.axisList.push(e.body);\n        };\n        this._removeBodyHandler = function (e) {\n          var i = t.axisList.indexOf(e.body);\n          if (i !== -1) {\n            t.axisList.splice(i, 1);\n          }\n        };\n      }\n      var n = t("../utils/Utils");\n      var o = t("../collision/Broadphase");\n      e.exports = s;\n      s.prototype = new o();\n      s.prototype.constructor = s;\n      s.prototype.setWorld = function (t) {\n        this.axisList.length = 0;\n        n.appendArray(this.axisList, t.bodies);\n        t.off("addBody", this._addBodyHandler).off("removeBody", this._removeBodyHandler);\n        t.on("addBody", this._addBodyHandler).on("removeBody", this._removeBodyHandler);\n        this.world = t;\n      };\n      s.sortAxisList = function (t, e) {\n        e |= 0;\n        for (var i = 1, s = t.length; i < s; i++) {\n          for (var n = t[i], o = i - 1; o >= 0 && !(t[o].aabb.lowerBound[e] <= n.aabb.lowerBound[e]); o--) {\n            t[o + 1] = t[o];\n          }\n          t[o + 1] = n;\n        }\n        return t;\n      };\n      s.prototype.sortList = function () {\n        var t = this.axisList;\n        var e = this.axisIndex;\n        s.sortAxisList(t, e);\n      };\n      s.prototype.getCollisionPairs = function (t) {\n        var e = this.axisList;\n        var i = this.result;\n        var s = this.axisIndex;\n        i.length = 0;\n        for (var n = e.length; n--;) {\n          var a = e[n];\n          if (a.aabbNeedsUpdate) {\n            a.updateAABB();\n          }\n        }\n        this.sortList();\n        for (var r = 0, h = e.length | 0; r !== h; r++) {\n          var l = e[r];\n          for (var c = r + 1; c < h; c++) {\n            var u = e[c];\n            var d = u.aabb.lowerBound[s] <= l.aabb.upperBound[s];\n            if (!d) {\n              break;\n            }\n            if (o.canCollide(l, u) && this.boundingVolumeCheck(l, u)) {\n              i.push(l, u);\n            }\n          }\n        }\n        return i;\n      };\n      s.prototype.aabbQuery = function (t, e, i) {\n        i = i || [];\n        this.sortList();\n        var s = this.axisIndex;\n        var n = "x";\n        if (s === 1) {\n          n = "y";\n        }\n        if (s === 2) {\n          n = "z";\n        }\n        for (var o = this.axisList, a = e.lowerBound[n], r = e.upperBound[n], h = 0; h < o.length; h++) {\n          var l = o[h];\n          if (l.aabbNeedsUpdate) {\n            l.updateAABB();\n          }\n          if (l.aabb.overlaps(e)) {\n            i.push(l);\n          }\n        }\n        return i;\n      };\n    }, {\n      "../collision/Broadphase": 8,\n      "../utils/Utils": 57\n    }],\n    14: [function (t, e, i) {\n      function s(t, e, i, s) {\n        this.type = i;\n        s = n.defaults(s, {\n          collideConnected: true,\n          wakeUpBodies: true\n        });\n        this.equations = [];\n        this.bodyA = t;\n        this.bodyB = e;\n        this.collideConnected = s.collideConnected;\n        if (s.wakeUpBodies) {\n          if (t) {\n            t.wakeUp();\n          }\n          if (e) {\n            e.wakeUp();\n          }\n        }\n      }\n      e.exports = s;\n      var n = t("../utils/Utils");\n      s.prototype.update = function () {\n        throw new Error("method update() not implmemented in this Constraint subclass!");\n      };\n      s.DISTANCE = 1;\n      s.GEAR = 2;\n      s.LOCK = 3;\n      s.PRISMATIC = 4;\n      s.REVOLUTE = 5;\n      s.prototype.setStiffness = function (t) {\n        for (var e = this.equations, i = 0; i !== e.length; i++) {\n          var s = e[i];\n          s.stiffness = t;\n          s.needsUpdate = true;\n        }\n      };\n      s.prototype.setRelaxation = function (t) {\n        for (var e = this.equations, i = 0; i !== e.length; i++) {\n          var s = e[i];\n          s.relaxation = t;\n          s.needsUpdate = true;\n        }\n      };\n    }, {\n      "../utils/Utils": 57\n    }],\n    15: [function (t, e, i) {\n      function s(t, e, i) {\n        i = r.defaults(i, {\n          localAnchorA: [0, 0],\n          localAnchorB: [0, 0]\n        });\n        n.call(this, t, e, n.DISTANCE, i);\n        this.localAnchorA = a.fromValues(i.localAnchorA[0], i.localAnchorA[1]);\n        this.localAnchorB = a.fromValues(i.localAnchorB[0], i.localAnchorB[1]);\n        var s = this.localAnchorA;\n        var h = this.localAnchorB;\n        this.distance = 0;\n        if (typeof i.distance == "number") {\n          this.distance = i.distance;\n        } else {\n          var l = a.create();\n          var c = a.create();\n          var u = a.create();\n          a.rotate(l, s, t.angle);\n          a.rotate(c, h, e.angle);\n          a.add(u, e.position, c);\n          a.sub(u, u, l);\n          a.sub(u, u, t.position);\n          this.distance = a.length(u);\n        }\n        var d;\n        d = i.maxForce === undefined ? Number.MAX_VALUE : i.maxForce;\n        var p = new o(t, e, -d, d);\n        this.equations = [p];\n        this.maxForce = d;\n        var u = a.create();\n        var f = a.create();\n        var y = a.create();\n        var g = this;\n        p.computeGq = function () {\n          var t = this.bodyA;\n          var e = this.bodyB;\n          var i = t.position;\n          var n = e.position;\n          a.rotate(f, s, t.angle);\n          a.rotate(y, h, e.angle);\n          a.add(u, n, y);\n          a.sub(u, u, f);\n          a.sub(u, u, i);\n          return a.length(u) - g.distance;\n        };\n        this.setMaxForce(d);\n        this.upperLimitEnabled = false;\n        this.upperLimit = 1;\n        this.lowerLimitEnabled = false;\n        this.lowerLimit = 0;\n        this.position = 0;\n      }\n      var n = t("./Constraint");\n      var o = t("../equations/Equation");\n      var a = t("../math/vec2");\n      var r = t("../utils/Utils");\n      e.exports = s;\n      s.prototype = new n();\n      s.prototype.constructor = s;\n      var h = a.create();\n      var l = a.create();\n      var c = a.create();\n      s.prototype.update = function () {\n        var t = this.equations[0];\n        var e = this.bodyA;\n        var i = this.bodyB;\n        var s = this.distance;\n        var n = e.position;\n        var o = i.position;\n        var r = this.equations[0];\n        var u = t.G;\n        a.rotate(l, this.localAnchorA, e.angle);\n        a.rotate(c, this.localAnchorB, i.angle);\n        a.add(h, o, c);\n        a.sub(h, h, l);\n        a.sub(h, h, n);\n        this.position = a.length(h);\n        var d = false;\n        if (this.upperLimitEnabled && this.position > this.upperLimit) {\n          r.maxForce = 0;\n          r.minForce = -this.maxForce;\n          this.distance = this.upperLimit;\n          d = true;\n        }\n        if (this.lowerLimitEnabled && this.position < this.lowerLimit) {\n          r.maxForce = this.maxForce;\n          r.minForce = 0;\n          this.distance = this.lowerLimit;\n          d = true;\n        }\n        if ((this.lowerLimitEnabled || this.upperLimitEnabled) && !d) {\n          r.enabled = false;\n          return;\n        }\n        r.enabled = true;\n        a.normalize(h, h);\n        var p = a.crossLength(l, h);\n        var f = a.crossLength(c, h);\n        u[0] = -h[0];\n        u[1] = -h[1];\n        u[2] = -p;\n        u[3] = h[0];\n        u[4] = h[1];\n        u[5] = f;\n      };\n      s.prototype.setMaxForce = function (t) {\n        var e = this.equations[0];\n        e.minForce = -t;\n        e.maxForce = t;\n      };\n      s.prototype.getMaxForce = function () {\n        return this.equations[0].maxForce;\n      };\n    }, {\n      "../equations/Equation": 22,\n      "../math/vec2": 30,\n      "../utils/Utils": 57,\n      "./Constraint": 14\n    }],\n    16: [function (t, e, i) {\n      function s(t, e, i) {\n        i = i || {};\n        n.call(this, t, e, n.GEAR, i);\n        this.ratio = i.ratio !== undefined ? i.ratio : 1;\n        this.angle = i.angle !== undefined ? i.angle : e.angle - this.ratio * t.angle;\n        i.angle = this.angle;\n        i.ratio = this.ratio;\n        this.equations = [new a(t, e, i)];\n        if (i.maxTorque !== undefined) {\n          this.setMaxTorque(i.maxTorque);\n        }\n      }\n      var n = t("./Constraint");\n      var o = t("../equations/Equation");\n      var a = t("../equations/AngleLockEquation");\n      var r = t("../math/vec2");\n      e.exports = s;\n      s.prototype = new n();\n      s.prototype.constructor = s;\n      s.prototype.update = function () {\n        var t = this.equations[0];\n        if (t.ratio !== this.ratio) {\n          t.setRatio(this.ratio);\n        }\n        t.angle = this.angle;\n      };\n      s.prototype.setMaxTorque = function (t) {\n        this.equations[0].setMaxTorque(t);\n      };\n      s.prototype.getMaxTorque = function (t) {\n        return this.equations[0].maxForce;\n      };\n    }, {\n      "../equations/AngleLockEquation": 20,\n      "../equations/Equation": 22,\n      "../math/vec2": 30,\n      "./Constraint": 14\n    }],\n    17: [function (t, e, i) {\n      function s(t, e, i) {\n        i = i || {};\n        n.call(this, t, e, n.LOCK, i);\n        var s = i.maxForce === undefined ? Number.MAX_VALUE : i.maxForce;\n        var r = i.localAngleB || 0;\n        var h = new a(t, e, -s, s);\n        var l = new a(t, e, -s, s);\n        var c = new a(t, e, -s, s);\n        var u = o.create();\n        var d = o.create();\n        var p = this;\n        h.computeGq = function () {\n          o.rotate(u, p.localOffsetB, t.angle);\n          o.sub(d, e.position, t.position);\n          o.sub(d, d, u);\n          return d[0];\n        };\n        l.computeGq = function () {\n          o.rotate(u, p.localOffsetB, t.angle);\n          o.sub(d, e.position, t.position);\n          o.sub(d, d, u);\n          return d[1];\n        };\n        var f = o.create();\n        var y = o.create();\n        c.computeGq = function () {\n          o.rotate(f, p.localOffsetB, e.angle - p.localAngleB);\n          o.scale(f, f, -1);\n          o.sub(d, t.position, e.position);\n          o.add(d, d, f);\n          o.rotate(y, f, -Math.PI / 2);\n          o.normalize(y, y);\n          return o.dot(d, y);\n        };\n        this.localOffsetB = o.create();\n        if (i.localOffsetB) {\n          o.copy(this.localOffsetB, i.localOffsetB);\n        } else {\n          o.sub(this.localOffsetB, e.position, t.position);\n          o.rotate(this.localOffsetB, this.localOffsetB, -t.angle);\n        }\n        this.localAngleB = 0;\n        if (typeof i.localAngleB == "number") {\n          this.localAngleB = i.localAngleB;\n        } else {\n          this.localAngleB = e.angle - t.angle;\n        }\n        this.equations.push(h, l, c);\n        this.setMaxForce(s);\n      }\n      var n = t("./Constraint");\n      var o = t("../math/vec2");\n      var a = t("../equations/Equation");\n      e.exports = s;\n      s.prototype = new n();\n      s.prototype.constructor = s;\n      s.prototype.setMaxForce = function (t) {\n        var e = this.equations;\n        for (var i = 0; i < this.equations.length; i++) {\n          e[i].maxForce = t;\n          e[i].minForce = -t;\n        }\n      };\n      s.prototype.getMaxForce = function () {\n        return this.equations[0].maxForce;\n      };\n      var r = o.create();\n      var h = o.create();\n      var l = o.create();\n      var c = o.fromValues(1, 0);\n      var u = o.fromValues(0, 1);\n      s.prototype.update = function () {\n        var t = this.equations[0];\n        var e = this.equations[1];\n        var i = this.equations[2];\n        var s = this.bodyA;\n        var n = this.bodyB;\n        o.rotate(r, this.localOffsetB, s.angle);\n        o.rotate(h, this.localOffsetB, n.angle - this.localAngleB);\n        o.scale(h, h, -1);\n        o.rotate(l, h, Math.PI / 2);\n        o.normalize(l, l);\n        t.G[0] = -1;\n        t.G[1] = 0;\n        t.G[2] = -o.crossLength(r, c);\n        t.G[3] = 1;\n        e.G[0] = 0;\n        e.G[1] = -1;\n        e.G[2] = -o.crossLength(r, u);\n        e.G[4] = 1;\n        i.G[0] = -l[0];\n        i.G[1] = -l[1];\n        i.G[3] = l[0];\n        i.G[4] = l[1];\n        i.G[5] = o.crossLength(h, l);\n      };\n    }, {\n      "../equations/Equation": 22,\n      "../math/vec2": 30,\n      "./Constraint": 14\n    }],\n    18: [function (t, e, i) {\n      function s(t, e, i) {\n        i = i || {};\n        n.call(this, t, e, n.PRISMATIC, i);\n        var s = r.fromValues(0, 0);\n        var l = r.fromValues(1, 0);\n        var c = r.fromValues(0, 0);\n        if (i.localAnchorA) {\n          r.copy(s, i.localAnchorA);\n        }\n        if (i.localAxisA) {\n          r.copy(l, i.localAxisA);\n        }\n        if (i.localAnchorB) {\n          r.copy(c, i.localAnchorB);\n        }\n        this.localAnchorA = s;\n        this.localAnchorB = c;\n        this.localAxisA = l;\n        var u = this.maxForce = i.maxForce !== undefined ? i.maxForce : Number.MAX_VALUE;\n        var d = new a(t, e, -u, u);\n        var p = new r.create();\n        var f = new r.create();\n        var y = new r.create();\n        var g = new r.create();\n        d.computeGq = function () {\n          return r.dot(y, g);\n        };\n        d.updateJacobian = function () {\n          var i = this.G;\n          var n = t.position;\n          var o = e.position;\n          r.rotate(p, s, t.angle);\n          r.rotate(f, c, e.angle);\n          r.add(y, o, f);\n          r.sub(y, y, n);\n          r.sub(y, y, p);\n          r.rotate(g, l, t.angle + Math.PI / 2);\n          i[0] = -g[0];\n          i[1] = -g[1];\n          i[2] = -r.crossLength(p, g) + r.crossLength(g, y);\n          i[3] = g[0];\n          i[4] = g[1];\n          i[5] = r.crossLength(f, g);\n        };\n        this.equations.push(d);\n        if (!i.disableRotationalLock) {\n          var m = new h(t, e, -u, u);\n          this.equations.push(m);\n        }\n        this.position = 0;\n        this.velocity = 0;\n        this.lowerLimitEnabled = i.lowerLimit !== undefined;\n        this.upperLimitEnabled = i.upperLimit !== undefined;\n        this.lowerLimit = i.lowerLimit !== undefined ? i.lowerLimit : 0;\n        this.upperLimit = i.upperLimit !== undefined ? i.upperLimit : 1;\n        this.upperLimitEquation = new o(t, e);\n        this.lowerLimitEquation = new o(t, e);\n        this.upperLimitEquation.minForce = this.lowerLimitEquation.minForce = 0;\n        this.upperLimitEquation.maxForce = this.lowerLimitEquation.maxForce = u;\n        this.motorEquation = new a(t, e);\n        this.motorEnabled = false;\n        this.motorSpeed = 0;\n        var v = this;\n        var b = this.motorEquation;\n        var x = b.computeGW;\n        b.computeGq = function () {\n          return 0;\n        };\n        b.computeGW = function () {\n          var t = this.G;\n          var e = this.bodyA;\n          var i = this.bodyB;\n          var s = e.velocity;\n          var n = i.velocity;\n          var o = e.angularVelocity;\n          var a = i.angularVelocity;\n          return this.gmult(t, s, o, n, a) + v.motorSpeed;\n        };\n      }\n      var n = t("./Constraint");\n      var o = t("../equations/ContactEquation");\n      var a = t("../equations/Equation");\n      var r = t("../math/vec2");\n      var h = t("../equations/RotationalLockEquation");\n      e.exports = s;\n      s.prototype = new n();\n      s.prototype.constructor = s;\n      var l = r.create();\n      var c = r.create();\n      var u = r.create();\n      var d = r.create();\n      var p = r.create();\n      var f = r.create();\n      s.prototype.update = function () {\n        var t = this.equations;\n        var e = t[0];\n        var i = this.upperLimit;\n        var s = this.lowerLimit;\n        var n = this.upperLimitEquation;\n        var o = this.lowerLimitEquation;\n        var a = this.bodyA;\n        var h = this.bodyB;\n        var y = this.localAxisA;\n        var g = this.localAnchorA;\n        var m = this.localAnchorB;\n        e.updateJacobian();\n        r.rotate(l, y, a.angle);\n        r.rotate(d, g, a.angle);\n        r.add(c, d, a.position);\n        r.rotate(p, m, h.angle);\n        r.add(u, p, h.position);\n        var v = this.position = r.dot(u, l) - r.dot(c, l);\n        if (this.motorEnabled) {\n          var b = this.motorEquation.G;\n          b[0] = l[0];\n          b[1] = l[1];\n          b[2] = r.crossLength(l, p);\n          b[3] = -l[0];\n          b[4] = -l[1];\n          b[5] = -r.crossLength(l, d);\n        }\n        if (this.upperLimitEnabled && v > i) {\n          r.scale(n.normalA, l, -1);\n          r.sub(n.contactPointA, c, a.position);\n          r.sub(n.contactPointB, u, h.position);\n          r.scale(f, l, i);\n          r.add(n.contactPointA, n.contactPointA, f);\n          if (t.indexOf(n) === -1) {\n            t.push(n);\n          }\n        } else {\n          var x = t.indexOf(n);\n          if (x !== -1) {\n            t.splice(x, 1);\n          }\n        }\n        if (this.lowerLimitEnabled && v < s) {\n          r.scale(o.normalA, l, 1);\n          r.sub(o.contactPointA, c, a.position);\n          r.sub(o.contactPointB, u, h.position);\n          r.scale(f, l, s);\n          r.sub(o.contactPointB, o.contactPointB, f);\n          if (t.indexOf(o) === -1) {\n            t.push(o);\n          }\n        } else {\n          var x = t.indexOf(o);\n          if (x !== -1) {\n            t.splice(x, 1);\n          }\n        }\n      };\n      s.prototype.enableMotor = function () {\n        if (!this.motorEnabled) {\n          this.equations.push(this.motorEquation);\n          this.motorEnabled = true;\n        }\n      };\n      s.prototype.disableMotor = function () {\n        if (this.motorEnabled) {\n          var t = this.equations.indexOf(this.motorEquation);\n          this.equations.splice(t, 1);\n          this.motorEnabled = false;\n        }\n      };\n      s.prototype.setLimits = function (t, e) {\n        if (typeof t == "number") {\n          this.lowerLimit = t;\n          this.lowerLimitEnabled = true;\n        } else {\n          this.lowerLimit = t;\n          this.lowerLimitEnabled = false;\n        }\n        if (typeof e == "number") {\n          this.upperLimit = e;\n          this.upperLimitEnabled = true;\n        } else {\n          this.upperLimit = e;\n          this.upperLimitEnabled = false;\n        }\n      };\n    }, {\n      "../equations/ContactEquation": 21,\n      "../equations/Equation": 22,\n      "../equations/RotationalLockEquation": 24,\n      "../math/vec2": 30,\n      "./Constraint": 14\n    }],\n    19: [function (t, e, i) {\n      function s(t, e, i) {\n        i = i || {};\n        n.call(this, t, e, n.REVOLUTE, i);\n        var s = this.maxForce = i.maxForce !== undefined ? i.maxForce : Number.MAX_VALUE;\n        this.pivotA = h.create();\n        this.pivotB = h.create();\n        if (i.worldPivot) {\n          h.sub(this.pivotA, i.worldPivot, t.position);\n          h.sub(this.pivotB, i.worldPivot, e.position);\n          h.rotate(this.pivotA, this.pivotA, -t.angle);\n          h.rotate(this.pivotB, this.pivotB, -e.angle);\n        } else {\n          h.copy(this.pivotA, i.localPivotA);\n          h.copy(this.pivotB, i.localPivotB);\n        }\n        var f = this.equations = [new o(t, e, -s, s), new o(t, e, -s, s)];\n        var y = f[0];\n        var g = f[1];\n        var m = this;\n        y.computeGq = function () {\n          h.rotate(l, m.pivotA, t.angle);\n          h.rotate(c, m.pivotB, e.angle);\n          h.add(p, e.position, c);\n          h.sub(p, p, t.position);\n          h.sub(p, p, l);\n          return h.dot(p, u);\n        };\n        g.computeGq = function () {\n          h.rotate(l, m.pivotA, t.angle);\n          h.rotate(c, m.pivotB, e.angle);\n          h.add(p, e.position, c);\n          h.sub(p, p, t.position);\n          h.sub(p, p, l);\n          return h.dot(p, d);\n        };\n        g.minForce = y.minForce = -s;\n        g.maxForce = y.maxForce = s;\n        this.motorEquation = new a(t, e);\n        this.motorEnabled = false;\n        this.angle = 0;\n        this.lowerLimitEnabled = false;\n        this.upperLimitEnabled = false;\n        this.lowerLimit = 0;\n        this.upperLimit = 0;\n        this.upperLimitEquation = new r(t, e);\n        this.lowerLimitEquation = new r(t, e);\n        this.upperLimitEquation.minForce = 0;\n        this.lowerLimitEquation.maxForce = 0;\n      }\n      var n = t("./Constraint");\n      var o = t("../equations/Equation");\n      var a = t("../equations/RotationalVelocityEquation");\n      var r = t("../equations/RotationalLockEquation");\n      var h = t("../math/vec2");\n      e.exports = s;\n      var l = h.create();\n      var c = h.create();\n      var u = h.fromValues(1, 0);\n      var d = h.fromValues(0, 1);\n      var p = h.create();\n      s.prototype = new n();\n      s.prototype.constructor = s;\n      s.prototype.setLimits = function (t, e) {\n        if (typeof t == "number") {\n          this.lowerLimit = t;\n          this.lowerLimitEnabled = true;\n        } else {\n          this.lowerLimit = t;\n          this.lowerLimitEnabled = false;\n        }\n        if (typeof e == "number") {\n          this.upperLimit = e;\n          this.upperLimitEnabled = true;\n        } else {\n          this.upperLimit = e;\n          this.upperLimitEnabled = false;\n        }\n      };\n      s.prototype.update = function () {\n        var t = this.bodyA;\n        var e = this.bodyB;\n        var i = this.pivotA;\n        var s = this.pivotB;\n        var n = this.equations;\n        var o = n[0];\n        var a = n[1];\n        var r = n[0];\n        var p = n[1];\n        var f = this.upperLimit;\n        var y = this.lowerLimit;\n        var g = this.upperLimitEquation;\n        var m = this.lowerLimitEquation;\n        var v = this.angle = e.angle - t.angle;\n        if (this.upperLimitEnabled && v > f) {\n          g.angle = f;\n          if (n.indexOf(g) === -1) {\n            n.push(g);\n          }\n        } else {\n          var b = n.indexOf(g);\n          if (b !== -1) {\n            n.splice(b, 1);\n          }\n        }\n        if (this.lowerLimitEnabled && v < y) {\n          m.angle = y;\n          if (n.indexOf(m) === -1) {\n            n.push(m);\n          }\n        } else {\n          var b = n.indexOf(m);\n          if (b !== -1) {\n            n.splice(b, 1);\n          }\n        }\n        h.rotate(l, i, t.angle);\n        h.rotate(c, s, e.angle);\n        r.G[0] = -1;\n        r.G[1] = 0;\n        r.G[2] = -h.crossLength(l, u);\n        r.G[3] = 1;\n        r.G[4] = 0;\n        r.G[5] = h.crossLength(c, u);\n        p.G[0] = 0;\n        p.G[1] = -1;\n        p.G[2] = -h.crossLength(l, d);\n        p.G[3] = 0;\n        p.G[4] = 1;\n        p.G[5] = h.crossLength(c, d);\n      };\n      s.prototype.enableMotor = function () {\n        if (!this.motorEnabled) {\n          this.equations.push(this.motorEquation);\n          this.motorEnabled = true;\n        }\n      };\n      s.prototype.disableMotor = function () {\n        if (this.motorEnabled) {\n          var t = this.equations.indexOf(this.motorEquation);\n          this.equations.splice(t, 1);\n          this.motorEnabled = false;\n        }\n      };\n      s.prototype.motorIsEnabled = function () {\n        return !!this.motorEnabled;\n      };\n      s.prototype.setMotorSpeed = function (t) {\n        if (this.motorEnabled) {\n          var e = this.equations.indexOf(this.motorEquation);\n          this.equations[e].relativeVelocity = t;\n        }\n      };\n      s.prototype.getMotorSpeed = function () {\n        return !!this.motorEnabled && this.motorEquation.relativeVelocity;\n      };\n    }, {\n      "../equations/Equation": 22,\n      "../equations/RotationalLockEquation": 24,\n      "../equations/RotationalVelocityEquation": 25,\n      "../math/vec2": 30,\n      "./Constraint": 14\n    }],\n    20: [function (t, e, i) {\n      function s(t, e, i) {\n        i = i || {};\n        n.call(this, t, e, -Number.MAX_VALUE, Number.MAX_VALUE);\n        this.angle = i.angle || 0;\n        this.ratio = typeof i.ratio == "number" ? i.ratio : 1;\n        this.setRatio(this.ratio);\n      }\n      var n = t("./Equation");\n      var o = t("../math/vec2");\n      e.exports = s;\n      s.prototype = new n();\n      s.prototype.constructor = s;\n      s.prototype.computeGq = function () {\n        return this.ratio * this.bodyA.angle - this.bodyB.angle + this.angle;\n      };\n      s.prototype.setRatio = function (t) {\n        var e = this.G;\n        e[2] = t;\n        e[5] = -1;\n        this.ratio = t;\n      };\n      s.prototype.setMaxTorque = function (t) {\n        this.maxForce = t;\n        this.minForce = -t;\n      };\n    }, {\n      "../math/vec2": 30,\n      "./Equation": 22\n    }],\n    21: [function (t, e, i) {\n      function s(t, e) {\n        n.call(this, t, e, 0, Number.MAX_VALUE);\n        this.contactPointA = o.create();\n        this.penetrationVec = o.create();\n        this.contactPointB = o.create();\n        this.normalA = o.create();\n        this.restitution = 0;\n        this.firstImpact = false;\n        this.shapeA = null;\n        this.shapeB = null;\n      }\n      var n = t("./Equation");\n      var o = t("../math/vec2");\n      e.exports = s;\n      s.prototype = new n();\n      s.prototype.constructor = s;\n      s.prototype.computeB = function (t, e, i) {\n        var s = this.bodyA;\n        var n = this.bodyB;\n        var a = this.contactPointA;\n        var r = this.contactPointB;\n        var h = s.position;\n        var l = n.position;\n        var c = this.penetrationVec;\n        var u = this.normalA;\n        var d = this.G;\n        var p = o.crossLength(a, u);\n        var f = o.crossLength(r, u);\n        d[0] = -u[0];\n        d[1] = -u[1];\n        d[2] = -p;\n        d[3] = u[0];\n        d[4] = u[1];\n        d[5] = f;\n        o.add(c, l, r);\n        o.sub(c, c, h);\n        o.sub(c, c, a);\n        var y;\n        var g;\n        if (this.firstImpact && this.restitution !== 0) {\n          g = 0;\n          y = 1 / e * (1 + this.restitution) * this.computeGW();\n        } else {\n          g = o.dot(u, c) + this.offset;\n          y = this.computeGW();\n        }\n        return -g * t - y * e - i * this.computeGiMf();\n      };\n    }, {\n      "../math/vec2": 30,\n      "./Equation": 22\n    }],\n    22: [function (t, e, i) {\n      function s(t, e, i, n) {\n        this.minForce = i === undefined ? -Number.MAX_VALUE : i;\n        this.maxForce = n === undefined ? Number.MAX_VALUE : n;\n        this.bodyA = t;\n        this.bodyB = e;\n        this.stiffness = s.DEFAULT_STIFFNESS;\n        this.relaxation = s.DEFAULT_RELAXATION;\n        this.G = new o.ARRAY_TYPE(6);\n        for (var a = 0; a < 6; a++) {\n          this.G[a] = 0;\n        }\n        this.offset = 0;\n        this.a = 0;\n        this.b = 0;\n        this.epsilon = 0;\n        this.timeStep = 1 / 60;\n        this.needsUpdate = true;\n        this.multiplier = 0;\n        this.relativeVelocity = 0;\n        this.enabled = true;\n      }\n      e.exports = s;\n      var n = t("../math/vec2");\n      var o = t("../utils/Utils");\n      var a = t("../objects/Body");\n      s.prototype.constructor = s;\n      s.DEFAULT_STIFFNESS = 1000000;\n      s.DEFAULT_RELAXATION = 4;\n      s.prototype.update = function () {\n        var t = this.stiffness;\n        var e = this.relaxation;\n        var i = this.timeStep;\n        this.a = 4 / (i * (1 + e * 4));\n        this.b = e * 4 / (1 + e * 4);\n        this.epsilon = 4 / (i * i * t * (1 + e * 4));\n        this.needsUpdate = false;\n      };\n      s.prototype.gmult = function (t, e, i, s, n) {\n        return t[0] * e[0] + t[1] * e[1] + t[2] * i + t[3] * s[0] + t[4] * s[1] + t[5] * n;\n      };\n      s.prototype.computeB = function (t, e, i) {\n        var s = this.computeGW();\n        return -this.computeGq() * t - s * e - this.computeGiMf() * i;\n      };\n      var r = n.create();\n      var h = n.create();\n      s.prototype.computeGq = function () {\n        var t = this.G;\n        var e = this.bodyA;\n        var i = this.bodyB;\n        var s = e.position;\n        var n = i.position;\n        var o = e.angle;\n        var a = i.angle;\n        return this.gmult(t, r, o, h, a) + this.offset;\n      };\n      s.prototype.computeGW = function () {\n        var t = this.G;\n        var e = this.bodyA;\n        var i = this.bodyB;\n        var s = e.velocity;\n        var n = i.velocity;\n        var o = e.angularVelocity;\n        var a = i.angularVelocity;\n        return this.gmult(t, s, o, n, a) + this.relativeVelocity;\n      };\n      s.prototype.computeGWlambda = function () {\n        var t = this.G;\n        var e = this.bodyA;\n        var i = this.bodyB;\n        var s = e.vlambda;\n        var n = i.vlambda;\n        var o = e.wlambda;\n        var a = i.wlambda;\n        return this.gmult(t, s, o, n, a);\n      };\n      var l = n.create();\n      var c = n.create();\n      s.prototype.computeGiMf = function () {\n        var t = this.bodyA;\n        var e = this.bodyB;\n        var i = t.force;\n        var s = t.angularForce;\n        var o = e.force;\n        var a = e.angularForce;\n        var r = t.invMassSolve;\n        var h = e.invMassSolve;\n        var u = t.invInertiaSolve;\n        var d = e.invInertiaSolve;\n        var p = this.G;\n        n.scale(l, i, r);\n        n.multiply(l, t.massMultiplier, l);\n        n.scale(c, o, h);\n        n.multiply(c, e.massMultiplier, c);\n        return this.gmult(p, l, s * u, c, a * d);\n      };\n      s.prototype.computeGiMGt = function () {\n        var t = this.bodyA;\n        var e = this.bodyB;\n        var i = t.invMassSolve;\n        var s = e.invMassSolve;\n        var n = t.invInertiaSolve;\n        var o = e.invInertiaSolve;\n        var a = this.G;\n        return a[0] * a[0] * i * t.massMultiplier[0] + a[1] * a[1] * i * t.massMultiplier[1] + a[2] * a[2] * n + a[3] * a[3] * s * e.massMultiplier[0] + a[4] * a[4] * s * e.massMultiplier[1] + a[5] * a[5] * o;\n      };\n      var u = n.create();\n      var d = n.create();\n      var p = n.create();\n      var f = n.create();\n      var y = n.create();\n      var g = n.create();\n      s.prototype.addToWlambda = function (t) {\n        var e = this.bodyA;\n        var i = this.bodyB;\n        var s = u;\n        var o = d;\n        var a = p;\n        var r = f;\n        var h = y;\n        var l = e.invMassSolve;\n        var c = i.invMassSolve;\n        var m = e.invInertiaSolve;\n        var v = i.invInertiaSolve;\n        var b = g;\n        var x = this.G;\n        o[0] = x[0];\n        o[1] = x[1];\n        a[0] = x[3];\n        a[1] = x[4];\n        n.scale(s, o, l * t);\n        n.multiply(s, s, e.massMultiplier);\n        n.add(e.vlambda, e.vlambda, s);\n        e.wlambda += m * x[2] * t;\n        n.scale(s, a, c * t);\n        n.multiply(s, s, i.massMultiplier);\n        n.add(i.vlambda, i.vlambda, s);\n        i.wlambda += v * x[5] * t;\n      };\n      s.prototype.computeInvC = function (t) {\n        return 1 / (this.computeGiMGt() + t);\n      };\n    }, {\n      "../math/vec2": 30,\n      "../objects/Body": 31,\n      "../utils/Utils": 57\n    }],\n    23: [function (t, e, i) {\n      function s(t, e, i) {\n        o.call(this, t, e, -i, i);\n        this.contactPointA = n.create();\n        this.contactPointB = n.create();\n        this.t = n.create();\n        this.contactEquations = [];\n        this.shapeA = null;\n        this.shapeB = null;\n        this.frictionCoefficient = 0.3;\n      }\n      var n = t("../math/vec2");\n      var o = t("./Equation");\n      var a = t("../utils/Utils");\n      e.exports = s;\n      s.prototype = new o();\n      s.prototype.constructor = s;\n      s.prototype.setSlipForce = function (t) {\n        this.maxForce = t;\n        this.minForce = -t;\n      };\n      s.prototype.getSlipForce = function () {\n        return this.maxForce;\n      };\n      s.prototype.computeB = function (t, e, i) {\n        var s = this.bodyA;\n        var o = this.bodyB;\n        var a = this.contactPointA;\n        var r = this.contactPointB;\n        var h = this.t;\n        var l = this.G;\n        l[0] = -h[0];\n        l[1] = -h[1];\n        l[2] = -n.crossLength(a, h);\n        l[3] = h[0];\n        l[4] = h[1];\n        l[5] = n.crossLength(r, h);\n        return -this.computeGW() * e - i * this.computeGiMf();\n      };\n    }, {\n      "../math/vec2": 30,\n      "../utils/Utils": 57,\n      "./Equation": 22\n    }],\n    24: [function (t, e, i) {\n      function s(t, e, i) {\n        i = i || {};\n        n.call(this, t, e, -Number.MAX_VALUE, Number.MAX_VALUE);\n        this.angle = i.angle || 0;\n        var s = this.G;\n        s[2] = 1;\n        s[5] = -1;\n      }\n      var n = t("./Equation");\n      var o = t("../math/vec2");\n      e.exports = s;\n      s.prototype = new n();\n      s.prototype.constructor = s;\n      var a = o.create();\n      var r = o.create();\n      var h = o.fromValues(1, 0);\n      var l = o.fromValues(0, 1);\n      s.prototype.computeGq = function () {\n        o.rotate(a, h, this.bodyA.angle + this.angle);\n        o.rotate(r, l, this.bodyB.angle);\n        return o.dot(a, r);\n      };\n    }, {\n      "../math/vec2": 30,\n      "./Equation": 22\n    }],\n    25: [function (t, e, i) {\n      function s(t, e) {\n        n.call(this, t, e, -Number.MAX_VALUE, Number.MAX_VALUE);\n        this.relativeVelocity = 1;\n        this.ratio = 1;\n      }\n      var n = t("./Equation");\n      var o = t("../math/vec2");\n      e.exports = s;\n      s.prototype = new n();\n      s.prototype.constructor = s;\n      s.prototype.computeB = function (t, e, i) {\n        var s = this.G;\n        s[2] = -1;\n        s[5] = this.ratio;\n        var n = this.computeGiMf();\n        return -this.computeGW() * e - i * n;\n      };\n    }, {\n      "../math/vec2": 30,\n      "./Equation": 22\n    }],\n    26: [function (t, e, i) {\n      function s() {}\n      e.exports = s;\n      s.prototype = {\n        constructor: s,\n        on: function on(t, e, i) {\n          e.context = i || this;\n          if (this._listeners === undefined) {\n            this._listeners = {};\n          }\n          var s = this._listeners;\n          if (s[t] === undefined) {\n            s[t] = [];\n          }\n          if (s[t].indexOf(e) === -1) {\n            s[t].push(e);\n          }\n          return this;\n        },\n        has: function has(t, e) {\n          if (this._listeners === undefined) {\n            return false;\n          }\n          var i = this._listeners;\n          if (e) {\n            if (i[t] !== undefined && i[t].indexOf(e) !== -1) {\n              return true;\n            }\n          } else if (i[t] !== undefined) {\n            return true;\n          }\n          return false;\n        },\n        off: function off(t, e) {\n          if (this._listeners === undefined) {\n            return this;\n          }\n          var i = this._listeners;\n          var s = i[t].indexOf(e);\n          if (s !== -1) {\n            i[t].splice(s, 1);\n          }\n          return this;\n        },\n        emit: function emit(t) {\n          if (this._listeners === undefined) {\n            return this;\n          }\n          var e = this._listeners;\n          var i = e[t.type];\n          if (i !== undefined) {\n            t.target = this;\n            for (var s = 0, n = i.length; s < n; s++) {\n              var o = i[s];\n              o.call(o.context, t);\n            }\n          }\n          return this;\n        }\n      };\n    }, {}],\n    27: [function (t, e, i) {\n      function s(t, e, i) {\n        i = i || {};\n        if (!(t instanceof n) || !(e instanceof n)) {\n          throw new Error("First two arguments must be Material instances.");\n        }\n        this.id = s.idCounter++;\n        this.materialA = t;\n        this.materialB = e;\n        this.friction = i.friction !== undefined ? Number(i.friction) : 0.3;\n        this.restitution = i.restitution !== undefined ? Number(i.restitution) : 0;\n        this.stiffness = i.stiffness !== undefined ? Number(i.stiffness) : o.DEFAULT_STIFFNESS;\n        this.relaxation = i.relaxation !== undefined ? Number(i.relaxation) : o.DEFAULT_RELAXATION;\n        this.frictionStiffness = i.frictionStiffness !== undefined ? Number(i.frictionStiffness) : o.DEFAULT_STIFFNESS;\n        this.frictionRelaxation = i.frictionRelaxation !== undefined ? Number(i.frictionRelaxation) : o.DEFAULT_RELAXATION;\n        this.surfaceVelocity = i.surfaceVelocity !== undefined ? Number(i.surfaceVelocity) : 0;\n        this.contactSkinSize = 0.005;\n      }\n      var n = t("./Material");\n      var o = t("../equations/Equation");\n      e.exports = s;\n      s.idCounter = 0;\n    }, {\n      "../equations/Equation": 22,\n      "./Material": 28\n    }],\n    28: [function (t, e, i) {\n      function s(t) {\n        this.id = t || s.idCounter++;\n      }\n      e.exports = s;\n      s.idCounter = 0;\n    }, {}],\n    29: [function (t, e, i) {\n      var s = {\n        GetArea: function GetArea(t) {\n          if (t.length < 6) {\n            return 0;\n          }\n          for (var e = t.length - 2, i = 0, s = 0; s < e; s += 2) {\n            i += (t[s + 2] - t[s]) * (t[s + 1] + t[s + 3]);\n          }\n          return -(i += (t[0] - t[e]) * (t[e + 1] + t[1])) * 0.5;\n        }\n      };\n      s.Triangulate = function (t) {\n        var e = t.length >> 1;\n        if (e < 3) {\n          return [];\n        }\n        var i = [];\n        var n = [];\n        for (var o = 0; o < e; o++) {\n          n.push(o);\n        }\n        var o = 0;\n        for (var a = e; a > 3;) {\n          var r = n[(o + 0) % a];\n          var h = n[(o + 1) % a];\n          var l = n[(o + 2) % a];\n          var c = t[r * 2];\n          var u = t[r * 2 + 1];\n          var d = t[h * 2];\n          var p = t[h * 2 + 1];\n          var f = t[l * 2];\n          var y = t[l * 2 + 1];\n          var g = false;\n          if (s._convex(c, u, d, p, f, y)) {\n            g = true;\n            for (var m = 0; m < a; m++) {\n              var v = n[m];\n              if (v != r && v != h && v != l && s._PointInTriangle(t[v * 2], t[v * 2 + 1], c, u, d, p, f, y)) {\n                g = false;\n                break;\n              }\n            }\n          }\n          if (g) {\n            i.push(r, h, l);\n            n.splice((o + 1) % a, 1);\n            a--;\n            o = 0;\n          } else if (o++ > a * 3) {\n            break;\n          }\n        }\n        i.push(n[0], n[1], n[2]);\n        return i;\n      };\n      s._PointInTriangle = function (t, e, i, s, n, o, a, r) {\n        var h = a - i;\n        var l = r - s;\n        var c = n - i;\n        var u = o - s;\n        var d = t - i;\n        var p = e - s;\n        var f = h * h + l * l;\n        var y = h * c + l * u;\n        var g = h * d + l * p;\n        var m = c * c + u * u;\n        var v = c * d + u * p;\n        var b = 1 / (f * m - y * y);\n        var x = (m * g - y * v) * b;\n        var _ = (f * v - y * g) * b;\n        return x >= 0 && _ >= 0 && x + _ < 1;\n      };\n      s._convex = function (t, e, i, s, n, o) {\n        return (e - s) * (n - i) + (i - t) * (o - s) >= 0;\n      };\n      e.exports = s;\n    }, {}],\n    30: [function (t, e, i) {\n      var s = e.exports = {};\n      var n = t("../utils/Utils");\n      s.crossLength = function (t, e) {\n        return t[0] * e[1] - t[1] * e[0];\n      };\n      s.crossVZ = function (t, e, i) {\n        s.rotate(t, e, -Math.PI / 2);\n        s.scale(t, t, i);\n        return t;\n      };\n      s.crossZV = function (t, e, i) {\n        s.rotate(t, i, Math.PI / 2);\n        s.scale(t, t, e);\n        return t;\n      };\n      s.rotate = function (t, e, i) {\n        if (i !== 0) {\n          var s = Math.cos(i);\n          var n = Math.sin(i);\n          var o = e[0];\n          var a = e[1];\n          t[0] = s * o - n * a;\n          t[1] = n * o + s * a;\n        } else {\n          t[0] = e[0];\n          t[1] = e[1];\n        }\n      };\n      s.rotate90cw = function (t, e) {\n        var i = e[0];\n        var s = e[1];\n        t[0] = s;\n        t[1] = -i;\n      };\n      s.toLocalFrame = function (t, e, i, n) {\n        s.copy(t, e);\n        s.sub(t, t, i);\n        s.rotate(t, t, -n);\n      };\n      s.toGlobalFrame = function (t, e, i, n) {\n        s.copy(t, e);\n        s.rotate(t, t, n);\n        s.add(t, t, i);\n      };\n      s.vectorToLocalFrame = function (t, e, i) {\n        s.rotate(t, e, -i);\n      };\n      s.vectorToGlobalFrame = function (t, e, i) {\n        s.rotate(t, e, i);\n      };\n      s.centroid = function (t, e, i, n) {\n        s.add(t, e, i);\n        s.add(t, t, n);\n        s.scale(t, t, 1 / 3);\n        return t;\n      };\n      s.create = function () {\n        var t = new n.ARRAY_TYPE(2);\n        t[0] = 0;\n        t[1] = 0;\n        return t;\n      };\n      s.clone = function (t) {\n        var e = new n.ARRAY_TYPE(2);\n        e[0] = t[0];\n        e[1] = t[1];\n        return e;\n      };\n      s.fromValues = function (t, e) {\n        var i = new n.ARRAY_TYPE(2);\n        i[0] = t;\n        i[1] = e;\n        return i;\n      };\n      s.copy = function (t, e) {\n        t[0] = e[0];\n        t[1] = e[1];\n        return t;\n      };\n      s.set = function (t, e, i) {\n        t[0] = e;\n        t[1] = i;\n        return t;\n      };\n      s.add = function (t, e, i) {\n        t[0] = e[0] + i[0];\n        t[1] = e[1] + i[1];\n        return t;\n      };\n      s.subtract = function (t, e, i) {\n        t[0] = e[0] - i[0];\n        t[1] = e[1] - i[1];\n        return t;\n      };\n      s.sub = s.subtract;\n      s.multiply = function (t, e, i) {\n        t[0] = e[0] * i[0];\n        t[1] = e[1] * i[1];\n        return t;\n      };\n      s.mul = s.multiply;\n      s.divide = function (t, e, i) {\n        t[0] = e[0] / i[0];\n        t[1] = e[1] / i[1];\n        return t;\n      };\n      s.div = s.divide;\n      s.scale = function (t, e, i) {\n        t[0] = e[0] * i;\n        t[1] = e[1] * i;\n        return t;\n      };\n      s.distance = function (t, e) {\n        var i = e[0] - t[0];\n        var s = e[1] - t[1];\n        return Math.sqrt(i * i + s * s);\n      };\n      s.dist = s.distance;\n      s.squaredDistance = function (t, e) {\n        var i = e[0] - t[0];\n        var s = e[1] - t[1];\n        return i * i + s * s;\n      };\n      s.sqrDist = s.squaredDistance;\n      s.length = function (t) {\n        var e = t[0];\n        var i = t[1];\n        return Math.sqrt(e * e + i * i);\n      };\n      s.len = s.length;\n      s.squaredLength = function (t) {\n        var e = t[0];\n        var i = t[1];\n        return e * e + i * i;\n      };\n      s.sqrLen = s.squaredLength;\n      s.negate = function (t, e) {\n        t[0] = -e[0];\n        t[1] = -e[1];\n        return t;\n      };\n      s.normalize = function (t, e) {\n        var i = e[0];\n        var s = e[1];\n        var n = i * i + s * s;\n        if (n > 0) {\n          n = 1 / Math.sqrt(n);\n          t[0] = e[0] * n;\n          t[1] = e[1] * n;\n        }\n        return t;\n      };\n      s.dot = function (t, e) {\n        return t[0] * e[0] + t[1] * e[1];\n      };\n      s.str = function (t) {\n        return "vec2(" + t[0] + ", " + t[1] + ")";\n      };\n      s.lerp = function (t, e, i, s) {\n        var n = e[0];\n        var o = e[1];\n        t[0] = n + s * (i[0] - n);\n        t[1] = o + s * (i[1] - o);\n        return t;\n      };\n      s.reflect = function (t, e, i) {\n        var s = e[0] * i[0] + e[1] * i[1];\n        t[0] = e[0] - i[0] * 2 * s;\n        t[1] = e[1] - i[1] * 2 * s;\n      };\n      s.getLineSegmentsIntersection = function (t, e, i, n, o) {\n        var a = s.getLineSegmentsIntersectionFraction(e, i, n, o);\n        return !(a < 0) && (t[0] = e[0] + a * (i[0] - e[0]), t[1] = e[1] + a * (i[1] - e[1]), true);\n      };\n      s.getLineSegmentsIntersectionFraction = function (t, e, i, s) {\n        var n = e[0] - t[0];\n        var o = e[1] - t[1];\n        var a = s[0] - i[0];\n        var r = s[1] - i[1];\n        var h;\n        var l;\n        h = (-o * (t[0] - i[0]) + n * (t[1] - i[1])) / (-a * o + n * r);\n        l = (a * (t[1] - i[1]) - r * (t[0] - i[0])) / (-a * o + n * r);\n        if (h >= 0 && h <= 1 && l >= 0 && l <= 1) {\n          return l;\n        } else {\n          return -1;\n        }\n      };\n    }, {\n      "../utils/Utils": 57\n    }],\n    31: [function (t, e, i) {\n      function s(t) {\n        t = t || {};\n        c.call(this);\n        this.id = t.id || ++s._idCounter;\n        this.world = null;\n        this.shapes = [];\n        this.mass = t.mass || 0;\n        this.invMass = 0;\n        this.inertia = 0;\n        this.invInertia = 0;\n        this.invMassSolve = 0;\n        this.invInertiaSolve = 0;\n        this.fixedRotation = !!t.fixedRotation;\n        this.fixedX = !!t.fixedX;\n        this.fixedY = !!t.fixedY;\n        this.massMultiplier = n.create();\n        this.position = n.fromValues(0, 0);\n        if (t.position) {\n          n.copy(this.position, t.position);\n        }\n        this.interpolatedPosition = n.fromValues(0, 0);\n        this.interpolatedAngle = 0;\n        this.previousPosition = n.fromValues(0, 0);\n        this.previousAngle = 0;\n        this.velocity = n.fromValues(0, 0);\n        if (t.velocity) {\n          n.copy(this.velocity, t.velocity);\n        }\n        this.vlambda = n.fromValues(0, 0);\n        this.wlambda = 0;\n        this.angle = t.angle || 0;\n        this.angularVelocity = t.angularVelocity || 0;\n        this.force = n.create();\n        if (t.force) {\n          n.copy(this.force, t.force);\n        }\n        this.angularForce = t.angularForce || 0;\n        this.damping = typeof t.damping == "number" ? t.damping : 0.1;\n        this.angularDamping = typeof t.angularDamping == "number" ? t.angularDamping : 0.1;\n        this.type = s.STATIC;\n        if (t.type !== undefined) {\n          this.type = t.type;\n        } else if (t.mass) {\n          this.type = s.DYNAMIC;\n        } else {\n          this.type = s.STATIC;\n        }\n        this.boundingRadius = 0;\n        this.aabb = new l();\n        this.aabbNeedsUpdate = true;\n        this.allowSleep = t.allowSleep === undefined || t.allowSleep;\n        this.wantsToSleep = false;\n        this.sleepState = s.AWAKE;\n        this.sleepSpeedLimit = t.sleepSpeedLimit !== undefined ? t.sleepSpeedLimit : 0.2;\n        this.sleepTimeLimit = t.sleepTimeLimit !== undefined ? t.sleepTimeLimit : 1;\n        this.gravityScale = t.gravityScale !== undefined ? t.gravityScale : 1;\n        this.collisionResponse = t.collisionResponse === undefined || t.collisionResponse;\n        this.idleTime = 0;\n        this.timeLastSleepy = 0;\n        this.ccdSpeedThreshold = t.ccdSpeedThreshold !== undefined ? t.ccdSpeedThreshold : -1;\n        this.ccdIterations = t.ccdIterations !== undefined ? t.ccdIterations : 10;\n        this.concavePath = null;\n        this._wakeUpAfterNarrowphase = false;\n        this.updateMassProperties();\n      }\n      var n = t("../math/vec2");\n      var o = t("poly-decomp");\n      var a = t("../shapes/Convex");\n      var r = t("../collision/RaycastResult");\n      var h = t("../collision/Ray");\n      var l = t("../collision/AABB");\n      var c = t("../events/EventEmitter");\n      e.exports = s;\n      s.prototype = new c();\n      s.prototype.constructor = s;\n      s._idCounter = 0;\n      s.prototype.updateSolveMassProperties = function () {\n        if (this.sleepState === s.SLEEPING || this.type === s.KINEMATIC) {\n          this.invMassSolve = 0;\n          this.invInertiaSolve = 0;\n        } else {\n          this.invMassSolve = this.invMass;\n          this.invInertiaSolve = this.invInertia;\n        }\n      };\n      s.prototype.setDensity = function (t) {\n        var e = this.getArea();\n        this.mass = e * t;\n        this.updateMassProperties();\n      };\n      s.prototype.getArea = function () {\n        var t = 0;\n        for (var e = 0; e < this.shapes.length; e++) {\n          t += this.shapes[e].area;\n        }\n        return t;\n      };\n      s.prototype.getAABB = function () {\n        if (this.aabbNeedsUpdate) {\n          this.updateAABB();\n        }\n        return this.aabb;\n      };\n      var u = new l();\n      var d = n.create();\n      s.prototype.updateAABB = function () {\n        var t = this.shapes;\n        for (var e = t.length, i = d, s = this.angle, o = 0; o !== e; o++) {\n          var a = t[o];\n          var r = a.angle + s;\n          n.rotate(i, a.position, s);\n          n.add(i, i, this.position);\n          a.computeAABB(u, i, r);\n          if (o === 0) {\n            this.aabb.copy(u);\n          } else {\n            this.aabb.extend(u);\n          }\n        }\n        this.aabbNeedsUpdate = false;\n      };\n      s.prototype.updateBoundingRadius = function () {\n        var t = this.shapes;\n        for (var e = t.length, i = 0, s = 0; s !== e; s++) {\n          var o = t[s];\n          var a = n.length(o.position);\n          var r = o.boundingRadius;\n          if (a + r > i) {\n            i = a + r;\n          }\n        }\n        this.boundingRadius = i;\n      };\n      s.prototype.addShape = function (t, e, i) {\n        if (t.body) {\n          throw new Error("A shape can only be added to one body.");\n        }\n        t.body = this;\n        if (e) {\n          n.copy(t.position, e);\n        } else {\n          n.set(t.position, 0, 0);\n        }\n        t.angle = i || 0;\n        this.shapes.push(t);\n        this.updateMassProperties();\n        this.updateBoundingRadius();\n        this.aabbNeedsUpdate = true;\n      };\n      s.prototype.removeShape = function (t) {\n        var e = this.shapes.indexOf(t);\n        return e !== -1 && (this.shapes.splice(e, 1), this.aabbNeedsUpdate = true, t.body = null, true);\n      };\n      s.prototype.updateMassProperties = function () {\n        if (this.type === s.STATIC || this.type === s.KINEMATIC) {\n          this.mass = Number.MAX_VALUE;\n          this.invMass = 0;\n          this.inertia = Number.MAX_VALUE;\n          this.invInertia = 0;\n        } else {\n          var t = this.shapes;\n          var e = t.length;\n          var i = this.mass / e;\n          var o = 0;\n          if (this.fixedRotation) {\n            this.inertia = Number.MAX_VALUE;\n            this.invInertia = 0;\n          } else {\n            for (var a = 0; a < e; a++) {\n              var r = t[a];\n              var h = n.squaredLength(r.position);\n              o += r.computeMomentOfInertia(i) + i * h;\n            }\n            this.inertia = o;\n            this.invInertia = o > 0 ? 1 / o : 0;\n          }\n          this.invMass = 1 / this.mass;\n          n.set(this.massMultiplier, this.fixedX ? 0 : 1, this.fixedY ? 0 : 1);\n        }\n      };\n      var p = n.create();\n      s.prototype.applyForce = function (t, e) {\n        n.add(this.force, this.force, t);\n        if (e) {\n          var i = n.crossLength(e, t);\n          this.angularForce += i;\n        }\n      };\n      var f = n.create();\n      var y = n.create();\n      var g = n.create();\n      s.prototype.applyForceLocal = function (t, e) {\n        e = e || g;\n        var i = f;\n        var s = y;\n        this.vectorToWorldFrame(i, t);\n        this.vectorToWorldFrame(s, e);\n        this.applyForce(i, s);\n      };\n      var m = n.create();\n      s.prototype.applyImpulse = function (t, e) {\n        if (this.type === s.DYNAMIC) {\n          var i = m;\n          n.scale(i, t, this.invMass);\n          n.multiply(i, this.massMultiplier, i);\n          n.add(this.velocity, i, this.velocity);\n          if (e) {\n            var o = n.crossLength(e, t);\n            o *= this.invInertia;\n            this.angularVelocity += o;\n          }\n        }\n      };\n      var v = n.create();\n      var b = n.create();\n      var x = n.create();\n      s.prototype.applyImpulseLocal = function (t, e) {\n        e = e || x;\n        var i = v;\n        var s = b;\n        this.vectorToWorldFrame(i, t);\n        this.vectorToWorldFrame(s, e);\n        this.applyImpulse(i, s);\n      };\n      s.prototype.toLocalFrame = function (t, e) {\n        n.toLocalFrame(t, e, this.position, this.angle);\n      };\n      s.prototype.toWorldFrame = function (t, e) {\n        n.toGlobalFrame(t, e, this.position, this.angle);\n      };\n      s.prototype.vectorToLocalFrame = function (t, e) {\n        n.vectorToLocalFrame(t, e, this.angle);\n      };\n      s.prototype.vectorToWorldFrame = function (t, e) {\n        n.vectorToGlobalFrame(t, e, this.angle);\n      };\n      s.prototype.fromPolygon = function (t, e) {\n        e = e || {};\n        for (var i = this.shapes.length; i >= 0; --i) {\n          this.removeShape(this.shapes[i]);\n        }\n        var s = new o.Polygon();\n        s.vertices = t;\n        s.makeCCW();\n        if (typeof e.removeCollinearPoints == "number") {\n          s.removeCollinearPoints(e.removeCollinearPoints);\n        }\n        if (e.skipSimpleCheck === undefined && !s.isSimple()) {\n          return false;\n        }\n        this.concavePath = s.vertices.slice(0);\n        for (var i = 0; i < this.concavePath.length; i++) {\n          var r = [0, 0];\n          n.copy(r, this.concavePath[i]);\n          this.concavePath[i] = r;\n        }\n        var h;\n        h = e.optimalDecomp ? s.decomp() : s.quickDecomp();\n        var l = n.create();\n        for (var i = 0; i !== h.length; i++) {\n          for (var c = new a({\n              vertices: h[i].vertices\n            }), u = 0; u !== c.vertices.length; u++) {\n            var r = c.vertices[u];\n            n.sub(r, r, c.centerOfMass);\n          }\n          n.scale(l, c.centerOfMass, 1);\n          c.updateTriangles();\n          c.updateCenterOfMass();\n          c.updateBoundingRadius();\n          this.addShape(c, l);\n        }\n        this.adjustCenterOfMass();\n        this.aabbNeedsUpdate = true;\n        return true;\n      };\n      var _ = n.fromValues(0, 0);\n      var w = n.fromValues(0, 0);\n      var C = n.fromValues(0, 0);\n      var P = n.fromValues(0, 0);\n      s.prototype.adjustCenterOfMass = function () {\n        var t = w;\n        var e = C;\n        var i = P;\n        var s = 0;\n        n.set(e, 0, 0);\n        for (var o = 0; o !== this.shapes.length; o++) {\n          var a = this.shapes[o];\n          n.scale(t, a.position, a.area);\n          n.add(e, e, t);\n          s += a.area;\n        }\n        n.scale(i, e, 1 / s);\n        for (var o = 0; o !== this.shapes.length; o++) {\n          var a = this.shapes[o];\n          n.sub(a.position, a.position, i);\n        }\n        n.add(this.position, this.position, i);\n        for (var o = 0; this.concavePath && o < this.concavePath.length; o++) {\n          n.sub(this.concavePath[o], this.concavePath[o], i);\n        }\n        this.updateMassProperties();\n        this.updateBoundingRadius();\n      };\n      s.prototype.setZeroForce = function () {\n        n.set(this.force, 0, 0);\n        this.angularForce = 0;\n      };\n      s.prototype.resetConstraintVelocity = function () {\n        var t = this;\n        var e = t.vlambda;\n        n.set(e, 0, 0);\n        t.wlambda = 0;\n      };\n      s.prototype.addConstraintVelocity = function () {\n        var t = this;\n        var e = t.velocity;\n        n.add(e, e, t.vlambda);\n        t.angularVelocity += t.wlambda;\n      };\n      s.prototype.applyDamping = function (t) {\n        if (this.type === s.DYNAMIC) {\n          var e = this.velocity;\n          n.scale(e, e, Math.pow(1 - this.damping, t));\n          this.angularVelocity *= Math.pow(1 - this.angularDamping, t);\n        }\n      };\n      s.prototype.wakeUp = function () {\n        var t = this.sleepState;\n        this.sleepState = s.AWAKE;\n        this.idleTime = 0;\n        if (t !== s.AWAKE) {\n          this.emit(s.wakeUpEvent);\n        }\n      };\n      s.prototype.sleep = function () {\n        this.sleepState = s.SLEEPING;\n        this.angularVelocity = 0;\n        this.angularForce = 0;\n        n.set(this.velocity, 0, 0);\n        n.set(this.force, 0, 0);\n        this.emit(s.sleepEvent);\n      };\n      s.prototype.sleepTick = function (t, e, i) {\n        if (this.allowSleep && this.type !== s.SLEEPING) {\n          this.wantsToSleep = false;\n          var o = this.sleepState;\n          if (n.squaredLength(this.velocity) + Math.pow(this.angularVelocity, 2) >= Math.pow(this.sleepSpeedLimit, 2)) {\n            this.idleTime = 0;\n            this.sleepState = s.AWAKE;\n          } else {\n            this.idleTime += i;\n            this.sleepState = s.SLEEPY;\n          }\n          if (this.idleTime > this.sleepTimeLimit) {\n            if (e) {\n              this.wantsToSleep = true;\n            } else {\n              this.sleep();\n            }\n          }\n        }\n      };\n      s.prototype.overlaps = function (t) {\n        return this.world.overlapKeeper.bodiesAreOverlapping(this, t);\n      };\n      var T = n.create();\n      var S = n.create();\n      s.prototype.integrate = function (t) {\n        var e = this.invMass;\n        var i = this.force;\n        var s = this.position;\n        var o = this.velocity;\n        n.copy(this.previousPosition, this.position);\n        this.previousAngle = this.angle;\n        if (!this.fixedRotation) {\n          this.angularVelocity += this.angularForce * this.invInertia * t;\n        }\n        n.scale(T, i, t * e);\n        n.multiply(T, this.massMultiplier, T);\n        n.add(o, T, o);\n        if (!this.integrateToTimeOfImpact(t)) {\n          n.scale(S, o, t);\n          n.add(s, s, S);\n          if (!this.fixedRotation) {\n            this.angle += this.angularVelocity * t;\n          }\n        }\n        this.aabbNeedsUpdate = true;\n      };\n      var A = new r();\n      var E = new h({\n        mode: h.ALL\n      });\n      var I = n.create();\n      var M = n.create();\n      var R = n.create();\n      var O = n.create();\n      s.prototype.integrateToTimeOfImpact = function (t) {\n        if (this.ccdSpeedThreshold < 0 || n.squaredLength(this.velocity) < Math.pow(this.ccdSpeedThreshold, 2)) {\n          return false;\n        }\n        n.normalize(I, this.velocity);\n        n.scale(M, this.velocity, t);\n        n.add(M, M, this.position);\n        n.sub(R, M, this.position);\n        var e = this.angularVelocity * t;\n        var i = n.length(R);\n        var s = 1;\n        var o;\n        var a = this;\n        A.reset();\n        E.callback = function (t) {\n          if (t.body !== a) {\n            o = t.body;\n            t.getHitPoint(M, E);\n            n.sub(R, M, a.position);\n            s = n.length(R) / i;\n            t.stop();\n          }\n        };\n        n.copy(E.from, this.position);\n        n.copy(E.to, M);\n        E.update();\n        this.world.raycast(A, E);\n        if (!o) {\n          return false;\n        }\n        var r = this.angle;\n        n.copy(O, this.position);\n        for (var h = 0, l = 0, c = 0, u = s; u >= l && h < this.ccdIterations;) {\n          h++;\n          c = (u - l) / 2;\n          n.scale(S, R, s);\n          n.add(this.position, O, S);\n          this.angle = r + e * s;\n          this.updateAABB();\n          if (this.aabb.overlaps(o.aabb) && this.world.narrowphase.bodiesOverlap(this, o)) {\n            l = c;\n          } else {\n            u = c;\n          }\n        }\n        s = c;\n        n.copy(this.position, O);\n        this.angle = r;\n        n.scale(S, R, s);\n        n.add(this.position, this.position, S);\n        if (!this.fixedRotation) {\n          this.angle += e * s;\n        }\n        return true;\n      };\n      s.prototype.getVelocityAtPoint = function (t, e) {\n        n.crossVZ(t, e, this.angularVelocity);\n        n.subtract(t, this.velocity, t);\n        return t;\n      };\n      s.sleepyEvent = {\n        type: "sleepy"\n      };\n      s.sleepEvent = {\n        type: "sleep"\n      };\n      s.wakeUpEvent = {\n        type: "wakeup"\n      };\n      s.DYNAMIC = 1;\n      s.STATIC = 2;\n      s.KINEMATIC = 4;\n      s.AWAKE = 0;\n      s.SLEEPY = 1;\n      s.SLEEPING = 2;\n    }, {\n      "../collision/AABB": 7,\n      "../collision/Ray": 11,\n      "../collision/RaycastResult": 12,\n      "../events/EventEmitter": 26,\n      "../math/vec2": 30,\n      "../shapes/Convex": 40,\n      "poly-decomp": 5\n    }],\n    32: [function (t, e, i) {\n      function s(t, e, i) {\n        i = i || {};\n        o.call(this, t, e, i);\n        this.localAnchorA = n.fromValues(0, 0);\n        this.localAnchorB = n.fromValues(0, 0);\n        if (i.localAnchorA) {\n          n.copy(this.localAnchorA, i.localAnchorA);\n        }\n        if (i.localAnchorB) {\n          n.copy(this.localAnchorB, i.localAnchorB);\n        }\n        if (i.worldAnchorA) {\n          this.setWorldAnchorA(i.worldAnchorA);\n        }\n        if (i.worldAnchorB) {\n          this.setWorldAnchorB(i.worldAnchorB);\n        }\n        var s = n.create();\n        var a = n.create();\n        this.getWorldAnchorA(s);\n        this.getWorldAnchorB(a);\n        var r = n.distance(s, a);\n        this.restLength = typeof i.restLength == "number" ? i.restLength : r;\n      }\n      var n = t("../math/vec2");\n      var o = t("./Spring");\n      var a = t("../utils/Utils");\n      e.exports = s;\n      s.prototype = new o();\n      s.prototype.constructor = s;\n      s.prototype.setWorldAnchorA = function (t) {\n        this.bodyA.toLocalFrame(this.localAnchorA, t);\n      };\n      s.prototype.setWorldAnchorB = function (t) {\n        this.bodyB.toLocalFrame(this.localAnchorB, t);\n      };\n      s.prototype.getWorldAnchorA = function (t) {\n        this.bodyA.toWorldFrame(t, this.localAnchorA);\n      };\n      s.prototype.getWorldAnchorB = function (t) {\n        this.bodyB.toWorldFrame(t, this.localAnchorB);\n      };\n      var r = n.create();\n      var h = n.create();\n      var l = n.create();\n      var c = n.create();\n      var u = n.create();\n      var d = n.create();\n      var p = n.create();\n      var f = n.create();\n      var y = n.create();\n      s.prototype.applyForce = function () {\n        var t = this.stiffness;\n        var e = this.damping;\n        var i = this.restLength;\n        var s = this.bodyA;\n        var o = this.bodyB;\n        var a = r;\n        var g = h;\n        var m = l;\n        var v = c;\n        var b = y;\n        var x = u;\n        var _ = d;\n        var w = p;\n        var C = f;\n        this.getWorldAnchorA(x);\n        this.getWorldAnchorB(_);\n        n.sub(w, x, s.position);\n        n.sub(C, _, o.position);\n        n.sub(a, _, x);\n        var P = n.len(a);\n        n.normalize(g, a);\n        n.sub(m, o.velocity, s.velocity);\n        n.crossZV(b, o.angularVelocity, C);\n        n.add(m, m, b);\n        n.crossZV(b, s.angularVelocity, w);\n        n.sub(m, m, b);\n        n.scale(v, g, -t * (P - i) - e * n.dot(m, g));\n        n.sub(s.force, s.force, v);\n        n.add(o.force, o.force, v);\n        var T = n.crossLength(w, v);\n        var S = n.crossLength(C, v);\n        s.angularForce -= T;\n        o.angularForce += S;\n      };\n    }, {\n      "../math/vec2": 30,\n      "../utils/Utils": 57,\n      "./Spring": 34\n    }],\n    33: [function (t, e, i) {\n      function s(t, e, i) {\n        i = i || {};\n        o.call(this, t, e, i);\n        this.restAngle = typeof i.restAngle == "number" ? i.restAngle : e.angle - t.angle;\n      }\n      var n = t("../math/vec2");\n      var o = t("./Spring");\n      e.exports = s;\n      s.prototype = new o();\n      s.prototype.constructor = s;\n      s.prototype.applyForce = function () {\n        var t = this.stiffness;\n        var e = this.damping;\n        var i = this.restAngle;\n        var s = this.bodyA;\n        var n = this.bodyB;\n        var o = n.angle - s.angle;\n        var a = n.angularVelocity - s.angularVelocity;\n        var r = -t * (o - i) - e * a * 0;\n        s.angularForce -= r;\n        n.angularForce += r;\n      };\n    }, {\n      "../math/vec2": 30,\n      "./Spring": 34\n    }],\n    34: [function (t, e, i) {\n      function s(t, e, i) {\n        i = o.defaults(i, {\n          stiffness: 100,\n          damping: 1\n        });\n        this.stiffness = i.stiffness;\n        this.damping = i.damping;\n        this.bodyA = t;\n        this.bodyB = e;\n      }\n      var n = t("../math/vec2");\n      var o = t("../utils/Utils");\n      e.exports = s;\n      s.prototype.applyForce = function () {};\n    }, {\n      "../math/vec2": 30,\n      "../utils/Utils": 57\n    }],\n    35: [function (t, e, i) {\n      function s(t, e) {\n        e = e || {};\n        this.chassisBody = t;\n        this.wheels = [];\n        this.groundBody = new l({\n          mass: 0\n        });\n        this.world = null;\n        var i = this;\n        this.preStepCallback = function () {\n          i.update();\n        };\n      }\n      function n(t, e) {\n        e = e || {};\n        this.vehicle = t;\n        this.forwardEquation = new h(t.chassisBody, t.groundBody);\n        this.sideEquation = new h(t.chassisBody, t.groundBody);\n        this.steerValue = 0;\n        this.engineForce = 0;\n        this.setSideFriction(e.sideFriction !== undefined ? e.sideFriction : 5);\n        this.localForwardVector = o.fromValues(0, 1);\n        if (e.localForwardVector) {\n          o.copy(this.localForwardVector, e.localForwardVector);\n        }\n        this.localPosition = o.fromValues(0, 0);\n        if (e.localPosition) {\n          o.copy(this.localPosition, e.localPosition);\n        }\n        r.apply(this, t.chassisBody, t.groundBody);\n        this.equations.push(this.forwardEquation, this.sideEquation);\n        this.setBrakeForce(0);\n      }\n      var o = t("../math/vec2");\n      var a = t("../utils/Utils");\n      var r = t("../constraints/Constraint");\n      var h = t("../equations/FrictionEquation");\n      var l = t("../objects/Body");\n      e.exports = s;\n      s.prototype.addToWorld = function (t) {\n        this.world = t;\n        t.addBody(this.groundBody);\n        t.on("preStep", this.preStepCallback);\n        for (var e = 0; e < this.wheels.length; e++) {\n          var i = this.wheels[e];\n          t.addConstraint(i);\n        }\n      };\n      s.prototype.removeFromWorld = function () {\n        var t = this.world;\n        t.removeBody(this.groundBody);\n        t.off("preStep", this.preStepCallback);\n        for (var e = 0; e < this.wheels.length; e++) {\n          var i = this.wheels[e];\n          t.removeConstraint(i);\n        }\n        this.world = null;\n      };\n      s.prototype.addWheel = function (t) {\n        var e = new n(this, t);\n        this.wheels.push(e);\n        return e;\n      };\n      s.prototype.update = function () {\n        for (var t = 0; t < this.wheels.length; t++) {\n          this.wheels[t].update();\n        }\n      };\n      n.prototype = new r();\n      n.prototype.setBrakeForce = function (t) {\n        this.forwardEquation.setSlipForce(t);\n      };\n      n.prototype.setSideFriction = function (t) {\n        this.sideEquation.setSlipForce(t);\n      };\n      var c = o.create();\n      var u = o.create();\n      n.prototype.getSpeed = function () {\n        this.vehicle.chassisBody.vectorToWorldFrame(u, this.localForwardVector);\n        this.vehicle.chassisBody.getVelocityAtPoint(c, u);\n        return o.dot(c, u);\n      };\n      var d = o.create();\n      n.prototype.update = function () {\n        this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t, this.localForwardVector);\n        o.rotate(this.sideEquation.t, this.localForwardVector, Math.PI / 2);\n        this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t, this.sideEquation.t);\n        o.rotate(this.forwardEquation.t, this.forwardEquation.t, this.steerValue);\n        o.rotate(this.sideEquation.t, this.sideEquation.t, this.steerValue);\n        this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB, this.localPosition);\n        o.copy(this.sideEquation.contactPointB, this.forwardEquation.contactPointB);\n        this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA, this.localPosition);\n        o.copy(this.sideEquation.contactPointA, this.forwardEquation.contactPointA);\n        o.normalize(d, this.forwardEquation.t);\n        o.scale(d, d, this.engineForce);\n        this.vehicle.chassisBody.applyForce(d, this.forwardEquation.contactPointA);\n      };\n    }, {\n      "../constraints/Constraint": 14,\n      "../equations/FrictionEquation": 23,\n      "../math/vec2": 30,\n      "../objects/Body": 31,\n      "../utils/Utils": 57\n    }],\n    36: [function (t, e, i) {\n      var s = e.exports = {\n        AABB: t("./collision/AABB"),\n        AngleLockEquation: t("./equations/AngleLockEquation"),\n        Body: t("./objects/Body"),\n        Broadphase: t("./collision/Broadphase"),\n        Capsule: t("./shapes/Capsule"),\n        Circle: t("./shapes/Circle"),\n        Constraint: t("./constraints/Constraint"),\n        ContactEquation: t("./equations/ContactEquation"),\n        ContactEquationPool: t("./utils/ContactEquationPool"),\n        ContactMaterial: t("./material/ContactMaterial"),\n        Convex: t("./shapes/Convex"),\n        DistanceConstraint: t("./constraints/DistanceConstraint"),\n        Equation: t("./equations/Equation"),\n        EventEmitter: t("./events/EventEmitter"),\n        FrictionEquation: t("./equations/FrictionEquation"),\n        FrictionEquationPool: t("./utils/FrictionEquationPool"),\n        GearConstraint: t("./constraints/GearConstraint"),\n        GSSolver: t("./solver/GSSolver"),\n        Heightfield: t("./shapes/Heightfield"),\n        Line: t("./shapes/Line"),\n        LockConstraint: t("./constraints/LockConstraint"),\n        Material: t("./material/Material"),\n        Narrowphase: t("./collision/Narrowphase"),\n        NaiveBroadphase: t("./collision/NaiveBroadphase"),\n        Particle: t("./shapes/Particle"),\n        Plane: t("./shapes/Plane"),\n        Pool: t("./utils/Pool"),\n        RevoluteConstraint: t("./constraints/RevoluteConstraint"),\n        PrismaticConstraint: t("./constraints/PrismaticConstraint"),\n        Ray: t("./collision/Ray"),\n        RaycastResult: t("./collision/RaycastResult"),\n        Box: t("./shapes/Box"),\n        RotationalVelocityEquation: t("./equations/RotationalVelocityEquation"),\n        SAPBroadphase: t("./collision/SAPBroadphase"),\n        Shape: t("./shapes/Shape"),\n        Solver: t("./solver/Solver"),\n        Spring: t("./objects/Spring"),\n        TopDownVehicle: t("./objects/TopDownVehicle"),\n        LinearSpring: t("./objects/LinearSpring"),\n        RotationalSpring: t("./objects/RotationalSpring"),\n        Utils: t("./utils/Utils"),\n        World: t("./world/World"),\n        vec2: t("./math/vec2"),\n        version: t("../package.json").version\n      };\n      Object.defineProperty(s, "Rectangle", {\n        get: function get() {\n          return this.Box;\n        }\n      });\n    }, {\n      "../package.json": 6,\n      "./collision/AABB": 7,\n      "./collision/Broadphase": 8,\n      "./collision/NaiveBroadphase": 9,\n      "./collision/Narrowphase": 10,\n      "./collision/Ray": 11,\n      "./collision/RaycastResult": 12,\n      "./collision/SAPBroadphase": 13,\n      "./constraints/Constraint": 14,\n      "./constraints/DistanceConstraint": 15,\n      "./constraints/GearConstraint": 16,\n      "./constraints/LockConstraint": 17,\n      "./constraints/PrismaticConstraint": 18,\n      "./constraints/RevoluteConstraint": 19,\n      "./equations/AngleLockEquation": 20,\n      "./equations/ContactEquation": 21,\n      "./equations/Equation": 22,\n      "./equations/FrictionEquation": 23,\n      "./equations/RotationalVelocityEquation": 25,\n      "./events/EventEmitter": 26,\n      "./material/ContactMaterial": 27,\n      "./material/Material": 28,\n      "./math/vec2": 30,\n      "./objects/Body": 31,\n      "./objects/LinearSpring": 32,\n      "./objects/RotationalSpring": 33,\n      "./objects/Spring": 34,\n      "./objects/TopDownVehicle": 35,\n      "./shapes/Box": 37,\n      "./shapes/Capsule": 38,\n      "./shapes/Circle": 39,\n      "./shapes/Convex": 40,\n      "./shapes/Heightfield": 41,\n      "./shapes/Line": 42,\n      "./shapes/Particle": 43,\n      "./shapes/Plane": 44,\n      "./shapes/Shape": 45,\n      "./solver/GSSolver": 46,\n      "./solver/Solver": 47,\n      "./utils/ContactEquationPool": 48,\n      "./utils/FrictionEquationPool": 49,\n      "./utils/Pool": 55,\n      "./utils/Utils": 57,\n      "./world/World": 61\n    }],\n    37: [function (t, e, i) {\n      function s(t) {\n        if (typeof arguments[0] == "number" && typeof arguments[1] == "number") {\n          t = {\n            width: arguments[0],\n            height: arguments[1]\n          };\n        }\n        t = t || {};\n        var e = this.width = t.width || 1;\n        var i = this.height = t.height || 1;\n        var s = [n.fromValues(-e / 2, -i / 2), n.fromValues(e / 2, -i / 2), n.fromValues(e / 2, i / 2), n.fromValues(-e / 2, i / 2)];\n        var r = [n.fromValues(1, 0), n.fromValues(0, 1)];\n        t.vertices = s;\n        t.axes = r;\n        t.type = o.BOX;\n        a.call(this, t);\n      }\n      var n = t("../math/vec2");\n      var o = t("./Shape");\n      var a = t("./Convex");\n      e.exports = s;\n      s.prototype = new a();\n      s.prototype.constructor = s;\n      s.prototype.computeMomentOfInertia = function (t) {\n        var e = this.width;\n        var i = this.height;\n        return t * (i * i + e * e) / 12;\n      };\n      s.prototype.updateBoundingRadius = function () {\n        var t = this.width;\n        var e = this.height;\n        this.boundingRadius = Math.sqrt(t * t + e * e) / 2;\n      };\n      var r = n.create();\n      var h = n.create();\n      var l = n.create();\n      var c = n.create();\n      s.prototype.computeAABB = function (t, e, i) {\n        t.setFromPoints(this.vertices, e, i, 0);\n      };\n      s.prototype.updateArea = function () {\n        this.area = this.width * this.height;\n      };\n    }, {\n      "../math/vec2": 30,\n      "./Convex": 40,\n      "./Shape": 45\n    }],\n    38: [function (t, e, i) {\n      function s(t) {\n        if (typeof arguments[0] == "number" && typeof arguments[1] == "number") {\n          t = {\n            length: arguments[0],\n            radius: arguments[1]\n          };\n        }\n        t = t || {};\n        this.length = t.length || 1;\n        this.radius = t.radius || 1;\n        t.type = n.CAPSULE;\n        n.call(this, t);\n      }\n      var n = t("./Shape");\n      var o = t("../math/vec2");\n      e.exports = s;\n      s.prototype = new n();\n      s.prototype.constructor = s;\n      s.prototype.computeMomentOfInertia = function (t) {\n        var e = this.radius;\n        var i = this.length + e;\n        var s = e * 2;\n        return t * (s * s + i * i) / 12;\n      };\n      s.prototype.updateBoundingRadius = function () {\n        this.boundingRadius = this.radius + this.length / 2;\n      };\n      s.prototype.updateArea = function () {\n        this.area = Math.PI * this.radius * this.radius + this.radius * 2 * this.length;\n      };\n      var a = o.create();\n      s.prototype.computeAABB = function (t, e, i) {\n        var s = this.radius;\n        o.set(a, this.length / 2, 0);\n        if (i !== 0) {\n          o.rotate(a, a, i);\n        }\n        o.set(t.upperBound, Math.max(a[0] + s, -a[0] + s), Math.max(a[1] + s, -a[1] + s));\n        o.set(t.lowerBound, Math.min(a[0] - s, -a[0] - s), Math.min(a[1] - s, -a[1] - s));\n        o.add(t.lowerBound, t.lowerBound, e);\n        o.add(t.upperBound, t.upperBound, e);\n      };\n      var r = o.create();\n      var h = o.create();\n      var l = o.create();\n      var c = o.create();\n      var u = o.fromValues(0, 1);\n      s.prototype.raycast = function (t, e, i, s) {\n        var n = e.from;\n        var a = e.to;\n        var d = e.direction;\n        var p = r;\n        var f = h;\n        var y = l;\n        var g = c;\n        var m = this.length / 2;\n        for (var v = 0; v < 2; v++) {\n          var b = this.radius * (v * 2 - 1);\n          o.set(y, -m, b);\n          o.set(g, m, b);\n          o.toGlobalFrame(y, y, i, s);\n          o.toGlobalFrame(g, g, i, s);\n          var x = o.getLineSegmentsIntersectionFraction(n, a, y, g);\n          if (x >= 0 && (o.rotate(f, u, s), o.scale(f, f, v * 2 - 1), e.reportIntersection(t, x, f, -1), t.shouldStop(e))) {\n            return;\n          }\n        }\n        var _ = Math.pow(this.radius, 2) + Math.pow(m, 2);\n        for (var v = 0; v < 2; v++) {\n          o.set(y, m * (v * 2 - 1), 0);\n          o.toGlobalFrame(y, y, i, s);\n          var w = Math.pow(a[0] - n[0], 2) + Math.pow(a[1] - n[1], 2);\n          var C = ((a[0] - n[0]) * (n[0] - y[0]) + (a[1] - n[1]) * (n[1] - y[1])) * 2;\n          var P = Math.pow(n[0] - y[0], 2) + Math.pow(n[1] - y[1], 2) - Math.pow(this.radius, 2);\n          var x = Math.pow(C, 2) - w * 4 * P;\n          if (!(x < 0)) {\n            if (x === 0) {\n              o.lerp(p, n, a, x);\n              if (o.squaredDistance(p, i) > _ && (o.sub(f, p, y), o.normalize(f, f), e.reportIntersection(t, x, f, -1), t.shouldStop(e))) {\n                return;\n              }\n            } else {\n              var T = Math.sqrt(x);\n              var S = 1 / (w * 2);\n              var A = (-C - T) * S;\n              var E = (-C + T) * S;\n              if (A >= 0 && A <= 1 && (o.lerp(p, n, a, A), o.squaredDistance(p, i) > _ && (o.sub(f, p, y), o.normalize(f, f), e.reportIntersection(t, A, f, -1), t.shouldStop(e)))) {\n                return;\n              }\n              if (E >= 0 && E <= 1 && (o.lerp(p, n, a, E), o.squaredDistance(p, i) > _ && (o.sub(f, p, y), o.normalize(f, f), e.reportIntersection(t, E, f, -1), t.shouldStop(e)))) {\n                return;\n              }\n            }\n          }\n        }\n      };\n    }, {\n      "../math/vec2": 30,\n      "./Shape": 45\n    }],\n    39: [function (t, e, i) {\n      function s(t) {\n        if (typeof arguments[0] == "number") {\n          t = {\n            radius: arguments[0]\n          };\n        }\n        t = t || {};\n        this.radius = t.radius || 1;\n        t.type = n.CIRCLE;\n        n.call(this, t);\n      }\n      var n = t("./Shape");\n      var o = t("../math/vec2");\n      e.exports = s;\n      s.prototype = new n();\n      s.prototype.constructor = s;\n      s.prototype.computeMomentOfInertia = function (t) {\n        var e = this.radius;\n        return t * e * e / 2;\n      };\n      s.prototype.updateBoundingRadius = function () {\n        this.boundingRadius = this.radius;\n      };\n      s.prototype.updateArea = function () {\n        this.area = Math.PI * this.radius * this.radius;\n      };\n      s.prototype.computeAABB = function (t, e, i) {\n        var s = this.radius;\n        o.set(t.upperBound, s, s);\n        o.set(t.lowerBound, -s, -s);\n        if (e) {\n          o.add(t.lowerBound, t.lowerBound, e);\n          o.add(t.upperBound, t.upperBound, e);\n        }\n      };\n      var a = o.create();\n      var r = o.create();\n      s.prototype.raycast = function (t, e, i, s) {\n        var n = e.from;\n        var h = e.to;\n        var l = this.radius;\n        var c = Math.pow(h[0] - n[0], 2) + Math.pow(h[1] - n[1], 2);\n        var u = ((h[0] - n[0]) * (n[0] - i[0]) + (h[1] - n[1]) * (n[1] - i[1])) * 2;\n        var d = Math.pow(n[0] - i[0], 2) + Math.pow(n[1] - i[1], 2) - Math.pow(l, 2);\n        var p = Math.pow(u, 2) - c * 4 * d;\n        var f = a;\n        var y = r;\n        if (!(p < 0)) {\n          if (p === 0) {\n            o.lerp(f, n, h, p);\n            o.sub(y, f, i);\n            o.normalize(y, y);\n            e.reportIntersection(t, p, y, -1);\n          } else {\n            var g = Math.sqrt(p);\n            var m = 1 / (c * 2);\n            var v = (-u - g) * m;\n            var b = (-u + g) * m;\n            if (v >= 0 && v <= 1 && (o.lerp(f, n, h, v), o.sub(y, f, i), o.normalize(y, y), e.reportIntersection(t, v, y, -1), t.shouldStop(e))) {\n              return;\n            }\n            if (b >= 0 && b <= 1) {\n              o.lerp(f, n, h, b);\n              o.sub(y, f, i);\n              o.normalize(y, y);\n              e.reportIntersection(t, b, y, -1);\n            }\n          }\n        }\n      };\n    }, {\n      "../math/vec2": 30,\n      "./Shape": 45\n    }],\n    40: [function (t, e, i) {\n      function s(t) {\n        if (Array.isArray(arguments[0])) {\n          t = {\n            vertices: arguments[0],\n            axes: arguments[1]\n          };\n        }\n        t = t || {};\n        this.vertices = [];\n        for (var e = t.vertices !== undefined ? t.vertices : [], i = 0; i < e.length; i++) {\n          var s = o.create();\n          o.copy(s, e[i]);\n          this.vertices.push(s);\n        }\n        this.axes = [];\n        if (t.axes) {\n          for (var i = 0; i < t.axes.length; i++) {\n            var a = o.create();\n            o.copy(a, t.axes[i]);\n            this.axes.push(a);\n          }\n        } else {\n          for (var i = 0; i < this.vertices.length; i++) {\n            var r = this.vertices[i];\n            var h = this.vertices[(i + 1) % this.vertices.length];\n            var l = o.create();\n            o.sub(l, h, r);\n            o.rotate90cw(l, l);\n            o.normalize(l, l);\n            this.axes.push(l);\n          }\n        }\n        this.centerOfMass = o.fromValues(0, 0);\n        this.triangles = [];\n        if (this.vertices.length) {\n          this.updateTriangles();\n          this.updateCenterOfMass();\n        }\n        this.boundingRadius = 0;\n        t.type = n.CONVEX;\n        n.call(this, t);\n        this.updateBoundingRadius();\n        this.updateArea();\n        if (this.area < 0) {\n          throw new Error("Convex vertices must be given in conter-clockwise winding.");\n        }\n      }\n      var n = t("./Shape");\n      var o = t("../math/vec2");\n      var a = t("../math/polyk");\n      var r = t("poly-decomp");\n      e.exports = s;\n      s.prototype = new n();\n      s.prototype.constructor = s;\n      var h = o.create();\n      var l = o.create();\n      s.prototype.projectOntoLocalAxis = function (t, e) {\n        var i = null;\n        var s = null;\n        var n;\n        var a;\n        var t = h;\n        for (var r = 0; r < this.vertices.length; r++) {\n          n = this.vertices[r];\n          a = o.dot(n, t);\n          if (i === null || a > i) {\n            i = a;\n          }\n          if (s === null || a < s) {\n            s = a;\n          }\n        }\n        if (s > i) {\n          var l = s;\n          s = i;\n          i = l;\n        }\n        o.set(e, s, i);\n      };\n      s.prototype.projectOntoWorldAxis = function (t, e, i, s) {\n        var n = l;\n        this.projectOntoLocalAxis(t, s);\n        if (i !== 0) {\n          o.rotate(n, t, i);\n        } else {\n          n = t;\n        }\n        var a = o.dot(e, n);\n        o.set(s, s[0] + a, s[1] + a);\n      };\n      s.prototype.updateTriangles = function () {\n        this.triangles.length = 0;\n        var t = [];\n        for (var e = 0; e < this.vertices.length; e++) {\n          var i = this.vertices[e];\n          t.push(i[0], i[1]);\n        }\n        for (var s = a.Triangulate(t), e = 0; e < s.length; e += 3) {\n          var n = s[e];\n          var o = s[e + 1];\n          var r = s[e + 2];\n          this.triangles.push([n, o, r]);\n        }\n      };\n      var c = o.create();\n      var u = o.create();\n      var d = o.create();\n      var p = o.create();\n      var f = o.create();\n      var y = o.create();\n      var g = o.create();\n      var m = o.create();\n      var v = o.create();\n      s.prototype.updateCenterOfMass = function () {\n        var t = this.triangles;\n        var e = this.vertices;\n        var i = this.centerOfMass;\n        var n = c;\n        var a = v;\n        var r = d;\n        var h = p;\n        var l = f;\n        var b = y;\n        var x = g;\n        var _ = m;\n        var w = u;\n        o.set(i, 0, 0);\n        var C = 0;\n        for (var P = 0; P !== t.length; P++) {\n          var T = t[P];\n          var r = e[T[0]];\n          var h = e[T[1]];\n          var l = e[T[2]];\n          o.centroid(n, r, h, l);\n          var S = s.triangleArea(r, h, l);\n          C += S;\n          o.scale(w, n, S);\n          o.add(i, i, w);\n        }\n        o.scale(i, i, 1 / C);\n      };\n      s.prototype.computeMomentOfInertia = function (t) {\n        var e = 0;\n        var i = 0;\n        for (var s = this.vertices.length, n = s - 1, a = 0; a < s; n = a, a++) {\n          var r = this.vertices[n];\n          var h = this.vertices[a];\n          var l = Math.abs(o.crossLength(r, h));\n          e += l * (o.dot(h, h) + o.dot(h, r) + o.dot(r, r));\n          i += l;\n        }\n        return t / 6 * (e / i);\n      };\n      s.prototype.updateBoundingRadius = function () {\n        for (var t = this.vertices, e = 0, i = 0; i !== t.length; i++) {\n          var s = o.squaredLength(t[i]);\n          if (s > e) {\n            e = s;\n          }\n        }\n        this.boundingRadius = Math.sqrt(e);\n      };\n      s.triangleArea = function (t, e, i) {\n        return ((e[0] - t[0]) * (i[1] - t[1]) - (i[0] - t[0]) * (e[1] - t[1])) * 0.5;\n      };\n      s.prototype.updateArea = function () {\n        this.updateTriangles();\n        this.area = 0;\n        for (var t = this.triangles, e = this.vertices, i = 0; i !== t.length; i++) {\n          var n = t[i];\n          var o = e[n[0]];\n          var a = e[n[1]];\n          var r = e[n[2]];\n          var h = s.triangleArea(o, a, r);\n          this.area += h;\n        }\n      };\n      s.prototype.computeAABB = function (t, e, i) {\n        t.setFromPoints(this.vertices, e, i, 0);\n      };\n      var b = o.create();\n      var x = o.create();\n      var _ = o.create();\n      s.prototype.raycast = function (t, e, i, s) {\n        var n = b;\n        var a = x;\n        var r = _;\n        var h = this.vertices;\n        o.toLocalFrame(n, e.from, i, s);\n        o.toLocalFrame(a, e.to, i, s);\n        for (var l = h.length, c = 0; c < l && !t.shouldStop(e); c++) {\n          var u = h[c];\n          var d = h[(c + 1) % l];\n          var p = o.getLineSegmentsIntersectionFraction(n, a, u, d);\n          if (p >= 0) {\n            o.sub(r, d, u);\n            o.rotate(r, r, -Math.PI / 2 + s);\n            o.normalize(r, r);\n            e.reportIntersection(t, p, r, c);\n          }\n        }\n      };\n    }, {\n      "../math/polyk": 29,\n      "../math/vec2": 30,\n      "./Shape": 45,\n      "poly-decomp": 5\n    }],\n    41: [function (t, e, i) {\n      function s(t) {\n        if (Array.isArray(arguments[0]) && (t = {\n          heights: arguments[0]\n        }, _typeof(arguments[1]) == "object")) {\n          for (var e in arguments[1]) {\n            t[e] = arguments[1][e];\n          }\n        }\n        t = t || {};\n        this.heights = t.heights ? t.heights.slice(0) : [];\n        this.maxValue = t.maxValue || null;\n        this.minValue = t.minValue || null;\n        this.elementWidth = t.elementWidth || 0.1;\n        if (t.maxValue === undefined || t.minValue === undefined) {\n          this.updateMaxMinValues();\n        }\n        t.type = o.HEIGHTFIELD;\n        o.call(this, t);\n      }\n      function n(t, e, i, s, n) {\n        var o;\n        var a;\n        var r;\n        var h;\n        o = i[0] - e[0];\n        a = i[1] - e[1];\n        r = n[0] - s[0];\n        h = n[1] - s[1];\n        var l;\n        var c;\n        l = (-a * (e[0] - s[0]) + o * (e[1] - s[1])) / (-r * a + o * h);\n        c = (r * (e[1] - s[1]) - h * (e[0] - s[0])) / (-r * a + o * h);\n        if (l >= 0 && l <= 1 && c >= 0 && c <= 1) {\n          var u = e[0] + c * o;\n          var d = e[1] + c * a;\n          t[0] = u;\n          t[1] = d;\n          return c;\n        }\n        return -1;\n      }\n      var o = t("./Shape");\n      var a = t("../math/vec2");\n      var r = t("../utils/Utils");\n      e.exports = s;\n      s.prototype = new o();\n      s.prototype.constructor = s;\n      s.prototype.updateMaxMinValues = function () {\n        for (var t = this.heights, e = t[0], i = t[0], s = 0; s !== t.length; s++) {\n          var n = t[s];\n          if (n > e) {\n            e = n;\n          }\n          if (n < i) {\n            i = n;\n          }\n        }\n        this.maxValue = e;\n        this.minValue = i;\n      };\n      s.prototype.computeMomentOfInertia = function (t) {\n        return Number.MAX_VALUE;\n      };\n      s.prototype.updateBoundingRadius = function () {\n        this.boundingRadius = Number.MAX_VALUE;\n      };\n      s.prototype.updateArea = function () {\n        for (var t = this.heights, e = 0, i = 0; i < t.length - 1; i++) {\n          e += (t[i] + t[i + 1]) / 2 * this.elementWidth;\n        }\n        this.area = e;\n      };\n      var h = [a.create(), a.create(), a.create(), a.create()];\n      s.prototype.computeAABB = function (t, e, i) {\n        a.set(h[0], 0, this.maxValue);\n        a.set(h[1], this.elementWidth * this.heights.length, this.maxValue);\n        a.set(h[2], this.elementWidth * this.heights.length, this.minValue);\n        a.set(h[3], 0, this.minValue);\n        t.setFromPoints(h, e, i);\n      };\n      s.prototype.getLineSegment = function (t, e, i) {\n        var s = this.heights;\n        var n = this.elementWidth;\n        a.set(t, i * n, s[i]);\n        a.set(e, (i + 1) * n, s[i + 1]);\n      };\n      s.prototype.getSegmentIndex = function (t) {\n        return Math.floor(t[0] / this.elementWidth);\n      };\n      s.prototype.getClampedSegmentIndex = function (t) {\n        var e = this.getSegmentIndex(t);\n        return e = Math.min(this.heights.length, Math.max(e, 0));\n      };\n      var l = a.create();\n      var c = a.create();\n      var u = a.create();\n      var d = a.create();\n      var p = a.create();\n      var f = a.create();\n      var y = a.fromValues(0, 1);\n      s.prototype.raycast = function (t, e, i, s) {\n        var n = e.from;\n        var o = e.to;\n        var r = e.direction;\n        var h = l;\n        var y = c;\n        var g = u;\n        var m = d;\n        var v = p;\n        var b = f;\n        a.toLocalFrame(v, n, i, s);\n        a.toLocalFrame(b, o, i, s);\n        var x = this.getClampedSegmentIndex(v);\n        var _ = this.getClampedSegmentIndex(b);\n        if (x > _) {\n          var w = x;\n          x = _;\n          _ = w;\n        }\n        for (var C = 0; C < this.heights.length - 1; C++) {\n          this.getLineSegment(g, m, C);\n          var P = a.getLineSegmentsIntersectionFraction(v, b, g, m);\n          if (P >= 0 && (a.sub(y, m, g), a.rotate(y, y, s + Math.PI / 2), a.normalize(y, y), e.reportIntersection(t, P, y, -1), t.shouldStop(e))) {\n            return;\n          }\n        }\n      };\n    }, {\n      "../math/vec2": 30,\n      "../utils/Utils": 57,\n      "./Shape": 45\n    }],\n    42: [function (t, e, i) {\n      function s(t) {\n        if (typeof arguments[0] == "number") {\n          t = {\n            length: arguments[0]\n          };\n        }\n        t = t || {};\n        this.length = t.length || 1;\n        t.type = n.LINE;\n        n.call(this, t);\n      }\n      var n = t("./Shape");\n      var o = t("../math/vec2");\n      e.exports = s;\n      s.prototype = new n();\n      s.prototype.constructor = s;\n      s.prototype.computeMomentOfInertia = function (t) {\n        return t * Math.pow(this.length, 2) / 12;\n      };\n      s.prototype.updateBoundingRadius = function () {\n        this.boundingRadius = this.length / 2;\n      };\n      var a = [o.create(), o.create()];\n      s.prototype.computeAABB = function (t, e, i) {\n        var s = this.length / 2;\n        o.set(a[0], -s, 0);\n        o.set(a[1], s, 0);\n        t.setFromPoints(a, e, i, 0);\n      };\n      var r = o.create();\n      var h = o.create();\n      var l = o.create();\n      var c = o.create();\n      var u = o.fromValues(0, 1);\n      s.prototype.raycast = function (t, e, i, s) {\n        var n = e.from;\n        var a = e.to;\n        var r = l;\n        var d = c;\n        var p = this.length / 2;\n        o.set(r, -p, 0);\n        o.set(d, p, 0);\n        o.toGlobalFrame(r, r, i, s);\n        o.toGlobalFrame(d, d, i, s);\n        var f = o.getLineSegmentsIntersectionFraction(r, d, n, a);\n        if (f >= 0) {\n          var y = h;\n          o.rotate(y, u, s);\n          e.reportIntersection(t, f, y, -1);\n        }\n      };\n    }, {\n      "../math/vec2": 30,\n      "./Shape": 45\n    }],\n    43: [function (t, e, i) {\n      function s(t) {\n        t = t || {};\n        t.type = n.PARTICLE;\n        n.call(this, t);\n      }\n      var n = t("./Shape");\n      var o = t("../math/vec2");\n      e.exports = s;\n      s.prototype = new n();\n      s.prototype.constructor = s;\n      s.prototype.computeMomentOfInertia = function (t) {\n        return 0;\n      };\n      s.prototype.updateBoundingRadius = function () {\n        this.boundingRadius = 0;\n      };\n      s.prototype.computeAABB = function (t, e, i) {\n        o.copy(t.lowerBound, e);\n        o.copy(t.upperBound, e);\n      };\n    }, {\n      "../math/vec2": 30,\n      "./Shape": 45\n    }],\n    44: [function (t, e, i) {\n      function s(t) {\n        t = t || {};\n        t.type = n.PLANE;\n        n.call(this, t);\n      }\n      var n = t("./Shape");\n      var o = t("../math/vec2");\n      var a = t("../utils/Utils");\n      e.exports = s;\n      s.prototype = new n();\n      s.prototype.constructor = s;\n      s.prototype.computeMomentOfInertia = function (t) {\n        return 0;\n      };\n      s.prototype.updateBoundingRadius = function () {\n        this.boundingRadius = Number.MAX_VALUE;\n      };\n      s.prototype.computeAABB = function (t, e, i) {\n        var s = i % (Math.PI * 2);\n        var n = o.set;\n        var a = Number.MAX_VALUE;\n        var r = t.lowerBound;\n        var h = t.upperBound;\n        if (s === 0) {\n          n(r, -a, -a);\n          n(h, a, 0);\n        } else if (s === Math.PI / 2) {\n          n(r, 0, -a);\n          n(h, a, a);\n        } else if (s === Math.PI) {\n          n(r, -a, 0);\n          n(h, a, a);\n        } else if (s === Math.PI * 3 / 2) {\n          n(r, -a, -a);\n          n(h, 0, a);\n        } else {\n          n(r, -a, -a);\n          n(h, a, a);\n        }\n        o.add(r, r, e);\n        o.add(h, h, e);\n      };\n      s.prototype.updateArea = function () {\n        this.area = Number.MAX_VALUE;\n      };\n      var r = o.create();\n      var h = o.create();\n      var l = o.create();\n      var c = o.create();\n      var u = o.create();\n      s.prototype.raycast = function (t, e, i, s) {\n        var n = e.from;\n        var a = e.to;\n        var d = e.direction;\n        var p = r;\n        var f = h;\n        var y = l;\n        var g = c;\n        var m = u;\n        o.set(g, 0, 1);\n        o.rotate(g, g, s);\n        o.sub(m, n, i);\n        var v = o.dot(m, g);\n        o.sub(m, a, i);\n        if (!(v * o.dot(m, g) > 0) && !(o.squaredDistance(n, a) < v * v)) {\n          var b = o.dot(g, d);\n          o.sub(p, n, i);\n          var x = -o.dot(g, p) / b / e.length;\n          e.reportIntersection(t, x, g, -1);\n        }\n      };\n    }, {\n      "../math/vec2": 30,\n      "../utils/Utils": 57,\n      "./Shape": 45\n    }],\n    45: [function (t, e, i) {\n      function s(t) {\n        t = t || {};\n        this.body = null;\n        this.position = n.fromValues(0, 0);\n        if (t.position) {\n          n.copy(this.position, t.position);\n        }\n        this.angle = t.angle || 0;\n        this.type = t.type || 0;\n        this.id = s.idCounter++;\n        this.boundingRadius = 0;\n        this.collisionGroup = t.collisionGroup !== undefined ? t.collisionGroup : 1;\n        this.collisionResponse = t.collisionResponse === undefined || t.collisionResponse;\n        this.collisionMask = t.collisionMask !== undefined ? t.collisionMask : 1;\n        this.material = t.material || null;\n        this.area = 0;\n        this.sensor = t.sensor !== undefined && t.sensor;\n        if (this.type) {\n          this.updateBoundingRadius();\n        }\n        this.updateArea();\n      }\n      e.exports = s;\n      var n = t("../math/vec2");\n      s.idCounter = 0;\n      s.CIRCLE = 1;\n      s.PARTICLE = 2;\n      s.PLANE = 4;\n      s.CONVEX = 8;\n      s.LINE = 16;\n      s.BOX = 32;\n      Object.defineProperty(s, "RECTANGLE", {\n        get: function get() {\n          return s.BOX;\n        }\n      });\n      s.CAPSULE = 64;\n      s.HEIGHTFIELD = 128;\n      s.prototype.computeMomentOfInertia = function (t) {};\n      s.prototype.updateBoundingRadius = function () {};\n      s.prototype.updateArea = function () {};\n      s.prototype.computeAABB = function (t, e, i) {};\n      s.prototype.raycast = function (t, e, i, s) {};\n    }, {\n      "../math/vec2": 30\n    }],\n    46: [function (t, e, i) {\n      function s(t) {\n        a.call(this, t, a.GS);\n        t = t || {};\n        this.iterations = t.iterations || 10;\n        this.tolerance = t.tolerance || 1e-7;\n        this.arrayStep = 30;\n        this.lambda = new r.ARRAY_TYPE(this.arrayStep);\n        this.Bs = new r.ARRAY_TYPE(this.arrayStep);\n        this.invCs = new r.ARRAY_TYPE(this.arrayStep);\n        this.useZeroRHS = false;\n        this.frictionIterations = 0;\n        this.usedIterations = 0;\n      }\n      function n(t) {\n        for (var e = t.length; e--;) {\n          t[e] = 0;\n        }\n      }\n      var o = t("../math/vec2");\n      var a = t("./Solver");\n      var r = t("../utils/Utils");\n      var h = t("../equations/FrictionEquation");\n      e.exports = s;\n      s.prototype = new a();\n      s.prototype.constructor = s;\n      s.prototype.solve = function (t, e) {\n        this.sortEquations();\n        var i = 0;\n        var a = this.iterations;\n        var l = this.frictionIterations;\n        var c = this.equations;\n        var u = c.length;\n        var d = Math.pow(this.tolerance * u, 2);\n        var p = e.bodies;\n        var f = e.bodies.length;\n        var y = o.add;\n        var g = o.set;\n        var m = this.useZeroRHS;\n        var v = this.lambda;\n        this.usedIterations = 0;\n        if (u) {\n          for (var b = 0; b !== f; b++) {\n            var x = p[b];\n            x.updateSolveMassProperties();\n          }\n        }\n        if (v.length < u) {\n          v = this.lambda = new r.ARRAY_TYPE(u + this.arrayStep);\n          this.Bs = new r.ARRAY_TYPE(u + this.arrayStep);\n          this.invCs = new r.ARRAY_TYPE(u + this.arrayStep);\n        }\n        n(v);\n        var _ = this.invCs;\n        var w = this.Bs;\n        var v = this.lambda;\n        for (var b = 0; b !== c.length; b++) {\n          var C = c[b];\n          if (C.timeStep !== t || C.needsUpdate) {\n            C.timeStep = t;\n            C.update();\n          }\n          w[b] = C.computeB(C.a, C.b, t);\n          _[b] = C.computeInvC(C.epsilon);\n        }\n        var P;\n        var T;\n        var C;\n        var S;\n        var b;\n        var A;\n        if (u !== 0) {\n          for (b = 0; b !== f; b++) {\n            var x = p[b];\n            x.resetConstraintVelocity();\n          }\n          if (l) {\n            for (i = 0; i !== l; i++) {\n              S = 0;\n              A = 0;\n              for (; A !== u; A++) {\n                C = c[A];\n                var E = s.iterateEquation(A, C, C.epsilon, w, _, v, m, t, i);\n                S += Math.abs(E);\n              }\n              this.usedIterations++;\n              if (S * S <= d) {\n                break;\n              }\n            }\n            s.updateMultipliers(c, v, 1 / t);\n            A = 0;\n            for (; A !== u; A++) {\n              var I = c[A];\n              if (I instanceof h) {\n                var M = 0;\n                for (var R = 0; R !== I.contactEquations.length; R++) {\n                  M += I.contactEquations[R].multiplier;\n                }\n                M *= I.frictionCoefficient / I.contactEquations.length;\n                I.maxForce = M;\n                I.minForce = -M;\n              }\n            }\n          }\n          for (i = 0; i !== a; i++) {\n            S = 0;\n            A = 0;\n            for (; A !== u; A++) {\n              C = c[A];\n              var E = s.iterateEquation(A, C, C.epsilon, w, _, v, m, t, i);\n              S += Math.abs(E);\n            }\n            this.usedIterations++;\n            if (S * S <= d) {\n              break;\n            }\n          }\n          for (b = 0; b !== f; b++) {\n            p[b].addConstraintVelocity();\n          }\n          s.updateMultipliers(c, v, 1 / t);\n        }\n      };\n      s.updateMultipliers = function (t, e, i) {\n        for (var s = t.length; s--;) {\n          t[s].multiplier = e[s] * i;\n        }\n      };\n      s.iterateEquation = function (t, e, i, s, n, o, a, r, h) {\n        var l = s[t];\n        var c = n[t];\n        var u = o[t];\n        var d = e.computeGWlambda();\n        var p = e.maxForce;\n        var f = e.minForce;\n        if (a) {\n          l = 0;\n        }\n        var y = c * (l - d - i * u);\n        var g = u + y;\n        if (g < f * r) {\n          y = f * r - u;\n        } else if (g > p * r) {\n          y = p * r - u;\n        }\n        o[t] += y;\n        e.addToWlambda(y);\n        return y;\n      };\n    }, {\n      "../equations/FrictionEquation": 23,\n      "../math/vec2": 30,\n      "../utils/Utils": 57,\n      "./Solver": 47\n    }],\n    47: [function (t, e, i) {\n      function s(t, e) {\n        t = t || {};\n        o.call(this);\n        this.type = e;\n        this.equations = [];\n        this.equationSortFunction = t.equationSortFunction || false;\n      }\n      var n = t("../utils/Utils");\n      var o = t("../events/EventEmitter");\n      e.exports = s;\n      s.prototype = new o();\n      s.prototype.constructor = s;\n      s.prototype.solve = function (t, e) {\n        throw new Error("Solver.solve should be implemented by subclasses!");\n      };\n      var a = {\n        bodies: []\n      };\n      s.prototype.solveIsland = function (t, e) {\n        this.removeAllEquations();\n        if (e.equations.length) {\n          this.addEquations(e.equations);\n          a.bodies.length = 0;\n          e.getBodies(a.bodies);\n          if (a.bodies.length) {\n            this.solve(t, a);\n          }\n        }\n      };\n      s.prototype.sortEquations = function () {\n        if (this.equationSortFunction) {\n          this.equations.sort(this.equationSortFunction);\n        }\n      };\n      s.prototype.addEquation = function (t) {\n        if (t.enabled) {\n          this.equations.push(t);\n        }\n      };\n      s.prototype.addEquations = function (t) {\n        for (var e = 0, i = t.length; e !== i; e++) {\n          var s = t[e];\n          if (s.enabled) {\n            this.equations.push(s);\n          }\n        }\n      };\n      s.prototype.removeEquation = function (t) {\n        var e = this.equations.indexOf(t);\n        if (e !== -1) {\n          this.equations.splice(e, 1);\n        }\n      };\n      s.prototype.removeAllEquations = function () {\n        this.equations.length = 0;\n      };\n      s.GS = 1;\n      s.ISLAND = 2;\n    }, {\n      "../events/EventEmitter": 26,\n      "../utils/Utils": 57\n    }],\n    48: [function (t, e, i) {\n      function s() {\n        o.apply(this, arguments);\n      }\n      var n = t("../equations/ContactEquation");\n      var o = t("./Pool");\n      e.exports = s;\n      s.prototype = new o();\n      s.prototype.constructor = s;\n      s.prototype.create = function () {\n        return new n();\n      };\n      s.prototype.destroy = function (t) {\n        t.bodyA = t.bodyB = null;\n        return this;\n      };\n    }, {\n      "../equations/ContactEquation": 21,\n      "./Pool": 55\n    }],\n    49: [function (t, e, i) {\n      function s() {\n        o.apply(this, arguments);\n      }\n      var n = t("../equations/FrictionEquation");\n      var o = t("./Pool");\n      e.exports = s;\n      s.prototype = new o();\n      s.prototype.constructor = s;\n      s.prototype.create = function () {\n        return new n();\n      };\n      s.prototype.destroy = function (t) {\n        t.bodyA = t.bodyB = null;\n        return this;\n      };\n    }, {\n      "../equations/FrictionEquation": 23,\n      "./Pool": 55\n    }],\n    50: [function (t, e, i) {\n      function s() {\n        o.apply(this, arguments);\n      }\n      var n = t("../world/IslandNode");\n      var o = t("./Pool");\n      e.exports = s;\n      s.prototype = new o();\n      s.prototype.constructor = s;\n      s.prototype.create = function () {\n        return new n();\n      };\n      s.prototype.destroy = function (t) {\n        t.reset();\n        return this;\n      };\n    }, {\n      "../world/IslandNode": 60,\n      "./Pool": 55\n    }],\n    51: [function (t, e, i) {\n      function s() {\n        o.apply(this, arguments);\n      }\n      var n = t("../world/Island");\n      var o = t("./Pool");\n      e.exports = s;\n      s.prototype = new o();\n      s.prototype.constructor = s;\n      s.prototype.create = function () {\n        return new n();\n      };\n      s.prototype.destroy = function (t) {\n        t.reset();\n        return this;\n      };\n    }, {\n      "../world/Island": 58,\n      "./Pool": 55\n    }],\n    52: [function (t, e, i) {\n      function s() {\n        this.overlappingShapesLastState = new n();\n        this.overlappingShapesCurrentState = new n();\n        this.recordPool = new a({\n          size: 16\n        });\n        this.tmpDict = new n();\n        this.tmpArray1 = [];\n      }\n      var n = t("./TupleDictionary");\n      var o = t("./OverlapKeeperRecord");\n      var a = t("./OverlapKeeperRecordPool");\n      var r = t("./Utils");\n      e.exports = s;\n      s.prototype.tick = function () {\n        var t = this.overlappingShapesLastState;\n        var e = this.overlappingShapesCurrentState;\n        for (var i = t.keys.length; i--;) {\n          var s = t.keys[i];\n          var n = t.getByKey(s);\n          var o = e.getByKey(s);\n          if (n) {\n            this.recordPool.release(n);\n          }\n        }\n        t.reset();\n        t.copy(e);\n        e.reset();\n      };\n      s.prototype.setOverlapping = function (t, e, i, s) {\n        var n = this.overlappingShapesLastState;\n        var o = this.overlappingShapesCurrentState;\n        if (!o.get(e.id, s.id)) {\n          var a = this.recordPool.get();\n          a.set(t, e, i, s);\n          o.set(e.id, s.id, a);\n        }\n      };\n      s.prototype.getNewOverlaps = function (t) {\n        return this.getDiff(this.overlappingShapesLastState, this.overlappingShapesCurrentState, t);\n      };\n      s.prototype.getEndOverlaps = function (t) {\n        return this.getDiff(this.overlappingShapesCurrentState, this.overlappingShapesLastState, t);\n      };\n      s.prototype.bodiesAreOverlapping = function (t, e) {\n        var i = this.overlappingShapesCurrentState;\n        for (var s = i.keys.length; s--;) {\n          var n = i.keys[s];\n          var o = i.data[n];\n          if (o.bodyA === t && o.bodyB === e || o.bodyA === e && o.bodyB === t) {\n            return true;\n          }\n        }\n        return false;\n      };\n      s.prototype.getDiff = function (t, e, i) {\n        var i = i || [];\n        var s = t;\n        var n = e;\n        i.length = 0;\n        for (var o = n.keys.length; o--;) {\n          var a = n.keys[o];\n          var r = n.data[a];\n          if (!r) {\n            throw new Error("Key " + a + " had no data!");\n          }\n          if (!s.data[a]) {\n            i.push(r);\n          }\n        }\n        return i;\n      };\n      s.prototype.isNewOverlap = function (t, e) {\n        var i = t.id | 0;\n        var s = e.id | 0;\n        var n = this.overlappingShapesLastState;\n        var o = this.overlappingShapesCurrentState;\n        return !n.get(i, s) && !!o.get(i, s);\n      };\n      s.prototype.getNewBodyOverlaps = function (t) {\n        this.tmpArray1.length = 0;\n        var e = this.getNewOverlaps(this.tmpArray1);\n        return this.getBodyDiff(e, t);\n      };\n      s.prototype.getEndBodyOverlaps = function (t) {\n        this.tmpArray1.length = 0;\n        var e = this.getEndOverlaps(this.tmpArray1);\n        return this.getBodyDiff(e, t);\n      };\n      s.prototype.getBodyDiff = function (t, e) {\n        e = e || [];\n        var i = this.tmpDict;\n        for (var s = t.length; s--;) {\n          var n = t[s];\n          i.set(n.bodyA.id | 0, n.bodyB.id | 0, n);\n        }\n        for (s = i.keys.length; s--;) {\n          var n = i.getByKey(i.keys[s]);\n          if (n) {\n            e.push(n.bodyA, n.bodyB);\n          }\n        }\n        i.reset();\n        return e;\n      };\n    }, {\n      "./OverlapKeeperRecord": 53,\n      "./OverlapKeeperRecordPool": 54,\n      "./TupleDictionary": 56,\n      "./Utils": 57\n    }],\n    53: [function (t, e, i) {\n      function s(t, e, i, s) {\n        this.shapeA = e;\n        this.shapeB = s;\n        this.bodyA = t;\n        this.bodyB = i;\n      }\n      e.exports = s;\n      s.prototype.set = function (t, e, i, n) {\n        s.call(this, t, e, i, n);\n      };\n    }, {}],\n    54: [function (t, e, i) {\n      function s() {\n        o.apply(this, arguments);\n      }\n      var n = t("./OverlapKeeperRecord");\n      var o = t("./Pool");\n      e.exports = s;\n      s.prototype = new o();\n      s.prototype.constructor = s;\n      s.prototype.create = function () {\n        return new n();\n      };\n      s.prototype.destroy = function (t) {\n        t.bodyA = t.bodyB = t.shapeA = t.shapeB = null;\n        return this;\n      };\n    }, {\n      "./OverlapKeeperRecord": 53,\n      "./Pool": 55\n    }],\n    55: [function (t, e, i) {\n      function s(t) {\n        t = t || {};\n        this.objects = [];\n        if (t.size !== undefined) {\n          this.resize(t.size);\n        }\n      }\n      e.exports = s;\n      s.prototype.resize = function (t) {\n        for (var e = this.objects; e.length > t;) {\n          e.pop();\n        }\n        while (e.length < t) {\n          e.push(this.create());\n        }\n        return this;\n      };\n      s.prototype.get = function () {\n        var t = this.objects;\n        if (t.length) {\n          return t.pop();\n        } else {\n          return this.create();\n        }\n      };\n      s.prototype.release = function (t) {\n        this.destroy(t);\n        this.objects.push(t);\n        return this;\n      };\n    }, {}],\n    56: [function (t, e, i) {\n      function s() {\n        this.data = {};\n        this.keys = [];\n      }\n      var n = t("./Utils");\n      e.exports = s;\n      s.prototype.getKey = function (t, e) {\n        t |= 0;\n        e |= 0;\n        if ((t | 0) == (e | 0)) {\n          return -1;\n        } else {\n          return ((t | 0) > (e | 0) ? t << 16 | e & 65535 : e << 16 | t & 65535) | 0;\n        }\n      };\n      s.prototype.getByKey = function (t) {\n        t |= 0;\n        return this.data[t];\n      };\n      s.prototype.get = function (t, e) {\n        return this.data[this.getKey(t, e)];\n      };\n      s.prototype.set = function (t, e, i) {\n        if (!i) {\n          throw new Error("No data!");\n        }\n        var s = this.getKey(t, e);\n        if (!this.data[s]) {\n          this.keys.push(s);\n        }\n        this.data[s] = i;\n        return s;\n      };\n      s.prototype.reset = function () {\n        var t = this.data;\n        var e = this.keys;\n        for (var i = e.length; i--;) {\n          delete t[e[i]];\n        }\n        e.length = 0;\n      };\n      s.prototype.copy = function (t) {\n        this.reset();\n        n.appendArray(this.keys, t.keys);\n        for (var e = t.keys.length; e--;) {\n          var i = t.keys[e];\n          this.data[i] = t.data[i];\n        }\n      };\n    }, {\n      "./Utils": 57\n    }],\n    57: [function (t, e, i) {\n      function s() {}\n      e.exports = s;\n      s.appendArray = function (t, e) {\n        if (e.length < 150000) {\n          t.push.apply(t, e);\n        } else {\n          for (var i = 0, s = e.length; i !== s; ++i) {\n            t.push(e[i]);\n          }\n        }\n      };\n      s.splice = function (t, e, i) {\n        i = i || 1;\n        for (var s = e, n = t.length - i; s < n; s++) {\n          t[s] = t[s + i];\n        }\n        t.length = n;\n      };\n      if (typeof P2_ARRAY_TYPE != "undefined") {\n        s.ARRAY_TYPE = P2_ARRAY_TYPE;\n      } else if (typeof Float32Array != "undefined") {\n        s.ARRAY_TYPE = Float32Array;\n      } else {\n        s.ARRAY_TYPE = Array;\n      }\n      s.extend = function (t, e) {\n        for (var i in e) {\n          t[i] = e[i];\n        }\n      };\n      s.defaults = function (t, e) {\n        t = t || {};\n        for (var i in e) {\n          if (!(i in t)) {\n            t[i] = e[i];\n          }\n        }\n        return t;\n      };\n    }, {}],\n    58: [function (t, e, i) {\n      function s() {\n        this.equations = [];\n        this.bodies = [];\n      }\n      var n = t("../objects/Body");\n      e.exports = s;\n      s.prototype.reset = function () {\n        this.equations.length = this.bodies.length = 0;\n      };\n      var o = [];\n      s.prototype.getBodies = function (t) {\n        var e = t || [];\n        var i = this.equations;\n        o.length = 0;\n        for (var s = 0; s !== i.length; s++) {\n          var n = i[s];\n          if (o.indexOf(n.bodyA.id) === -1) {\n            e.push(n.bodyA);\n            o.push(n.bodyA.id);\n          }\n          if (o.indexOf(n.bodyB.id) === -1) {\n            e.push(n.bodyB);\n            o.push(n.bodyB.id);\n          }\n        }\n        return e;\n      };\n      s.prototype.wantsToSleep = function () {\n        for (var t = 0; t < this.bodies.length; t++) {\n          var e = this.bodies[t];\n          if (e.type === n.DYNAMIC && !e.wantsToSleep) {\n            return false;\n          }\n        }\n        return true;\n      };\n      s.prototype.sleep = function () {\n        for (var t = 0; t < this.bodies.length; t++) {\n          this.bodies[t].sleep();\n        }\n        return true;\n      };\n    }, {\n      "../objects/Body": 31\n    }],\n    59: [function (t, e, i) {\n      function s(t) {\n        this.nodePool = new r({\n          size: 16\n        });\n        this.islandPool = new h({\n          size: 8\n        });\n        this.equations = [];\n        this.islands = [];\n        this.nodes = [];\n        this.queue = [];\n      }\n      var n = t("../math/vec2");\n      var o = t("./Island");\n      var a = t("./IslandNode");\n      var r = t("./../utils/IslandNodePool");\n      var h = t("./../utils/IslandPool");\n      var l = t("../objects/Body");\n      e.exports = s;\n      s.getUnvisitedNode = function (t) {\n        for (var e = t.length, i = 0; i !== e; i++) {\n          var s = t[i];\n          if (!s.visited && s.body.type === l.DYNAMIC) {\n            return s;\n          }\n        }\n        return false;\n      };\n      s.prototype.visit = function (t, e, i) {\n        e.push(t.body);\n        for (var s = t.equations.length, n = 0; n !== s; n++) {\n          var o = t.equations[n];\n          if (i.indexOf(o) === -1) {\n            i.push(o);\n          }\n        }\n      };\n      s.prototype.bfs = function (t, e, i) {\n        var n = this.queue;\n        n.length = 0;\n        n.push(t);\n        t.visited = true;\n        this.visit(t, e, i);\n        while (n.length) {\n          for (var o = n.pop(), a; a = s.getUnvisitedNode(o.neighbors);) {\n            a.visited = true;\n            this.visit(a, e, i);\n            if (a.body.type === l.DYNAMIC) {\n              n.push(a);\n            }\n          }\n        }\n      };\n      s.prototype.split = function (t) {\n        var e = t.bodies;\n        for (var i = this.nodes, n = this.equations; i.length;) {\n          this.nodePool.release(i.pop());\n        }\n        for (var o = 0; o !== e.length; o++) {\n          var a = this.nodePool.get();\n          a.body = e[o];\n          i.push(a);\n        }\n        for (var r = 0; r !== n.length; r++) {\n          var h = n[r];\n          var o = e.indexOf(h.bodyA);\n          var l = e.indexOf(h.bodyB);\n          var c = i[o];\n          var u = i[l];\n          c.neighbors.push(u);\n          u.neighbors.push(c);\n          c.equations.push(h);\n          u.equations.push(h);\n        }\n        for (var d = this.islands, o = 0; o < d.length; o++) {\n          this.islandPool.release(d[o]);\n        }\n        d.length = 0;\n        for (var p; p = s.getUnvisitedNode(i);) {\n          var f = this.islandPool.get();\n          this.bfs(p, f.bodies, f.equations);\n          d.push(f);\n        }\n        return d;\n      };\n    }, {\n      "../math/vec2": 30,\n      "../objects/Body": 31,\n      "./../utils/IslandNodePool": 50,\n      "./../utils/IslandPool": 51,\n      "./Island": 58,\n      "./IslandNode": 60\n    }],\n    60: [function (t, e, i) {\n      function s(t) {\n        this.body = t;\n        this.neighbors = [];\n        this.equations = [];\n        this.visited = false;\n      }\n      e.exports = s;\n      s.prototype.reset = function () {\n        this.equations.length = 0;\n        this.neighbors.length = 0;\n        this.visited = false;\n        this.body = null;\n      };\n    }, {}],\n    61: [function (t, e, i) {\n      function s(t) {\n        f.apply(this);\n        t = t || {};\n        this.springs = [];\n        this.bodies = [];\n        this.disabledBodyCollisionPairs = [];\n        this.solver = t.solver || new n();\n        this.narrowphase = new M(this);\n        this.islandManager = new B();\n        this.gravity = r.fromValues(0, -9.78);\n        if (t.gravity) {\n          r.copy(this.gravity, t.gravity);\n        }\n        this.frictionGravity = r.length(this.gravity) || 10;\n        this.useWorldGravityAsFrictionGravity = true;\n        this.useFrictionGravityOnZeroGravity = true;\n        this.broadphase = t.broadphase || new I();\n        this.broadphase.setWorld(this);\n        this.constraints = [];\n        this.defaultMaterial = new v();\n        this.defaultContactMaterial = new b(this.defaultMaterial, this.defaultMaterial);\n        this.lastTimeStep = 1 / 60;\n        this.applySpringForces = true;\n        this.applyDamping = true;\n        this.applyGravity = true;\n        this.solveConstraints = true;\n        this.contactMaterials = [];\n        this.time = 0;\n        this.accumulator = 0;\n        this.stepping = false;\n        this.bodiesToBeRemoved = [];\n        this.islandSplit = t.islandSplit === undefined || !!t.islandSplit;\n        this.emitImpactEvent = true;\n        this._constraintIdCounter = 0;\n        this._bodyIdCounter = 0;\n        this.postStepEvent = {\n          type: "postStep"\n        };\n        this.addBodyEvent = {\n          type: "addBody",\n          body: null\n        };\n        this.removeBodyEvent = {\n          type: "removeBody",\n          body: null\n        };\n        this.addSpringEvent = {\n          type: "addSpring",\n          spring: null\n        };\n        this.impactEvent = {\n          type: "impact",\n          bodyA: null,\n          bodyB: null,\n          shapeA: null,\n          shapeB: null,\n          contactEquation: null\n        };\n        this.postBroadphaseEvent = {\n          type: "postBroadphase",\n          pairs: null\n        };\n        this.sleepMode = s.NO_SLEEPING;\n        this.beginContactEvent = {\n          type: "beginContact",\n          shapeA: null,\n          shapeB: null,\n          bodyA: null,\n          bodyB: null,\n          contactEquations: []\n        };\n        this.endContactEvent = {\n          type: "endContact",\n          shapeA: null,\n          shapeB: null,\n          bodyA: null,\n          bodyB: null\n        };\n        this.preSolveEvent = {\n          type: "preSolve",\n          contactEquations: null,\n          frictionEquations: null\n        };\n        this.overlappingShapesLastState = {\n          keys: []\n        };\n        this.overlappingShapesCurrentState = {\n          keys: []\n        };\n        this.overlapKeeper = new O();\n      }\n      var n = t("../solver/GSSolver");\n      var o = t("../solver/Solver");\n      var a = t("../collision/Ray");\n      var r = t("../math/vec2");\n      var h = t("../shapes/Circle");\n      var l = t("../shapes/Convex");\n      var c = t("../shapes/Line");\n      var u = t("../shapes/Plane");\n      var d = t("../shapes/Capsule");\n      var p = t("../shapes/Particle");\n      var f = t("../events/EventEmitter");\n      var y = t("../objects/Body");\n      var g = t("../shapes/Shape");\n      var m = t("../objects/LinearSpring");\n      var v = t("../material/Material");\n      var b = t("../material/ContactMaterial");\n      var x = t("../constraints/DistanceConstraint");\n      var _ = t("../constraints/Constraint");\n      var w = t("../constraints/LockConstraint");\n      var C = t("../constraints/RevoluteConstraint");\n      var P = t("../constraints/PrismaticConstraint");\n      var T = t("../constraints/GearConstraint");\n      var S = t("../../package.json");\n      var A = t("../collision/Broadphase");\n      var E = t("../collision/AABB");\n      var I = t("../collision/SAPBroadphase");\n      var M = t("../collision/Narrowphase");\n      var R = t("../utils/Utils");\n      var O = t("../utils/OverlapKeeper");\n      var B = t("./IslandManager");\n      var L = t("../objects/RotationalSpring");\n      e.exports = s;\n      s.prototype = new Object(f.prototype);\n      s.prototype.constructor = s;\n      s.NO_SLEEPING = 1;\n      s.BODY_SLEEPING = 2;\n      s.ISLAND_SLEEPING = 4;\n      s.prototype.addConstraint = function (t) {\n        this.constraints.push(t);\n      };\n      s.prototype.addContactMaterial = function (t) {\n        this.contactMaterials.push(t);\n      };\n      s.prototype.removeContactMaterial = function (t) {\n        var e = this.contactMaterials.indexOf(t);\n        if (e !== -1) {\n          R.splice(this.contactMaterials, e, 1);\n        }\n      };\n      s.prototype.getContactMaterial = function (t, e) {\n        var i = this.contactMaterials;\n        for (var s = 0, n = i.length; s !== n; s++) {\n          var o = i[s];\n          if (o.materialA.id === t.id && o.materialB.id === e.id || o.materialA.id === e.id && o.materialB.id === t.id) {\n            return o;\n          }\n        }\n        return false;\n      };\n      s.prototype.removeConstraint = function (t) {\n        var e = this.constraints.indexOf(t);\n        if (e !== -1) {\n          R.splice(this.constraints, e, 1);\n        }\n      };\n      var k = r.create();\n      var D = r.create();\n      var F = r.create();\n      var G = r.create();\n      var U = r.create();\n      var N = r.create();\n      var j = r.create();\n      var W = r.fromValues(0, 0);\n      var X = r.fromValues(0, 0);\n      var H = r.fromValues(0, 0);\n      var V = r.fromValues(0, 0);\n      s.prototype.step = function (t, e, i) {\n        i = i || 10;\n        if ((e = e || 0) === 0) {\n          this.internalStep(t);\n          this.time += t;\n        } else {\n          this.accumulator += e;\n          for (var s = 0; this.accumulator >= t && s < i;) {\n            this.internalStep(t);\n            this.time += t;\n            this.accumulator -= t;\n            s++;\n          }\n          var n = this.accumulator % t / t;\n          for (var o = 0; o !== this.bodies.length; o++) {\n            var a = this.bodies[o];\n            r.lerp(a.interpolatedPosition, a.previousPosition, a.position, n);\n            a.interpolatedAngle = a.previousAngle + n * (a.angle - a.previousAngle);\n          }\n        }\n      };\n      var Y = [];\n      s.prototype.internalStep = function (t) {\n        this.stepping = true;\n        var e = this;\n        var i = this.springs.length;\n        var n = this.springs;\n        var o = this.bodies;\n        var a = this.gravity;\n        var h = this.solver;\n        var l = this.bodies.length;\n        var c = this.broadphase;\n        var u = this.narrowphase;\n        var d = this.constraints;\n        var p;\n        var f;\n        var g = U;\n        var m = N;\n        var v = j;\n        var b = r.scale;\n        var x = r.add;\n        var _ = r.rotate;\n        var w = this.islandManager;\n        this.overlapKeeper.tick();\n        this.lastTimeStep = t;\n        if (this.useWorldGravityAsFrictionGravity) {\n          var C = r.length(this.gravity);\n          if (C !== 0 || !this.useFrictionGravityOnZeroGravity) {\n            this.frictionGravity = C;\n          }\n        }\n        if (this.applyGravity) {\n          for (var P = 0; P !== l; P++) {\n            var T = o[P];\n            var S = T.force;\n            if (T.type === y.DYNAMIC && T.sleepState !== y.SLEEPING) {\n              r.scale(v, a, T.mass * T.gravityScale);\n              x(S, S, v);\n            }\n          }\n        }\n        if (this.applySpringForces) {\n          for (var P = 0; P !== i; P++) {\n            var A = n[P];\n            A.applyForce();\n          }\n        }\n        if (this.applyDamping) {\n          for (var P = 0; P !== l; P++) {\n            var T = o[P];\n            if (T.type === y.DYNAMIC) {\n              T.applyDamping(t);\n            }\n          }\n        }\n        var E = c.getCollisionPairs(this);\n        var I = this.disabledBodyCollisionPairs;\n        for (var P = I.length - 2; P >= 0; P -= 2) {\n          for (var M = E.length - 2; M >= 0; M -= 2) {\n            if (I[P] === E[M] && I[P + 1] === E[M + 1] || I[P + 1] === E[M] && I[P] === E[M + 1]) {\n              E.splice(M, 2);\n            }\n          }\n        }\n        var O = d.length;\n        for (P = 0; P !== O; P++) {\n          var B = d[P];\n          if (!B.collideConnected) {\n            for (var M = E.length - 2; M >= 0; M -= 2) {\n              if (B.bodyA === E[M] && B.bodyB === E[M + 1] || B.bodyB === E[M] && B.bodyA === E[M + 1]) {\n                E.splice(M, 2);\n              }\n            }\n          }\n        }\n        this.postBroadphaseEvent.pairs = E;\n        this.emit(this.postBroadphaseEvent);\n        this.postBroadphaseEvent.pairs = null;\n        u.reset(this);\n        for (var P = 0, L = E.length; P !== L; P += 2) {\n          var k = E[P];\n          var D = E[P + 1];\n          for (var F = 0, G = k.shapes.length; F !== G; F++) {\n            var W = k.shapes[F];\n            var X = W.position;\n            var H = W.angle;\n            for (var V = 0, q = D.shapes.length; V !== q; V++) {\n              var z = D.shapes[V];\n              var K = z.position;\n              var J = z.angle;\n              var Z = this.defaultContactMaterial;\n              if (W.material && z.material) {\n                var Q = this.getContactMaterial(W.material, z.material);\n                if (Q) {\n                  Z = Q;\n                }\n              }\n              this.runNarrowphase(u, k, W, X, H, D, z, K, J, Z, this.frictionGravity);\n            }\n          }\n        }\n        for (var P = 0; P !== l; P++) {\n          var $ = o[P];\n          if ($._wakeUpAfterNarrowphase) {\n            $.wakeUp();\n            $._wakeUpAfterNarrowphase = false;\n          }\n        }\n        if (this.has("endContact")) {\n          this.overlapKeeper.getEndOverlaps(Y);\n          var tt = this.endContactEvent;\n          for (var V = Y.length; V--;) {\n            var et = Y[V];\n            tt.shapeA = et.shapeA;\n            tt.shapeB = et.shapeB;\n            tt.bodyA = et.bodyA;\n            tt.bodyB = et.bodyB;\n            this.emit(tt);\n          }\n          Y.length = 0;\n        }\n        var it = this.preSolveEvent;\n        it.contactEquations = u.contactEquations;\n        it.frictionEquations = u.frictionEquations;\n        this.emit(it);\n        it.contactEquations = it.frictionEquations = null;\n        var O = d.length;\n        for (P = 0; P !== O; P++) {\n          d[P].update();\n        }\n        if (u.contactEquations.length || u.frictionEquations.length || O) {\n          if (this.islandSplit) {\n            w.equations.length = 0;\n            R.appendArray(w.equations, u.contactEquations);\n            R.appendArray(w.equations, u.frictionEquations);\n            P = 0;\n            for (; P !== O; P++) {\n              R.appendArray(w.equations, d[P].equations);\n            }\n            w.split(this);\n            for (var P = 0; P !== w.islands.length; P++) {\n              var st = w.islands[P];\n              if (st.equations.length) {\n                h.solveIsland(t, st);\n              }\n            }\n          } else {\n            h.addEquations(u.contactEquations);\n            h.addEquations(u.frictionEquations);\n            P = 0;\n            for (; P !== O; P++) {\n              h.addEquations(d[P].equations);\n            }\n            if (this.solveConstraints) {\n              h.solve(t, this);\n            }\n            h.removeAllEquations();\n          }\n        }\n        for (var P = 0; P !== l; P++) {\n          var $ = o[P];\n          $.integrate(t);\n        }\n        for (var P = 0; P !== l; P++) {\n          o[P].setZeroForce();\n        }\n        if (this.emitImpactEvent && this.has("impact")) {\n          var nt = this.impactEvent;\n          for (var P = 0; P !== u.contactEquations.length; P++) {\n            var ot = u.contactEquations[P];\n            if (ot.firstImpact) {\n              nt.bodyA = ot.bodyA;\n              nt.bodyB = ot.bodyB;\n              nt.shapeA = ot.shapeA;\n              nt.shapeB = ot.shapeB;\n              nt.contactEquation = ot;\n              this.emit(nt);\n            }\n          }\n        }\n        if (this.sleepMode === s.BODY_SLEEPING) {\n          for (P = 0; P !== l; P++) {\n            o[P].sleepTick(this.time, false, t);\n          }\n        } else if (this.sleepMode === s.ISLAND_SLEEPING && this.islandSplit) {\n          for (P = 0; P !== l; P++) {\n            o[P].sleepTick(this.time, true, t);\n          }\n          for (var P = 0; P < this.islandManager.islands.length; P++) {\n            var st = this.islandManager.islands[P];\n            if (st.wantsToSleep()) {\n              st.sleep();\n            }\n          }\n        }\n        this.stepping = false;\n        for (var at = this.bodiesToBeRemoved, P = 0; P !== at.length; P++) {\n          this.removeBody(at[P]);\n        }\n        at.length = 0;\n        this.emit(this.postStepEvent);\n      };\n      s.prototype.runNarrowphase = function (t, e, i, s, n, o, a, h, l, c, u) {\n        if ((i.collisionGroup & a.collisionMask) != 0 && (a.collisionGroup & i.collisionMask) != 0) {\n          r.rotate(W, s, e.angle);\n          r.rotate(X, h, o.angle);\n          r.add(W, W, e.position);\n          r.add(X, X, o.position);\n          var d = n + e.angle;\n          var p = l + o.angle;\n          t.enableFriction = c.friction > 0;\n          t.frictionCoefficient = c.friction;\n          var f;\n          f = e.type === y.STATIC || e.type === y.KINEMATIC ? o.mass : o.type === y.STATIC || o.type === y.KINEMATIC ? e.mass : e.mass * o.mass / (e.mass + o.mass);\n          t.slipForce = c.friction * u * f;\n          t.restitution = c.restitution;\n          t.surfaceVelocity = c.surfaceVelocity;\n          t.frictionStiffness = c.frictionStiffness;\n          t.frictionRelaxation = c.frictionRelaxation;\n          t.stiffness = c.stiffness;\n          t.relaxation = c.relaxation;\n          t.contactSkinSize = c.contactSkinSize;\n          t.enabledEquations = e.collisionResponse && o.collisionResponse && i.collisionResponse && a.collisionResponse;\n          var g = t[i.type | a.type];\n          var m = 0;\n          if (g) {\n            var v = i.sensor || a.sensor;\n            var b = t.frictionEquations.length;\n            m = i.type < a.type ? g.call(t, e, i, W, d, o, a, X, p, v) : g.call(t, o, a, X, p, e, i, W, d, v);\n            var x = t.frictionEquations.length - b;\n            if (m) {\n              if (e.allowSleep && e.type === y.DYNAMIC && e.sleepState === y.SLEEPING && o.sleepState === y.AWAKE && o.type !== y.STATIC) {\n                if (r.squaredLength(o.velocity) + Math.pow(o.angularVelocity, 2) >= Math.pow(o.sleepSpeedLimit, 2) * 2) {\n                  e._wakeUpAfterNarrowphase = true;\n                }\n              }\n              if (o.allowSleep && o.type === y.DYNAMIC && o.sleepState === y.SLEEPING && e.sleepState === y.AWAKE && e.type !== y.STATIC) {\n                if (r.squaredLength(e.velocity) + Math.pow(e.angularVelocity, 2) >= Math.pow(e.sleepSpeedLimit, 2) * 2) {\n                  o._wakeUpAfterNarrowphase = true;\n                }\n              }\n              this.overlapKeeper.setOverlapping(e, i, o, a);\n              if (this.has("beginContact") && this.overlapKeeper.isNewOverlap(i, a)) {\n                var _ = this.beginContactEvent;\n                _.shapeA = i;\n                _.shapeB = a;\n                _.bodyA = e;\n                _.bodyB = o;\n                _.contactEquations.length = 0;\n                if (typeof m == "number") {\n                  for (var w = t.contactEquations.length - m; w < t.contactEquations.length; w++) {\n                    _.contactEquations.push(t.contactEquations[w]);\n                  }\n                }\n                this.emit(_);\n              }\n              if (typeof m == "number" && x > 1) {\n                for (var w = t.frictionEquations.length - x; w < t.frictionEquations.length; w++) {\n                  var C = t.frictionEquations[w];\n                  C.setSlipForce(C.getSlipForce() / x);\n                }\n              }\n            }\n          }\n        }\n      };\n      s.prototype.addSpring = function (t) {\n        this.springs.push(t);\n        var e = this.addSpringEvent;\n        e.spring = t;\n        this.emit(e);\n        e.spring = null;\n      };\n      s.prototype.removeSpring = function (t) {\n        var e = this.springs.indexOf(t);\n        if (e !== -1) {\n          R.splice(this.springs, e, 1);\n        }\n      };\n      s.prototype.addBody = function (t) {\n        if (this.bodies.indexOf(t) === -1) {\n          this.bodies.push(t);\n          t.world = this;\n          var e = this.addBodyEvent;\n          e.body = t;\n          this.emit(e);\n          e.body = null;\n        }\n      };\n      s.prototype.removeBody = function (t) {\n        if (this.stepping) {\n          this.bodiesToBeRemoved.push(t);\n        } else {\n          t.world = null;\n          var e = this.bodies.indexOf(t);\n          if (e !== -1) {\n            R.splice(this.bodies, e, 1);\n            this.removeBodyEvent.body = t;\n            t.resetConstraintVelocity();\n            this.emit(this.removeBodyEvent);\n            this.removeBodyEvent.body = null;\n          }\n        }\n      };\n      s.prototype.getBodyById = function (t) {\n        for (var e = this.bodies, i = 0; i < e.length; i++) {\n          var s = e[i];\n          if (s.id === t) {\n            return s;\n          }\n        }\n        return false;\n      };\n      s.prototype.disableBodyCollision = function (t, e) {\n        this.disabledBodyCollisionPairs.push(t, e);\n      };\n      s.prototype.enableBodyCollision = function (t, e) {\n        for (var i = this.disabledBodyCollisionPairs, s = 0; s < i.length; s += 2) {\n          if (i[s] === t && i[s + 1] === e || i[s + 1] === t && i[s] === e) {\n            i.splice(s, 2);\n            return;\n          }\n        }\n      };\n      s.prototype.clear = function () {\n        this.time = 0;\n        if (this.solver && this.solver.equations.length) {\n          this.solver.removeAllEquations();\n        }\n        var t = this.constraints;\n        for (var e = t.length - 1; e >= 0; e--) {\n          this.removeConstraint(t[e]);\n        }\n        var i = this.bodies;\n        for (var e = i.length - 1; e >= 0; e--) {\n          this.removeBody(i[e]);\n        }\n        var n = this.springs;\n        for (var e = n.length - 1; e >= 0; e--) {\n          this.removeSpring(n[e]);\n        }\n        var o = this.contactMaterials;\n        for (var e = o.length - 1; e >= 0; e--) {\n          this.removeContactMaterial(o[e]);\n        }\n        s.apply(this);\n      };\n      var q = r.create();\n      var z = r.fromValues(0, 0);\n      var K = r.fromValues(0, 0);\n      s.prototype.hitTest = function (t, e, i) {\n        i = i || 0;\n        var s = new y({\n          position: t\n        });\n        var n = new p();\n        var o = t;\n        var a = 0;\n        var c = q;\n        var f = z;\n        var g = K;\n        s.addShape(n);\n        var m = this.narrowphase;\n        var v = [];\n        for (var b = 0, x = e.length; b !== x; b++) {\n          var _ = e[b];\n          for (var w = 0, C = _.shapes.length; w !== C; w++) {\n            var P = _.shapes[w];\n            r.rotate(c, P.position, _.angle);\n            r.add(c, c, _.position);\n            var T = P.angle + _.angle;\n            if (P instanceof h && m.circleParticle(_, P, c, T, s, n, o, 0, true) || P instanceof l && m.particleConvex(s, n, o, 0, _, P, c, T, true) || P instanceof u && m.particlePlane(s, n, o, 0, _, P, c, T, true) || P instanceof d && m.particleCapsule(s, n, o, 0, _, P, c, T, true) || P instanceof p && r.squaredLength(r.sub(g, c, t)) < i * i) {\n              v.push(_);\n            }\n          }\n        }\n        return v;\n      };\n      s.prototype.setGlobalStiffness = function (t) {\n        for (var e = this.constraints, i = 0; i !== e.length; i++) {\n          for (var s = e[i], n = 0; n !== s.equations.length; n++) {\n            var o = s.equations[n];\n            o.stiffness = t;\n            o.needsUpdate = true;\n          }\n        }\n        for (var a = this.contactMaterials, i = 0; i !== a.length; i++) {\n          var s = a[i];\n          s.stiffness = s.frictionStiffness = t;\n        }\n        var s = this.defaultContactMaterial;\n        s.stiffness = s.frictionStiffness = t;\n      };\n      s.prototype.setGlobalRelaxation = function (t) {\n        for (var e = 0; e !== this.constraints.length; e++) {\n          for (var i = this.constraints[e], s = 0; s !== i.equations.length; s++) {\n            var n = i.equations[s];\n            n.relaxation = t;\n            n.needsUpdate = true;\n          }\n        }\n        for (var e = 0; e !== this.contactMaterials.length; e++) {\n          var i = this.contactMaterials[e];\n          i.relaxation = i.frictionRelaxation = t;\n        }\n        var i = this.defaultContactMaterial;\n        i.relaxation = i.frictionRelaxation = t;\n      };\n      var J = new E();\n      var Z = [];\n      s.prototype.raycast = function (t, e) {\n        e.getAABB(J);\n        this.broadphase.aabbQuery(this, J, Z);\n        e.intersectBodies(t, Z);\n        Z.length = 0;\n        return t.hasHit();\n      };\n    }, {\n      "../../package.json": 6,\n      "../collision/AABB": 7,\n      "../collision/Broadphase": 8,\n      "../collision/Narrowphase": 10,\n      "../collision/Ray": 11,\n      "../collision/SAPBroadphase": 13,\n      "../constraints/Constraint": 14,\n      "../constraints/DistanceConstraint": 15,\n      "../constraints/GearConstraint": 16,\n      "../constraints/LockConstraint": 17,\n      "../constraints/PrismaticConstraint": 18,\n      "../constraints/RevoluteConstraint": 19,\n      "../events/EventEmitter": 26,\n      "../material/ContactMaterial": 27,\n      "../material/Material": 28,\n      "../math/vec2": 30,\n      "../objects/Body": 31,\n      "../objects/LinearSpring": 32,\n      "../objects/RotationalSpring": 33,\n      "../shapes/Capsule": 38,\n      "../shapes/Circle": 39,\n      "../shapes/Convex": 40,\n      "../shapes/Line": 42,\n      "../shapes/Particle": 43,\n      "../shapes/Plane": 44,\n      "../shapes/Shape": 45,\n      "../solver/GSSolver": 46,\n      "../solver/Solver": 47,\n      "../utils/OverlapKeeper": 52,\n      "../utils/Utils": 57,\n      "./IslandManager": 59\n    }]\n  }, {}, [36])(36);\n});\n\n//# sourceURL=webpack://motox3m/./src/physics/PhysicsEngine.js?')},"./src/physics/PhysicsEngineModule.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("// PhysicsEngine - Module export for Phaser P2 Physics\n// Provides a bridge between Phaser's P2 physics and the game's physics system\n\n// Key features:\n// - Exports P2 physics from Phaser\n// - Bridges ModulePhaser and game physics\n// - Single point of physics engine access\n// - Maintains consistent physics reference\n\n// File structure:\n// - Imports ModulePhaser for Phaser instance\n// - Extracts P2 physics system\n// - Re-exports for game use\n\n// Usage:\n// const p2 = require('@/src/physics/PhysicsEngine.js');\n// \n// // Use P2 physics:\n// const body = new p2.Body({\n//   mass: 1,\n//   position: [0, 0]\n// });\n\n// Dependencies:\n// - ModulePhaser.js: Core Phaser module\n// - Used by physics components throughout the game\nvar e = __webpack_require__(/*! @/src/lib/ModulePhaser.js */ \"./src/lib/ModulePhaser.js\");\nmodule.exports = e.p2 = __webpack_require__(/*! @/src/physics/PhysicsEngine.js */ \"./src/physics/PhysicsEngine.js\");\n\n//# sourceURL=webpack://motox3m/./src/physics/PhysicsEngineModule.js?")},"./src/physics/PhysicsUtils.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('//exports.__esModule = true;\nvar s = nape.geom.GeomPoly;\nvar n = nape.geom.GeomPolyList;\nvar o = nape.geom.Vec2;\nvar a = nape.phys.Body;\nvar r = nape.phys.BodyType;\nvar h = nape.shape.Polygon;\nvar l = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar c = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar u = function () {\n  function t() {}\n  t.createGroundBody = function (e) {\n    var _e$params$thick;\n    var i = e.params.x;\n    var s = e.params.y;\n    var n = e.params.vertices;\n    var h = n.length;\n    var u = NaN;\n    var d = NaN;\n    var p = (_e$params$thick = e.params.thick) !== null && _e$params$thick !== void 0 ? _e$params$thick : 128;\n    var f = e.params.direction * l["default"].TO_RAD;\n    var y = e.params.directed;\n    var g = c.Materials.GROUND;\n    var m = new a(r.STATIC, o.weak(i, s));\n    m.cbTypes.add(c.CbTypes.GROUND);\n    var v;\n    var b = n[0];\n    v = [b];\n    var x;\n    for (var _ = 1; _ < h; _++) {\n      b = n[_];\n      var w = v[v.length - 1];\n      var C = v.length;\n      if (C === 1) {\n        v[C] = b;\n        x = o.weak(b.x - w.x, b.y - w.y).angle;\n        if (isNaN(u)) {\n          u = x + Math.PI * 0.5;\n        }\n      } else {\n        var P = o.weak(b.x - w.x, b.y - w.y).angle;\n        if (l["default"].normalizeAngle(P - x) < 0) {\n          if (!y) {\n            var T = o.fromPolar(1, x);\n            var S = o.fromPolar(1, P);\n            d = T.sub(S, true).angle;\n            T.dispose();\n            S.dispose();\n          }\n          t.addGroundShape(m, v, f, y, u, d, g, p);\n          u = d;\n          v = [w, b];\n        } else {\n          v[v.length] = b;\n        }\n        x = P;\n      }\n    }\n    t.addGroundShape(m, v, f, y, u, x + Math.PI * 0.5, g, p);\n    if (m.shapes.length === 0) {\n      return null;\n    } else {\n      m.align();\n      return m;\n    }\n  };\n  t.addGroundShape = function (e, i, n, a, r, l, u, d) {\n    var p = [];\n    var f = i.length;\n    var y;\n    for (y = 0; y < f; y++) {\n      var g = i[y];\n      if (g === null) {\n        return;\n      }\n      var m = o.get(g.x, g.y);\n      if (y === 0) {\n        p[p.length] = a ? o.get(m.x + Math.cos(n) * d, m.y + Math.sin(n) * d) : o.get(m.x + Math.cos(r) * d, m.y + Math.sin(r) * d);\n      }\n      p[p.length] = m;\n      if (y === f - 1) {\n        p[p.length] = a ? o.get(m.x + Math.cos(n) * d, m.y + Math.sin(n) * d) : o.get(m.x + Math.cos(l) * d, m.y + Math.sin(l) * d);\n      }\n    }\n    var v = s.get(p);\n    var b;\n    if (v.isConvex()) {\n      b = new h(p, u, c.Filters.GROUND);\n      e.shapes.add(b);\n    } else {\n      for (v.convexDecomposition(false, t.geomPolyList); !t.geomPolyList.empty();) {\n        v = t.geomPolyList.pop();\n        if (v.isConvex()) {\n          b = new h(v, u, c.Filters.GROUND);\n          e.shapes.add(b);\n        }\n      }\n    }\n    v.dispose();\n    f = p.length;\n    y = 0;\n    for (; y < f; y++) {\n      p[y].dispose();\n    }\n    e.userData.isGround = true;\n  };\n  t.geomPolyList = new n();\n  return t;\n}();\nexports.PhysicUtil = u;\n\n//# sourceURL=webpack://motox3m/./src/physics/PhysicsUtils.js?')},"./src/physics/TrailPartObject.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar o = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar a = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nvar r = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    e.create();\n    return e;\n  }\n  s(e, t);\n  e.get = function () {\n    if (e.pool.length > 0) {\n      return e.pool.pop();\n    } else {\n      return new e();\n    }\n  };\n  e.prototype.create = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.type = a.ObjectTypes.LANDSCAPE;\n    this.graphic = new n.TrailPart();\n    this.active = false;\n    o.MaxGameCore.instance.add(this);\n  };\n  e.prototype.update = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (this.active) {\n      this.graphic.update(t);\n      if (!this.graphic.isPlaying) {\n        this.remove();\n      }\n    }\n  };\n  e.prototype.put = function (t, e) {\n    this.graphic.x = t;\n    this.graphic.y = e;\n    this.graphic.visible = true;\n    this.active = true;\n    this.graphic.gotoAndPlay(0);\n  };\n  e.prototype.remove = function () {\n    if (this.active) {\n      e.pool[e.pool.length] = this;\n    }\n    this.active = false;\n    this.graphic.visible = false;\n  };\n  e.prototype.restart = function () {\n    this.remove();\n  };\n  e.pool = [];\n  return e;\n}(n.GameObject);\nexports.TrailPartObject = r;\n\n//# sourceURL=webpack://motox3m/./src/physics/TrailPartObject.js?')},"./src/services/AdsManager.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('// AdsManager Service - Singleton class for handling game advertisements\n// Manages ad display, rewarded videos, and interstitials with SDK integration\n// Note: SDK calls are currently commented out but structure remains\n\n// Key features:\n// - Singleton pattern implementation\n// - Handles mobile/desktop ad containers\n// - Manages different ad types:\n//   * Banner ads\n//   * Interstitial ads\n//   * Rewarded video ads\n// - Tracks gameplay state for ad timing\n// - Handles ad container positioning\n// - Manages game state during ad displays\n\n// Usage example:\n// const adsManager = AdsManager.getInstance();\n// adsManager.init(game);\n// adsManager.displayInterstitial(callback, context);\n\n// Key methods:\n// - init(game): Initialize ad manager\n// - displayInterstitial(callback, context): Show interstitial ad\n// - displayRewarded(callback, context): Show rewarded video\n// - displayAd(): Show banner ad\n// - destroyAd(): Remove banner ad\n// - dispatchStart(withAd): Handle gameplay start\n// - dispatchStop(): Handle gameplay stop\n\n// Properties:\n// - inited: Boolean for initialization state\n// - started: Boolean for game start state\n// - adRequested: Boolean for ad request state\n// - isInterstitialDisplayed: Boolean for interstitial state\n// - isGameplayStart: Boolean for gameplay state\n// - rewardedSignal: Signal for rewarded ad callbacks\n//exports.__esModule = true;\n// ads file\nvar s = __webpack_require__(/*! @/src/config/Game.js */ "./src/config/Game.js");\nvar n = __webpack_require__(/*! @/src/services/EventDispatcher.js */ "./src/services/EventDispatcher.js");\nvar o = function () {\n  function t() {\n    this.inited = false;\n    this.started = false;\n    this.adRequested = false;\n    this.rewardedSignal = new Phaser.Signal();\n    this.isInterstitialDisplayed = false;\n    this.isGameplayStart = false;\n  }\n  t.prototype.init = function (t) {\n    var e = this;\n    if (!this.inited) {\n      // this.sdk = PokiSDK;\n      // this.sdk.init().then(function () {\n      //   e.sdk.gameLoadingStart();\n      // }).catch(function () {\n      //   e.sdk.gameLoadingStart();\n      // });\n      this.game = t;\n      this.inited = true;\n      this.myAd = document.createElement("div");\n      this.isDesktop = s["default"].isDesktop;\n      if (!this.isDesktop) {\n        this.width = 320;\n        this.height = 50;\n        if (!t.device.mobileSafari) {\n          this.myAd.style.transform = "translate(-50%, -100%)";\n          this.myAd.style.transform = "translate(-50%, -100%)";\n          this.myAd.style.top = "100%";\n          this.myAd.style.left = "50%";\n        }\n        this.ad_type = this.width + "x" + this.height;\n        this.inited = true;\n        this.myAd.id = "adContainer";\n        this.myAd.style.width = this.width + "px";\n        this.myAd.style.height = this.height + "px";\n        this.myAd.style.position = "absolute";\n        this.myAd.style.zIndex = "999";\n        document.getElementById("content").appendChild(this.myAd);\n      }\n    }\n  };\n  t.prototype.displatchProgress = function (t) {\n    var e = {\n      percentageDone: t\n    };\n    // this.sdk.gameLoadingProgress(e);\n  };\n  t.prototype.displatchLoaded = function () {\n    // this.sdk.gameLoadingFinished();\n  };\n  t.prototype.dispatchStop = function () {\n    if (this.isGameplayStart) {\n      this.isGameplayStart = false;\n      // this.sdk.gameplayStop();\n    }\n  };\n  t.prototype.dispatchStart = function (t) {\n    if (t) {\n      this.displayInterstitial(null, null);\n    } else if (!this.isGameplayStart) {\n      this.isGameplayStart = true;\n      // this.sdk.gameplayStart();\n    }\n  };\n  t.prototype.dispatchHappy = function (t) {\n    // this.sdk.happyTime(t);\n  };\n  t.prototype.displayInterstitial = function (t, e) {\n    var i = this;\n    if (!this.isInterstitialDisplayed) {\n      this.isInterstitialDisplayed = true;\n      this.game.input.enabled = false;\n      n["default"].getInstance().dispatchEvent("poki_mute");\n      this.dispatchStop();\n      // this.sdk.commercialBreak().then(function () {\n      n["default"].getInstance().dispatchEvent("poki_unmute");\n      i.isInterstitialDisplayed = false;\n      i.game.input.enabled = true;\n      if (!i.isGameplayStart) {\n        i.isGameplayStart = true;\n        // i.sdk.gameplayStart();\n      }\n      if (t !== null) {\n        t.call(e);\n      }\n      // });\n    }\n  };\n  t.prototype.displayRewarded = function (t, e) {\n    var i = this;\n    n["default"].getInstance().dispatchEvent("poki_mute");\n    this.rewardedSignal.removeAll();\n    if (t !== null && e !== null) {\n      this.rewardedSignal.addOnce(t, e);\n    }\n    this.game.input.enabled = false;\n    n["default"].getInstance().dispatchEvent("poki_mute");\n    // this.sdk.rewardedBreak().then(function (t) {\n    //   if (t) {\n    i.rewardedSignal.dispatch(true);\n    //   } else {\n    //     i.rewardedSignal.dispatch(false);\n    //   }\n    n["default"].getInstance().dispatchEvent("poki_unmute");\n    i.game.input.enabled = true;\n    // });\n  };\n  t.prototype.displayAd = function () {\n    if (!this.isDesktop) {\n      this.myAd.style.visibility = "visible";\n      if (!this.adRequested) {\n        // this.sdk.displayAd(this.myAd, this.ad_type);\n      }\n      if (this.game.device.mobileSafari) {\n        var t = Math.round(window.innerHeight - this.height);\n        var e = Math.round((window.innerWidth - this.width) * 0.5);\n        this.myAd.style.top = t + "px";\n        this.myAd.style.left = e + "px";\n      }\n      this.adRequested = true;\n    }\n  };\n  t.prototype.destroyAd = function () {\n    if (!this.isDesktop) {\n      // this.sdk.destroyAd(this.myAd);\n      this.myAd.style.visibility = "hidden";\n      this.adRequested = false;\n    }\n  };\n  t.prototype.getBannerHeight = function () {\n    if (this.isDesktop) {\n      return 0;\n    } else {\n      return this.game.height * this.height / window.innerHeight;\n    }\n  };\n  t.prototype.processSideUIWidth = function (t) {\n    if (this.width > t) {\n      this.destroyAd();\n      return false;\n    } else {\n      this.displayAd();\n      return true;\n    }\n  };\n  t.getInstance = function () {\n    t.instance || (t.instance = new t());\n    return this.instance;\n  };\n  return t;\n}();\nexports["default"] = o;\n\n//# sourceURL=webpack://motox3m/./src/services/AdsManager.js?')},"./src/services/BrandManager.js":(__unused_webpack_module,exports)=>{eval('// BrandManager - Singleton class for managing brand domains and URLs\n// Handles domain validation and brand-specific URLs for different platforms\n\n// Key features:\n// - Singleton pattern implementation\n// - Brand domain validation\n// - Platform-specific URLs\n// - Configurable brand instances\n// - Domain whitelist management\n\n// Properties:\n// - brandInstances: Map of brand URLs\n// - brandDomains: Array of allowed domains\n// - POKI: Brand constant "poki"\n// - Current: Current brand setting\n\n// Methods:\n// - getInstance(): Get singleton instance\n// - checkDomain(domain): Validate domain against whitelist\n// - getUrlLock(): Get current brand URL\n// - getUrl(brand): Get URL for specific brand\n\n// Usage example:\n// const brandManager = BrandManager.getInstance();\n// if (brandManager.checkDomain(window.location.hostname)) {\n//   const brandUrl = brandManager.getUrlLock();\n// }\n\n// Configuration:\n// Currently configured for Poki platform with domains:\n// - localhost\n// - poki.com\n// - poki-gdn.com\n// - madpuffers.com\n//exports.__esModule = true;\nvar s = function () {\n  function t() {\n    this.brandInstances = {};\n    this.brandDomains = [];\n    this.brandInstances[t.POKI] = "https://poki.com/";\n    if (t.Current === t.POKI) {\n      this.brandDomains = [];\n      this.brandDomains.push("localhost:");\n      this.brandDomains.push("poki.com");\n      this.brandDomains.push("poki-gdn.com");\n      this.brandDomains.push("madpuffers.com");\n    }\n  }\n  t.getInstance = function () {\n    if (t.instance === null) {\n      t.instance = new t();\n    }\n    return t.instance;\n  };\n  t.prototype.checkDomain = function (t) {\n    return true;\n    for (var e = 0; e < this.brandDomains.length; e++) {\n      var i = this.brandDomains[e];\n      if (t.indexOf(i) !== -1) {\n        return true;\n      }\n    }\n    return false;\n  };\n  t.prototype.getUrlLock = function () {\n    if (t.Current !== null) {\n      return this.brandInstances[t.Current];\n    } else {\n      return "";\n    }\n  };\n  t.prototype.getUrl = function (t) {\n    return this.brandInstances[t];\n  };\n  t.instance = null;\n  t.POKI = "poki";\n  t.Current = t.POKI;\n  return t;\n}();\nexports["default"] = s;\n\n//# sourceURL=webpack://motox3m/./src/services/BrandManager.js?')},"./src/services/EventDispatcher.js":(__unused_webpack_module,exports)=>{eval('// EventDispatcher Service - Singleton class for handling DOM events\n// Provides cross-browser compatible event dispatching with fallbacks for older browsers\n\n// Key features:\n// - Singleton pattern implementation\n// - Cross-browser event dispatching\n// - Supports both standard and custom events\n// - Fallback support for older browsers not supporting Event constructor\n// - Targets the #content element for events\n\n// Usage example:\n// const dispatcher = EventDispatcher.getInstance();\n// \n// // Dispatch standard event\n// dispatcher.dispatchEvent(\'game_start\');\n// \n// // Dispatch custom event with data\n// dispatcher.dispatchCustomEvent(\'level_complete\', {\n//   detail: { level: 5, score: 1000 }\n// });\n\n// Key methods:\n// - init(): Initialize and detect browser Event support\n// - dispatchEvent(eventName): Dispatch standard event\n// - dispatchCustomEvent(eventName, data): Dispatch event with custom data\n// - getInstance(): Get singleton instance\n\n// Properties:\n// - useEvent: Boolean indicating modern Event constructor support\n// - instance: Static singleton instance\n//exports.__esModule = true;\nvar s = function () {\n  function t() {\n    this.useEvent = false;\n    this.init();\n  }\n  t.prototype.init = function () {\n    this.useEvent = typeof Event == "function";\n  };\n  t.prototype.dispatchEvent = function (t) {\n    var e;\n    if (this.useEvent) {\n      e = new Event(t);\n    } else {\n      e = document.createEvent("Event");\n      e.initEvent(t, true, true);\n    }\n    document.getElementById("content").dispatchEvent(e);\n  };\n  t.prototype.dispatchCustomEvent = function (t, e) {\n    var i;\n    if (this.useEvent) {\n      i = new CustomEvent(t, e);\n    } else {\n      i = document.createEvent("CustomEvent");\n      i.initCustomEvent(t, true, true, e.detail);\n    }\n    document.getElementById("content").dispatchEvent(i);\n  };\n  t.getInstance = function () {\n    t.instance || (t.instance = new t());\n    return this.instance;\n  };\n  return t;\n}();\nexports["default"] = s;\n\n//# sourceURL=webpack://motox3m/./src/services/EventDispatcher.js?')},"./src/states/Boot.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\n__webpack_require__(/*! @/src/lib/ModulePixi.js */ "./src/lib/ModulePixi.js");\n__webpack_require__(/*! @/src/lib/PhaserLib.js */ "./src/lib/PhaserLib.js");\nvar n = __webpack_require__(/*! @/src/ui/LoaderDisplay.js */ "./src/ui/LoaderDisplay.js");\nvar o = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar a = __webpack_require__(/*! @/src/states/BootState.js */ "./src/states/BootState.js");\nvar r = __webpack_require__(/*! @/src/states/GameState.js */ "./src/states/GameState.js");\nvar h = __webpack_require__(/*! @/src/config/Game.js */ "./src/config/Game.js");\nvar l = function (t) {\n  function e() {\n    var i = t.call(this) || this;\n    i.name = e.Name;\n    return i;\n  }\n  s(e, t);\n  e.prototype.init = function () {\n    var t = this;\n    this.game.canvas.oncontextmenu = function (t) {\n      t.preventDefault();\n    };\n    this.game.input.maxPointers = 3;\n    this.game.input.addPointer();\n    this.game.input.addPointer();\n    if (h["default"].isDesktop) {\n      this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\n      this.scale.pageAlignHorizontally = true;\n      this.game.scale.windowConstraints.bottom = "visual";\n      this.game.onBlur.add(function () {\n        t.game.sound.mute = true;\n      });\n      this.game.onFocus.add(function () {\n        if (!r["default"].isAdsPause) {\n          t.game.sound.mute = false;\n        }\n      });\n      window.addEventListener("resize", function () {\n        return e.mobileResizeCallback(t.game.scale);\n      });\n      this.game.scale.onSizeChange.add(function () {\n        if (o.Constants.LANDSCAPE_LOCKED) {\n          if (t.game.width > t.game.height) {\n            t.handleCorrect();\n          } else {\n            t.handleIncorrect();\n          }\n        } else if (o.Constants.PORTRAIT_LOCKED) {\n          if (t.game.width < t.game.height) {\n            t.handleCorrect();\n          } else {\n            t.handleIncorrect();\n          }\n        }\n        t.game.state.getCurrentState().resize();\n      }, this);\n      e.mobileResizeCallback(this.game.scale);\n    } else {\n      this.scale.scaleMode = Phaser.ScaleManager.USER_SCALE;\n      this.scale.fullScreenScaleMode = Phaser.ScaleManager.USER_SCALE;\n      window.addEventListener("resize", function () {\n        return e.mobileResizeCallback(t.game.scale);\n      });\n      this.game.scale.onSizeChange.add(function () {\n        if (o.Constants.LANDSCAPE_LOCKED) {\n          if (t.game.width > t.game.height) {\n            t.handleCorrect();\n          } else {\n            t.handleIncorrect();\n          }\n        } else if (o.Constants.PORTRAIT_LOCKED) {\n          if (t.game.width < t.game.height) {\n            t.handleCorrect();\n          } else {\n            t.handleIncorrect();\n          }\n        }\n        t.game.state.getCurrentState().resize();\n      }, this);\n      e.mobileResizeCallback(this.game.scale);\n      document.addEventListener("pause", function () {\n        t.game.sound.mute = true;\n      });\n      document.addEventListener("resume", function () {\n        if (!r["default"].isAdsPause) {\n          t.game.sound.mute = false;\n        }\n      });\n      this.stage.disableVisibilityChange = false;\n      this.game.onPause.add(function () {\n        t.game.sound.mute = true;\n      });\n      this.game.onResume.add(function () {\n        if (!r["default"].isAdsPause) {\n          t.game.sound.mute = false;\n        }\n      });\n    }\n  };\n  e.mobileResizeCallback = function (t) {\n    var i = window.innerWidth;\n    var s = window.innerHeight;\n    e.setScaling(t.game);\n    var n = o.Constants.GAME_SCALE * 720;\n    var a = o.Constants.GAME_SCALE * 480;\n    var r = 1;\n    r /= i > s ? s / a : s / n;\n    o.Constants.WIDTH = 720;\n    o.Constants.HEIGHT = 480;\n    o.Constants.CALCULATED_WIDTH = Math.ceil(i * r);\n    o.Constants.CALCULATED_HEIGHT = Math.ceil(s * r);\n    t.setGameSize(o.Constants.CALCULATED_WIDTH, o.Constants.CALCULATED_HEIGHT);\n    t.setUserScale(1 / r, 1 / r);\n    if (o.Constants.LANDSCAPE_LOCKED) {\n      if (t.game.width > t.game.height) {\n        document.getElementById("orientation").style.display = "none";\n        document.getElementById("content").style.display = "block";\n      } else {\n        document.getElementById("orientation").style.display = "block";\n        document.getElementById("content").style.display = "none";\n      }\n    }\n  };\n  e.setScaling = function (t) {\n    var e = window.innerWidth > window.innerHeight ? window.innerWidth : window.innerHeight;\n    e *= t.device.pixelRatio;\n    o.Constants.GAME_SCALE = 1;\n  };\n  e.prototype.preload = function () {\n    var t = this;\n    this.game.load.cacheBuster = 1660729448570;\n    var e = "x" + o.Constants.GAME_SCALE + "/";\n    o.Images.preloadList.forEach(function (i) {\n      t.game.load.image(i, "assets/images/" + e + i + ".png");\n    });\n    o.JSONData.preloadList.forEach(function (e) {\n      t.game.load.json(e, "assets/levels/" + e + ".json");\n    });\n    o.Atlases.preloadList.forEach(function (i) {\n      t.game.load.atlas(i, "assets/atlases/" + e + i + ".png", "assets/atlases/" + e + i + ".json");\n    });\n    o.Sounds.preloadList.forEach(function (e) {\n      if (t.game.device.iOS) {\n        t.game.load.audio(e, ["assets/sounds/" + e + ".m4a"]);\n      } else {\n        t.game.load.audio(e, ["assets/sounds/" + e + ".ogg", "assets/sounds/" + e + ".mp3"]);\n      }\n    });\n  };\n  e.prototype.create = function () {\n    n["default"].hide();\n    this.game.state.start(a["default"].Name);\n  };\n  e.prototype.handleCorrect = function () {\n    document.getElementById("orientation").style.display = "none";\n    document.getElementById("content").style.display = "block";\n  };\n  e.prototype.handleIncorrect = function () {\n    document.getElementById("orientation").style.display = "block";\n    document.getElementById("content").style.display = "none";\n  };\n  e.Name = "boot";\n  return e;\n}(Phaser.State);\nexports["default"] = l;\n\n//# sourceURL=webpack://motox3m/./src/states/Boot.js?')},"./src/states/BootState.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;  Site Lock State  Boot/Loading State\n__webpack_require__(/*! @/src/lib/ModulePixi.js */ "./src/lib/ModulePixi.js");\n__webpack_require__(/*! @/src/lib/PhaserLib.js */ "./src/lib/PhaserLib.js");\nvar n = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar o = __webpack_require__(/*! @/src/services/BrandManager.js */ "./src/services/BrandManager.js");\nvar a = __webpack_require__(/*! @/src/ui/LoadingScreen.js */ "./src/ui/LoadingScreen.js");\nvar r = __webpack_require__(/*! @/src/states/PreloadState.js */ "./src/states/PreloadState.js");\nvar h = __webpack_require__(/*! @/src/ui/AutoSizeText.js */ "./src/ui/AutoSizeText.js");\nvar l = function (t) {\n  function e() {\n    var i = t.call(this) || this;\n    i.name = e.Name;\n    i.bike = null;\n    i.logo = null;\n    i.google_btn = null;\n    i.apple_btn = null;\n    i.wait = null;\n    i.mainParent = null;\n    return i;\n  }\n  s(e, t);\n  e.prototype.preload = function () {\n    t.prototype.preload.call(this);\n    this.game.load.onFileComplete.add(this.fileComplete, this);\n    if (o["default"].getInstance().checkDomain(document.URL.split("//")[1].split("/")[0])) {\n      this.preloadSplash();\n    } else {\n      this.preloadLock();\n    }\n  };\n  e.prototype.init = function () {\n    t.prototype.init.call(this);\n    this.mainParent = this.game.add.group();\n    this.mainParent.x = this.game.width / 2;\n    this.mainParent.y = this.game.height / 2;\n    this.setPauseViewCar(this.mainParent);\n  };\n  e.prototype.preloadLock = function () {\n    this.game.load.atlas(n.Atlases.Garage, "assets/atlases/x1/" + n.Atlases.Garage + ".png", "assets/atlases/x1/" + n.Atlases.Garage + ".json");\n  };\n  e.prototype.preloadSplash = function () {};\n  e.prototype.createLock = function () {\n    if (o["default"].Current === o["default"].POKI) {\n      this.logo = this.game.add.image(0, -30, n.Atlases.Garage, "logo_mad0000");\n      this.logo.scale.set(0.5);\n      this.logo.anchor.set(0.5);\n      this.logo.inputEnabled = true;\n      this.logo.input.useHandCursor = true;\n      this.logo.events.onInputDown.add(this.opensitelockLink, this);\n      var t = {\n        font: "25px Arial",\n        fill: "#A8DB2B"\n      };\n      var e = {\n        font: "25px Arial",\n        fill: "#FFFFFF"\n      };\n      var i = new h["default"](this.game, 0, -200, "This is version is url-locked", t);\n      var s = new h["default"](this.game, 0, -160, o["default"].getInstance().getUrlLock(), e);\n      var a = new h["default"](this.game, 0, 100, "Contact to license this game", t);\n      var r = new h["default"](this.game, 0, 140, "madpuffers@gmail.com", e);\n      i.anchor.set(0.5);\n      s.anchor.set(0.5);\n      a.anchor.set(0.5);\n      r.anchor.set(0.5);\n      this.mainParent.addChild(this.logo);\n      this.mainParent.addChild(i);\n      this.mainParent.addChild(s);\n      this.mainParent.addChild(a);\n      this.mainParent.addChild(r);\n    }\n  };\n  e.prototype.opensitelockLink = function () {\n    if (o["default"].Current === o["default"].POKI) {\n      window.open("http://madpuffers.com/", "_blank");\n    } else {\n      window.open("http://" + o["default"].getInstance().getUrlLock(), "_blank");\n    }\n  };\n  e.prototype.createSplash = function () {\n    new a["default"](this.game, 0, r["default"].Name);\n  };\n  e.prototype.nextMethod = function () {\n    var t = this.game.add.tween(this.logo);\n    t.to({\n      alpha: 0\n    }, 660, Phaser.Easing.Linear.None, false, 4000);\n    t.onComplete.add(function () {\n      new a["default"](this.game, 0, r["default"].Name);\n    }, this);\n    t.start();\n  };\n  e.prototype.fileComplete = function (t, e, i, s, n) {\n    if (t === 100) {\n      this.game.load.onFileComplete.removeAll();\n    }\n  };\n  e.prototype.setPauseViewCar = function (t) {\n    if (this.bike !== null) {\n      this.bike.destroy();\n      this.bike = this.game.add.group(t);\n    } else {\n      this.bike = this.game.add.group(t);\n    }\n    this.bike.x = 0;\n    this.bike.y = 10;\n  };\n  e.prototype.create = function () {\n    t.prototype.create.call(this);\n    if (o["default"].getInstance().checkDomain(document.URL.split("//")[1].split("/")[0])) {\n      this.createSplash();\n    } else {\n      this.createLock();\n    }\n  };\n  e.prototype.resize = function () {\n    var e = 1;\n    e = this.game.width / n.Constants.WIDTH;\n    e = e > 1 ? 1 : e;\n    if (this.mainParent) {\n      this.mainParent.x = this.game.width / 2;\n      this.mainParent.y = this.game.height / 2;\n    }\n    if (this.wait) {\n      this.wait.position.set(this.game.width / 2, this.game.height / 2);\n    }\n    t.prototype.resize.call(this);\n  };\n  e.prototype.shutdown = function () {\n    t.prototype.shutdown.call(this);\n  };\n  e.Name = "sitelock";\n  return e;\n}(Phaser.State);\nexports["default"] = l;\n\n//# sourceURL=webpack://motox3m/./src/states/BootState.js?')},"./src/states/GameState.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;  Gameplay State Controller\n__webpack_require__(/*! @/src/lib/ModulePixi.js */ "./src/lib/ModulePixi.js");\n__webpack_require__(/*! @/src/lib/PhaserLib.js */ "./src/lib/PhaserLib.js");\nvar n = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar o = __webpack_require__(/*! @/src/states/LevelSelect.js */ "./src/states/LevelSelect.js");\nvar a = __webpack_require__(/*! @/src/data/AtlasesData.js */ "./src/data/AtlasesData.js");\nvar r = __webpack_require__(/*! @/src/ui/Button.js */ "./src/ui/Button.js");\nvar h = __webpack_require__(/*! @/src/utils/SaveUtils.js */ "./src/utils/SaveUtils.js");\nvar l = __webpack_require__(/*! @/src/controllers/SoundController.js */ "./src/controllers/SoundController.js");\nvar c = __webpack_require__(/*! @/src/ui/LoadingScreen.js */ "./src/ui/LoadingScreen.js");\nvar u = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar d = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar p = __webpack_require__(/*! @/src/data/ImageData.js */ "./src/data/ImageData.js");\nvar f = __webpack_require__(/*! @/src/ui/AutoSizeText.js */ "./src/ui/AutoSizeText.js");\nvar y = __webpack_require__(/*! @/src/ui/GameUIManager.js */ "./src/ui/GameUIManager.js");\nvar g = __webpack_require__(/*! @/src/states/GarageState.js */ "./src/states/GarageState.js");\nvar m = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar v = __webpack_require__(/*! @/src/config/Game.js */ "./src/config/Game.js");\nvar b = __webpack_require__(/*! @/src/services/AdsManager.js */ "./src/services/AdsManager.js");\nvar x = function (t) {\n  function e() {\n    var i = t.call(this) || this;\n    i.hasTryBikePopup = false;\n    i.name = e.Name;\n    i.popup = null;\n    i.black = null;\n    i.transition = null;\n    i.bike = null;\n    i._armatureDisplay = null;\n    i.btn_resume = null;\n    i.btn_list = null;\n    i.btn_garage = null;\n    i.continueText = null;\n    i.improved_mc = null;\n    i.loader = null;\n    i.waitForFile = null;\n    i.scoreTime = "";\n    return i;\n  }\n  s(e, t);\n  e.initDragonBones = function (t) {\n    if (!e.dbInited) {\n      var i = t.cache.getJSON(n.JSONData.DBBike);\n      var s = t.cache.getJSON(n.JSONData.DBBike_Texture);\n      var o = t.cache.getImage(p["default"].DBBike, true).base;\n      dragonBones.PhaserFactory.factory.parseDragonBonesData(i);\n      dragonBones.PhaserFactory.factory.parseTextureAtlasData(s, o);\n      e.dbInited = true;\n    }\n  };\n  e.prototype.onNextClick = function () {\n    l["default"].getInstance().play(n.Sounds.Click);\n    if (!e.isTrying && this.checkTryBike()) {\n      e.tryBikeDelay = e.TRY_DELAY;\n      this.tryBikePopup();\n      return;\n    }\n    this.onPlayNextLevel();\n  };\n  e.prototype.onPlayNextLevel = function () {\n    l["default"].getInstance().play(n.Sounds.Click);\n    if (o["default"].LevelNum + 2 > d.RacesData.MAP_COUNT) {\n      b["default"].getInstance().displayInterstitial(this.fadeToChooseZone, this);\n    } else {\n      o["default"].LevelNum++;\n      var t = o["default"].LevelNum;\n      var LevelNum = o["default"].LevelNum + 1;\n      var LevelLoad = LevelNum;\n      console.log(LevelNum);\n      /*if(LevelNum <= 10){\r\n        LevelLoad = n.JSONData.levelsList[t];\r\n      } else {\r\n        LevelLoad = LevelNum - 10;\r\n      }*/\n      LevelLoad = LevelNum;\n      // o.default.CurrentLevel = n.JSONData.levelsList[t];\n      o["default"].CurrentLevel = t;\n      d.GameData.raceId = t + 1;\n      d.GameData.currentLevel = null;\n      if (this.game.cache.checkJSONKey(LevelLoad)) {\n        d.GameData.currentLevel = this.game.cache.getJSON(LevelLoad);\n      } else {\n        d.GameData.currentLevel = null;\n        this.loader = new Phaser.Loader(this.game);\n        this.loader.onFileComplete.add(this.fileLevelComplete, this);\n        this.loader.json(o["default"].CurrentLevel, "assets/newlevels/" + LevelLoad + ".json");\n        this.loader.start();\n      }\n      if (e.isTrying) {\n        this.fadeToGameplay();\n      } else {\n        b["default"].getInstance().displayInterstitial(this.fadeToGameplay, this);\n      }\n    }\n  };\n  e.prototype.fileLevelComplete = function (t, e, i, s, n) {\n    if (e === o["default"].CurrentLevel) {\n      d.GameData.currentLevel = this.game.cache.getJSON(o["default"].CurrentLevel);\n      this.loader.onFileComplete.remove(this.fileLevelComplete, this);\n      this.loader = null;\n      if (this.waitForFile) {\n        this.fadeToGameplay();\n      }\n    }\n  };\n  e.prototype.fadeToGameplay = function () {\n    if (d.GameData.currentLevel !== null) {\n      d.GraphicUtil.currentAtlass = "theme" + d.GameData.currentLevel.settings.theme;\n      new c["default"](this.game, 0, e.Name);\n    } else {\n      new c["default"](this.game, 0, null);\n      this.waitForFile = true;\n    }\n  };\n  e.prototype.fadeToChooseZone = function () {\n    this.onChooseZone();\n  };\n  e.prototype.init = function () {\n    var i = this;\n    t.prototype.init.call(this);\n    this.game.world.removeAll();\n    e.isActive = true;\n    e.loadedLevel = false;\n    // e.initDragonBones(this.game);\n    this.initData();\n    this.game.time.advancedTiming = true;\n    d.GraphicUtil.game = this.game;\n    u.MaxGameCore.instance.init(this.game);\n    d.CarsData.geom[1] = this.game.cache.getJSON(n.JSONData.Bike);\n    u.MaxGameCore.instance.signalFinish.add(this.onCallPopup, this);\n    u.MaxGameCore.instance.start();\n    y["default"].instance.init(this.game.add.group(), this.game);\n    this.black = this.game.add.graphics(0, 0);\n    this.black.beginFill(0, 1);\n    this.black.drawRect(0, 0, this.game.width, this.game.height);\n    this.black.endFill();\n    var s = this.game.add.text(this.game.width / 2, this.game.height / 2, "LOADING...", n.Constants.styleCredits0);\n    s.anchor.set(0.5);\n    this.black.addChild(s);\n    this.transition = this.game.add.tween(this.black);\n    this.transition.to({\n      alpha: 0\n    }, 100, Phaser.Easing.Linear.None, false, 500);\n    this.transition.onComplete.add(function () {\n      e.loadedLevel = true;\n      i.hardRestart(false);\n      i.black.destroy();\n      i.black = null;\n      i.transition = null;\n      if (v["default"].isDesktop) {\n        i.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR).onUp.add(i.onSpace, i);\n        i.game.input.keyboard.addKey(Phaser.Keyboard.P).onUp.add(i.onPause, i);\n        i.game.input.keyboard.addKey(Phaser.Keyboard.R).onUp.add(i.onR, i);\n        i.game.input.keyboard.addKey(Phaser.Keyboard.ESC).onUp.add(i.onPause, i);\n      } else {\n        i.game.input.onDown.add(i.onSpaceMobile, i);\n      }\n      if (e.currCar === -1) {\n        e.currCar = Math.round(Math.random() * 2);\n      }\n      y["default"].instance.signalRestart.add(i.userCallRestart, i);\n      y["default"].instance.signalPause.add(i.onPause, i);\n      y["default"].instance.signalToggleMusic.add(i.onToggleMusic, i);\n      u.MaxGameCore.instance.paused = false;\n      u.MaxGameCore.instance.enginePitch = l["default"].getInstance().play(n.Sounds.Engine1, 0.1, true);\n    });\n    u.MaxGameCore.instance.signalLoaded.removeAll();\n    u.MaxGameCore.instance.signalLoaded.addOnce(function () {\n      this.transition.start();\n      u.MaxGameCore.instance.paused = true;\n    }, this);\n    l["default"].getInstance().playMusic(n.Sounds.GameMusic);\n  };\n  e.prototype.create = function () {\n    t.prototype.create.call(this);\n    this.resize();\n  };\n  e.prototype.setNewViewCar = function () {\n    e.currCar++;\n    if (e.currCar >= 2) {\n      e.currCar = 0;\n    }\n    if (this._armatureDisplay !== null) {\n      this._armatureDisplay.destroy();\n    }\n    // remove dragonbones\n    // var t = "biker" + e.currCar + "_anim_btn";\n    // this._armatureDisplay = dragonBones.PhaserFactory.factory.buildArmatureDisplay(t);\n    // this._armatureDisplay.x = 0;\n    // this._armatureDisplay.y = 130;\n    // this._armatureDisplay.animation.play("animation", 0);\n    // this.popup.addChild(this._armatureDisplay);\n  };\n  e.prototype.userCallRestart = function () {\n    b["default"].getInstance().dispatchStart(true);\n    this.hardRestart(false);\n  };\n  e.prototype.hardRestart = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    if (u.MaxGameCore.instance.paused || u.MaxGameCore.instance.car.dead || u.MaxGameCore.instance.finished) {\n      b["default"].getInstance().dispatchStart(t);\n    }\n    y["default"].instance.hideControlsHint();\n    y["default"].instance.continueShow = false;\n    y["default"].instance.helperShow = false;\n    if (d.GameData.raceId === 1) {\n      y["default"].instance.showControlsHint();\n    }\n    u.MaxGameCore.instance.car.review();\n    u.MaxGameCore.instance.restart();\n    u.MaxGameCore.instance.drive = false;\n    u.MaxGameCore.instance.finished = false;\n    y["default"].instance.showTimer();\n    u.MaxGameCore.instance.timer = 0;\n    u.MaxGameCore.instance.car.callbackDie = y["default"].instance.showDeathHint;\n    u.MaxGameCore.instance.car.callbackStunt = y["default"].instance.showFlipMsg;\n    u.MaxGameCore.instance.car.callbackContext = y["default"].instance;\n    this.closePopup();\n  };\n  e.prototype.onSpaceMobile = function () {\n    if (!u.MaxGameCore.instance.finished) {\n      if (u.MaxGameCore.instance.car.dead) {\n        if (!u.MaxGameCore.instance.paused) {\n          y["default"].instance.hideControlsHint();\n          if (u.MaxGameCore.instance.car.safeId >= 0) {\n            b["default"].getInstance().dispatchStart(true);\n            u.MaxGameCore.instance.car.review();\n            u.MaxGameCore.instance.restartFromSafePoint(u.MaxGameCore.instance.car.safeId);\n          } else {\n            this.hardRestart();\n          }\n        }\n      }\n    }\n  };\n  e.prototype.onSpace = function () {\n    if (!e.isAdsPause) {\n      if (u.MaxGameCore.instance.paused) {\n        this.closePopup();\n        b["default"].getInstance().dispatchStart(true);\n        return;\n      } else {\n        if (u.MaxGameCore.instance.finished) {\n          if (!this.hasTryBikePopup) {\n            this.onNextClick();\n          }\n        } else if (u.MaxGameCore.instance.car.dead) {\n          if (!u.MaxGameCore.instance.paused) {\n            y["default"].instance.hideControlsHint();\n            if (u.MaxGameCore.instance.car.safeId >= 0) {\n              b["default"].getInstance().dispatchStart(true);\n              u.MaxGameCore.instance.car.review();\n              u.MaxGameCore.instance.restartFromSafePoint(u.MaxGameCore.instance.car.safeId);\n            } else {\n              this.hardRestart();\n            }\n          }\n        }\n        return;\n      }\n    }\n  };\n  e.prototype.onR = function () {\n    if (!e.isAdsPause) {\n      this.userCallRestart();\n    }\n  };\n  e.prototype.onPause = function () {\n    if (!e.isAdsPause && !u.MaxGameCore.instance.finished) {\n      this.onCallPopup(0);\n    }\n  };\n  e.prototype.onToggleMusic = function () {\n    this.toggleMusic();\n  };\n  e.prototype.toggleMusic = function () {\n    if (h["default"].getInstance().music) {\n      l["default"].getInstance().toggleMusic();\n    } else if (h["default"].getInstance().sfx) {\n      l["default"].getInstance().toggleSfx();\n    } else {\n      l["default"].getInstance().toggleSfx();\n      l["default"].getInstance().toggleMusic();\n    }\n    y["default"].instance.updateSoundButtons();\n    l["default"].getInstance().play(n.Sounds.Click);\n  };\n  e.prototype.setFields = function (t) {\n    var e = d.RacesData.data;\n    var i = new r["default"](this.game, "", n.Constants.styleTime, null, this, a["default"].Garage);\n    i.setFrames("bg0000", "bg0000", "bg0000", "bg0000");\n    t.addChild(i);\n    i.label.setMaxSize(200, 50);\n    i.label.stroke = "#000000";\n    i.label.strokeThickness = 2;\n\n    // Create star panel group\n    var starPanel = this.game.add.group();\n    // starPanel.x = -200;\n    t.addChild(starPanel);\n    var s = this.game.add.sprite(-133, -76, a["default"].Garage, "star00000");\n    var o = this.game.add.sprite(0, -88, a["default"].Garage, "star00000");\n    var h = this.game.add.sprite(133, -76, a["default"].Garage, "star00000");\n    s.anchor.set(0.5);\n    o.anchor.set(0.5);\n    h.anchor.set(0.5);\n    s.scale.set(0.9);\n    h.scale.set(0.9);\n    s.angle = -10;\n    h.angle = 10;\n    var c = this.game.add.sprite(-133, -76, a["default"].Garage, "star10000");\n    c.anchor.set(0.5);\n    var u = this.game.add.sprite(0, -88, a["default"].Garage, "star10000");\n    u.anchor.set(0.5);\n    var p = this.game.add.sprite(133, -76, a["default"].Garage, "star10000");\n    p.anchor.set(0.5);\n    c.angle = -10;\n    p.angle = 10;\n    var f = new r["default"](this.game, "0", n.Constants.styleTime, null, null);\n    f.x = -133;\n    f.y = -6;\n    var y = new r["default"](this.game, "0", n.Constants.styleTime, null, null);\n    y.y = -16;\n    var g = new r["default"](this.game, "0", n.Constants.styleTime, null, null);\n    g.x = 133;\n    g.y = -6;\n    starPanel.addChild(s);\n    starPanel.addChild(o);\n    starPanel.addChild(h);\n    starPanel.addChild(c);\n    starPanel.addChild(u);\n    starPanel.addChild(p);\n    starPanel.addChild(f);\n    starPanel.addChild(y);\n    starPanel.addChild(g);\n\n    // Add highscore table parallel to stars with 50px gap\n    var highScorePanel = this.showHighscoreTable();\n    highScorePanel.scale.set(0.8);\n    highScorePanel.x = h.x + h.width / 2 + 80; // Position 50px right of the rightmost star\n    highScorePanel.y = -130; // Same y position as outer stars\n    t.addChild(highScorePanel);\n    var m = d.RacesData.map.settings.prizes;\n    var v = m.split(",");\n    f.setText(v[2] + " sec.");\n    y.setText(v[1] + " sec.");\n    g.setText(v[0] + " sec.");\n    // show highscore in pannel\n    // Add high score display\n\n    // Add highscore table to the left of stars\n    /*var tableBg = this.game.add.sprite(-250, -20, a.default.Garage, "0popup_bg0000");\r\n    tableBg.anchor.set(0.5);\r\n    tableBg.scale.set(0.4, 0.5);\r\n    starPanel.addChild(tableBg);\r\n        // Add "BEST TIME" title\r\n    var title = new r.default(\r\n        this.game,\r\n        "BEST TIME",\r\n        n.Constants.styleGarage2,\r\n        null,\r\n        null\r\n    );\r\n    title.scale.set(0.6);\r\n    title.y = -50;\r\n    title.x = -250;\r\n    title.label.setShadow(1, 1, "rgba(0,0,0,0.8)", 5);\r\n    starPanel.addChild(title);\r\n        // Get and display top 3 scores\r\n    var scores = this.getTopScores(d.GameData.raceId).slice(0, 3);\r\n    for (var scoreTmp = 0; scoreTmp < scores.length; scoreTmp++) {\r\n        var scoreText = new r.default(\r\n            this.game,\r\n            (scoreTmp + 1) + ". " + scores[scoreTmp].time.toFixed(2) + "s",\r\n            n.Constants.styleTime,\r\n            null,\r\n            null\r\n        );\r\n        scoreText.scale.set(0.5);\r\n        scoreText.y = -30 + (scoreTmp * 15);\r\n        scoreText.x = -250;\r\n        \r\n        if (scores[scoreTmp].isNew) {\r\n            scoreText.label.fill = "#FFD700";\r\n            scoreText.label.setShadow(1, 1, "rgba(255,215,0,0.8)", 5);\r\n            \r\n            // Add trophy for new record\r\n            // if (scoreTmp === 0) {\r\n            //     var trophy = this.game.add.sprite(-280, -30, a.default.Garage, "star10000");\r\n            //     trophy.scale.set(0.3);\r\n            //     trophy.anchor.set(0.5);\r\n            //     starPanel.addChild(trophy);\r\n            // }\r\n        }\r\n        \r\n        starPanel.addChild(scoreText);\r\n    }\r\n    */\n    var b = e.stars;\n    c.visible = b > 0;\n    u.visible = b > 1;\n    p.visible = b > 2;\n    c.scale.set(0.9);\n    p.scale.set(0.9);\n    var x;\n    var _ = 200;\n    if (b > 0) {\n      c.scale.set(3);\n      c.alpha = 0;\n      x = this.game.add.tween(c);\n      x.onComplete.addOnce(function () {\n        l["default"].getInstance().play(n.Sounds.Explode2);\n        d.RacesData.data.camera.shakeContainer(this.popup);\n      }, this);\n      x.to({\n        alpha: 1\n      }, 400, Phaser.Easing.Linear.None, true, _ - 150);\n      x = this.game.add.tween(c.scale);\n      x.to({\n        x: 0.9,\n        y: 0.9\n      }, 400, Phaser.Easing.Back.Out, true, _);\n      _ += 400;\n    }\n    if (b > 1) {\n      u.scale.set(3);\n      u.alpha = 0;\n      x = this.game.add.tween(u);\n      x.onComplete.addOnce(function () {\n        l["default"].getInstance().play(n.Sounds.Explode1);\n        d.RacesData.data.camera.shakeContainer(this.popup);\n      }, this);\n      x.to({\n        alpha: 1\n      }, 400, Phaser.Easing.Linear.None, true, _ - 100);\n      x = this.game.add.tween(u.scale);\n      x.to({\n        x: 1,\n        y: 1\n      }, 400, Phaser.Easing.Back.Out, true, _);\n      _ += 700;\n    }\n    if (b > 2) {\n      p.scale.set(3);\n      p.alpha = 0;\n      x = this.game.add.tween(p);\n      x.onComplete.addOnce(function () {\n        l["default"].getInstance().play(n.Sounds.Explode2);\n        d.RacesData.data.camera.shakeContainer(this.popup);\n      }, this);\n      x.to({\n        alpha: 1\n      }, 400, Phaser.Easing.Linear.None, true, _ - 100);\n      x = this.game.add.tween(p.scale);\n      x.to({\n        x: 0.9,\n        y: 0.9\n      }, 400, Phaser.Easing.Back.Out, true, _);\n      _ += 1000;\n    }\n    var w = Math.ceil(e.timer * 100);\n    var C = w / 100 >> 0;\n    w -= C * 100;\n    e.scoreTime = C.toString() + "." + w.toString();\n    var P = this.game.add.sprite(200, 90, a["default"].Garage, "improved_bg0000");\n    P.anchor.set(0.5);\n    t.addChild(P);\n    P.visible = e.improved;\n    P.alpha = 0;\n    if (e.improved) {\n      var T = new r["default"](this.game, "NEW BEST TIME", n.Constants.styleBestTime, null, null);\n      T.angle = 25;\n      T.y = -25;\n      P.addChild(T);\n      var S = new r["default"](this.game, C.toString() + "." + w.toString() + " sec", n.Constants.styleBestTime, null, null);\n      S.angle = 25;\n      S.x = -8;\n      S.y = -5;\n      P.addChild(S);\n      T.label.setShadow(1, 1, "rgba(0,0,0,0.8)");\n      S.label.setShadow(1, 1, "rgba(0,0,0,0.8)");\n      var A = P.x;\n      P.x = -500;\n      P.alpha = 0;\n      this.game.add.tween(P).to({\n        x: A,\n        alpha: 1\n      }, 250, Phaser.Easing.Back.InOut, true);\n    }\n    this.improved_mc = P;\n    i.setText("Your time: " + C + "." + w + " sec.");\n    i.y = o.y - o.height * 0.5 - i.height * 0.5;\n    // show highscore table\n    // this.showHighscoreTable();\n  };\n  // highest score\n  e.prototype.showHighscoreTable = function () {\n    var _this = this;\n    var highScoreDisplay = this.game.add.group();\n\n    // Get scores for current level\n    var scores = this.getTopScores(d.GameData.raceId).slice(0, 5);\n\n    // Create score entries for each score\n    scores.forEach(function (score, index) {\n      var rowGroup = _this.game.add.group();\n      rowGroup.y = index * 40;\n\n      // Create black background container for this row\n      var scoreContainer = _this.game.add.graphics(0, 0);\n      scoreContainer.beginFill(0x000000);\n      scoreContainer.drawRect(-80, -20, 250, 40); // Smaller container\n      scoreContainer.endFill();\n\n      // Add white border\n      scoreContainer.lineStyle(2, 0xFFFFFF);\n      scoreContainer.drawRect(-80, -20, 250, 40);\n      rowGroup.add(scoreContainer);\n\n      // Add rank number\n      var rankText = new r["default"](_this.game, index + 1 + ".", Object.assign({}, n.Constants.styleHighscore, {\n        fontSize: \'20px\',\n        // Smaller font\n        fill: \'#FFFFFF\'\n      }), null, null);\n      rankText.x = -60;\n      rowGroup.add(rankText);\n\n      // Add avatar\n      var avatar = _this.game.add.sprite(-20, 0, \'avatar\');\n      avatar.anchor.set(0.5);\n      avatar.scale.set(0.3); // Smaller avatar\n      avatar.width = 30;\n      avatar.height = 30;\n      rowGroup.add(avatar);\n\n      // Add player ID with leading zeros\n      var playerId = new r["default"](_this.game, String(index + 1).padStart(8, \'0\'), Object.assign({}, n.Constants.styleHighscore, {\n        fontSize: \'20px\',\n        // Smaller font\n        fill: \'#FFA500\'\n      }), null, null);\n      playerId.x = 40;\n      rowGroup.add(playerId);\n\n      // Add time score\n      var timeText = new r["default"](_this.game, score.time.toFixed(2), Object.assign({}, n.Constants.styleHighscore, {\n        fontSize: \'20px\',\n        // Smaller font\n        fill: \'#FFA500\'\n      }), null, null);\n      timeText.x = 140;\n      rowGroup.add(timeText);\n\n      // Highlight new score if it\'s the current one\n      if (score.isNew) {\n        scoreContainer.tint = 0x333333;\n      }\n      highScoreDisplay.add(rowGroup);\n    });\n    return highScoreDisplay;\n  };\n\n  // Add helper function to get top scores\n  e.prototype.getTopScores = function (levelId) {\n    // Get current time\n    var currentTime = d.RacesData.data.timer;\n\n    // Get existing scores from localStorage\n    var key = \'level_\' + levelId + \'_scores\';\n    var existingScores = [];\n    try {\n      var savedScores = localStorage.getItem(key);\n      if (savedScores) {\n        existingScores = JSON.parse(savedScores);\n      }\n    } catch (e) {\n      console.error(\'Error loading scores:\', e);\n    }\n\n    // Add current score\n    existingScores.push({\n      time: currentTime,\n      date: Date.now(),\n      isNew: true\n    });\n\n    // Sort scores (lowest time first)\n    existingScores.sort(function (a, b) {\n      return a.time - b.time;\n    });\n\n    // Keep only top 5\n    existingScores = existingScores.slice(0, 5);\n\n    // Save back to localStorage\n    try {\n      localStorage.setItem(key, JSON.stringify(existingScores));\n    } catch (e) {\n      console.error(\'Error saving scores:\', e);\n    }\n    return existingScores;\n  };\n  //\n  e.prototype.postRace = function (t) {\n    this.hasTryBikePopup = false;\n    b["default"].getInstance().dispatchStop();\n    var e = d.RacesData.data;\n    e.timer = u.MaxGameCore.instance.timer;\n    var i = 0;\n    var s;\n    var n = d.RacesData.map.settings.prizes;\n    if (n.length === 0) ;else {\n      s = n.split(",");\n      var o = undefined;\n      var a = undefined;\n      for (o = 0; o < s.length; o++) {\n        a = parseFloat(s[o]);\n        if (e.timer <= a) {\n          i++;\n        }\n      }\n    }\n    e.stars = i;\n    if (i >= 3) {\n      b["default"].getInstance().dispatchHappy(0.25 + d.GameData.raceId * 0.75 / d.RacesData.MAP_COUNT);\n    }\n    e.improved = d.Inventory.instance.setRaceResult(d.GameData.raceId, i, e.timer);\n    if (e.improved) {\n      var r = 1000 + (d.RacesData.map.id - 1) * 50;\n      if (s) {\n        var l = parseFloat(s[0]) - 5;\n        var c = parseFloat(s[s.length - 1]) + 10;\n        var p = c - l;\n        var f = c - e.timer;\n        if (f < 0) {\n          f = 0;\n        } else if (f > p) {\n          f = p;\n        }\n        r += (3000 + (d.RacesData.map.id - 1) * 100) * f / p;\n      }\n      var y = d.Inventory.instance.setScore(d.GameData.raceId, r);\n    }\n    this.setFields(t);\n    h["default"].getInstance().save();\n  };\n  e.prototype.checkTryBike = function () {\n    if (e.tryBikeDelay > 0) {\n      e.tryBikeDelay--;\n      return false;\n    }\n    for (var t = 0; t < 3; t++) {\n      if (d.Inventory.instance.save["skin" + e.tryBike] !== true) {\n        return true;\n      }\n      if (++e.tryBike > 8) {\n        e.tryBike = 6;\n      }\n    }\n    return false;\n  };\n  e.prototype.tryBikePopup = function () {\n    if (this.popup !== null) {\n      this.disposePopup();\n    }\n    this.hasTryBikePopup = true;\n    this.backgroundPopup();\n    var t = this.game.add.sprite(0, 0, a["default"].Garage, "0popup_bg0000");\n    t.anchor.set(0.5);\n    this.popup.addChild(t);\n    var i = null;\n    var s = "New bike!  \\n";\n    if (e.isTrying) {\n      s += "You can get it for free";\n    } else {\n      s += "Try it for Free";\n    }\n    var o = null;\n    i = this.game.add.sprite(0, 3, a["default"].Garage, "bg0000");\n    i.anchor.set(0.5);\n    i.scale.set(1, 1.4);\n    this.popup.getChildAt(1).addChild(i);\n    o = new r["default"](this.game, s, n.Constants.styleMoney, null, this, a["default"].Garage);\n    o.y = -100;\n    o.label.align = "center";\n    o.label.stroke = "#000000";\n    o.label.strokeThickness = 2;\n    var h = this.game.add.group();\n    this.popup.getChildAt(1).addChild(h);\n    o.setFrames("bg0000", "bg0000", "bg0000", "bg0000");\n    this.popup.getChildAt(1).addChild(o);\n    if (this._armatureDisplay !== null) {\n      this._armatureDisplay.destroy();\n    }\n    // set bike animation\n    var l = "biker1_anim_btn";\n    if (e.tryBike == 7) {\n      l = "biker0_anim_btn";\n    } else if (e.tryBike == 8) {\n      l = "biker2_anim_btn";\n    }\n    // remove dragonbones\n    // this._armatureDisplay = dragonBones.PhaserFactory.factory.buildArmatureDisplay(l);\n    // this._armatureDisplay.x = 0;\n    // this._armatureDisplay.y = 60;\n    // this._armatureDisplay.animation.play("animation", 0);\n    // this.popup.addChild(this._armatureDisplay);\n    var c = new r["default"](this.game, e.isTrying ? "Watch video" : "Try", n.Constants.styleMoney, e.isTrying ? this.watchVideo : this.startTrying, this, a["default"].Garage);\n    c.label.y -= 8;\n    c.label.setShadow(1, 1, "rgba(0,0,0,0.8)", 5);\n    c.x = -100;\n    c.y = 100;\n    c.setFrames("orange_btn0000", "orange_btn0000", "orange_btn0000", "orange_btn0000");\n    c.scale.set(0.8);\n    this.popup.getChildAt(1).addChild(c);\n    var u = new r["default"](this.game, "NO", n.Constants.styleMoney, this.closeTryPopup, this, a["default"].Garage);\n    u.label.y -= 8;\n    u.label.setShadow(1, 1, "rgba(0,0,0,0.8)", 5);\n    u.x = 100;\n    u.y = 100;\n    u.setFrames("orange_btn0000", "orange_btn0000", "orange_btn0000", "orange_btn0000");\n    u.scale.set(0.8);\n    this.popup.getChildAt(1).addChild(u);\n    this.resizePopup(1);\n  };\n  e.prototype.startTrying = function () {\n    e.isTrying = true;\n    this.onPlayNextLevel();\n  };\n  e.prototype.watchVideo = function () {\n    b["default"].getInstance().dispatchStop();\n    b["default"].getInstance().displayRewarded(this.rewaredResult, this);\n  };\n  e.prototype.rewaredResult = function (t) {\n    b["default"].getInstance().dispatchStart(false);\n    if (t) {\n      d.Inventory.instance.unlockSkin(e.tryBike, 1);\n      d.Inventory.instance.skin = e.tryBike;\n      b["default"].getInstance().dispatchHappy(0.5);\n    }\n    this.closeTryPopup();\n  };\n  e.prototype.closeTryPopup = function () {\n    e.isTrying = false;\n    if (e.isTrying) {\n      this.onCallPopup(1);\n    } else {\n      e.tryBike++;\n      if (e.tryBike > 8) {\n        e.tryBike = 6;\n      }\n      this.onPlayNextLevel();\n    }\n  };\n  e.prototype.onCallPopup = function (t) {\n    if (u.MaxGameCore.instance.paused) {\n      b["default"].getInstance().dispatchStart(true);\n      this.closePopup();\n      return;\n    }\n    if (t === 1 && e.isTrying) {\n      this.game.time.events.add(Phaser.Timer.SECOND, this.tryBikePopup, this);\n      return;\n    }\n    this.createPopup();\n    if (t !== 1) {\n      b["default"].getInstance().dispatchStop();\n      u.MaxGameCore.instance.paused = true;\n      y["default"].instance.flipTexts.alpha = 0;\n    }\n    var i = null;\n    var s = "GAME PAUSED";\n    var h = o["default"].LevelNum;\n    var l = null;\n    if (v["default"].isDesktop) {\n      var c = new r["default"](this.game, "Press           Space                to continue", n.Constants.styleHelp, null, null, a["default"].Garage);\n      c.setFrames("0popup_bg0000", "0popup_bg0000", "0popup_bg0000", "0popup_bg0000");\n      c.label.anchor.set(0.5, 5.5);\n      c.btn.inputEnabled = false;\n      var d = undefined;\n      d = this.game.add.sprite(0, 0, a["default"].Garage, "space_key0000");\n      d.animations.add("space_key", ["space_key0000", "space_key0001"], 2, true);\n      d.y = c.height * -0.5 + 75;\n      d.x -= 24;\n      d.animations.getAnimation("space_key").play(2, true);\n      d.anchor.set(0.5);\n      c.addChild(d);\n      this.popup.getChildAt(1).addChild(c);\n      this.continueText = c;\n    }\n    if (t === 1) {\n      s = h + 1 < 10 ? "LEVEL 0" + (h + 1) + " COMPLETE" : "LEVEL " + (h + 1) + " COMPLETE";\n      this.setNewViewCar();\n      l = new r["default"](this.game, s, n.Constants.styleFinish, null, null, a["default"].Garage);\n      l.y = -220;\n      l.label.stroke = "#000000";\n      l.label.strokeThickness = 2;\n      var p = new f["default"](this.game, 0, 2, s, n.Constants.styleFinish);\n      p.anchor.set(0.5);\n      l.label.parent.addChildAt(p, 0);\n      p.stroke = "#FFFFFF";\n      p.strokeThickness = 5;\n      var g = null;\n      g = new r["default"](this.game, "CHANGE BIKE", n.Constants.styleFinish1, this.onGarage, this, a["default"].Garage);\n      g.setFrames("orange_btn_big0000", "orange_btn_big0000", "orange_btn_big0000", "orange_btn_big0000");\n      g.label.setMaxSize(200, 40);\n      g.label.y = -1;\n      g.label.setText("CHANGE BIKE");\n      g.label.setShadow(1, 1, "rgba(0,0,0,0.8)", 5);\n      this.popup.getChildAt(1).addChild(g);\n      y["default"].instance.timer.visible = false;\n      this.btn_garage = g;\n    } else {\n      i = this.game.add.sprite(0, 3, a["default"].Garage, "bg0000");\n      i.anchor.set(0.5);\n      i.scale.set(1, 1.4);\n      this.popup.getChildAt(1).addChild(i);\n      l = new r["default"](this.game, s, n.Constants.stylePause, null, this, a["default"].Garage);\n      l.y = -145;\n      l.label.stroke = "#000000";\n      l.label.strokeThickness = 2;\n      var m = this.game.add.group();\n      this.popup.getChildAt(1).addChild(m);\n      this.setPauseViewCar(m);\n    }\n    l.setFrames("bg0000", "bg0000", "bg0000", "bg0000");\n    this.popup.getChildAt(1).addChild(l);\n    var x = new r["default"](this.game, "", n.Constants.styleCredits1, this.onChooseZone, this, a["default"].Garage);\n    x.y = 200;\n    x.setFrames("orange_btn0000", "orange_btn0000", "orange_btn0000", "orange_btn0000");\n    x.scale.set(0.8);\n    var _ = this.game.add.sprite(0, -11, a["default"].Garage, "exit_btn0000");\n    _.anchor.set(0.5);\n    x.label.parent.addChild(_);\n    this.popup.getChildAt(1).addChild(x);\n    var w = new r["default"](this.game, "", n.Constants.stylePopBtn2, t === 1 ? this.onNextClick : this.onResume, this, a["default"].Garage);\n    w.y = 200;\n    w.setFrames("orange_btn0000", "orange_btn0000", "orange_btn0000", "orange_btn0000");\n    w.scale.set(0.8);\n    var C = this.game.add.sprite(0, -7, a["default"].Garage, "next_btn0000");\n    C.anchor.set(0.5);\n    w.label.parent.addChild(C);\n    this.popup.getChildAt(1).addChild(w);\n    if (t === 1) {\n      var P = this.game.add.group();\n      this.popup.getChildAt(1).addChild(P);\n      this.postRace(P);\n    }\n    this.btn_resume = w;\n    this.btn_list = x;\n    this.resizePopup(1);\n  };\n  e.prototype.resizePopup = function (t) {\n    if (this.popup !== null) {\n      var e = this.popup.removeChildAt(0);\n      e.width = this.game.width;\n      e.height = this.game.height;\n      this.popup.x = this.world.bounds.centerX;\n      this.popup.y = this.world.bounds.centerY;\n      this.popup.addChildAt(e, 0);\n      var i = 0;\n      if (this.btn_resume) {\n        this.btn_resume.x = this.game.width * 0.5 - this.btn_resume.width * 0.5;\n      }\n      if (this.btn_list) {\n        this.btn_list.x = this.game.width * -0.5 + this.btn_list.width * 0.5;\n      }\n      if (this.btn_resume) {\n        var s = (this.btn_resume.x - this.btn_list.x - this.btn_resume.width) * window.innerWidth / this.game.width;\n        b["default"].getInstance().displayAd();\n        i = b["default"].getInstance().getBannerHeight();\n      }\n      if (this.btn_resume) {\n        this.btn_resume.y -= i;\n      }\n      if (this.btn_list) {\n        this.btn_list.y -= i;\n      }\n      if (this.improved_mc !== null) {\n        this.improved_mc.y -= i;\n      }\n      if (this.btn_garage !== null) {\n        this.btn_garage.y = 170 - i;\n      }\n      if (this._armatureDisplay !== null) {\n        this._armatureDisplay.y = this._armatureDisplay.y - i;\n      }\n      if (this.continueText !== null) {\n        this.continueText.y = 370 - i;\n      }\n    }\n  };\n  e.prototype.disposePopup = function () {\n    if (this.popup) {\n      this.popup.destroy();\n    }\n    this.btn_resume = null;\n    this.btn_list = null;\n    this.continueText = null;\n    this.improved_mc = null;\n    this.popup = null;\n    u.MaxGameCore.instance.paused = false;\n  };\n  e.prototype.backgroundPopup = function () {\n    this.popup = this.game.add.sprite(350, 250, a["default"].Garage, "bg0000");\n    this.popup.anchor.set(0.5);\n    var t = this.game.add.sprite(0, 0, a["default"].Garage, "bg0000");\n    t.width = this.game.width;\n    t.height = this.game.height;\n    t.inputEnabled = true;\n    t.anchor.set(0.5);\n    this.popup.addChild(t);\n    this.world.addChild(y["default"].instance.container);\n    y["default"].instance.hideTimer();\n  };\n  e.prototype.createPopup = function () {\n    if (this.popup !== null) {\n      this.disposePopup();\n    }\n    this.backgroundPopup();\n    var t = this.game.add.sprite(0, 0, a["default"].Garage, "0popup_bg0000");\n    t.anchor.set(0.5);\n    this.popup.addChild(t);\n  };\n  e.prototype.closePopup = function () {\n    b["default"].getInstance().destroyAd();\n    this.disposePopup();\n  };\n  e.prototype.onResume = function () {\n    b["default"].getInstance().dispatchStart(true);\n    this.closePopup();\n  };\n  e.prototype.onChooseZone = function () {\n    e.isTrying = false;\n    h["default"].getInstance().save();\n    this.closePopup();\n    new c["default"](this.game, 0, o["default"].Name);\n  };\n  e.prototype.onGarage = function () {\n    h["default"].getInstance().save();\n    this.closePopup();\n    new c["default"](this.game, 0, g["default"].Name);\n  };\n  e.prototype.parseStaticGraphic = function (t, e) {\n    var i = null;\n    i = this.game.add.image(t[e].x, t[e].y, a["default"].Cars, t[e].g + "0000");\n    i.angle = t[e].r;\n    if (e.indexOf("base") !== -1) {\n      i.anchor.set(m.AssetsList.FRAMES_ANCHORX[0], m.AssetsList.FRAMES_ANCHORY[0]);\n    } else if (e.indexOf("suspend") !== -1) {\n      if (e.indexOf("front") !== -1) {\n        i.anchor.set(0.8, t[e].g.indexOf("1") !== -1 ? 0.2 : 0.5);\n      } else {\n        i.anchor.set(0, 0.5);\n      }\n    } else {\n      i.anchor.set(0.5);\n    }\n    this.bike.addChild(i);\n  };\n  e.prototype.setPauseViewCar = function (t) {\n    if (this.bike !== null) {\n      this.bike.destroy();\n      this.bike = this.game.add.group(t);\n    } else {\n      this.bike = this.game.add.group(t);\n    }\n    var e = d.CarsData.geomObj.bike11;\n    var i = "Wheel0";\n    this.parseStaticGraphic(e, i);\n    i = "Wheel1";\n    this.parseStaticGraphic(e, i);\n    i = "suspend_back";\n    this.parseStaticGraphic(e, i);\n    i = "base";\n    this.parseStaticGraphic(e, i);\n    i = "driver_corpse";\n    this.parseStaticGraphic(e, i);\n    i = "driver_hip";\n    this.parseStaticGraphic(e, i);\n    i = "driver_shin";\n    this.parseStaticGraphic(e, i);\n    i = "driver_arm";\n    this.parseStaticGraphic(e, i);\n    i = "driver_forearm";\n    this.parseStaticGraphic(e, i);\n    i = "driver_head";\n    this.parseStaticGraphic(e, i);\n    i = "suspend_front";\n    this.parseStaticGraphic(e, i);\n    this.bike.x = 0;\n    this.bike.y = 10;\n  };\n  e.prototype.update = function () {\n    if (this.isFirstUpdate) {\n      this.isFirstUpdate = false;\n      this.timeAcc = 0;\n      this.prevTimeMS = Date.now();\n      return;\n    }\n    if (!e.isAdsPause) {\n      t.prototype.update.call(this);\n      this.currTimeMS = Date.now();\n      this.deltaTime = (this.currTimeMS - this.prevTimeMS) / 1000;\n      if (this.deltaTime > e.MAX_FRAME_TIME) {\n        this.deltaTime = e.MAX_FRAME_TIME;\n      }\n      this.prevTimeMS = this.currTimeMS;\n      this.timeAcc += this.deltaTime;\n      while (this.timeAcc >= e.DESIRED_FRAME_TIME) {\n        this.updateGameController(e.DESIRED_FRAME_TIME);\n        this.timeAcc -= e.DESIRED_FRAME_TIME;\n      }\n    }\n  };\n  e.prototype.resize = function () {\n    t.prototype.resize.call(this);\n    var e = 1;\n    if (this.game.width / this.game.height >= n.Constants.WIDTH / n.Constants.HEIGHT) {\n      e = this.game.width / n.Constants.WIDTH;\n      e = e > 1 ? 1 : e;\n    } else {\n      e = this.game.height / n.Constants.HEIGHT;\n      e = e > 1 ? 1 : e;\n    }\n    y["default"].instance.resize(e);\n    this.resizePopup(e);\n  };\n  e.prototype.shutdown = function () {\n    this.closePopup();\n    u.MaxGameCore.instance.release();\n    y["default"].instance.release();\n    e.isActive = false;\n    d.CameraZone.current = null;\n    if (this.loader !== null) {\n      this.loader.onFileComplete.remove(this.fileLevelComplete, this);\n      this.loader = null;\n    }\n    t.prototype.shutdown.call(this);\n  };\n  e.prototype.render = function () {\n    if (this.popup !== null) {\n      dragonBones.PhaserFactory.factory.dragonBones.advanceTime(-1);\n    }\n    t.prototype.render.call(this);\n  };\n  e.prototype.initData = function () {\n    this.isFirstUpdate = true;\n  };\n  e.prototype.updateGameController = function (t) {\n    u.MaxGameCore.instance.update(t);\n    y["default"].instance.setTimer();\n  };\n  // new function screen\n  e.Name = "gameplay";\n  e.isActive = false;\n  e.TRY_DELAY = 4;\n  e.isTrying = false;\n  e.tryBike = 6;\n  e.tryBikeDelay = e.TRY_DELAY;\n  e.MAX_FRAME_TIME = 0.1;\n  e.DESIRED_FRAME_TIME = 1 / 30;\n  e.isAdsPause = false;\n  e.loadedLevel = false;\n  e.currCar = -1;\n  e.dbInited = false;\n  return e;\n}(Phaser.State);\nexports["default"] = x;\n\n//# sourceURL=webpack://motox3m/./src/states/GameState.js?')},"./src/states/GarageState.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true; Garage/Shop State\nvar n = __webpack_require__(/*! @/src/ui/Button.js */ "./src/ui/Button.js");\nvar o = __webpack_require__(/*! @/src/data/AtlasesData.js */ "./src/data/AtlasesData.js");\nvar a = __webpack_require__(/*! @/src/utils/Constants.js */ "./src/utils/Constants.js");\nvar r = __webpack_require__(/*! @/src/states/LevelSelect.js */ "./src/states/LevelSelect.js");\nvar h = __webpack_require__(/*! @/src/states/MenuState.js */ "./src/states/MenuState.js");\nvar l = __webpack_require__(/*! @/src/controllers/SoundController.js */ "./src/controllers/SoundController.js");\nvar c = __webpack_require__(/*! @/src/ui/Sound.js */ "./src/ui/Sound.js");\nvar u = __webpack_require__(/*! @/src/utils/SaveUtils.js */ "./src/utils/SaveUtils.js");\nvar d = __webpack_require__(/*! @/src/ui/LoadingFade.js */ "./src/ui/LoadingFade.js");\nvar p = __webpack_require__(/*! @/src/ui/LoadingScreen.js */ "./src/ui/LoadingScreen.js");\nvar f = __webpack_require__(/*! @/src/data/GameData.js */ "./src/data/GameData.js");\nvar y = __webpack_require__(/*! @/src/data/CarsData.js */ "./src/data/CarsData.js");\nvar g = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar m = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar v = __webpack_require__(/*! @/src/effects/FirePartClip.js */ "./src/effects/FirePartClip.js");\nvar b = __webpack_require__(/*! @/src/states/GameState.js */ "./src/states/GameState.js");\nvar x = __webpack_require__(/*! @/src/ui/AutoSizeText.js */ "./src/ui/AutoSizeText.js");\nvar _ = __webpack_require__(/*! @/src/services/AdsManager.js */ "./src/services/AdsManager.js");\nvar Constants = __webpack_require__(/*! @/src/utils/Constants.js */ "./src/utils/Constants.js");\nvar GeomData = (__webpack_require__(/*! @/src/data/GeomData.js */ "./src/data/GeomData.js")["default"]);\nvar w = function (t) {\n  function e() {\n    var i = t.call(this) || this;\n    i.name = e.Name;\n    i.changeBike = null;\n    i.priceTxt = null;\n    i.priceTxtY = 0;\n    i.plusStarBtnY = 0;\n    i.priceTxtAnim = false;\n    i.btnLeft = null;\n    i.btnRight = null;\n    i.bike = null;\n    i.parts2 = null;\n    i.top_stars = null;\n    i.stars = 0;\n    i.popup = null;\n    return i;\n  }\n  s(e, t);\n  e.prototype.init = function () {\n    this.game.world.removeAll();\n    this.parts2 = [];\n    g.GraphicUtil.game = this.game;\n    l["default"].getInstance().playMusic(c["default"].MenuMusic);\n  };\n  e.prototype.create = function () {\n    t.prototype.create.call(this);\n    var i = this.game.add.sprite(360, 240, o["default"].Garage, "0popup_bg0000");\n    i.anchor.set(0.5);\n    var s = null;\n    this.background = this.game.add.sprite(0, 0, o["default"].Garage, "bg0000");\n    s = this.game.add.sprite(0, 0, o["default"].Garage, "0bg_garage0000");\n    s.alpha = 0;\n    this.background.addChild(s);\n    this.background.addChild(i);\n    var r = new n["default"](this.game, "BIKE SHOP", a["default"].styleGarage, null, null, o["default"].Garage);\n    r.setFrames("bg0000", "bg0000", "bg0000", "bg0000");\n    r.position.set(a["default"].WIDTH / 2, 40);\n    this.background.addChild(r);\n    this.stars = g.Inventory.instance.getTotalStars();\n    this.top_stars = new n["default"](this.game, this.stars + "", a["default"].styleMoney, null, null, o["default"].Garage);\n    this.top_stars.setFrames("w_star0000", "w_star0000", "w_star0000", "w_star0000");\n    this.top_stars.position.set(a["default"].WIDTH - 30, 30);\n    this.top_stars.label.x = -30;\n    if (this.game.width - a["default"].WIDTH > 0) {\n      this.top_stars.x += (this.game.width - a["default"].WIDTH) / 2;\n    }\n    this.background.addChild(this.top_stars);\n    r.label.stroke = "#000000";\n    r.label.strokeThickness = 4;\n    var l = new x["default"](this.game, 0, 2, "BIKE SHOP", a["default"].stylePlay);\n    l.anchor.set(0.5);\n    r.label.parent.addChildAt(l, 0);\n    l.stroke = "#FFFFFF";\n    l.strokeThickness = 7;\n    // button to unlock bike\n    /*this.plusStarBtn = new n.default(this.game, "to unlock Bike", a.default.styleHelp, this.onRewardedDown, this, o.default.Garage);\r\n    this.plusStarBtn.label.setShadow(1, 1, "rgba(0,0,0,0.8)", 5);\r\n    this.plusStarBtn.setFrames("orange_btn0000", "orange_btn0000", "orange_btn0000", "orange_btn0000");\r\n    this.plusStarBtn.label.y += 4;\r\n    var c = new x.default(this.game, 0, 2, "Watch video", a.default.styleHelp, 30, 30);\r\n    c.anchor.set(0.5);\r\n    c.position.y = -20;\r\n    c.setShadow(1, 1, "rgba(0,0,0,0.8)", 5);\r\n    this.plusStarBtn.addChild(c);\r\n    this.plusStarBtn.position.set(a.default.WIDTH - this.plusStarBtn.width * 0.5, a.default.HEIGHT - 10 - this.plusStarBtn.height * 0.5);\r\n    if (this.game.width - a.default.WIDTH > 0) {\r\n      this.plusStarBtn.x += (this.game.width - a.default.WIDTH) / 2;\r\n    }\r\n    this.background.addChild(this.plusStarBtn);\r\n    */\n    // end of button to unlock bike\n\n    this.playBtn = new n["default"](this.game, "", a["default"].stylePopBtn2, p["default"].prevState === h["default"].Name ? this.onMenu : this.onPlayDown, this, o["default"].Garage);\n    this.playBtn.setFrames("orange_btn0000", "orange_btn0000", "orange_btn0000", "orange_btn0000");\n    var u = this.game.add.sprite(0, -7, o["default"].Garage, "next_btn0000");\n    u.anchor.set(0.5);\n    u.scale.set(-1, 1);\n    this.playBtn.label.parent.addChild(u);\n    this.playBtn.x = 10 + this.playBtn.width / 2;\n    this.playBtn.y = a["default"].HEIGHT - 10 - this.playBtn.height / 2;\n    this.btnLeft = new n["default"](this.game, "", a["default"].styleGarage, this.onPrev, this, o["default"].Garage);\n    this.btnLeft.setFrames("arrow_btn0000", "arrow_btn0000", "arrow_btn0001", "arrow_btn0000");\n    this.btnRight = new n["default"](this.game, "", a["default"].styleGarage, this.onNext, this, o["default"].Garage);\n    this.btnRight.setFrames("arrow_btn0000", "arrow_btn0000", "arrow_btn0001", "arrow_btn0000");\n    this.btnRight.rotation = Phaser.Math.degToRad(180);\n    this.btnLeft.x = 10 + this.playBtn.width / 2;\n    this.btnRight.x = a["default"].WIDTH - 10 - this.playBtn.width / 2;\n    this.btnLeft.y = a["default"].HEIGHT / 2;\n    this.btnRight.y = a["default"].HEIGHT / 2;\n    if (this.game.width - a["default"].WIDTH > 0) {\n      this.playBtn.x -= (this.game.width - a["default"].WIDTH) / 2;\n      this.btnLeft.x -= (this.game.width - a["default"].WIDTH) / 2;\n      this.btnRight.x += (this.game.width - a["default"].WIDTH) / 2;\n    }\n    e.currCar = e.carList.indexOf(g.Inventory.instance.skin);\n    g.Inventory.instance.skin = e.carList[e.currCar];\n    f.GameData.carId = e.carList[e.currCar];\n    if (g.Inventory.instance.save.skin3 !== true) {\n      e.currCar = 1;\n    } else if (g.Inventory.instance.save.skin5 !== true) {\n      e.currCar = 2;\n    }\n    this.setNewViewCar();\n    this.background.addChild(this.playBtn);\n    this.background.addChild(this.btnLeft);\n    this.background.addChild(this.btnRight);\n    new d["default"](this.game, 0, null);\n    this.resize();\n    // this.unlockAllContent();\n    // Add unlock button\n    /*var unlockButton = new n.default(\r\n        this.game,\r\n        "Unlock All",\r\n        a.default.styleGarage2,\r\n        this.unlockAllContent,\r\n        this,\r\n        o.default.Garage\r\n    );\r\n    unlockButton.x = this.game.width / 2;\r\n    unlockButton.y = this.game.height - 100;\r\n    this.background.addChild(unlockButton);*/\n  };\n  e.prototype.unlockAllContent = function () {\n    // Call unlock function\n    h["default"].unlockGame();\n\n    // Refresh the garage display\n    this.onPlayerChange();\n\n    // Update stars display if needed\n    // if (this.stars != Inventory.instance.getTotalStars()) {\n    //     this.stars = Inventory.instance.getTotalStars();\n    //     this.top_stars.label.text = this.stars + "";\n    // }\n  };\n  e.prototype.onRewardedDown = function () {\n    _["default"].getInstance().displayRewarded(this.rewaredResult, this);\n  };\n  e.prototype.rewaredResult = function (t) {\n    if (t) {\n      var i = e.carList[e.currCar];\n      g.Inventory.instance.save["skin" + i] = true;\n      _["default"].getInstance().dispatchHappy(0.5);\n      this.saveCarId();\n    }\n  };\n  e.prototype.getPrice = function () {\n    var t = e.priceList[e.currCar] + "";\n    if (t === "0") {\n      t = "FREE";\n    }\n    return t;\n  };\n  e.prototype.onPlayerChange = function () {\n    if (e.currCar === e.totalCars - 1) {\n      this.btnRight.enable = false;\n    } else {\n      this.btnRight.enable = true;\n    }\n    if (e.currCar === 0) {\n      this.btnLeft.enable = false;\n    } else {\n      this.btnLeft.enable = true;\n    }\n  };\n  e.prototype.saveCarId = function () {\n    var t = e.carList[e.currCar];\n    if (g.Inventory.instance.save["skin" + t] === true) {\n      f.GameData.carId = t;\n      g.Inventory.instance.skin = t;\n      this.setNewViewCar();\n      u["default"].getInstance().save();\n    } else if (g.Inventory.instance.getTotalStars() >= e.priceList[e.currCar]) {\n      f.GameData.carId = t;\n      g.Inventory.instance.skin = t;\n      if (g.Inventory.instance.unlockSkin(t, t)) {\n        _["default"].getInstance().dispatchHappy(0.5);\n      }\n      this.setNewViewCar();\n      u["default"].getInstance().save();\n    } else if (!this.priceTxtAnim) {\n      // var i = this.game.add.tween(this.plusStarBtn);\n      // i.to({\n      //   y: this.plusStarBtnY - 15\n      // }, 150, Phaser.Easing.Bounce.InOut, false, 0, 3, true);\n      // i.onComplete.add(this.onPriceAnimComplete, this);\n      // this.priceTxtAnim = true;\n      // i.start();\n      var i = this.game.add.tween(this.priceTxt);\n      i.to({\n        y: this.priceTxtY - 15\n      }, 150, Phaser.Easing.Bounce.InOut, false, 0, 3, true);\n      i.onComplete.add(this.onPriceAnimComplete, this);\n      this.priceTxtAnim = true;\n      i.start();\n    }\n  };\n  e.prototype.onPriceAnimComplete = function () {\n    this.priceTxtAnim = false;\n  };\n  e.prototype.onPlayDown = function () {\n    new p["default"](this.game, 0, r["default"].Name);\n  };\n  e.prototype.onMenu = function () {\n    new p["default"](this.game, 0, h["default"].Name);\n  };\n  e.prototype.onNext = function () {\n    if (e.currCar < e.totalCars) {\n      e.currCar++;\n    }\n    // this.background.destroy();\n    this.setNewViewCar();\n  };\n  e.prototype.createBikePart = function (t) {\n    var bike = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    // console.log("createBikePart-tbg95", bike, t);\n    var i = null;\n    var s = t.g;\n    var currentAtlass = o["default"].Cars;\n    if (bike > 8) {\n      currentAtlass = "bike" + bike;\n    }\n    // newcar-tbg95\n    i = this.game.add.image(t.x, t.y, currentAtlass, s + "0000");\n    console.log("i", i.width, i.height);\n    i.angle = t.r;\n    var n = e.carList[e.currCar] - 1;\n    if (bike > 8) {\n      // \n      // n = 7\n    }\n    if (bike > 8) {\n      i.scale.set(0.5, 0.5);\n      var anchorX = Phaser.Math.clamp(t.originalPivotX / i.width, 0, 1);\n      var anchorY = Phaser.Math.clamp(t.originalPivotY / i.height, 0, 1);\n\n      // Set anchor\n      i.anchor.set(anchorX, anchorY);\n      //}\n    } else {\n      if (s.indexOf("base") !== -1) {\n        i.anchor.set(m.AssetsList.FRAMES_ANCHORX[n], m.AssetsList.FRAMES_ANCHORY[n]);\n      } else if (s.indexOf("suspend") !== -1) {\n        if (s.indexOf("front") !== -1) {\n          i.anchor.set(m.AssetsList.SUSPEND_FRONT_ANCHORX[n], m.AssetsList.SUSPEND_FRONT_ANCHORY[n]);\n        } else {\n          i.anchor.set(m.AssetsList.SUSPEND_BACK_ANCHORX[n], m.AssetsList.SUSPEND_BACK_ANCHORY[n]);\n        }\n      } else if (n >= 5 && s.indexOf("driver_") !== -1) {\n        if (n <= 9) {\n          s = s.substr(0, s.length - 1);\n        } else {\n          s = s.substr(0, s.length - 2);\n        }\n        // console.log("createBikePart", s, n);\n        //console.log("createBikePart", m.AssetsList.ARCHORS_X, m.AssetsList.ARCHORS_Y);\n        i.anchor.set(m.AssetsList.ARCHORS_X[s][n], m.AssetsList.ARCHORS_Y[s][n]);\n      } else {\n        i.anchor.set(0.5);\n      }\n    }\n    this.bike.addChild(i);\n  };\n  e.prototype.setNewViewCar = function () {\n    // console.log("setNewViewCar", e.currCar);\n\n    // Destroy old background if it exists\n    // if (this.background) {\n    //   this.background.destroy();\n    // }\n\n    var t = e.carList[e.currCar];\n    if (this.bike !== null) {\n      if (this.background && this.bike.parent === this.background) {\n        this.background.removeChild(this.bike);\n      }\n      this.bike.destroy();\n      this.bike = this.game.add.group();\n    } else {\n      this.bike = this.game.add.group();\n    }\n    // console.log("setNewViewCar", y.CarsData.geomObj["bike" + t]);\n    if (t < 9) {\n      for (var i = y.CarsData.geomObj["bike" + t], s = 0; s < i.length; s++) {\n        this.createBikePart(i[s]);\n      }\n    } else {\n      var pivots = this.game.cache.getJSON("bike".concat(t, "_pivots")).pivots;\n      console.log("pivots", pivots);\n      GeomData.Base.g = "bike_" + t + "_base";\n      GeomData.Base.originalPivotX = pivots.base.x;\n      GeomData.Base.originalPivotY = pivots.base.y;\n      GeomData.DriverHead.g = "driver_head" + t;\n      GeomData.DriverHead.originalPivotX = pivots.driver_head.x;\n      GeomData.DriverHead.originalPivotY = pivots.driver_head.y;\n      GeomData.DriverArm.g = "driver_arm" + t;\n      GeomData.DriverArm.originalPivotX = pivots.driver_arm.x;\n      GeomData.DriverArm.originalPivotY = pivots.driver_arm.y;\n      GeomData.DriverForearm.g = "driver_forearm" + t;\n      GeomData.DriverForearm.originalPivotX = pivots.driver_forearm.x;\n      GeomData.DriverForearm.originalPivotY = pivots.driver_forearm.y;\n      GeomData.DriverHip.g = "driver_hip" + t;\n      GeomData.DriverHip.originalPivotX = pivots.driver_hip.x;\n      GeomData.DriverHip.originalPivotY = pivots.driver_hip.y;\n      GeomData.DriverShin.g = "driver_shin" + t;\n      GeomData.DriverShin.originalPivotX = pivots.driver_shin.x;\n      GeomData.DriverShin.originalPivotY = pivots.driver_shin.y;\n      GeomData.DriverCorpse.g = "driver_corpse" + t;\n      GeomData.DriverCorpse.originalPivotX = pivots.driver_corpse.x;\n      GeomData.DriverCorpse.originalPivotY = pivots.driver_corpse.y;\n      if (t != 16 && t != 17 && t != 19) {\n        if (t != 23) {\n          GeomData.SuspendFront.g = "suspend_front" + t;\n          GeomData.SuspendFront.originalPivotX = pivots.suspend_front.x;\n          GeomData.SuspendFront.originalPivotY = pivots.suspend_front.y;\n        }\n        GeomData.SuspendBack.g = "suspend_back" + t;\n        GeomData.SuspendBack.originalPivotX = pivots.suspend_back.x;\n        GeomData.SuspendBack.originalPivotY = pivots.suspend_back.y;\n      }\n      GeomData.WheelFront.g = "Wheel_" + t + "_0";\n      GeomData.WheelFront.originalPivotX = pivots.wheel_front.x;\n      GeomData.WheelFront.originalPivotY = pivots.wheel_front.y;\n      GeomData.WheelBack.g = "Wheel_" + t + "_0";\n      GeomData.WheelBack.originalPivotX = pivots.wheel_back.x;\n      GeomData.WheelBack.originalPivotY = pivots.wheel_back.y;\n      if (t == 22 || t == 25) {\n        GeomData.WheelFront.g = "Wheel_" + t + "_1";\n        GeomData.WheelBack.g = "Wheel_" + t + "_2";\n      }\n      this.createBikePart(GeomData.WheelFront, t);\n      this.createBikePart(GeomData.WheelBack, t);\n      if (t != 13) {\n        if (t != 16 && t != 17 && t != 19) {\n          this.createBikePart(GeomData.SuspendBack, t);\n          if (t != 23) {\n            this.createBikePart(GeomData.SuspendFront, t);\n          }\n        }\n        this.createBikePart(GeomData.Base, t);\n      } else {\n        if (t != 16 && t != 17 && t != 19) {\n          this.createBikePart(GeomData.SuspendBack, t);\n        }\n        this.createBikePart(GeomData.Base, t);\n        if (t != 16 && t != 17 && t != 19) {\n          this.createBikePart(GeomData.SuspendFront, t);\n        }\n      }\n      this.createBikePart(GeomData.DriverCorpse, t);\n      this.createBikePart(GeomData.DriverHead, t);\n      this.createBikePart(GeomData.DriverForearm, t);\n      this.createBikePart(GeomData.DriverArm, t);\n      this.createBikePart(GeomData.DriverShin, t);\n      this.createBikePart(GeomData.DriverHip, t);\n      if (t == 16 || t == 17 || t == 19) {\n        this.createBikePart(GeomData.WheelFront, t);\n        this.createBikePart(GeomData.WheelBack, t);\n      }\n    }\n    this.bike.x = a["default"].WIDTH / 2;\n    this.bike.y = a["default"].HEIGHT / 2;\n    this.background.addChild(this.bike);\n    if (e.currCar === 4) {\n      this.createFireParts();\n    }\n    if (this.changeBike !== null) {\n      if (this.changeBike && this.changeBike.parent === this.background) {\n        console.log("changeBike", this.changeBike);\n        this.background.removeChild(this.changeBike);\n      }\n      this.changeBike.destroy();\n    }\n    var r = "EQUIPPED";\n    var h = "orange_btn_big_green0000";\n    var l = e.carList[e.currCar];\n    if (l !== g.Inventory.instance.skin) {\n      r = "EQUIP IT";\n      h = "orange_btn_big0000";\n    }\n    // button to unlock bike\n    //this.plusStarBtn.visible = false;\n    var c = true;\n    if (g.Inventory.instance.save["skin" + l] !== true) {\n      if (l !== 1) {\n        //this.plusStarBtn.visible = true;\n        c = false;\n      }\n    }\n    // end of button to unlock bike\n    // button to change bike\n    this.changeBike = new n["default"](this.game, r, a["default"].styleGarage2, this.saveCarId, this, o["default"].Garage);\n    this.changeBike.x = a["default"].WIDTH / 2;\n    this.changeBike.y = a["default"].HEIGHT - 50;\n    this.changeBike.setFrames(h, h, h, h);\n    this.changeBike.label.setMaxSize(200, 40);\n    this.changeBike.label.y = -6;\n    this.changeBike.label.setShadow(1, 1, "rgba(0,0,0,0.8)", 5);\n    // this.buyBtn = this.changeBike;\n    if (this.priceTxt) {\n      if (this.priceTxt && this.priceTxt.parent === this.background) {\n        this.background.removeChild(this.priceTxt);\n      }\n      this.priceTxt.destroy();\n    }\n    if (!c) {\n      this.priceTxt = new n["default"](this.game, "PRICE:", a["default"].styleMoney, null, null, o["default"].Garage);\n      this.priceTxt.setFrames("bg0000", "bg0000", "bg0000", "bg0000");\n      this.priceTxt.label.y = -15;\n      var u = new x["default"](this.game, 0, 15, this.getPrice(), a["default"].styleMoney);\n      if (this.getPrice() === "FREE") {\n        u.anchor.set(0.5);\n      } else {\n        u.anchor.set(1.05, 0.5);\n        var d = this.game.add.sprite(0, 15, o["default"].Garage, "w_star0000");\n        d.anchor.set(0.15, 0.5);\n        this.priceTxt.label.parent.addChild(d);\n      }\n      this.priceTxt.label.parent.addChild(u);\n      // this.priceTxt.x = this.changeBike.x;\n      // this.priceTxt.y = this.changeBike.y - 70;\n      this.priceTxt.x = Constants["default"].WIDTH - 110;\n      // console.log("this.game.width", this.game.width);\n      // console.log("Constants.default.WIDTH", Constants.default.WIDTH);\n      if (this.game.width - Constants["default"].WIDTH > 0) {\n        this.priceTxt.x += (this.game.width - Constants["default"].WIDTH) / 2;\n      }\n      this.priceTxt.y = Constants["default"].HEIGHT - 70;\n      this.priceTxtY = this.priceTxt.y;\n      // ,this.priceTxt.x=h.default.WIDTH-110,0<this.game.width-h.default.WIDTH&&(this.priceTxt.x+=(this.game.width-h.default.WIDTH)/2),this.priceTxt.y=h.default.HEIGHT-70\n      /*this.plusStarBtnY = this.plusStarBtn.y;*/\n      this.background.addChild(this.priceTxt);\n    }\n    this.background.addChild(this.changeBike);\n    this.onPlayerChange();\n  };\n  e.prototype.update = function () {\n    t.prototype.update.call(this);\n    this.emitFire();\n    if (this.stars != g.Inventory.instance.getTotalStars()) {\n      this.stars = g.Inventory.instance.getTotalStars();\n      this.top_stars.label.text = this.stars + "";\n      this.rewardPopup();\n    }\n  };\n  e.prototype.createFireParts = function () {\n    for (var t = 0; t < g.FrameGraphic.PART_COUNT; t++) {\n      var e = new v.FirePartClip(1.1);\n      this.parts2[t] = e;\n      this.bike.addChildAt(e, 0);\n    }\n    this.partPos2 = 0;\n  };\n  e.prototype.emitFire = function () {\n    if (e.currCar === 4) {\n      this.parts2[this.partPos2].emit(Math.random() * 10 - 7, Math.random() * 10 - 65);\n      this.partPos2++;\n      if (this.partPos2 >= g.FrameGraphic.PART_COUNT) {\n        this.partPos2 = 0;\n      }\n      for (var t = 0; t < g.FrameGraphic.PART_COUNT; t++) {\n        this.parts2[t].update2(b["default"].DESIRED_FRAME_TIME / 2);\n      }\n    }\n  };\n  e.prototype.onPrev = function () {\n    if (e.currCar !== 0) {\n      e.currCar--;\n    }\n    this.setNewViewCar();\n  };\n  e.prototype.shutdown = function () {\n    this.background = null;\n    this.changeBike = null;\n    this.playBtn = null;\n    this.btnLeft = null;\n    this.btnRight = null;\n    this.parts2 = null;\n    t.prototype.shutdown.call(this);\n  };\n  e.prototype.resize = function () {\n    t.prototype.resize.call(this);\n    var e = 1;\n    e = this.game.width / a["default"].WIDTH;\n    e = e > 1 ? 1 : e;\n    this.background.scale.set(e);\n    this.background.x = (this.game.width - 720) / 2;\n  };\n  e.prototype.rewardPopup = function () {\n    if (this.popup !== null) {\n      this.disposePopup();\n    }\n    this.backgroundPopup();\n    var t = this.game.add.sprite(0, 0, o["default"].Garage, "0popup_bg0000");\n    t.anchor.set(0.5);\n    this.popup.addChild(t);\n    var e = null;\n    var i = null;\n    e = this.game.add.sprite(0, 3, o["default"].Garage, "bg0000");\n    e.anchor.set(0.5);\n    e.scale.set(1, 1.4);\n    this.popup.getChildAt(1).addChild(e);\n    i = new n["default"](this.game, "Congratulations! \\n You earned 10 stars", a["default"].styleMoney, null, this, o["default"].Garage);\n    i.y = -40;\n    i.label.stroke = "#000000";\n    i.label.strokeThickness = 2;\n    i.label.align = "center";\n    var s = this.game.add.group();\n    this.popup.getChildAt(1).addChild(s);\n    i.setFrames("bg0000", "bg0000", "bg0000", "bg0000");\n    this.popup.getChildAt(1).addChild(i);\n    var r = new n["default"](this.game, "OK", a["default"].styleGarage3, this.rewardOk, this, o["default"].Garage);\n    r.label.y -= 8;\n    r.label.setShadow(1, 1, "rgba(0,0,0,0.8)", 5);\n    r.x = 0;\n    r.y = 100;\n    r.setFrames("orange_btn0000", "orange_btn0000", "orange_btn0000", "orange_btn0000");\n    r.scale.set(0.8);\n    this.popup.getChildAt(1).addChild(r);\n    this.resizePopup(1);\n  };\n  e.prototype.resizePopup = function (t) {\n    if (this.popup !== null) {\n      var e = this.popup.removeChildAt(0);\n      e.width = this.game.width;\n      e.height = this.game.height;\n      this.popup.x = this.world.bounds.centerX;\n      this.popup.y = this.world.bounds.centerY;\n      this.popup.addChildAt(e, 0);\n    }\n  };\n  e.prototype.rewardOk = function () {\n    this.closePopup();\n  };\n  e.prototype.closePopup = function () {\n    this.disposePopup();\n  };\n  e.prototype.disposePopup = function () {\n    if (this.popup) {\n      this.popup.destroy();\n    }\n    this.popup = null;\n  };\n  e.prototype.backgroundPopup = function () {\n    this.popup = this.game.add.sprite(350, 250, o["default"].Garage, "bg0000");\n    this.popup.anchor.set(0.5);\n    var t = this.game.add.sprite(0, 0, o["default"].Garage, "bg0000");\n    t.width = this.game.width;\n    t.height = this.game.height;\n    t.inputEnabled = true;\n    t.anchor.set(0.5);\n    this.popup.addChild(t);\n  };\n  e.prevNameState = "garage";\n  e.Name = "garage";\n  e.pause = false;\n  e.currCar = 0;\n  e.carList = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16]; // 23 is new bike\n  e.totalCars = e.carList.length;\n  e.priceList = [0, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 34, 36, 38, 40]; // 80 is new bike price\n\n  return e;\n}(Phaser.State);\nexports["default"] = w;\n\n//# sourceURL=webpack://motox3m/./src/states/GarageState.js?')},"./src/states/LevelSelect.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/data/AtlasesData.js */ "./src/data/AtlasesData.js");\nvar o = __webpack_require__(/*! @/src/utils/Constants.js */ "./src/utils/Constants.js");\nvar a = __webpack_require__(/*! @/src/ui/Sound.js */ "./src/ui/Sound.js");\nvar r = __webpack_require__(/*! @/src/controllers/SoundController.js */ "./src/controllers/SoundController.js");\nvar h = __webpack_require__(/*! @/src/states/GameState.js */ "./src/states/GameState.js");\nvar l = __webpack_require__(/*! @/src/states/GarageState.js */ "./src/states/GarageState.js");\nvar c = __webpack_require__(/*! @/src/ui/SelectButton.js */ "./src/ui/SelectButton.js");\nvar u = __webpack_require__(/*! @/src/ui/LoadingScreen.js */ "./src/ui/LoadingScreen.js");\nvar d = __webpack_require__(/*! @/src/ui/LoadingFade.js */ "./src/ui/LoadingFade.js");\nvar p = __webpack_require__(/*! @/src/data/JSONData.js */ "./src/data/JSONData.js");\nvar f = __webpack_require__(/*! @/src/data/GameData.js */ "./src/data/GameData.js");\nvar y = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar g = __webpack_require__(/*! @/src/ui/Button.js */ "./src/ui/Button.js");\nvar m = __webpack_require__(/*! @/src/utils/SaveUtils.js */ "./src/utils/SaveUtils.js");\nvar v = __webpack_require__(/*! @/src/states/MenuState.js */ "./src/states/MenuState.js");\nvar b = __webpack_require__(/*! @/src/assets/AssetLoader.js */ "./src/assets/AssetLoader.js");\nvar x = __webpack_require__(/*! @/src/config/Game.js */ "./src/config/Game.js");\nvar _ = __webpack_require__(/*! @/src/services/AdsManager.js */ "./src/services/AdsManager.js");\nvar w = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar C = function (t) {\n  function e() {\n    var i = t.call(this) || this;\n    i.name = e.Name;\n    i.minMapX = 0;\n    i.moveMapX = 360;\n    i.innerNumner = -1;\n    i.scaling = 1;\n    i.loader = null;\n    i.waitForFile = null;\n    return i;\n  }\n  s(e, t);\n  e.prototype.init = function () {\n    this.game.world.removeAll();\n    this.innerNumner = -1;\n    r["default"].getInstance().playMusic(a["default"].MenuMusic);\n  };\n  e.prototype.create = function () {\n    t.prototype.create.call(this);\n    if (x["default"].isDesktop) {\n      this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR).onUp.add(this.onSpace, this);\n    }\n    y.Inventory.instance.signalUnlock.removeAll();\n    y.Inventory.instance.signalUnlock.addOnce(function () {\n      new u["default"](this.game, 0, e.Name);\n    }, this);\n    if (x["default"].isDesktop) {\n      this.continueText = new g["default"](this.game, "Press               Space              to play", o["default"].styleHelp, null, null, n["default"].Garage);\n      this.continueText.setFrames("0popup_bg0000", "0popup_bg0000", "0popup_bg0000", "0popup_bg0000");\n      this.continueText.x = this.game.width / 2;\n      this.continueText.y = this.game.height + this.continueText.height / 2 - o["default"].GAME_SCALE * 90;\n      this.continueText.label.anchor.set(0.5, 5.5);\n      var i = undefined;\n      i = this.game.add.sprite(0, 0, n["default"].Garage, "space_key0000");\n      i.animations.add("space_key", ["space_key0000", "space_key0001"], 2, true);\n      i.y = this.continueText.height * -0.5 + 75;\n      i.x -= 4;\n      i.animations.getAnimation("space_key").play(2, true);\n      i.anchor.set(0.5);\n      this.continueText.addChild(i);\n      this.continueText.btn.inputEnabled = false;\n    }\n    /*this.mapGroup = this.game.add.group();\r\n    if (b.default.isMapReady) {\r\n      this.mapReady = true;\r\n      this.mapSprite = this.game.add.image(0, 0, w.Images.MapBg, null, this.mapGroup);\r\n    } else {\r\n      this.mapReady = false;\r\n      this.mapSprite = this.game.add.image(0, 0, w.Images.MapBgXs, null, this.mapGroup);\r\n      this.mapSprite.width = 1448;\r\n      this.mapSprite.height = 480;\r\n    }\r\n      */\n\n    this.mapGroup = this.game.add.group();\n    var mapBg = this.game.add.sprite(0, 0, w.Images.MapBg);\n    // var mapBgLeft = this.game.add.sprite(-30, 0, w.Images.MapBgLeft);\n    // var mapBgRight = this.game.add.sprite(mapBg.width - 10, 0, w.Images.MapBgRigt);\n    // this.scaleGroup.addChild(mapBg);\n\n    // var h = (this.game.width - 720) / 2;\n    // mapBgLeft.x = h * -1 - 20;\n    // mapBgLeft.width = h + 45;\n    // mapBgRight.width = h + 50;\n    // this.mapGroup.addChild(mapBgLeft);\n    // this.mapGroup.addChild(mapBgRight);\n    this.mapGroup.addChild(mapBg);\n    this.scaleGroup = this.game.add.group();\n    var s;\n    s = this.game.add.sprite(this.game.width, 0, n["default"].Garage, "top_bg0000");\n    s.x = s.width;\n    s.scale.set(-1, 1);\n    var a = new g["default"](this.game, "", null, this.onBackDown, this, n["default"].Garage);\n    a.setFrames("shop_btn0000", "shop_btn0000", "shop_btn0000", "shop_btn0000");\n    a.x = 45;\n    a.y = 30;\n    this.topLeftGroup = this.game.add.group(this.scaleGroup);\n    this.topLeftGroup.addChild(s);\n    this.topLeftGroup.addChild(a);\n    s = this.game.add.sprite(0, 0, n["default"].Garage, "top_bg0000");\n    s.x = -s.width;\n    this.musicBtn = this.game.add.image(120, 25, n["default"].Garage, "InGameMusicButton0000");\n    this.musicBtn.inputEnabled = true;\n    this.musicBtn.events.onInputUp.add(this.toggleMusic, this);\n    this.musicBtn.anchor.set(0.5);\n    this.musicBtn.x = -35;\n    this.topRightGroup = this.game.add.group(this.scaleGroup);\n    this.topRightGroup.addChild(s);\n    this.topRightGroup.addChild(this.musicBtn);\n    var r = new g["default"](this.game, y.Inventory.instance.getTotalStars() + "", o["default"].styleMoney, null, null, n["default"].Garage);\n    r.setFrames("w_star0000", "w_star0000", "w_star0000", "w_star0000");\n    r.position.set(110, 30);\n    r.label.x = 20;\n    r.label.anchor.set(0, 0.5);\n    this.topLeftGroup.addChild(r);\n    this.updateSoundButtons();\n    this.createButtons();\n    var h = new g["default"](this.game, "", o["default"].stylePopBtn2, this.onMenu, this, n["default"].Garage);\n    h.setFrames("orange_btn0000", "orange_btn0000", "orange_btn0000", "orange_btn0000");\n    var l = this.game.add.sprite(0, -7, n["default"].Garage, "next_btn0000");\n    l.anchor.set(0.5);\n    l.scale.set(-1, 1);\n    h.scale.set(0.7);\n    h.label.parent.addChild(l);\n    h.y = o["default"].HEIGHT - 5 - h.height / 2;\n    if (this.game.width - o["default"].WIDTH > 0) {\n      h.x -= (this.game.width - o["default"].WIDTH) / 2;\n    }\n    this.backBtn = h;\n    this.scaleGroup.addChild(h);\n    h = new g["default"](this.game, "", o["default"].stylePopBtn2, this.onPlayNext, this, n["default"].Garage);\n    h.setFrames("orange_btn0000", "orange_btn0000", "orange_btn0000", "orange_btn0000");\n    l = this.game.add.sprite(0, -7, n["default"].Garage, "next_btn0000");\n    l.anchor.set(0.5);\n    h.scale.set(0.7);\n    h.label.parent.addChild(l);\n    h.y = o["default"].HEIGHT - 5 - h.height / 2;\n    if (this.game.width - o["default"].WIDTH > 0) {\n      h.x += (this.game.width - o["default"].WIDTH) / 2;\n    }\n    this.raceBtn = h;\n    this.scaleGroup.addChild(h);\n    // remove scroll buttons\n    this.leftBtn = new g["default"](this.game, "", o["default"].stylePopBtn2, this.onLeft, this, n["default"].Garage1);\n    this.leftBtn.setFrames("scroll_btn0000", "scroll_btn0000", "scroll_btn0000", "scroll_btn0000");\n    this.leftBtn.y = o["default"].HEIGHT * 0.5;\n    this.scaleGroup.addChild(this.leftBtn);\n    this.rightBtn = new g["default"](this.game, "", o["default"].stylePopBtn2, this.onRight, this, n["default"].Garage1);\n    this.rightBtn.setFrames("scroll_btn0000", "scroll_btn0000", "scroll_btn0000", "scroll_btn0000");\n    this.rightBtn.scale.set(-1, 1);\n    this.rightBtn.y = o["default"].HEIGHT * 0.5;\n    this.scaleGroup.addChild(this.rightBtn);\n    new d["default"](this.game, 0, null);\n    this.resize();\n    // this.focusOnLastEnabled();\n  };\n  e.prototype.update = function () {\n    if (!this.mapReady) {\n      if (b["default"].isMapReady) {\n        // this.mapSprite.loadTexture(w.Images.MapBg);\n        // this.mapSprite.scale.set(1);\n        this.mapReady = true;\n      }\n    }\n    t.prototype.update.call(this);\n  };\n  e.prototype.focusOnLastEnabled = function () {\n    var t = this.lastEnabled.x * this.scaling;\n    var e = -t + this.game.width * 0.5;\n    if (e > 0) {\n      e = 0;\n    } else if (e < this.minMapX) {\n      e = this.minMapX;\n    }\n    this.mapGroup.x = e;\n  };\n  e.prototype.onLeft = function () {\n    if (this.mapGroup.x < 0) {\n      var t = this.mapGroup.x + this.moveMapX;\n      if (t > 0) {\n        t = 0;\n      }\n      var e = this.game.add.tween(this.mapGroup);\n      e.to({\n        x: t\n      }, 250);\n      e.start();\n    }\n  };\n  e.prototype.onRight = function () {\n    if (this.mapGroup.x > this.minMapX) {\n      var t = this.mapGroup.x - this.moveMapX;\n      if (t < this.minMapX) {\n        t = this.minMapX;\n      }\n      var e = this.game.add.tween(this.mapGroup);\n      e.to({\n        x: t\n      }, 250);\n      e.start();\n    }\n  };\n  e.prototype.onSpace = function () {\n    if (!h["default"].isAdsPause) {\n      this.onPlayNext();\n    }\n  };\n  e.prototype.onMenu = function () {\n    new u["default"](this.game, 0, v["default"].Name);\n  };\n  e.prototype.createButtons = function () {\n    for (var t = 0; t < y.RacesData.MAP_COUNT; t++) {\n      var e = y.CarsData.geomObj["point" + t];\n      var i = e.x;\n      var s = e.y;\n      this.createButton(t, i, s, 0);\n    }\n    this.lastEnabled.label.addColor("#FF8F00", 0);\n  };\n  e.prototype.createButton = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var e = arguments.length > 1 ? arguments[1] : undefined;\n    var i = arguments.length > 2 ? arguments[2] : undefined;\n    var s = arguments.length > 3 ? arguments[3] : undefined;\n    var o = t;\n    var a = new c["default"](this.game, o + "");\n    var r = "LeveMapItemLocked";\n    var h = r + "0000";\n    a.btn.setFrames(h, h, h, h);\n    a.x = e;\n    a.y = i;\n    a.label.visible = false;\n    if (o + 1 < 10) {\n      a.label.setText("0" + (o + 1));\n    } else {\n      a.label.setText(o + 1 + "");\n    }\n    var l = 1;\n    var u = undefined;\n    if (y.Inventory.instance.save[y.Inventory.RACE_PREFIX + (o + 1).toString() + y.Inventory.RACE_RESULT] !== undefined) {\n      l = Number(y.Inventory.instance.save[y.Inventory.RACE_PREFIX + (o + 1).toString() + y.Inventory.RACE_RESULT]) + 2;\n      a.label.visible = true;\n    }\n    console.log("l", l);\n    var d = this.game.add.sprite(0, 0, n["default"].Garage, r + "000" + l);\n    d.anchor.set(0.5);\n    this.mapGroup.addChild(a);\n    a.btn.parent.addChild(d);\n    if (a.label.visible) {\n      a.signalSelect.addOnce(this.onPlayDown, this);\n      this.lastEnabled = a;\n    } else {\n      a.enable = false;\n    }\n  };\n  e.prototype.onPlayNext = function () {\n    this.onPlayDown(this.lastEnabled);\n  };\n  e.prototype.onPlayDown = function (t) {\n    r["default"].getInstance().play(a["default"].Click);\n    var e = Number(t.getID());\n    if (this.innerNumner < 0) {\n      this.startLevel(e);\n    }\n  };\n  e.prototype.startLevel = function (t) {\n    // if(t > 95){\n    //   return;\n    // }\n    this.innerNumner = t;\n    e.LevelNum = t;\n    var LevelNum = t + 1;\n    console.log("t-level", LevelNum);\n    e.CurrentLevel = Number(LevelNum);\n    console.log("e.CurrentLevel", e.CurrentLevel);\n    this.waitForFile = false;\n    if (this.game.cache.checkJSONKey(e.CurrentLevel)) {\n      f.GameData.currentLevel = this.game.cache.getJSON(e.CurrentLevel);\n    } else {\n      f.GameData.currentLevel = null;\n      this.loader = new Phaser.Loader(this.game);\n      this.loader.onFileComplete.add(this.fileLevelComplete, this);\n      // tbg95-levels\n      // console.log(e.CurrentLevel);\n      this.loader.json(e.CurrentLevel, "assets/newlevels/" + e.CurrentLevel + ".json");\n      this.loader.start();\n      // console.log(e.CurrentLevel);\n    }\n    f.GameData.raceId = t + 1;\n    _["default"].getInstance().displayInterstitial(this.fadeToGameplay, this);\n  };\n  e.prototype.fileLevelComplete = function (t, i, s, n, o) {\n    if (i === e.CurrentLevel) {\n      f.GameData.currentLevel = this.game.cache.getJSON(e.CurrentLevel);\n      this.loader.onFileComplete.remove(this.fileLevelComplete, this);\n      this.loader = null;\n      if (this.waitForFile) {\n        this.fadeToGameplay();\n      }\n    }\n  };\n  e.prototype.fadeToGameplay = function () {\n    if (b["default"].isSfxReady) {\n      if (f.GameData.currentLevel !== null) {\n        // y.GraphicUtil.currentAtlass = "theme" + f.GameData.currentLevel.settings.theme;\n        y.GraphicUtil.currentAtlass = "theme" + f.GameData.currentLevel.settings.theme;\n        new u["default"](this.game, 0, h["default"].Name);\n      } else {\n        new u["default"](this.game, 0, null);\n        this.waitForFile = true;\n      }\n    } else {\n      new u["default"](this.game, 0, null);\n      b["default"].sfxReady.add(this.assetsReady, this);\n    }\n  };\n  e.prototype.assetsReady = function () {\n    b["default"].sfxReady.remove(this.assetsReady, this);\n    this.fadeToGameplay();\n  };\n  e.prototype.onBackDown = function () {\n    r["default"].getInstance().play(a["default"].Click);\n    this.game.state.start(l["default"].Name);\n  };\n  e.prototype.toggleMusic = function () {\n    if (m["default"].getInstance().music) {\n      r["default"].getInstance().toggleMusic();\n    } else if (m["default"].getInstance().sfx) {\n      r["default"].getInstance().toggleSfx();\n    } else {\n      r["default"].getInstance().toggleSfx();\n      r["default"].getInstance().toggleMusic();\n    }\n    this.updateSoundButtons();\n    r["default"].getInstance().play(a["default"].Click);\n  };\n  e.prototype.updateSoundButtons = function () {\n    var t = m["default"].getInstance().music ? 0 : 1;\n    t += m["default"].getInstance().sfx ? 0 : 1;\n    this.musicBtn.loadTexture(n["default"].Garage, "InGameMusicButton000" + t);\n  };\n  e.prototype.shutdown = function () {\n    if (this.loader !== null) {\n      this.loader.onFileComplete.remove(this.fileLevelComplete, this);\n      this.loader = null;\n    }\n    this.musicBtn = null;\n    this.lastEnabled = null;\n    this.scaleGroup = null;\n    t.prototype.shutdown.call(this);\n  };\n  e.prototype.resize = function () {\n    if (x["default"].isDesktop) {\n      this.scaleGroup.removeChild(this.continueText);\n    }\n    var t = 1;\n    t = this.game.width / o["default"].WIDTH;\n    t = t > 1 ? 1 : t;\n    this.scaling = t;\n    this.minMapX = this.game.width - this.mapGroup.width;\n    this.moveMapX = this.game.width * 0.5;\n    // console.log("this.minMapX", this.minMapX, this.mapGroup.x);\n    if (this.mapGroup.x < this.minMapX) {\n      this.mapGroup.x = this.minMapX;\n    }\n    // console.log("this.minMapX", this.minMapX, this.mapGroup.x);\n    this.scaleGroup.scale.set(t);\n    this.mapGroup.scale.set(t);\n    // this.mapGroup.alignIn(this.world.bounds, Phaser.BOTTOM_CENTER);\n    this.backBtn.x = this.backBtn.width * 0.5;\n    this.raceBtn.x = this.game.width / t - this.raceBtn.width * 0.5;\n    // remove scroll buttons\n    this.leftBtn.x = this.leftBtn.width * 0.5 + 4;\n    this.rightBtn.x = this.game.width / t + this.rightBtn.width * 0.5 - 4;\n    this.topRightGroup.x = this.game.width / t;\n    if (x["default"].isDesktop) {\n      this.scaleGroup.addChildAt(this.continueText, 0);\n      this.continueText.x = this.game.width * 0.5 / t;\n      this.continueText.y = this.game.height + this.continueText.height / 2 - o["default"].GAME_SCALE * 90;\n    }\n  };\n  e.Name = "choose_zone";\n  e.pause = false;\n  e.CurrentLevel = "";\n  e.LevelNum = 0;\n  return e;\n}(Phaser.State);\nexports["default"] = C;\n\n//# sourceURL=webpack://motox3m/./src/states/LevelSelect.js?')},"./src/states/MenuState.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true; Settings and UI Controller\n__webpack_require__(/*! @/src/lib/ModulePixi.js */ "./src/lib/ModulePixi.js");\n__webpack_require__(/*! @/src/lib/PhaserLib.js */ "./src/lib/PhaserLib.js");\nvar n = __webpack_require__(/*! @/src/controllers/SoundController.js */ "./src/controllers/SoundController.js");\nvar o = __webpack_require__(/*! @/src/utils/SaveUtils.js */ "./src/utils/SaveUtils.js");\nvar a = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar r = __webpack_require__(/*! @/src/ui/Button.js */ "./src/ui/Button.js");\nvar h = __webpack_require__(/*! @/src/ui/LoadingFade.js */ "./src/ui/LoadingFade.js");\nvar l = __webpack_require__(/*! @/src/ui/LoadingScreen.js */ "./src/ui/LoadingScreen.js");\nvar c = __webpack_require__(/*! @/src/config/Game.js */ "./src/config/Game.js");\nvar u = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar d = __webpack_require__(/*! @/src/ui/AutoSizeText.js */ "./src/ui/AutoSizeText.js");\nvar p = __webpack_require__(/*! @/src/states/LevelSelect.js */ "./src/states/LevelSelect.js");\nvar f = __webpack_require__(/*! @/src/data/JSONData.js */ "./src/data/JSONData.js");\nvar y = __webpack_require__(/*! @/src/states/GarageState.js */ "./src/states/GarageState.js");\nvar g = __webpack_require__(/*! @/src/data/ImageData.js */ "./src/data/ImageData.js");\nvar m = __webpack_require__(/*! @/src/assets/AssetLoader.js */ "./src/assets/AssetLoader.js");\nvar v = __webpack_require__(/*! @/src/services/AdsManager.js */ "./src/services/AdsManager.js");\nvar b = function (t) {\n  function e() {\n    var i = t.call(this) || this;\n    i.name = e.Name;\n    i.popup = null;\n    i.popup_btn = null;\n    i._armatureDisplay = null;\n    return i;\n  }\n  s(e, t);\n  e.initDragonBones = function (t) {\n    if (!e.dbInited) {\n      dragonBones.PhaserFactory.init(t);\n      var i = t.cache.getJSON(f["default"].DBMenu);\n      var s = t.cache.getJSON(f["default"].DBMenu_Texture);\n      var n = t.cache.getImage(g["default"].DBMenu, true).base;\n      dragonBones.PhaserFactory.factory.parseDragonBonesData(i);\n      dragonBones.PhaserFactory.factory.parseTextureAtlasData(s, n);\n      e.dbInited = true;\n    }\n  };\n  e.prototype.init = function () {\n    this.game.world.removeAll();\n    c["default"].DISPLAY_W = Phaser.Math.max(this.game.width, this.game.height);\n    c["default"].DISPLAY_H = Phaser.Math.min(this.game.width, this.game.height);\n  };\n  e.prototype.create = function () {\n    t.prototype.create.call(this);\n    if (c["default"].isDesktop) {\n      this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR).onUp.add(this.onSpace, this);\n    }\n    u.Inventory.instance.signalUnlock.removeAll();\n    u.Inventory.instance.signalUnlock.addOnce(function () {\n      new l["default"](this.game, 0, p["default"].Name);\n    }, this);\n    this.background = this.game.add.graphics(0, 0);\n    this.background.beginFill(0, 1);\n    this.background.drawRect(0, 0, 720, 480);\n    this.background.endFill();\n    this.background3 = this.game.add.sprite(0, 0, a.Atlases.Garage, "bg0000");\n    this.background4 = this.game.add.sprite(0, 0, a.Atlases.Garage, "bg0000");\n    e.initDragonBones(this.game);\n    this._armatureDisplay = dragonBones.PhaserFactory.factory.buildArmatureDisplay("biker_anim");\n    this._armatureDisplay.x = 0;\n    this._armatureDisplay.y = 360;\n    this._armatureDisplay.animation.play("biker menu animation", -1);\n    this.background.addChild(this._armatureDisplay);\n    var i = {\n      font: "bold 20px Djvu",\n      fill: "#FFFFFF"\n    };\n    this.bgTop = this.game.add.image(0, 0, a.Atlases.Garage, "top_bg0000");\n    this.bgTop.scale.set(1.5, 1);\n    this.playBtn = new r["default"](this.game, "Play", a.Constants.stylePlay, this.startGame, this, a.Atlases.Garage);\n    this.playBtn.setFrames("play_btn0000", "play_btn0000", "play_btn0000", "play_btn0000");\n    this.playBtn.x = 500;\n    this.playBtn.y = 200;\n    this.playBtn.label.x = 130;\n    this.playBtn.label.stroke = "#000000";\n    this.playBtn.label.strokeThickness = 5;\n    var s = new d["default"](this.game, 130, 2, "Play", a.Constants.stylePlay);\n    s.anchor.set(0.5);\n    this.playBtn.label.parent.addChildAt(s, 0);\n    var n = this.game.add.image(100, 0, a.Atlases.Garage, "black0000");\n    n.alpha = 0;\n    n.width = 280;\n    n.height = 100;\n    n.anchor.set(0.5);\n    n.inputEnabled = true;\n    n.input.useHandCursor = true;\n    n.events.onInputDown.addOnce(this.startGame, this);\n    this.playBtn.label.parent.addChild(n);\n    s.stroke = "#FFFFFF";\n    s.strokeThickness = 10;\n    this.background4.addChild(this.playBtn);\n    this.moregames = new r["default"](this.game, "Reset", i, this.resetGame, this, a.Atlases.Garage);\n    this.moregames.setFrames("play_btn0000", "play_btn0000", "play_btn0000", "play_btn0000");\n    this.moregames.x = 620;\n    this.moregames.y = 400;\n    this.background4.addChild(this.moregames);\n    this.moregames.visible = false;\n    this.logo = this.game.add.image(200, 100, a.Atlases.Garage, "0logo0000");\n    this.logo.anchor.set(0.5);\n    // this.logo.angle = 90;\n    this.garageBtn = new r["default"](this.game, "", null, this.onGarage, this, a.Atlases.Garage);\n    this.garageBtn.setFrames("shop_btn0000", "shop_btn0000", "shop_btn0000", "shop_btn0000");\n    this.garageBtn.x = this.game.width - 140;\n    this.garageBtn.y = 30;\n    this.world.addChild(this.garageBtn);\n    this.musicBtn = this.game.add.image(this.game.width - 40, 25, a.Atlases.Garage, "InGameMusicButton0000");\n    this.musicBtn.inputEnabled = false;\n    this.musicBtn.events.onInputUp.add(this.toggleMusic, this);\n    this.musicBtn.anchor.set(0.5);\n    this.playBtn.visible = false;\n    this.blackRightBG = this.game.add.sprite(900, a.Constants.HEIGHT / 2, a.Atlases.Garage, "0popup_bg0000");\n    this.blackRightBG.anchor.set(0.5);\n    this.blackRightBG.angle = 90;\n    this.background3.addChild(this.blackRightBG);\n    var f = this.game.add.sprite(0, -a.Constants.HEIGHT / 2, a.Atlases.Garage, "0popup_bg0000");\n    f.anchor.set(0.5);\n    this.blackRightBG.addChild(f);\n    f = this.game.add.sprite(0, 0, a.Atlases.Garage, "0popup_bg0000");\n    f.anchor.set(0.5);\n    this.blackRightBG.addChild(f);\n    this.textVersion = new d["default"](this.game, 680, 470, " " + a.Constants.VERSION, a.Constants.styleVersion);\n    this.background3.addChild(this.textVersion);\n    if (c["default"].isDesktop) {\n      this.continueText = new r["default"](this.game, "Press               Space              to play", a.Constants.styleHelp, null, null, a.Atlases.Garage);\n      this.continueText.setFrames("0popup_bg0000", "0popup_bg0000", "0popup_bg0000", "0popup_bg0000");\n      this.continueText.x = this.game.width / 2;\n      this.continueText.y = this.game.height + this.continueText.height / 2 - a.Constants.GAME_SCALE * 90;\n      this.continueText.label.anchor.set(0.5, 5.5);\n      this.continueText.btn.inputEnabled = false;\n      var y = undefined;\n      y = this.game.add.sprite(0, 0, a.Atlases.Garage, "space_key0000");\n      y.animations.add("space_key", ["space_key0000", "space_key0001"], 2, true);\n      y.y = this.continueText.height * -0.5 + 75;\n      y.x -= 4;\n      y.animations.getAnimation("space_key").play(2, true);\n      y.anchor.set(0.5);\n      this.continueText.addChild(y);\n    }\n    v["default"].getInstance().init(this.game);\n    v["default"].getInstance().displayAd();\n    o["default"].getInstance(this.game, this.onLoadSave, this);\n    new h["default"](this.game, 0, null);\n    this.resize();\n    m["default"].getInstance().init(this.game);\n  };\n  e.prototype.onSpace = function () {\n    this.startGame();\n  };\n  e.prototype.onLoadSave = function () {\n    n["default"].getInstance(this.game).playMusic(a.Sounds.MenuMusic);\n    this.musicBtn.inputEnabled = true;\n    this.updateSoundButtons();\n    this.playBtn.visible = true;\n  };\n  e.prototype.initGame = function () {\n    if (u.GameData.currentCar === null) {\n      u.GameData.currentCar = this.game.cache.getJSON(f["default"].Car001);\n      u.CarsData.geomObj = this.game.cache.getJSON(f["default"].Objects);\n      this.setCar(u.GameData.currentCar);\n    }\n  };\n  e.prototype.startGame = function () {\n    n["default"].getInstance().play(a.Sounds.Click);\n    this.initGame();\n    v["default"].getInstance().destroyAd();\n    this.fadeToChooseZone();\n  };\n  e.prototype.fadeToChooseZone = function () {\n    new l["default"](this.game, 0, p["default"].Name);\n  };\n  e.prototype.onGarage = function () {\n    n["default"].getInstance().play(a.Sounds.Click);\n    this.initGame();\n    new l["default"](this.game, 0, y["default"].Name);\n    v["default"].getInstance().destroyAd();\n  };\n  e.prototype.setCar = function (t) {\n    u.CarsData.params = new u.CarParams();\n    u.CarsData.params.setData(t);\n    y["default"].currCar = y["default"].carList.indexOf(u.Inventory.instance.skin);\n    u.CarsData.params.skinId = y["default"].carList[y["default"].currCar];\n  };\n  e.prototype.resetGame = function () {\n    u.Inventory.instance.reset();\n    o["default"].getInstance().save();\n  };\n  e.unlockGame = function () {\n    u.Inventory.instance.unlockAll();\n    o["default"].getInstance().save();\n  };\n  e.prototype.toggleMusic = function () {\n    if (o["default"].getInstance().music) {\n      n["default"].getInstance().toggleMusic();\n    } else if (o["default"].getInstance().sfx) {\n      n["default"].getInstance().toggleSfx();\n    } else {\n      n["default"].getInstance().toggleSfx();\n      n["default"].getInstance().toggleMusic();\n    }\n    this.updateSoundButtons();\n    n["default"].getInstance().play(a.Sounds.Click);\n  };\n  e.prototype.updateSoundButtons = function () {\n    var t = o["default"].getInstance().music ? 0 : 1;\n    t += o["default"].getInstance().sfx ? 0 : 1;\n    this.musicBtn.loadTexture(a.Atlases.Garage, "InGameMusicButton000" + t);\n  };\n  e.prototype.onCredits = function () {\n    this.createPopup();\n    var t = 23;\n    var e;\n    for (var i = [" ", " ", " ", " ", " ", "CEO: Konstantin Matrunchik", "Coding: Dmitry Borozenets", "Art: Andrey Zdyschuk", "Game Design: Vasiliy Kachor", "Menu song: skyler182.newgrounds.com", "Ported by iriysoft.com"], s = 0; s < i.length; s++) {\n      e = new r["default"](this.game, i[s], i.length - 2 <= s ? a.Constants.styleCredits2 : a.Constants.styleCredits1, null, this, a.Atlases.Garage);\n      e.y = s * 23 - 75;\n      e.setFrames("bg0000", "bg0000", "bg0000", "bg0000");\n      e.btn.inputEnabled = false;\n      this.popup.getChildAt(1).addChild(e);\n    }\n    this.popup_btn = new r["default"](this.game, "OK", a.Constants.styleCreditsOK, this.disposePopup, this, a.Atlases.Garage);\n    this.popup_btn.setFrames("orange_btn0000", "orange_btn0000", "orange_btn0000", "orange_btn0000");\n    this.popup_btn.y = 200;\n    this.popup_btn.btn.alpha = 0;\n    this.popup_btn.label.y = 0;\n    this.popup_btn.label.stroke = "#000000";\n    this.popup_btn.label.strokeThickness = 5;\n    var n = new d["default"](this.game, 0, 0, "OK", a.Constants.styleCreditsOK);\n    n.anchor.set(0.5);\n    this.popup_btn.label.parent.addChildAt(n, 0);\n    n.stroke = "#FFFFFF";\n    n.strokeThickness = 10;\n    var o = this.game.add.image(0, -130, a.Atlases.Garage, "logo_mad0000");\n    o.anchor.set(0.5);\n    o.scale.set(0.5);\n    o.inputEnabled = true;\n    o.input.useHandCursor = true;\n    o.events.onInputDown.add(this.onLogo, this);\n    this.popup.getChildAt(1).addChild(o);\n    var h = this.game.add.image(0, 0, a.Atlases.Garage, "vk_icon0000");\n    h.anchor.set(0.5);\n    h.inputEnabled = true;\n    h.input.useHandCursor = true;\n    h.events.onInputDown.add(this.onVK, this);\n    this.popup.getChildAt(1).addChild(h);\n    var l = this.game.add.image(70, 0, a.Atlases.Garage, "fb_icon0000");\n    l.anchor.set(0.5);\n    l.inputEnabled = true;\n    l.input.useHandCursor = true;\n    l.events.onInputDown.add(this.onFB, this);\n    this.popup.getChildAt(1).addChild(l);\n    var c = this.game.add.image(-70, 0, a.Atlases.Garage, "tw_icon0000");\n    c.anchor.set(0.5);\n    c.inputEnabled = true;\n    c.input.useHandCursor = true;\n    c.events.onInputDown.add(this.onTW, this);\n    this.popup.getChildAt(1).addChild(c);\n    this.resizePopup(1);\n  };\n  e.prototype.onLogo = function () {\n    window.open("http://madpuffers.com/", "_blank");\n  };\n  e.prototype.onVK = function () {\n    window.open("https://vk.com/madpuffers", "_blank");\n  };\n  e.prototype.onFB = function () {\n    window.open("https://www.facebook.com/madpuffers", "_blank");\n  };\n  e.prototype.onTW = function () {\n    window.open("https://twitter.com/MadPuffers", "_blank");\n  };\n  e.prototype.disposePopup = function () {\n    this.popup.destroy();\n    this.popup = null;\n    this.popup_btn.destroy();\n    this.popup_btn = null;\n  };\n  e.prototype.backgroundPopup = function () {\n    this.popup = this.game.add.sprite(350, 250, a.Atlases.Garage, "bg0000");\n    this.popup.anchor.set(0.5);\n    var t = this.game.add.sprite(0, 0, a.Atlases.Garage, "black0000");\n    t.width = this.game.width + 500;\n    t.height = this.game.height + 500;\n    t.inputEnabled = true;\n    t.anchor.set(0.5);\n    this.popup.addChild(t);\n  };\n  e.prototype.createPopup = function () {\n    if (this.popup !== null) {\n      this.disposePopup();\n    }\n    this.backgroundPopup();\n    var t = this.game.add.sprite(0, 0, a.Atlases.Garage, "0popup_bg0000");\n    t.anchor.set(0.5);\n    this.popup.addChild(t);\n  };\n  e.prototype.resizePopup = function (t) {\n    if (this.popup !== null) {\n      var e = this.popup.removeChildAt(0);\n      e.width = this.game.width + 500;\n      e.height = this.game.height + 500;\n      this.popup.x = this.world.bounds.centerX;\n      this.popup.y = this.world.bounds.centerY;\n      this.popup.addChildAt(e, 0);\n      this.popup_btn.x = this.world.bounds.centerX;\n      this.popup_btn.y = this.world.bounds.centerY + 200;\n    }\n  };\n  e.prototype.render = function () {\n    dragonBones.PhaserFactory.factory.dragonBones.advanceTime(-1);\n    t.prototype.render.call(this);\n  };\n  e.prototype.resize = function () {\n    var e = 1;\n    e = this.game.width / a.Constants.WIDTH;\n    e = e > 1 ? 1 : e;\n    this.garageBtn.x = this.game.width - 120;\n    this.musicBtn.x = this.game.width - 35;\n    this.bgTop.x = this.game.width - 250;\n    this.background.scale.set(e, e);\n    this.background.alignIn(this.world.bounds, Phaser.BOTTOM_CENTER);\n    this.logo.scale.set(e);\n    this._armatureDisplay.x = -this.background.x - 50;\n    if (this.game.width > 820) {\n      this.blackRightBG.x = 900;\n    } else if (this.game.width - 110 > 450) {\n      this.blackRightBG.x = this.game.width - 110;\n    } else {\n      this.blackRightBG.x = this.game.width;\n    }\n    this.playBtn.x = this.game.width - 250;\n    this.playBtn.y = 190;\n    this.moregames.x = this.game.width - 100;\n    this.moregames.y = this.game.height - 180;\n    this.playBtn.scale.set(e);\n    this.moregames.scale.set(e);\n    this.textVersion.x = 0;\n    this.textVersion.y = this.game.height - 20;\n    if (c["default"].isDesktop) {\n      this.continueText.x = this.game.width / 2;\n      var i = v["default"].getInstance().getBannerHeight();\n      this.continueText.y = this.game.height + this.continueText.height / 2 - a.Constants.GAME_SCALE * 90 - i;\n    }\n    this.resizePopup(e);\n    t.prototype.resize.call(this);\n  };\n  e.prototype.shutdown = function () {\n    t.prototype.shutdown.call(this);\n    this.background = null;\n    this.popup = null;\n    this.popup_btn = null;\n    this.playBtn = null;\n    this.moregames = null;\n    this.musicBtn = null;\n    this.bgTop = null;\n    this._armatureDisplay = null;\n  };\n  e.Name = "menu";\n  e.dbInited = false;\n  return e;\n}(Phaser.State);\nexports["default"] = b;\n\n//# sourceURL=webpack://motox3m/./src/states/MenuState.js?')},"./src/states/PreloadState.js":function(__unused_webpack_module,exports,__webpack_require__){eval('var s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\n__webpack_require__(/*! @/src/lib/ModulePixi.js */ "./src/lib/ModulePixi.js");\n__webpack_require__(/*! @/src/lib/PhaserLib.js */ "./src/lib/PhaserLib.js");\nvar n = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar o = __webpack_require__(/*! @/src/ui/LoadingScreen.js */ "./src/ui/LoadingScreen.js");\nvar a = __webpack_require__(/*! @/src/states/MenuState.js */ "./src/states/MenuState.js");\nvar r = __webpack_require__(/*! @/src/services/AdsManager.js */ "./src/services/AdsManager.js");\nvar h = function (t) {\n  function e() {\n    var i = t.call(this) || this;\n    i.name = e.Name;\n    i.loadComplete = true;\n    i.bike = null;\n    i.w0 = null;\n    i.w1 = null;\n    i.wait = null;\n    i.mainParent = null;\n    return i;\n  }\n  s(e, t);\n  e.prototype.preload = function () {\n    var e = this;\n    t.prototype.preload.call(this);\n    this.wait = this.game.add.text(this.game.width / 2, this.game.height / 2, "LOADING...", n.Constants.styleCredits0);\n    this.wait.anchor.set(0.5);\n    this.game.sound.muteOnPause = true;\n    this.game.load.onFileComplete.add(this.fileComplete, this);\n    var i = "x" + n.Constants.GAME_SCALE + "/";\n    n.Atlases.list.forEach(function (t) {\n      e.game.load.atlas(t, "assets/atlases/" + i + t + ".png", "assets/atlases/" + i + t + ".json");\n    });\n    // load new Bike\n    n.Atlases.NewCars.forEach(function (t) {\n      e.game.load.atlas(t, "assets/bike/" + t + ".png", "assets/bike/" + t + ".json");\n    });\n    n.JSONData.list.forEach(function (t) {\n      e.game.load.json(t, "assets/levels/" + t + ".json");\n    });\n    n.Images.list.forEach(function (t) {\n      e.game.load.image(t, "assets/images/" + i + t + ".png");\n    });\n    n.Sounds.list.forEach(function (t) {\n      if (e.game.device.iOS) {\n        e.game.load.audio(t, ["assets/sound/" + t + ".m4a"]);\n      } else {\n        e.game.load.audio(t, ["assets/sound/" + t + ".ogg", "assets/sound/" + t + ".mp3"]);\n      }\n    });\n    // Add avatar image loading\n    var i = "x" + n.Constants.GAME_SCALE + "/";\n    this.game.load.image(\'avatar\', "assets/images/" + i + "avatar.png");\n    this.game.scale.onSizeChange.add(function () {\n      e.game.state.getCurrentState().resize();\n    }, this);\n  };\n  e.prototype.init = function () {\n    t.prototype.init.call(this);\n    this.mainParent = this.game.add.group();\n    this.mainParent.x = this.game.width / 2;\n    this.mainParent.y = this.game.height / 2 - 80;\n  };\n  e.prototype.create = function () {\n    t.prototype.create.call(this);\n    r["default"].getInstance().displatchProgress(100);\n  };\n  e.prototype.update = function () {\n    t.prototype.update.call(this);\n    if (this.loadComplete) {\n      r["default"].getInstance().displatchLoaded();\n      this.loadComplete = false;\n      e.game = this.game;\n      new o["default"](this.game, 0, a["default"].Name);\n    }\n  };\n  e.prototype.fileComplete = function (t, e, i, s, n) {\n    this.wait.setText("Loading..." + t + "%");\n    r["default"].getInstance().displatchProgress(t);\n  };\n  e.prototype.resize = function () {\n    var e = 1;\n    e = this.game.width / n.Constants.WIDTH;\n    e = e > 1 ? 1 : e;\n    if (this.mainParent) {\n      this.mainParent.x = this.game.width / 2;\n      this.mainParent.y = this.game.height / 2 - 80;\n    }\n    if (this.wait) {\n      this.wait.position.set(this.game.width / 2, this.game.height / 2);\n    }\n    t.prototype.resize.call(this);\n  };\n  e.prototype.shutdown = function () {\n    t.prototype.shutdown.call(this);\n  };\n  e.Name = "preloader";\n  e.game = null;\n  return e;\n}(Phaser.State);\nexports["default"] = h;\n\n//# sourceURL=webpack://motox3m/./src/states/PreloadState.js?')},"./src/states/StateIndex.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('//exports.__esModule = true;\nvar s = __webpack_require__(/*! @/src/states/Boot.js */ "./src/states/Boot.js");\nexports.Boot = s["default"];\nvar n = __webpack_require__(/*! @/src/states/GameState.js */ "./src/states/GameState.js");\nexports.Gameplay = n["default"];\nvar o = __webpack_require__(/*! @/src/states/MenuState.js */ "./src/states/MenuState.js");\nexports.Menu = o["default"];\nvar a = __webpack_require__(/*! @/src/states/GarageState.js */ "./src/states/GarageState.js");\nexports.Garage = a["default"];\nvar r = __webpack_require__(/*! @/src/states/LevelSelect.js */ "./src/states/LevelSelect.js");\nexports.ChooseZone = r["default"];\n\n//# sourceURL=webpack://motox3m/./src/states/StateIndex.js?')},"./src/ui/AutoSizeText.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// AutoSizeText Component - Extends Phaser.Text\n// A text component that automatically resizes font to fit within specified dimensions\n\n// Key features:\n// - Extends Phaser.Text\n// - Auto-resizes text to fit within maxWidth and maxHeight\n// - Minimum font size of 10px\n// - Maintains text readability while fitting constraints\n\n// Constructor params:\n// @param game - Phaser.Game instance\n// @param x - X position\n// @param y - Y position\n// @param text - Initial text content\n// @param style - Text style configuration\n// @param maxWidth - Maximum width constraint\n// @param maxHeight - Maximum height constraint\n\n// Usage example:\n// new AutoSizeText(\n//   game,        // Phaser game instance\n//   100,         // x position\n//   100,         // y position\n//   "Hello",     // text content\n//   textStyle,   // style object\n//   200,         // max width\n//   50           // max height\n// );\n\n// Key methods:\n// - setText(text): Sets text content and auto-resizes\n// - setMaxSize(width, height): Updates size constraints\n// - makeFontFit(): Internal method to adjust font size\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\n__webpack_require__(/*! @/src/lib/ModulePixi.js */ "./src/lib/ModulePixi.js");\n__webpack_require__(/*! @/src/lib/PhaserLib.js */ "./src/lib/PhaserLib.js");\nvar n = function (t) {\n  function e(e, i, s, n, o, a, r) {\n    var h = t.call(this, e, i, s, n, o) || this;\n    h.maxWidth = a;\n    h.maxHeight = r;\n    h.game.add.existing(h);\n    return h;\n  }\n  s(e, t);\n  e.prototype.setText = function (e) {\n    t.prototype.setText.call(this, e);\n    if (this.maxWidth || this.maxHeight) {\n      this.makeFontFit();\n    }\n    return this;\n  };\n  e.prototype.setMaxSize = function (t, e) {\n    this.maxWidth = t;\n    this.maxHeight = e;\n  };\n  e.prototype.makeFontFit = function () {\n    var t = 10;\n    var e;\n    while (this.width > this.maxWidth || this.height > this.maxHeight) {\n      if ((e = parseInt(this.fontSize.toString().replace("px", ""), 10) - 1) < 10) {\n        e = 10;\n        this.fontSize = e;\n        break;\n      }\n      this.fontSize = e;\n    }\n  };\n  return e;\n}(Phaser.Text);\nexports["default"] = n;\n\n//# sourceURL=webpack://motox3m/./src/ui/AutoSizeText.js?')},"./src/ui/Button.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// Custom Button Component extending Phaser.Group\n// Provides a button with text label and configurable appearance/behavior\n\n// Key features:\n// - Extends Phaser.Group\n// - Contains a button sprite and text label\n// - Configurable click handlers\n// - Enable/disable functionality with visual feedback\n// - Customizable frames for different button states\n\n// Constructor params:\n// @param game - Phaser.Game instance\n// @param text - Button label text\n// @param style - Text style configuration\n// @param callback - Click handler function\n// @param context - Callback context\n// @param spriteKey - Optional sprite key for button background\n\n// Usage example:\n// new Button(\n//   game,           // Phaser game instance\n//   "Click Me",     // Button text\n//   textStyle,      // Text style object\n//   this.onClick,   // Click handler\n//   this,           // Context\n//   "buttonSprite"  // Optional sprite key\n// );\n\n// Properties:\n// - btn: Phaser.Button instance\n// - label: Text instance (from 19.js)\n// - enable: Boolean to enable/disable button\n// - _graphics: Group for visual elements\n// - _texts: Group for text elements\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\n__webpack_require__(/*! @/src/lib/ModulePixi.js */ "./src/lib/ModulePixi.js");\n__webpack_require__(/*! @/src/lib/PhaserLib.js */ "./src/lib/PhaserLib.js");\nvar n = __webpack_require__(/*! @/src/ui/AutoSizeText.js */ "./src/ui/AutoSizeText.js");\nvar o = function (t) {\n  function e(e, i, s, o, a) {\n    var r = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n    var h = t.call(this, e) || this;\n    h._enable = true;\n    h._graphics = null;\n    h._texts = null;\n    h.inputEnableChildren = true;\n    h._graphics = h.game.add.group(h);\n    h._texts = h.game.add.group(h);\n    h.btn = h.game.add.button(0, 0, r, o, a);\n    h.btn.anchor.set(0.5);\n    h._graphics.addChild(h.btn);\n    h.label = new n["default"](h.game, 0, 2, i, s, 70, 40);\n    h.label.anchor.set(0.5);\n    h._texts.addChild(h.label);\n    if (o !== null && a !== null) {\n      h.label.events.onInputDown.add(o, a);\n    }\n    h.game.add.existing(h);\n    return h;\n  }\n  s(e, t);\n  e.prototype.setText = function (t) {\n    this.label.setText(t);\n  };\n  e.prototype.setFrames = function (t, e, i, s) {\n    this.btn.setFrames(t, e, i, s);\n  };\n  e.prototype.destroy = function (e) {\n    this.id = null;\n    this.label = null;\n    this.btn = null;\n    this._graphics = null;\n    this._texts = null;\n    t.prototype.destroy.call(this, e);\n  };\n  Object.defineProperty(e.prototype, "enable", {\n    get: function get() {\n      return this._enable;\n    },\n    set: function set(t) {\n      if (this._enable !== t) {\n        this._enable = t;\n        this.btn.inputEnabled = this._enable;\n        if (this._enable) {\n          this.btn.tint = 16777215;\n          this.label.tint = 16777215;\n        } else {\n          this.btn.tint = 10066329;\n          this.label.tint = 10066329;\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return e;\n}(Phaser.Group);\nexports["default"] = o;\n\n//# sourceURL=webpack://motox3m/./src/ui/Button.js?')},"./src/ui/GameUIManager.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('// GameUIManager - Singleton class managing in-game UI elements\n// Handles HUD, controls hints, timer, and game messages\n\n// Key features:\n// - Manages game HUD elements\n// - Handles control hints\n// - Displays timer and scores\n// - Shows flip/trick messages\n// - Controls button states\n\n// UI Elements managed:\n// - Timer display\n// - Control hints\n// - Continue message\n// - Restart button\n// - Pause button\n// - Music toggle\n// - Flip trick messages\n// - Level number\n// - Mobile controls (via InputController)\n\n// Methods:\n// - init(container, game): Initialize UI elements\n// - showFlipMsg(count, bonus): Display flip trick message\n// - showControlsHint(): Show control instructions\n// - showDeathHint(): Show continue message\n// - setTimer(): Update timer display\n// - resize(scale): Handle UI scaling\n// - updateSoundButtons(): Update sound toggle states\n\n// Usage example:\n// const ui = GameUIManager.instance;\n// ui.init(container, game);\n// ui.showControlsHint();\n// ui.setTimer();\n\n// Properties:\n// - container: UI container\n// - game: Phaser game instance\n// - timer: Timer display\n// - stars: Level number display\n// - Various UI elements and states\n//exports.__esModule = true;\nvar s = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar n = __webpack_require__(/*! @/src/ui/Button.js */ "./src/ui/Button.js");\nvar o = __webpack_require__(/*! @/src/states/LevelSelect.js */ "./src/states/LevelSelect.js");\nvar a = __webpack_require__(/*! @/src/controllers/InputController.js */ "./src/controllers/InputController.js");\nvar r = __webpack_require__(/*! @/src/states/GameState.js */ "./src/states/GameState.js");\nvar h = __webpack_require__(/*! @/src/core/MaxGameCore.js */ "./src/core/MaxGameCore.js");\nvar l = __webpack_require__(/*! @/src/ui/AutoSizeText.js */ "./src/ui/AutoSizeText.js");\nvar c = __webpack_require__(/*! @/src/controllers/SoundController.js */ "./src/controllers/SoundController.js");\nvar u = __webpack_require__(/*! @/src/utils/SaveUtils.js */ "./src/utils/SaveUtils.js");\nvar d = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nvar p = __webpack_require__(/*! @/src/config/Game.js */ "./src/config/Game.js");\nvar f = __webpack_require__(/*! @/src/services/AdsManager.js */ "./src/services/AdsManager.js");\nvar y = function () {\n  function t() {\n    this.stars = null;\n    this.signalRestart = null;\n    this.signalPause = null;\n    this.signalToggleMusic = null;\n    this.game = null;\n    this.scl = 1;\n    this.container = null;\n    this.bgBtnRight = null;\n    this.timer = null;\n    this.helperText = null;\n    this.continueText = null;\n    this.bgBtnLeft = null;\n    this.time = 0;\n    this.helperShow = false;\n    this.continueShow = false;\n    this.lFront = null;\n    this.lBack = null;\n    this.flipTexts = null;\n    this.flipBG = null;\n    this.MSG_DELAY = 40;\n  }\n  t.prototype.setTimer = function () {\n    var t = Math.ceil(h.MaxGameCore.instance.timer * 100);\n    var e = t / 100 >> 0;\n    t -= e * 100;\n    var i = (e < 10 ? "0" + e : e) + "." + t;\n    if (i.length < 5) {\n      i += "0";\n    }\n    this.timer.setText(i);\n  };\n  t.prototype.showFlipMsg = function (t, e) {\n    var i = "FLIP";\n    var n = "";\n    n = n + "-" + t * 0.5 + " sec";\n    this.flipTexts.setText(n);\n    this.flipBG.setText(n);\n    if (t > 1) {\n      i = i + " " + t + "X";\n    }\n    this.lFront.setText(i);\n    this.lBack.setText(i);\n    h.MaxGameCore.instance.timer -= t * 0.5;\n    this.startTextAnim(this.flipTexts, this.hideFlipTxtAnim, this);\n    c["default"].getInstance().play(s.Sounds.FlipSound());\n  };\n  t.prototype.startTextAnim = function (t, e, i) {\n    t.scale.set(0.1);\n    this.flipBG.stroke = "#000000";\n    this.flipBG.strokeThickness = 2;\n    t.label.stroke = "#FFFFFF";\n    t.label.strokeThickness = 5;\n    var s = this.game.add.tween(t.scale);\n    t.alpha = 1;\n    s.to({\n      x: 1,\n      y: 1\n    }, 350, Phaser.Easing.Back.Out, true);\n    s.onComplete.addOnce(e, i);\n  };\n  t.prototype.hideFlipTxtAnim = function () {\n    this.game.add.tween(this.flipTexts).to({\n      alpha: 0\n    }, 250, Phaser.Easing.Linear.None, true, 500);\n  };\n  t.prototype.release = function () {\n    this.flipTexts = null;\n    this.flipBG = null;\n    this.bgBtnRight = null;\n    this.bgBtnLeft = null;\n    this.helperText = null;\n    this.continueText = null;\n    this.continueShow = false;\n    this.helperShow = false;\n    this.game = null;\n    this.timer = null;\n    this.pauseBtn = null;\n    this.restartBtn = null;\n    this.musicBtn = null;\n    this.stars = null;\n    this.signalToggleMusic.removeAll();\n    this.signalRestart.removeAll();\n    this.signalPause.removeAll();\n    this.signalToggleMusic = null;\n    this.signalRestart = null;\n    this.signalPause = null;\n    this.container.destroy();\n    this.container = null;\n  };\n  t.prototype.showControlsHint = function () {\n    this.helperText.visible = true;\n    this.continueText.visible = false;\n    this.helperShow = true;\n    this.continueShow = false;\n  };\n  t.prototype.showDeathHint = function () {\n    if (!h.MaxGameCore.instance.finished) {\n      f["default"].getInstance().dispatchStop();\n      this.continueText.visible = true;\n    }\n    this.helperText.visible = false;\n    this.helperShow = false;\n    this.continueShow = true;\n    c["default"].getInstance().play(s.Sounds.DieSound());\n  };\n  t.prototype.hideControlsHint = function () {\n    this.helperShow = false;\n    this.continueShow = false;\n    this.helperText.visible = false;\n    this.continueText.visible = false;\n  };\n  t.prototype.showTimer = function () {\n    if (!this.timer.visible && !h.MaxGameCore.instance.finished) {\n      this.timer.visible = true;\n      if (this.helperShow) {\n        this.helperText.visible = true;\n      }\n      if (this.continueShow) {\n        this.continueText.visible = true;\n      }\n      a["default"].instance.container.visible = true;\n    }\n  };\n  t.prototype.hideTimer = function () {\n    if (this.timer.visible) {\n      this.timer.visible = false;\n      this.helperText.visible = false;\n      this.continueText.visible = false;\n      a["default"].instance.container.visible = false;\n    }\n  };\n  t.prototype.init = function (e, i) {\n    this.container = e;\n    this.game = i;\n    if (!p["default"].isDesktop) {\n      t.MSG_CONTINUE = "Tap to continue";\n      t.MSG_HELP = "Use arrows to move";\n    }\n    this.scl = Math.max(this.game.width, this.game.height) / s.Constants.WIDTH;\n    this.scl = this.scl > 1 ? 1 : this.scl;\n    this.signalRestart = new Phaser.Signal();\n    this.signalPause = new Phaser.Signal();\n    this.signalToggleMusic = new Phaser.Signal();\n    this.timer = new n["default"](this.game, "00.00", s.Constants.styleTimer, null, null, s.Atlases.Garage);\n    this.timer.setFrames("timer_bg0000", "timer_bg0000", "timer_bg0000", "timer_bg0000");\n    this.timer.x = this.game.width / 2;\n    this.timer.y = 25;\n    this.timer.label.x = -2;\n    this.timer.label.anchor.set(0, 0.6);\n    this.timer.inputEnableChildren = false;\n    this.helperText = new n["default"](this.game, t.MSG_HELP, s.Constants.styleHelp, null, null, s.Atlases.Garage);\n    this.helperText.setFrames("0popup_bg0000", "0popup_bg0000", "0popup_bg0000", "0popup_bg0000");\n    this.helperText.x = this.game.width / 2;\n    this.helperText.y = this.game.height + this.helperText.height / 2 - s.Constants.GAME_SCALE * 90;\n    this.helperText.label.anchor.set(0.5, 5.5);\n    this.helperText.visible = false;\n    this.helperText.btn.inputEnabled = false;\n    /*if (p.default.isDesktop) {\r\n      var r = undefined;\r\n      r = d.GraphicUtil.game.add.sprite(0, 0, s.Atlases.Garage, "arrow_keys0000");\r\n      r.animations.add("arrow_keys", ["arrow_keys0000", "arrow_keys0001"], 5, true);\r\n      r.y = this.helperText.height * -0.5 + 24;\r\n      r.x = 115;\r\n      r.animations.getAnimation("arrow_keys").play(2, true);\r\n      this.helperText.addChild(r);\r\n    }*/\n    this.continueText = new n["default"](this.game, t.MSG_CONTINUE, s.Constants.styleHelp, null, null, s.Atlases.Garage);\n    this.continueText.setFrames("0popup_bg0000", "0popup_bg0000", "0popup_bg0000", "0popup_bg0000");\n    this.continueText.x = this.game.width / 2;\n    this.continueText.y = this.game.height + this.helperText.height / 2 - s.Constants.GAME_SCALE * 90;\n    this.continueText.label.anchor.set(0.5, 5.5);\n    if (p["default"].isDesktop) {\n      var h = undefined;\n      h = d.GraphicUtil.game.add.sprite(0, 0, s.Atlases.Garage, "space_key0000");\n      h.animations.add("space_key", ["space_key0000", "space_key0001"], 2, true);\n      h.y = this.helperText.height * -0.5 + 75;\n      this.continueText.label.text = "Press           Space                to continue";\n      h.x -= 24;\n      h.animations.getAnimation("space_key").play(2, true);\n      h.anchor.set(0.5);\n      this.continueText.addChild(h);\n      this.continueText.btn.inputEnabled = false;\n    }\n    this.continueText.visible = false;\n    this.bgBtnRight = this.game.add.image(this.game.width, 0, s.Atlases.Garage, "pause_bg0000");\n    this.bgBtnRight.scale.set(-1.4, 1);\n    this.bgBtnLeft = this.game.add.image(0, 0, s.Atlases.Garage, "pause_bg0000");\n    this.bgBtnLeft.scale.set(1.4, 1);\n    this.restartBtn = this.game.add.image(0, 0, s.Atlases.Garage, "restart_btn0000");\n    this.pauseBtn = this.game.add.image(this.game.width - 90, 0, s.Atlases.Garage, "InGamePauseButton0000");\n    this.musicBtn = this.game.add.image(this.game.width - 58, 0, s.Atlases.Garage, "InGameMusicButton0000");\n    this.stars = this.game.add.text(45, 6, "#" + (o["default"].LevelNum + 1), s.Constants.styleMoney);\n    this.flipTexts = new n["default"](i, "", s.Constants.styleTrick, null, null, s.Atlases.Garage);\n    this.flipTexts.setFrames("bg0000", "bg0000", "bg0000", "bg0000");\n    this.flipTexts.label.setMaxSize(200, 45);\n    this.flipTexts.label.y = 20;\n    this.flipTexts.alpha = 0;\n    this.lBack = new l["default"](this.game, 0, -20, "FLIP", s.Constants.styleTrick);\n    this.lBack.anchor.set(0.5);\n    this.flipTexts.label.parent.addChildAt(this.lBack, 0);\n    this.lBack.stroke = "#FFFFFF";\n    this.lBack.strokeThickness = 5;\n    this.lFront = new l["default"](this.game, 0, -20, "FLIP", s.Constants.styleTrick);\n    this.lFront.anchor.set(0.5);\n    this.flipTexts.label.parent.addChild(this.lFront);\n    this.lFront.stroke = "#000000";\n    this.lFront.strokeThickness = 2;\n    this.flipBG = new l["default"](this.game, 0, 20, "", s.Constants.styleTrick);\n    this.flipBG.anchor.set(0.5);\n    this.flipTexts.label.parent.addChild(this.flipBG);\n    this.restartBtn.inputEnabled = true;\n    this.restartBtn.events.onInputDown.add(this.onRestart, this);\n    this.bgBtnLeft.inputEnabled = true;\n    this.bgBtnLeft.events.onInputDown.add(this.onRestart, this);\n    this.pauseBtn.inputEnabled = true;\n    this.pauseBtn.events.onInputDown.add(this.onPause, this);\n    this.musicBtn.inputEnabled = true;\n    this.musicBtn.events.onInputDown.add(this.toggleMusic, this);\n    this.updateSoundButtons();\n    this.container.addChild(this.bgBtnRight);\n    this.container.addChild(this.bgBtnLeft);\n    this.container.addChild(this.pauseBtn);\n    this.container.addChild(this.restartBtn);\n    this.container.addChild(this.musicBtn);\n    this.container.addChild(this.flipTexts);\n    this.container.addChild(this.stars);\n    this.container.addChild(this.timer);\n    this.container.addChild(this.helperText);\n    this.container.addChild(this.continueText);\n    if (!p["default"].isDesktop) {\n      a["default"].instance.container.parent.addChild(a["default"].instance.container);\n    }\n    this.flipTexts.x = this.game.width * 0.5 / this.scl;\n    this.flipTexts.y = s.Constants.HEIGHT * 0.2;\n  };\n  t.prototype.toggleMusic = function () {\n    this.signalToggleMusic.dispatch();\n  };\n  t.prototype.updateSoundButtons = function () {\n    var t = u["default"].getInstance().music ? 0 : 1;\n    t += u["default"].getInstance().sfx ? 0 : 1;\n    this.musicBtn.loadTexture(s.Atlases.Garage, "InGameMusicButton000" + t);\n  };\n  t.prototype.resize = function (t) {\n    this.container.scale.set(t);\n    this.bgBtnRight.x = this.game.width / t;\n    this.musicBtn.x = this.game.width / t - 58;\n    this.pauseBtn.x = this.game.width / t - 100;\n    this.bgBtnRight.y = 0;\n    this.bgBtnLeft.y = 0;\n    if (this.game.state.current === r["default"].Name) {\n      this.resizeGameplay(t);\n    }\n    if (!p["default"].isDesktop) {\n      a["default"].instance.resize(t);\n    }\n  };\n  t.prototype.resizeGameplay = function (t) {\n    this.flipTexts.x = this.game.width * 0.5;\n  };\n  t.prototype.onPause = function () {\n    this.signalPause.dispatch();\n  };\n  t.prototype.onRestart = function () {\n    this.signalRestart.dispatch();\n  };\n  Object.defineProperty(t, "instance", {\n    get: function get() {\n      t._instance || (t._instance = new t());\n      return t._instance;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  t.MSG_CONTINUE = "Press SPACE to continue";\n  t.MSG_HELP = "Use arrows to move";\n  return t;\n}();\nexports["default"] = y;\n\n//# sourceURL=webpack://motox3m/./src/ui/GameUIManager.js?')},"./src/ui/LoaderDisplay.js":(__unused_webpack_module,exports)=>{eval('// LoaderDisplay - Static utility class for managing loading screen visibility\n// Simple manager to show/hide the main loading element with ID "loader"\n\n// Key features:\n// - Static methods for loader visibility\n// - Simple display toggle\n// - DOM element management\n// - Null safety checks\n// - No instantiation required\n\n// Methods:\n// - show(): Display the loader element\n//   * Gets element by ID "loader"\n//   * Sets display to "block"\n//   * Safe if element doesn\'t exist\n//\n// - hide(): Hide the loader element\n//   * Gets element by ID "loader" \n//   * Sets display to "none"\n//   * Safe if element doesn\'t exist\n\n// Usage example:\n// // Show loading screen\n// LoaderDisplay.show();\n// \n// // After loading complete\n// LoaderDisplay.hide();\n\n// HTML requirement:\n// <div id="loader">\n//   \x3c!-- Loading content --\x3e\n// </div>\n//exports.__esModule = true;\nvar s = function () {\n  function t() {}\n  t.show = function () {\n    var t = document.getElementById("loader");\n    if (t) {\n      t.style.display = "block";\n    }\n  };\n  t.hide = function () {\n    var t = document.getElementById("loader");\n    if (t) {\n      t.style.display = "none";\n    }\n  };\n  return t;\n}();\nexports["default"] = s;\n\n//# sourceURL=webpack://motox3m/./src/ui/LoaderDisplay.js?')},"./src/ui/LoadingFade.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// LoadingFade - Extends Phaser.Graphics\n// Creates a fade-out loading screen with "LOADING..." text\n\n// Key features:\n// - Extends Phaser.Graphics for background\n// - Displays centered loading text\n// - Automatic fade-out animation\n// - Optional completion callback\n// - Full screen coverage\n\n// Constructor params:\n// @param game - Phaser.Game instance\n// @param color - Background color (usually black)\n// @param callback - Optional completion callback\n// \n// Example:\n// new LoadingFade(\n//   game,           // Phaser game instance\n//   0x000000,       // Black background\n//   () => {         // Optional callback\n//     console.log(\'Fade complete\');\n//   }\n// );\n\n// Implementation details:\n// - Creates full-screen colored background\n// - Adds centered "LOADING..." text\n// - Performs 100ms fade-out animation\n// - Executes callback on animation complete\n// - Uses UIBridge constants for text styling\n\n// Usage:\n// const fade = new LoadingFade(\n//   game,\n//   0x000000,\n//   () => game.state.start(\'NextState\')\n// );\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar o = function (t) {\n  function e(e, i) {\n    var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var o = t.call(this, e) || this;\n    o.beginFill(i, 1);\n    o.drawRect(0, 0, o.game.width, o.game.height);\n    o.endFill();\n    e.add.group(o, "white", true).add(o);\n    var a = o.game.add.text(o.game.width / 2, o.game.height / 2, "LOADING...", n.Constants.styleCredits0);\n    a.anchor.set(0.5);\n    o.addChild(a);\n    var r = o.game.add.tween(o);\n    r.to({\n      alpha: 0\n    }, 100);\n    r.onComplete.add(function () {\n      if (s !== null) {\n        s();\n      }\n    });\n    r.start();\n    return o;\n  }\n  s(e, t);\n  return e;\n}(Phaser.Graphics);\nexports["default"] = o;\n\n//# sourceURL=webpack://motox3m/./src/ui/LoadingFade.js?')},"./src/ui/LoadingScreen.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// Usage example:\n// new LoadingScreen(\n//   game,           // Phaser game instance\n//   0x000000,       // Black background\n//   \'PlayState\',    // Next state name\n//   { level: 1 }    // State parameters\n// );\n\n// Static properties:\n// - prevState: Tracks the previous game state (defaults to "menu")\n\n// Key functionality:\n// - Creates full-screen overlay\n// - Centered loading text\n// - Fade-in animation\n// - Automatic state transition\n// - Special handling for Garage state\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar o = __webpack_require__(/*! @/src/states/GarageState.js */ "./src/states/GarageState.js");\nvar a = function (t) {\n  function e(i, s, a, r) {\n    var h = t.call(this, i) || this;\n    h.alpha = 0;\n    h.beginFill(s, 1);\n    h.drawRect(0, 0, h.game.width, h.game.height);\n    h.endFill();\n    if (o["default"].Name !== a) {\n      e.prevState = a;\n    }\n    var l = h.game.add.text(h.game.width / 2, h.game.height / 2, "LOADING...", n.Constants.styleCredits0);\n    l.anchor.set(0.5);\n    h.addChild(l);\n    i.add.existing(h);\n    var c = h.game.add.tween(h);\n    c.to({\n      alpha: 1\n    }, 100);\n    if (a != null) {\n      c.onComplete.add(function () {\n        i.state.start(a, true, false, r);\n      });\n    }\n    c.start();\n    return h;\n  }\n  s(e, t);\n  e.prevState = "menu";\n  return e;\n}(Phaser.Graphics);\nexports["default"] = a;\n\n//# sourceURL=webpack://motox3m/./src/ui/LoadingScreen.js?')},"./src/ui/SelectButton.js":function(__unused_webpack_module,exports,__webpack_require__){eval('// SelectButton - Interactive button with selection state and effects\n// Extends Button to create selectable buttons with visual feedback\n\n// Key features:\n// - Selection state tracking\n// - Color tinting support\n// - Scale animation\n// - Signal dispatching\n// - Multiple visual states\n\n// Properties:\n// - selected: Current selection state\n// - signalSelect: Selection event signal\n// - color: Tint color value\n// - tween/tween2: Animation tweens\n// - id: Button identifier\n\n// Key Methods:\n// - setSelect(): Toggle selection\n//   * Updates visual state\n//   * Dispatches signal\n//   * Starts animations\n//\n// - selectTint(): Color-based feedback\n// - selectTween(): Scale animation\n// - startTween1/2(): Animation chain\n\n// Usage example:\n// const button = new SelectButton(\n//   game,           // Phaser game instance\n//   1,              // Button ID\n//   AtlasesData.UI  // Button texture atlas\n// );\n// button.signalSelect.add(onSelect);\n// button.setColor(0xFF0000);\nvar s = this && this.__extends || function () {\n  var t = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var i in e) {\n      if (e.hasOwnProperty(i)) {\n        t[i] = e[i];\n      }\n    }\n  };\n  return function (e, i) {\n    function s() {\n      this.constructor = e;\n    }\n    t(e, i);\n    e.prototype = i === null ? Object.create(i) : (s.prototype = i.prototype, new s());\n  };\n}();\n//exports.__esModule = true;\nvar n = __webpack_require__(/*! @/src/data/AtlasesData.js */ "./src/data/AtlasesData.js");\nvar o = __webpack_require__(/*! @/src/utils/Constants.js */ "./src/utils/Constants.js");\nvar a = __webpack_require__(/*! @/src/ui/Button.js */ "./src/ui/Button.js");\nvar r = function (t) {\n  function e(e, i) {\n    var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : n["default"].Garage;\n    var a = t.call(this, e, i, o["default"].styleChooseLevel, null, null, s) || this;\n    a.signalSelect = new Phaser.Signal();\n    a.selected = false;\n    a.tween = null;\n    a.tween2 = null;\n    a.id = i;\n    a.btn.onInputDown.add(a.onDown, a);\n    return a;\n  }\n  s(e, t);\n  e.prototype.getSelect = function () {\n    return this.selected;\n  };\n  e.prototype.getID = function () {\n    return this.id;\n  };\n  e.prototype.setColor = function (t) {\n    this.color = t;\n  };\n  e.prototype.setSelect = function (t) {\n    this.selected = t;\n    if (this.color >= 0) {\n      this.selectTint();\n    } else {\n      this.selectTween();\n    }\n    this.signalSelect.dispatch(this);\n  };\n  e.prototype.selectTint = function () {\n    if (this.selected) {\n      this.btn.tint = this.color;\n      this.label.alpha = 0.7;\n    } else {\n      this.label.alpha = 1;\n      this.btn.tint = 16777215;\n    }\n  };\n  e.prototype.selectTween = function () {\n    if (this.selected) {\n      this.tween = this.game.add.tween(this.scale);\n      this.tween.to({\n        x: 1.1,\n        y: 1.1\n      }, 300, Phaser.Easing.Linear.None, false);\n      this.tween2 = this.game.add.tween(this.scale);\n      this.tween2.to({\n        x: 1,\n        y: 1\n      }, 300, Phaser.Easing.Linear.None, false);\n      this.tween2.onComplete.add(this.startTween1, this);\n      this.tween.onComplete.add(this.startTween2, this);\n      this.startTween1();\n    } else {\n      if (this.tween) {\n        this.tween.stop(false);\n        this.game.tweens.remove(this.tween);\n        this.tween2.stop(false);\n        this.game.tweens.remove(this.tween2);\n      }\n      this.scale.set(1);\n      this.tween = null;\n      this.tween2 = null;\n    }\n  };\n  e.prototype.startTween1 = function () {\n    this.tween.start();\n  };\n  e.prototype.startTween2 = function () {\n    this.tween2.start();\n  };\n  e.prototype.onDown = function () {\n    this.setSelect(true);\n  };\n  e.prototype.destroy = function (e) {\n    this.signalSelect.removeAll();\n    this.signalSelect = null;\n    t.prototype.destroy.call(this, e);\n  };\n  return e;\n}(a["default"]);\nexports["default"] = r;\n\n//# sourceURL=webpack://motox3m/./src/ui/SelectButton.js?')},"./src/ui/Sound.js":(__unused_webpack_module,exports)=>{eval('//exports.__esModule = true;\nvar s = function () {\n  function t() {}\n  t.FlySound = function () {\n    if (Math.random() > 0.6) {\n      return t.Fly1;\n    } else if (Math.random() > 0.3) {\n      return t.Fly2;\n    } else {\n      return t.Fly3;\n    }\n  };\n  t.FlipSound = function () {\n    return "flip_0" + (Math.round(Math.random() * 5) + 1);\n  };\n  t.DieSound = function () {\n    return "dead_0" + (Math.round(Math.random() * 5) + 1);\n  };\n  t.startSound = function () {\n    return "accel0" + (Math.round(Math.random() * 3) + 1);\n  };\n  t.MenuMusic = "menu_track_1";\n  t.GameMusic = "game_track";\n  t.Click = "button";\n  t.Landing = "landing";\n  t.DriverSpikes = "driver_spikes";\n  t.SavePoint = "safepoint";\n  t.Stones = "stones";\n  t.Explode1 = "explode1";\n  t.Explode2 = "explode2";\n  t.Barrel1 = "barrel_hit0";\n  t.Barrel2 = "barrel_hit1";\n  t.Engine1 = "motor";\n  t.EngineFon = "eng_loop";\n  t.Fly1 = "fly_01";\n  t.Fly2 = "fly_02";\n  t.Fly3 = "fly_03";\n  t.Flip1 = "flip_01";\n  t.Flip2 = "flip_02";\n  t.Flip3 = "flip_03";\n  t.Flip4 = "flip_04";\n  t.Flip5 = "flip_05";\n  t.Flip6 = "flip_06";\n  t.Dead1 = "dead_01";\n  t.Dead2 = "dead_02";\n  t.Dead3 = "dead_03";\n  t.Dead4 = "dead_04";\n  t.Dead5 = "dead_05";\n  t.Dead6 = "dead_06";\n  t.Start = "engine_start";\n  t.Finish = "engine_finish";\n  t.Start1 = "accel01";\n  t.Start2 = "accel02";\n  t.Start3 = "accel03";\n  t.Start4 = "accel04";\n  t.Wood = "wood_hit0";\n  t.Wendy = "wendy";\n  t.preloadList = [];\n  t.list = [];\n  t.tracksList = [t.MenuMusic, t.GameMusic];\n  t.fullList = [t.Engine1, t.EngineFon, t.Explode1, t.Explode2, t.Barrel1, t.Barrel2, t.Wood, t.Wendy, t.Stones, t.SavePoint, t.DriverSpikes, t.Landing, t.Fly1, t.Fly2, t.Fly3, t.Flip1, t.Flip2, t.Flip3, t.Flip4, t.Flip5, t.Flip6, t.Dead1, t.Dead2, t.Dead3, t.Dead4, t.Dead5, t.Dead6, t.Finish, t.Start, t.Start1, t.Start2, t.Start3, t.Start4, t.Click];\n  return t;\n}();\nexports["default"] = s;\n\n//# sourceURL=webpack://motox3m/./src/ui/Sound.js?')},"./src/utils/Constants.js":(__unused_webpack_module,exports)=>{eval('//exports.__esModule = true;\nvar s = function () {\n  function t() {}\n  t.VERSION = "1.17.10";\n  t.GAME_SCALE = 1;\n  t.CALCULATED_WIDTH = 0;\n  t.CALCULATED_HEIGHT = 0;\n  t.WIDTH = 720;\n  t.HEIGHT = 480;\n  t.LANDSCAPE_LOCKED = true;\n  t.PORTRAIT_LOCKED = false;\n  t.STORAGE_KEY = "mx3m4_tbg95";\n  t.styleMoney = {\n    font: "25px Impact",\n    fill: "#DDD9D7"\n  };\n  t.styleBestTime = {\n    font: "14px Impact",\n    fill: "#FFFFFF"\n  };\n  t.styleHighscore = {\n    font: "32px Impact",\n    fill: "#FFD700",\n    align: "center"\n  };\n  t.styleHighscoreChild = {\n    font: "24px Impact",\n    fill: "#FFFFFF",\n    align: "center"\n  };\n  t.styleTime = {\n    font: "15px Impact",\n    fill: "#DDD9D7"\n  };\n  t.styleTimer = {\n    font: "20px Impact",\n    fill: "#DDD9D7"\n  };\n  t.styleHelp = {\n    font: "20px Impact",\n    fill: "#FFFFFF"\n  };\n  t.stylePlay = {\n    font: "80px CfCrackBold",\n    fill: "#FF8F00"\n  };\n  t.styleTrick = {\n    font: "30px CfCrackBold",\n    fill: "#FF8F00"\n  };\n  t.stylePlace = {\n    font: "24px CfCrackBold",\n    fill: "#97F337"\n  };\n  t.styleMSGUI = {\n    font: "10px Impact",\n    fill: "#FFFFFF"\n  };\n  t.styleGarage = {\n    font: "80px CfCrackBold",\n    fill: "#FF8F00"\n  };\n  t.styleGarage2 = {\n    font: "33px CfCrackBold",\n    fill: "#FFFFFF"\n  };\n  t.styleGarage3 = {\n    font: "50px CfCrackBold",\n    fill: "#FFFFFF"\n  };\n  t.stylePopBtn = {\n    font: "30px CfCrackBold",\n    fill: "#2C374E"\n  };\n  t.stylePopBtn2 = {\n    font: "25px CfCrackBold",\n    fill: "#2C374E"\n  };\n  t.styleChooseLevel = {\n    font: "36px CfCrackBold",\n    fill: "#FFFFFF"\n  };\n  t.stylePause = {\n    font: "40px CfCrackBold",\n    fill: "#FFFFFF"\n  };\n  t.styleFinish = {\n    font: "30px CfCrackBold",\n    fill: "#FF8F00"\n  };\n  t.styleFinish1 = {\n    font: "20px CfCrackBold",\n    fill: "#FFFFFF"\n  };\n  t.styleCredits0 = {\n    font: "30px CfCrackBold",\n    fill: "#FFFFFF"\n  };\n  t.styleCreditsOK = {\n    font: "50px CfCrackBold",\n    fill: "#FF8F00"\n  };\n  t.styleCredits1 = {\n    font: "18px Impact",\n    fill: "#FFFFFF"\n  };\n  t.styleCredits2 = {\n    font: "14px Impact",\n    fill: "#FFFFFF"\n  };\n  t.styleVersion = {\n    font: t.GAME_SCALE * 15 + "px Impact",\n    fill: "#FFFFFF"\n  };\n  return t;\n}();\nexports["default"] = s;\n\n//# sourceURL=webpack://motox3m/./src/utils/Constants.js?')},"./src/utils/Drawing.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('exports.__esModule = true;\nvar s = __webpack_require__(/*! @/src/lib/PhaserLib.js */ "./src/lib/PhaserLib.js");\nvar n = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar o = function () {\n  function t() {}\n  t.setTransform = function (t, e, i, s) {\n    var n = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n    var o = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n    var a = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n    var r = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n    t.x = e;\n    t.y = i;\n    t.rotation = s;\n    if (n) {\n      t.pivot.x = n;\n    }\n    if (o) {\n      t.pivot.y = o;\n    }\n    if (a) {\n      t.scale.x = a;\n    }\n    if (r) {\n      t.scale.y = r;\n    }\n  };\n  t.release = function () {\n    for (var e in t.mapTexture) {\n      if (t.mapTexture.hasOwnProperty(e)) {\n        var i = t.mapTexture[e];\n        i.destroy(true);\n      }\n    }\n    t.mapTexture = {};\n  };\n  t.drawBitmapPath = function (e, i, s) {\n    var n = s.length;\n    var o = [];\n    var a = 0;\n    var r = null;\n    for (a = 0; a < n; a++) {\n      o.push(new Phaser.Point(s[a].x, s[a].y));\n    }\n    r = t.choosePic(e, o.slice());\n    i.addChild(r);\n  };\n  t.drawBitmapPath2 = function (e, i, s) {\n    var o = new Phaser.Image(n.GraphicUtil.game, -200, -200, n.GraphicUtil.currentAtlass, e + "0000");\n    var a = [];\n    t.addPoints(s, o.width, a);\n    t.drawOld(e, i, a);\n  };\n  t.drawBitmapPath2StretchCircle = function (e, i, o, a) {\n    var r = new Phaser.Image(n.GraphicUtil.game, -200, -200, n.GraphicUtil.currentAtlass, e + "0000");\n    o = Math.max(o, r.width);\n    var h = o * 0.5;\n    var l = Math.asin(Math.min(h / a, 1));\n    var c = Math.ceil(Math.PI * 2 / l);\n    l = Math.PI * 2 / c;\n    var u = [];\n    for (var d = 0; d < c; d++) {\n      u.push(new s.Point(a * Math.cos(d * l), a * Math.sin(d * l)));\n    }\n    u.push(u[0]);\n    t.drawOld(e, i, u);\n  };\n  t.drawBitmapPath2Stretch = function (e, i, s) {\n    t.drawOld(e, i, s);\n  };\n  t.drawBitmapPath2ClearPoints = function (e, i, s) {\n    var o = new Phaser.Image(n.GraphicUtil.game, -200, -200, n.GraphicUtil.currentAtlass, e + "0000");\n    var a = [];\n    t.drawOld(e, i, a);\n  };\n  t.addPoints = function (t, e, i) {\n    var n;\n    var o;\n    var a = t.length;\n    var r = 0;\n    var h = 0;\n    var l = 0;\n    var c = 0;\n    var u = 0;\n    var d = 0;\n    var p = new s.Point();\n    for (r = 0; r < a - 1; r++) {\n      n = t[r];\n      o = t[r + 1];\n      h += Phaser.Point.distance(n, o);\n    }\n    l = h;\n    if (t[0] != null) {\n      for (i.push(new s.Point(t[0].x, t[0].y)); h > 0.15;) {\n        n = i[i.length - 1];\n        o = t[d + 1];\n        c = Phaser.Point.distance(n, o);\n        if (c > e) {\n          u = e / c;\n          c *= u;\n          Phaser.Point.interpolate(n, o, u, p);\n          i.push(new s.Point(p.x, p.y));\n        } else {\n          d++;\n          i.push(new s.Point(t[d].x, t[d].y));\n        }\n        h -= c;\n      }\n      return l;\n    }\n  };\n  t.choosePic = function (e, i) {\n    if (t.mapTexture[e] === undefined) {\n      var s = new Phaser.Image(n.GraphicUtil.game, 0, 0, n.GraphicUtil.currentAtlass, e + "0000");\n      var o = s.generateTexture();\n      s.visible = false;\n      t.mapTexture[e] = o;\n    }\n    return n.GraphicUtil.game.add.rope(0, 0, t.mapTexture[e], null, i);\n  };\n  t.drawOld = function (t, e, i) {\n    var s;\n    var o;\n    var a = 0;\n    var r = i.length;\n    var h = 0;\n    var l = null;\n    for (h = 0; h < r && h !== r - 1; h++) {\n      s = i[h];\n      o = i[h + 1];\n      var c = o.x - s.x;\n      var u = o.y - s.y;\n      var d = Math.atan(u / c);\n      if (c < 0) {\n        d += Math.PI;\n      }\n      l = n.GraphicUtil.game.add.image(s.x, s.y, n.GraphicUtil.currentAtlass, t + "0000");\n      if (h === 0) {\n        a = d;\n      }\n      l.anchor.set(0, 0.5);\n      a = d;\n      l.rotation = d;\n      l.width = Math.sqrt(c * c + u * u);\n      e.addChild(l);\n    }\n  };\n  t.mapTexture = {};\n  return t;\n}();\nexports.Drawing = o;\n\n//# sourceURL=webpack://motox3m/./src/utils/Drawing.js?')},"./src/utils/GameUtils.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('//exports.__esModule = true;\nvar s = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nexports.MyRand = s.MyRand;\nexports.UiStrUtil = s.UiStrUtil;\nvar n = __webpack_require__(/*! @/src/utils/Drawing.js */ "./src/utils/Drawing.js");\nexports.Drawing = n.Drawing;\nvar o = __webpack_require__(/*! @/src/utils/PhysicsUtils.js */ "./src/utils/PhysicsUtils.js");\nexports.NapeUtil = o.NapeUtil;\nvar a = __webpack_require__(/*! @/src/core/GameCore.js */ "./src/core/GameCore.js");\nexports.GameCore = a.GameCore;\nvar r = __webpack_require__(/*! @/src/objects/GameObject.js */ "./src/objects/GameObject.js");\nexports.GameObject = r.GameObject;\nvar h = __webpack_require__(/*! @/src/lib/TBG.js */ "./src/lib/TBG.js");\nexports.IDisposed = h.IDisposed;\nvar l = __webpack_require__(/*! @/src/lib/TBG.js */ "./src/lib/TBG.js");\nexports.IUpdated = l.IUpdated;\nvar c = __webpack_require__(/*! @/src/lib/TBG.js */ "./src/lib/TBG.js");\nexports.ISafed = c.ISafed;\nvar u = __webpack_require__(/*! @/src/lib/TBG.js */ "./src/lib/TBG.js");\nexports.IRestarted = u.IRestarted;\nvar d = __webpack_require__(/*! @/src/lib/TBG.js */ "./src/lib/TBG.js");\nexports.IActivatable = d.IActivatable;\nvar p = __webpack_require__(/*! @/src/physics/GamePhysics.js */ "./src/physics/GamePhysics.js");\nexports.GamePhysics = p.GamePhysics;\nvar f = __webpack_require__(/*! @/src/physics/NapePhysics.js */ "./src/physics/NapePhysics.js");\nexports.NapePhysics = f.NapePhysics;\nvar y = __webpack_require__(/*! @/src/core/GameView.js */ "./src/core/GameView.js");\nexports.GameView = y.GameView;\nvar g = __webpack_require__(/*! @/src/core/RaceCamera.js */ "./src/core/RaceCamera.js");\nexports.RaceCamera = g.RaceCamera;\nvar m = __webpack_require__(/*! @/src/camera/CameraPathes.js */ "./src/camera/CameraPathes.js");\nexports.CameraPathes = m.CameraPathes;\nvar v = __webpack_require__(/*! @/src/physics/CarParams.js */ "./src/physics/CarParams.js");\nexports.CarParams = v.CarParams;\nvar b = __webpack_require__(/*! @/src/data/CarUpgrades.js */ "./src/data/CarUpgrades.js");\nexports.CarUpgrades = b.CarUpgrades;\nvar x = __webpack_require__(/*! @/src/data/RaceCars.js */ "./src/data/RaceCars.js");\nexports.RaceCars = x.RaceCars;\nvar _ = __webpack_require__(/*! @/src/weapons/WeaponParams.js */ "./src/weapons/WeaponParams.js");\nexports.WeaponParams = _.WeaponParams;\nvar w = __webpack_require__(/*! @/src/data/Inventory.js */ "./src/data/Inventory.js");\nexports.Inventory = w.Inventory;\nvar C = __webpack_require__(/*! @/src/data/RaceData.js */ "./src/data/RaceData.js");\nexports.RaceData = C.RaceData;\nvar P = __webpack_require__(/*! @/src/data/BgElVo.js */ "./src/data/BgElVo.js");\nexports.BgElVo = P.BgElVo;\nvar T = __webpack_require__(/*! @/src/data/ShopCarVO.js */ "./src/data/ShopCarVO.js");\nexports.ShopCarVO = T.ShopCarVO;\nvar S = __webpack_require__(/*! @/src/data/CarsData.js */ "./src/data/CarsData.js");\nexports.CarsData = S.CarsData;\nvar A = __webpack_require__(/*! @/src/data/GameData.js */ "./src/data/GameData.js");\nexports.GameData = A.GameData;\nvar E = __webpack_require__(/*! @/src/data/RacesData.js */ "./src/data/RacesData.js");\nexports.RacesData = E.RacesData;\nvar I = __webpack_require__(/*! @/src/data/ShopData.js */ "./src/data/ShopData.js");\nexports.ShopData = I.ShopData;\nvar M = __webpack_require__(/*! @/src/objects/vehicles/CarBuilder.js */ "./src/objects/vehicles/CarBuilder.js");\nexports.CarBuilder = M.CarBuilder;\nvar R = __webpack_require__(/*! @/src/controllers/RaceBuilder.js */ "./src/controllers/RaceBuilder.js");\nexports.RaceBuilder = R.RaceBuilder;\nvar O = __webpack_require__(/*! @/src/objects/effects/FrameGraphic.js */ "./src/objects/effects/FrameGraphic.js");\nexports.FrameGraphic = O.FrameGraphic;\nvar B = __webpack_require__(/*! @/src/effects/GroundPartClip.js */ "./src/effects/GroundPartClip.js");\nexports.GroundPartClip = B.GroundPartClip;\nvar L = __webpack_require__(/*! @/src/effects/SmokePartClip.js */ "./src/effects/SmokePartClip.js");\nexports.SmokePartClip = L.SmokePartClip;\nvar k = __webpack_require__(/*! @/src/effects/TrailPart.js */ "./src/effects/TrailPart.js");\nexports.TrailPart = k.TrailPart;\nvar D = __webpack_require__(/*! @/src/objects/vehicles/WheelGraphic.js */ "./src/objects/vehicles/WheelGraphic.js");\nexports.WheelGraphic = D.WheelGraphic;\nvar F = __webpack_require__(/*! @/src/objects/background/BgEl.js */ "./src/objects/background/BgEl.js");\nexports.BgEl = F.BgEl;\nvar G = __webpack_require__(/*! @/src/objects/landscape/LandscapeShape.js */ "./src/objects/landscape/LandscapeShape.js");\nexports.LandscapeShape = G.LandscapeShape;\nvar U = __webpack_require__(/*! @/src/objects/vehicles/CarObject.js */ "./src/objects/vehicles/CarObject.js");\nexports.CarObject = U.CarObject;\nvar N = __webpack_require__(/*! @/src/objects/vehicles/BikeObject.js */ "./src/objects/vehicles/BikeObject.js");\nexports.BikeObject = N.BikeObject;\nvar j = __webpack_require__(/*! @/src/objects/vehicles/CorpseObject.js */ "./src/objects/vehicles/CorpseObject.js");\nexports.CorpseObject = j.CorpseObject;\nvar W = __webpack_require__(/*! @/src/objects/vehicles/DriverObject.js */ "./src/objects/vehicles/DriverObject.js");\nexports.DriverObject = W.DriverObject;\nvar X = __webpack_require__(/*! @/src/objects/FrameObject.js */ "./src/objects/FrameObject.js");\nexports.FrameObject = X.FrameObject;\nvar H = __webpack_require__(/*! @/src/physics/PartObject.js */ "./src/physics/PartObject.js");\nexports.PartObject = H.PartObject;\nvar V = __webpack_require__(/*! @/src/objects/vehicles/WheelObject.js */ "./src/objects/vehicles/WheelObject.js");\nexports.WheelObject = V.WheelObject;\nvar Y = __webpack_require__(/*! @/src/objects/world/Background.js */ "./src/objects/world/Background.js");\nexports.BgObject = Y.BgObject;\nvar q = __webpack_require__(/*! @/src/objects/world/DecorActObject.js */ "./src/objects/world/DecorActObject.js");\nexports.DecorActObject = q.DecorActObject;\nvar z = __webpack_require__(/*! @/src/objects/world/DecorMultiObject.js */ "./src/objects/world/DecorMultiObject.js");\nexports.DecorMultiObject = z.DecorMultiObject;\nvar K = __webpack_require__(/*! @/src/objects/world/Decorations.js */ "./src/objects/world/Decorations.js");\nexports.DecorObject = K.DecorObject;\nvar J = __webpack_require__(/*! @/src/objects/world/VectorDecor.js */ "./src/objects/world/VectorDecor.js");\nexports.VectorDecor = J.VectorDecor;\nvar Z = __webpack_require__(/*! @/src/objects/effects/Explosion.js */ "./src/objects/effects/Explosion.js");\nexports.CarExplodeObject = Z.CarExplodeObject;\nvar Q = __webpack_require__(/*! @/src/effects/GlassExplodeObject.js */ "./src/effects/GlassExplodeObject.js");\nexports.GlassExplodeObject = Q.GlassExplodeObject;\nvar $ = __webpack_require__(/*! @/src/objects/effects/TrailParticlesSystem.js */ "./src/objects/effects/TrailParticlesSystem.js");\nexports.TrailParticlesSystem = $.TrailParticlesSystem;\nvar tt = __webpack_require__(/*! @/src/physics/TrailPartObject.js */ "./src/physics/TrailPartObject.js");\nexports.TrailPartObject = tt.TrailPartObject;\nvar et = __webpack_require__(/*! @/src/objects/world/GlassBlock.js */ "./src/objects/world/GlassBlock.js");\nexports.GlassBlock = et.GlassBlock;\nvar it = __webpack_require__(/*! @/src/physics/GlassBlockPart.js */ "./src/physics/GlassBlockPart.js");\nexports.GlassBlockPart = it.GlassBlockPart;\nvar st = __webpack_require__(/*! @/src/objects/world/Ground.js */ "./src/objects/world/Ground.js");\nexports.GroundObject = st.GroundObject;\nvar nt = __webpack_require__(/*! @/src/objects/world/PlankObject.js */ "./src/objects/world/PlankObject.js");\nexports.PlankObject = nt.PlankObject;\nvar ot = __webpack_require__(/*! @/src/objects/world/ShaperObject.js */ "./src/objects/world/ShaperObject.js");\nexports.ShaperObject = ot.ShaperObject;\nvar at = __webpack_require__(/*! @/src/objects/world/WaterObject.js */ "./src/objects/world/WaterObject.js");\nexports.WaterObject = at.WaterObject;\nvar rt = __webpack_require__(/*! @/src/objects/interactive/BoostObject.js */ "./src/objects/interactive/BoostObject.js");\nexports.BoostObject = rt.BoostObject;\nvar st = __webpack_require__(/*! @/src/objects/world/SphereObject.js */ "./src/objects/world/SphereObject.js");\nexports.SphereObject = st.SphereObject;\nvar ht = __webpack_require__(/*! @/src/physics/DynamicBodyObject.js */ "./src/physics/DynamicBodyObject.js");\nexports.DynamicBodyObject = ht.DynamicBodyObject;\nvar lt = __webpack_require__(/*! @/src/objects/interactive/FinishObject.js */ "./src/objects/interactive/FinishObject.js");\nexports.FinishObject = lt.FinishObject;\nvar ct = __webpack_require__(/*! @/src/objects/interactive/MotorObject.js */ "./src/objects/interactive/MotorObject.js");\nexports.MotorObject = ct.MotorObject;\nvar ut = __webpack_require__(/*! @/src/objects/interactive/MoverPatherObject.js */ "./src/objects/interactive/MoverPatherObject.js");\nexports.MoverPatherObject = ut.MoverPatherObject;\nvar dt = __webpack_require__(/*! @/src/objects/physics/PivotObject.js */ "./src/objects/physics/PivotObject.js");\nexports.PivotObject = dt.PivotObject;\nvar pt = __webpack_require__(/*! @/src/objects/base/RemovedBodyObjects.js */ "./src/objects/base/RemovedBodyObjects.js");\nexports.RemovedBodyObjects = pt.RemovedBodyObjects;\nvar ft = __webpack_require__(/*! @/src/objects/world/SafePointObject.js */ "./src/objects/world/SafePointObject.js");\nexports.SafePointObject = ft.SafePointObject;\nvar yt = __webpack_require__(/*! @/src/objects/interactive/SpikesObject.js */ "./src/objects/interactive/SpikesObject.js");\nexports.SpikesObject = yt.SpikesObject;\nvar gt = __webpack_require__(/*! @/src/objects/interactive/TntObject.js */ "./src/objects/interactive/TntObject.js");\nexports.TntObject = gt.TntObject;\nvar mt = __webpack_require__(/*! @/src/objects/triggers/ToggleObject.js */ "./src/objects/triggers/ToggleObject.js");\nexports.ToggleObject = mt.ToggleObject;\nvar vt = __webpack_require__(/*! @/src/camera/CameraZone.js */ "./src/camera/CameraZone.js");\nexports.CameraZone = vt.CameraZone;\nvar bt = __webpack_require__(/*! @/src/objects/ai/WaypointObject.js */ "./src/objects/ai/WaypointObject.js");\nexports.WaypointObject = bt.WaypointObject;\nvar xt = __webpack_require__(/*! @/src/config/ObjectTypes.js */ "./src/config/ObjectTypes.js");\nexports.ObjectTypes = xt.ObjectTypes;\nvar _t = __webpack_require__(/*! @/src/config/CbTypes.js */ "./src/config/CbTypes.js");\nexports.CbTypes = _t.CbTypes;\nvar wt = __webpack_require__(/*! @/src/config/Filters.js */ "./src/config/Filters.js");\nexports.Filters = wt.Filters;\nvar Ct = __webpack_require__(/*! @/src/config/Materials.js */ "./src/config/Materials.js");\nexports.Materials = Ct.Materials;\nvar Pt = __webpack_require__(/*! @/src/physics/MaxPhysics.js */ "./src/physics/MaxPhysics.js");\nexports.MaxPhysics = Pt.MaxPhysics;\nvar Tt = __webpack_require__(/*! @/src/physics/BodyEffector.js */ "./src/physics/BodyEffector.js");\nexports.BodyEffector = Tt.BodyEffector;\nvar St = __webpack_require__(/*! @/src/physics/BoostEffector.js */ "./src/physics/BoostEffector.js");\nexports.BoostEffector = St.BoostEffector;\nvar At = __webpack_require__(/*! @/src/controllers/PlayerController.js */ "./src/controllers/PlayerController.js");\nexports.PlayerController = At.PlayerController;\nvar Et = __webpack_require__(/*! @/src/controllers/CarController.js */ "./src/controllers/CarController.js");\nexports.CarController = Et.CarController;\nvar It = __webpack_require__(/*! @/src/utils/GraphicUtil.js */ "./src/utils/GraphicUtil.js");\nexports.GraphicUtil = It.GraphicUtil;\nvar Mt = __webpack_require__(/*! @/src/physics/PhysicsUtils.js */ "./src/physics/PhysicsUtils.js");\nexports.PhysicUtil = Mt.PhysicUtil;\nvar Rt = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js"); // 2\nexports.MaxGameView = Rt.MaxGameView;\n// new geyser\nvar GeyserObject = __webpack_require__(/*! @/src/objects/interactive/GeyserObject.js */ "./src/objects/interactive/GeyserObject.js");\nexports.GeyserObject = GeyserObject.GeyserObject;\n\n//# sourceURL=webpack://motox3m/./src/utils/GameUtils.js?')},"./src/utils/GraphicUtil.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('// GraphicUtil - Static utility class for creating game graphics\n// Handles creation of various game visual elements and effects\n\n// Key features:\n// - Static methods for graphics creation\n// - Ground/terrain generation\n// - Vehicle graphics handling\n// - Sprite and animation creation\n// - Landscape shape generation\n\n// Key methods:\n// - createGround(x, y, points, ...): Create terrain graphics\n//   * Handles road tiles and decorations\n//   * Supports different themes\n//   * Creates masked tile sprites\n//\n// - createCarFrameGraphic(...): Create vehicle frame graphics\n// - createCarWheelGraphic(...): Create wheel graphics\n// - createImageWithObj(...): Create sprite from object data\n// - createMovieClip(...): Create animated sprites\n// - createLandscapeShape(...): Generate landscape elements\n//   * Supports multiple themes\n//   * Handles different layers\n//   * Creates masked shapes\n\n// Static properties:\n// - game: Phaser.Game instance\n// - currentAtlass: Current texture atlas\n// - masks: Array of mask graphics\n// - maskOwners: Array of masked sprites\n\n// Usage example:\n// GraphicUtil.createGround(\n//   x, y,\n//   terrainPoints,\n//   true,  // show line\n//   true,  // use road tile\n//   height,\n//   themeId\n// );\n//exports.__esModule = true;\nvar s = __webpack_require__(/*! @/src/utils/Drawing.js */ "./src/utils/Drawing.js");\nvar n = __webpack_require__(/*! @/src/lib/PhaserLib.js */ "./src/lib/PhaserLib.js");\nvar o = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar a = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar r = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar h = __webpack_require__(/*! @/src/core/SpriteData.js */ "./src/core/SpriteData.js");\nvar l = __webpack_require__(/*! @/src/config/Game.js */ "./src/config/Game.js");\nvar AtlasesData = (__webpack_require__(/*! @/src/data/AtlasesData.js */ "./src/data/AtlasesData.js")["default"]);\nvar c = function () {\n  function t() {}\n  t.createGround = function (e, i, o, a, r, c, u) {\n    var d = t.game.add.group();\n    d.x = e;\n    d.y = i;\n    var p = t.game.add.graphics(0, 0);\n    d.addChild(p);\n    var f = null;\n    if (r && (f = h.AssetsStorage.instance.getByKey("road_tile"))) {\n      var y = o[0];\n      var g = new n.Point(115000, 115000);\n      p.beginFill(16711935, 0.5);\n      p.moveTo(y.x, c + l["default"].GAME_H);\n      for (var m = o.length, v = 0; v < m; v++) {\n        if (o[v].x < g.x) {\n          g.x = o[v].x;\n        }\n        if (o[v].y < g.y) {\n          g.y = o[v].y;\n        }\n        y = o[v];\n        p.lineTo(y.x, y.y);\n      }\n      p.lineTo(y.x, c + l["default"].GAME_H);\n      p.endFill();\n      var b = this.game.add.tileSprite(g.x, g.y, p.width, p.height, t.currentAtlass, u === 100 ? "finish0000" : "tile0000");\n      d.add(b);\n      b.tilePosition.x = -e % 256;\n      b.tilePosition.y = -i % 256;\n      d.addChild(p);\n      t.masks.push(p);\n      t.maskOwners.push(b);\n    }\n    if (a) {\n      var x = null;\n      if (u === 0) {\n        x = "line";\n      } else if (u === 1) {\n        x = h.RaceAssetsLoader.instance.theme > 0 ? "line_top" : "line_wood_g";\n      } else if (u === 2) {\n        x = "line_bg";\n      } else if (u === 3) {\n        x = "line_metal_g";\n      } else if (u == 13) {\n        x = "CandyGround";\n      }\n      if (x) {\n        if (x === "line" || x.indexOf("line_top") === 0) {\n          s.Drawing.drawBitmapPath(x, d, o);\n        } else {\n          s.Drawing.drawBitmapPath2(x, d, o);\n        }\n      }\n    }\n    return d;\n  };\n  t.createCarFrameGraphic = function (t, e) {\n    return new o.FrameGraphic(t, e);\n  };\n  t.createCarWheelGraphic = function (t, e, i) {\n    return new o.WheelGraphic(t, i);\n  };\n  t.createImageWithObj = function (e, i) {\n    if (i === null) {\n      return null;\n    }\n    if (i === undefined) {\n      return null;\n    }\n    var s;\n    var alas = t.currentAtlass;\n    console.log("i", i, alas);\n    if (alas == "theme0" && i == \'SpikesE\') {\n      // alas = \'theme1\';\n    }\n    s = t.game.add.sprite(0, 0, alas, i + "0000");\n    s.anchor.set(0.5);\n    if (e) {\n      s.position.set(e.x, e.y);\n      s.rotation = a["default"].TO_RAD * e.rotation;\n    }\n    return s;\n  };\n  t.createMovieClip = function (e, i) {\n    var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 12;\n    var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n    var o = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    if (i === null) {\n      return null;\n    }\n    var h;\n    if (i === "RocketAnim") {\n      h = t.game.add.sprite(0, 0, AtlasesData.CarsNew, "RocketAnim0000");\n      h.animations.add("RocketAnim", Phaser.Animation.generateFrameNames("RocketAnim", 0, 5, "", 4));\n      h.anchor.set(1, .5);\n      h.animations.getAnimation("RocketAnim").play(30);\n      h.animations.getAnimation("RocketAnim").stop();\n    } else if (i === "BoostAnim") {\n      h = t.game.add.sprite(0, 0, AtlasesData.Theme, "boost_anim0000");\n      h.animations.add("boost_anim", Phaser.Animation.generateFrameNames("boost_anim", 0, 9, "", 4));\n      h.anchor.set(.5);\n      h.animations.getAnimation("boost_anim").play(30);\n      h.animations.getAnimation("boost_anim").stop();\n      // Make sure the animation exists before adding it\n    } else if (i === "SafePointAnim" || i === "CarExplode") {\n      // console.log("createMovieClip", i);\n      h = t.game.add.sprite(0, 0, AtlasesData.Theme, "bg0000");\n      h.animations.add(i, Phaser.Animation.generateFrameNames(i, 0, 28, "", 4));\n      h.anchor.set(0.5);\n      h.animations.getAnimation(i).play(30);\n      h.animations.getAnimation(i).stop();\n    } else if (i === "CarExplode") {\n      h = t.game.add.sprite(0, 0, r.Atlases.Cars, i + "0000");\n      h.animations.add(i, Phaser.Animation.generateFrameNames(i, 0, 28, "", 4));\n      h.anchor.set(0.5);\n      h.animations.getAnimation(i).play(30);\n      h.animations.getAnimation(i).stop();\n    } else {\n      h = t.game.add.sprite(0, 0, t.currentAtlass, "bg0000");\n      h.scale.set(0.4);\n    }\n    if (e) {\n      h.position.set(e.x, e.y);\n      h.rotation = a["default"].TO_RAD * e.rotation;\n    }\n    return h;\n  };\n  t.createImage = function (e, i, s, n) {\n    if (n === null) {\n      return null;\n    }\n    var l = null;\n    var c = n + "";\n    var u = o.Inventory.instance.getSkin();\n    var Atlases = r.Atlases.Cars;\n    if (u >= 9) {\n      Atlases = "bike".concat(u);\n      var pivots = this.game.cache.getJSON("bike".concat(u, "_pivots")).pivots;\n    }\n    if (c.indexOf("driver") === 0 || c.indexOf("suspend") === 0) {\n      l = t.game.add.sprite(0, 0, Atlases, c + u + "0000");\n      // console.log("l",c + u + "0000");\n      if (c.indexOf("suspend") === 0) {\n        var tmpAnchor = u - 1;\n        if (u > 9) {\n          tmpAnchor = 8;\n        }\n        if (u === 13) {\n          tmpAnchor = 9;\n        }\n        if (c.indexOf("back") !== -1) {\n          if (u >= 9) {\n            var anchorX = Phaser.Math.clamp(pivots.suspend_back.x / l.width, 0, 1);\n            var anchorY = Phaser.Math.clamp(pivots.suspend_back.y / l.height, 0, 1);\n\n            // Set anchor\n            // l.anchor.set(anchorX, anchorY);\n            if (u === 14 || u === 15 || u === 18 || u === 22 || u === 24 || u === 25 || u === 26) {\n              // console.log("anchorX",anchorX,anchorY);\n              l.anchor.set(0.0147, 0.373);\n            } else if (u === 21) {\n              l.anchor.set(0.301, 0.159);\n            } else {\n              l.anchor.set(h.AssetsList.SUSPEND_BACK_ANCHORX[tmpAnchor], h.AssetsList.SUSPEND_BACK_ANCHORY[tmpAnchor]);\n            }\n          } else {\n            l.anchor.set(h.AssetsList.SUSPEND_BACK_ANCHORX[tmpAnchor], h.AssetsList.SUSPEND_BACK_ANCHORY[tmpAnchor]);\n          }\n        } else {\n          if (u >= 9) {\n            //   var anchorX = Phaser.Math.clamp(pivots.suspend_front.x / l.width, 0, 1);\n            //   var anchorY = Phaser.Math.clamp(pivots.suspend_front.y / l.height, 0, 1);\n\n            // // Set anchor\n            // l.anchor.set(anchorX, anchorY);\n            l.anchor.set(h.AssetsList.SUSPEND_FRONT_ANCHORX[tmpAnchor], h.AssetsList.SUSPEND_FRONT_ANCHORY[tmpAnchor]);\n            if (u === 14) {\n              l.anchor.set(0.836, 0.555);\n            }\n            if (u === 20) {\n              l.anchor.set(0.836, 0.405);\n            }\n            if (u === 18) {\n              l.anchor.set(0.906, 0.695);\n            }\n            if (u === 22 || u === 24 || u === 25) {\n              // console.log(h.AssetsList.SUSPEND_FRONT_ANCHORX[tmpAnchor], h.AssetsList.SUSPEND_FRONT_ANCHORY[tmpAnchor]);\n              //var anchorX = Phaser.Math.clamp(pivots.suspend_front.x / l.width, 0, 1);\n              //var anchorY = Phaser.Math.clamp(pivots.suspend_front.y / l.height, 0, 1);\n              l.anchor.set(0.836, 0.435);\n            }\n          } else {\n            l.anchor.set(h.AssetsList.SUSPEND_FRONT_ANCHORX[tmpAnchor], h.AssetsList.SUSPEND_FRONT_ANCHORY[tmpAnchor]);\n          }\n        }\n\n        // l.scale.set(0.5,0.5);\n      } else if (u >= 6 && u < 9) {\n        l.anchor.set(h.AssetsList.ARCHORS_X[c][u - 1], h.AssetsList.ARCHORS_Y[c][u - 1]);\n      } else {\n        console.log("l", c + u + "0000");\n        l.anchor.set(0.5);\n      }\n      if (u >= 9) {\n        l.scale.set(0.5, 0.5);\n      }\n    } else if (c.indexOf("FrameExploded") !== -1) {\n      l = t.game.add.sprite(0, 0, Atlases, c + "0000");\n      if (u >= 9) {\n        l.scale.set(0.5, 0.5);\n        var anchorX = Phaser.Math.clamp(pivots.corpse.x / l.width, 0, 1);\n        var anchorY = Phaser.Math.clamp(pivots.corpse.y / l.height, 0, 1);\n        l.anchor.set(anchorX, anchorY);\n      } else {\n        l.anchor.set(h.AssetsList.FRAMES_ANCHORX[u - 1], h.AssetsList.FRAMES_ANCHORY[u - 1]);\n      }\n    } else {\n      if (c.indexOf("GlassCrashed") !== -1) {\n        l = t.game.add.sprite(0, 0, AtlasesData.Theme, c + "0000");\n        l.scale.set(0.4);\n      } else {\n        l = t.game.add.sprite(0, 0, t.currentAtlass, c + "0000");\n        l.scale.set(0.4);\n      }\n    }\n    l.rotation = s * a["default"].TO_RAD;\n    return l;\n  };\n  t.createLandscapeShape = function (e, i, r, h) {\n    var l = new o.LandscapeShape(e, i, r);\n    var c = 0;\n    var u = null;\n    var d = e.params.layer;\n    if (h) {\n      u = "finish";\n    } else {\n      u = "RoadTile0_1";\n      if (d === 1) {\n        u = "tile_bg";\n      } else if (d === 2) {\n        u = "tile";\n      } else if (d === 3) {\n        u = "tile_red_pool";\n      } else if (d === 4) {\n        u = "tile_rivet";\n      } else if (d === 5) {\n        u = "tile_shape_bg";\n      } else if (d === 6) {\n        u = "tile_stone";\n      } else if (d == 7) {\n        u = "tile_water_bg";\n      } else if (d == 8) {\n        u = "tile_red_pool";\n      } else if (d == 9) {\n        u = "tile_red_pool";\n      }\n    }\n    var p = u === "RoadTile0_1";\n    var f = e.params.vertices;\n    var y;\n    var g = 0;\n    var m = 16;\n    var v = null;\n    if (d === 0) {\n      v = "RoadLine0_4";\n    } else if (d === 1) {\n      u = "tile_bg";\n      v = "RoadLine0_Bg";\n    } else if (d === 2) {\n      if (e.params.line === true) {\n        v = "line";\n      }\n    } else if (d === 3) {\n      v = "line_spike";\n      g = 2;\n    } else if (d === 4) {\n      v = "line_rivet";\n    } else if (d === 5) {\n      v = "line_shape_bg";\n      m = 8;\n    } else if (d === 6) {\n      v = "line_stone_shape";\n      m = 8;\n    } else if (d === 8) {\n      v = "line_red_pool";\n      m = 8;\n    } else if (d === 9) {\n      v = "line_spike";\n      g = 2;\n    }\n    var b = f[0];\n    var x = f.length;\n    var _ = 0;\n    var w = 10;\n    var P = 0;\n    var C = 0;\n    var T = false;\n    if (x == 4) {\n      T = true;\n      _ = 0;\n      for (; _ < x; _++) {\n        b = f[_];\n        var S = undefined;\n        S = _ == 0 ? f[x - 1] : f[_ - 1];\n        var A = Math.abs(b.x - S.x);\n        var E = Math.abs(b.y - S.y);\n        if (P < A) {\n          P = A;\n        }\n        if (C < E) {\n          C = E;\n        }\n        if (!(A < 10) && !(E < 10)) {\n          T = false;\n        }\n      }\n    }\n    if (T) {\n      p = false;\n    }\n    var I = null;\n    var M = null;\n    if (g === 0 && e.params.line === true && v) {\n      I = [];\n      M = [];\n      var O = false;\n      for (var R = 0; R < x; R++) {\n        var B = f[R];\n        var k = undefined;\n        var D = undefined;\n        if (R == 0) {\n          k = new n.Point(f[x - 1].x - B.x, f[x - 1].y - B.y);\n          D = new n.Point(f[R + 1].x - B.x, f[R + 1].y - B.y);\n        } else if (R === x - 1) {\n          k = new n.Point(f[R - 1].x - B.x, f[R - 1].y - B.y);\n          D = new n.Point(f[0].x - B.x, f[0].y - B.y);\n        } else {\n          k = new n.Point(f[R - 1].x - B.x, f[R - 1].y - B.y);\n          D = new n.Point(f[R + 1].x - B.x, f[R + 1].y - B.y);\n        }\n        var L = Math.atan2(k.y, k.x);\n        var F = Math.atan2(D.y, D.x);\n        var G = a["default"].normalizeAngle2(L - F);\n        var U = Math.PI * 0.52;\n        if (Math.abs(G) < U) {\n          k.setMagnitude(m);\n          D.setMagnitude(m);\n          var N = new n.Point(k.x + B.x, k.y + B.y);\n          var j = new n.Point(D.x + B.x, D.y + B.y);\n          M.push(N);\n          M.push(j);\n          if (T) {\n            I.push(new n.Point((N.x + j.x) * 0.5, (N.y + j.y) * 0.5));\n            O = true;\n          } else {\n            I.push(N);\n            I.push(j);\n          }\n        } else {\n          M.push(B);\n          I.push(B);\n        }\n      }\n      if (O) {\n        P = 0;\n        C = 0;\n        for (var W = 0; W < I.length; W++) {\n          var X = W < I.length - 1 ? W + 1 : 0;\n          var H = I[W];\n          var V = I[X];\n          var Y = Math.abs(H.x - V.x);\n          if (Y > P) {\n            P = Y;\n          }\n          var q = Math.abs(H.y - V.y);\n          if (q > C) {\n            C = q;\n          }\n        }\n      }\n    }\n    var z;\n    if (!T) {\n      z = new n.Graphics(this.game, 0, 0);\n      z.beginFill(16776960, 0.5);\n      l.addChildAt(z, 0);\n    }\n    var K = new n.Point(115000, 115000);\n    var J = g === 2;\n    var Z = 0;\n    var Q = 0;\n    var $ = 0;\n    var tt = false;\n    if (I != null) {\n      x = I.length;\n      tt = true;\n    }\n    _ = 0;\n    for (; _ < x; _++) {\n      b = tt ? I[_] : f[_];\n      if (J) {\n        if (Z === 0) {\n          Z = a["default"].dist(b.x, b.y, 0, 0);\n          if ((Q = Math.atan2(b.y, b.x)) < 0) {\n            Q += Math.PI * 2;\n          }\n        } else {\n          var et = a["default"].dist(b.x, b.y, 0, 0);\n          if (Math.abs(Z - et) < 10) {\n            var it = Math.atan2(b.y, b.x);\n            if (it < 0) {\n              it += Math.PI * 2;\n            }\n            if (it > Q) {\n              Q = it;\n              if ($ === 0) {\n                $ = tt ? a["default"].dist(b.x, b.y, I[_ - 1].x, I[_ - 1].y) : a["default"].dist(b.x, b.y, f[_ - 1].x, f[_ - 1].y);\n              }\n            } else {\n              J = false;\n            }\n          } else {\n            J = false;\n          }\n        }\n      }\n      if (b.x + i < K.x) {\n        K.x = b.x + i;\n      }\n      if (b.y + r < K.y) {\n        K.y = b.y + r;\n      }\n      if (z != null) {\n        if (_ == 0) {\n          z.moveTo(b.x + i, b.y + r);\n        } else {\n          z.lineTo(b.x + i, b.y + r);\n        }\n      }\n    }\n    if (z != null) {\n      z.endFill();\n      P = z.width;\n      C = z.height;\n    }\n    var st = this.game.add.tileSprite(K.x, K.y, P, C, t.currentAtlass, u + "0000");\n    st.tilePosition.x = -(l.x + K.x) % 128;\n    st.tilePosition.y = -(l.y + K.y) % 128;\n    l.addChildAt(st, 0);\n    if (!T) {\n      t.masks.push(z);\n      t.maskOwners.push(st);\n    }\n    if (e.params.line === true && v) {\n      if (J) {\n        s.Drawing.drawBitmapPath2StretchCircle(v, l, $, Z);\n      } else {\n        var nt = new Array();\n        if (g === 0) {\n          if (M == null) {\n            if (Math.abs(f[0].x - f[f.length - 1].x) > 4 || Math.abs(f[0].y - f[f.length - 1].y) > 4) {\n              y = new n.Point((f[0].x + f[f.length - 1].x) * 0.5 + i, (f[0].y + f[f.length - 1].y) * 0.5 + r);\n              nt[0] = y;\n            }\n            for (var ot = 0; ot < f.length; ot++) {\n              nt.push(new n.Point(f[ot].x + i, f[ot].y + r));\n            }\n          } else {\n            if (Math.abs(M[0].x - M[M.length - 1].x) > 4 || Math.abs(M[0].y - M[M.length - 1].y) > 4) {\n              y = new n.Point((M[0].x + M[M.length - 1].x) * 0.5 + i, (M[0].y + M[M.length - 1].y) * 0.5 + r);\n              nt[0] = y;\n            }\n            for (var at = 0; at < M.length; at++) {\n              nt.push(new n.Point(M[at].x + i, M[at].y + r));\n            }\n          }\n        } else {\n          nt[0] = new n.Point(f[f.length - 1].x + i, f[f.length - 1].y + r);\n          for (var rt = 0; rt < f.length; rt++) {\n            nt.push(new n.Point(f[rt].x + i, f[rt].y + r));\n          }\n        }\n        if (y) {\n          nt[nt.length] = y;\n        }\n        if (g === 2) {\n          s.Drawing.drawBitmapPath2(v, l, nt);\n        } else if (g === 1) {\n          s.Drawing.drawBitmapPath2Stretch(v, l, nt);\n        } else {\n          s.Drawing.drawBitmapPath(v, l, nt);\n        }\n      }\n    }\n    return l;\n  };\n  // t.createLandscapeShape = function (e, i, a, r) {\n  //   var h = new o.LandscapeShape(e, i, a);\n  //   var l = o.RacesData.map.settings.theme;\n  //   h.x = e.params.x - i;\n  //   h.y = e.params.y - a;\n  //   var c = null;\n  //   c = l === 1 ? "tile_stone" : "RoadTile0_1";\n  //   var u = e.params.layer;\n  //   // console.log("createLandscapeShape",u, e);\n  //   if (r) {\n  //     c = "finish";\n  //   } else if (u === 1) {\n  //     c = l === 3 ? "tile_stone" : "tile_bg";\n  //   } else if (u === 2) {\n  //     c = "tile";\n  //   } else if (u === 3) {\n  //     c = l === 4 ? "tile_shape" : "tile_saw";\n  //   } else if (u === 4) {\n  //     c = l === 4 ? "tile_shape1" : "tile_rivet";\n  //   } else if (u === 5) {\n  //     c = l === 4 ? "tile_shape2" : "tile_rivet_bg";\n  //   } else if (u === 6) {\n  //     c = "tile_stone";\n  //   } else if (u === 9) {\n  //     c = "tile_stone_xmas";\n  //   }\n  //   var d = e.params.vertices;\n  //   var p;\n  //   var f = null;\n  //   if (!r) {\n  //     if (u === 0) {\n  //       if (l === 1) {\n  //         f = "line_stone_shape";\n  //         c = "tile_stone";\n  //       } else {\n  //         f = "RoadLine0_4";\n  //       }\n  //     } else if (u === 1) {\n  //       if (l === 3) {\n  //         c = "tile_stone";\n  //         f = "line_stone_shape";\n  //       } else {\n  //         c = "tile_bg";\n  //         f = "RoadLine0_Bg";\n  //       }\n  //     } else if (u === 2) {\n  //       if (e.params.line === true) {\n  //         f = l === 3 ? "line" : l === 6 || l === 5 || l === 4 ? "line_top" : "line_top1";\n  //       }\n  //     } else if (u === 3) {\n  //       f = l === 4 ? "line_shape" : "UnLine0";\n  //     } else if (u === 4) {\n  //       f = l === 4 ? "line_shape1" : "line_rivet";\n  //     } else if (u === 5) {\n  //       if (l === 4) {\n  //         f = "line_shape2";\n  //       }\n  //     } else if (u === 6) {\n  //       f = "line_stone_shape";\n  //     } else if (u === 9) {\n  //       f = "line_spike";\n  //       // c = "tile_stone_xmas";\n  //     }\n  //   }\n  //   console.log("tbg95-4",c,f,l);\n  //   var y = new Array();\n  //   if (Math.abs(d[0].x - d[d.length - 1].x) > 4 || Math.abs(d[0].y - d[d.length - 1].y) > 4) {\n  //     p = new n.Point((d[0].x + d[d.length - 1].x) * 0.5 + i, (d[0].y + d[d.length - 1].y) * 0.5 + a);\n  //     y[0] = p;\n  //   }\n  //   var g = new n.Graphics(this.game, 0, 0);\n  //   h.addChildAt(g, 0);\n  //   var m = new n.Point(115000, 115000);\n  //   var v = d[0];\n  //   g.beginFill(16776960, 0.5);\n  //   g.moveTo(v.x + i, v.y + a);\n  //   var b = d.length;\n  //   var x = 0;\n  //   for (x = 0; x < b; x++) {\n  //     v = d[x];\n  //     if (v.x + i < m.x) {\n  //       m.x = v.x + i;\n  //     }\n  //     if (v.y + a < m.y) {\n  //       m.y = v.y + a;\n  //     }\n  //     g.lineTo(v.x + i, v.y + a);\n  //     if (y) {\n  //       y[y.length] = new n.Point(v.x + i, v.y + a);\n  //     }\n  //   }\n  //   g.endFill();\n  //   var altlass = t.currentAtlass;\n  //   if(c === \'tile_stone_xmas\'){\n  //     altlass = \'xmas\';\n  //   }\n  //   if(u === 9){\n  //     console.log("tbg95-5",altlass, c,f);\n  //   }\n  //   var _ = this.game.add.tileSprite(m.x, m.y, g.width, g.height, altlass, c + "0000");\n  //   _.tilePosition.x = -i % 256;\n  //   _.tilePosition.y = -a % 256;\n  //   // _.tilePosition.x = -i % 128;\n  //   // _.tilePosition.y = -a % 128;\n  //   h.addChildAt(_, 0);\n  //   t.masks.push(g);\n  //   t.maskOwners.push(_);\n  //   if (f) {\n  //     if (p) {\n  //       y[y.length] = p;\n  //     }\n  //     if (f.indexOf("Bg") === -1) {\n  //       s.Drawing.drawBitmapPath2(f, h, y);\n  //     } else {\n  //       s.Drawing.drawBitmapPath(f, h, y);\n  //     }\n  //   }\n  //   return h;\n  // };\n  t.getPivots = function (t) {\n    return this.game.cache.getJSON("bike".concat(t, "_pivots")).pivots;\n  };\n  t.game = null;\n  t.currentAtlass = r.Atlases.Theme0;\n  t.masks = [];\n  t.maskOwners = [];\n  return t;\n}();\nexports.GraphicUtil = c;\n\n//# sourceURL=webpack://motox3m/./src/utils/GraphicUtil.js?')},"./src/utils/MyRand.js":(__unused_webpack_module,exports)=>{eval('//exports.__esModule = true;\nvar s = function () {\n  function t() {}\n  t.normalizeAngle = function (t) {\n    if (t > Math.PI) {\n      t -= Math.PI * 2;\n    } else if (t < -Math.PI) {\n      t += Math.PI * 2;\n    }\n    return t;\n  };\n  t.normalizeAngle2 = function (t) {\n    t %= Math.PI * 2;\n    if (t > Math.PI) {\n      t -= Math.PI * 2;\n    } else if (t < -Math.PI) {\n      t += Math.PI * 2;\n    }\n    return t;\n  };\n  t.normalizeVertices = function (e) {\n    var i = {\n      className: e.className,\n      params: {}\n    };\n    i.params.vertices = [];\n    var s = e.params;\n    var n = s.x;\n    var o = s.y;\n    for (var a in s) {\n      if (a !== "vertices") {\n        i.params[a] = s[a];\n      }\n    }\n    var r = t.TO_RAD * s.rotation;\n    var h = s.vertices;\n    var l = i.params.vertices;\n    for (var c = h.length, u = 0; u < c; u++) {\n      var d = Math.round(h[u].x);\n      var p = Math.round(h[u].y);\n      l[u] = {};\n      if (d === 0 && p === 0) {\n        l[u].x = n;\n        l[u].y = o;\n      } else {\n        var f = undefined;\n        f = Math.atan2(p, d);\n        var y = Math.sqrt(d * d + p * p);\n        f += r;\n        l[u].x = n + Math.cos(f) * y;\n        l[u].y = o + Math.sin(f) * y;\n      }\n    }\n    i.params.x = 0;\n    i.params.y = 0;\n    i.params.rotation = 0;\n    return i;\n  };\n  t.dist = function (t, e, i, s) {\n    return Math.sqrt((t - i) * (t - i) + (e - s) * (e - s));\n  };\n  t.TO_RAD = Math.PI / 180;\n  t.TO_DEG = 180 / Math.PI;\n  t.PIdiv2 = Math.PI / 0;\n  t.PIdiv4 = Math.PI / 4;\n  t.PIdiv4mul3 = Math.PI * 3 / 4;\n  return t;\n}();\nexports["default"] = s;\nvar n = function () {\n  function t() {}\n  t.rand = function (t, e) {\n    return t - e * 0.5 + e * Math.random();\n  };\n  return t;\n}();\nexports.MyRand = n;\nvar o = function () {\n  function t() {}\n  t.formatPrice = function (e) {\n    var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "$ ";\n    var s = 0;\n    while (e >= 1000) {\n      e /= 1000;\n      ++s;\n    }\n    return i + e.toString() + t.RANKS[s] + t.PRICE_POSTFIX;\n  };\n  t.formatTime = function (t) {\n    var e = t / 60 >> 0;\n    var i = e.toString();\n    if (e < 10) {\n      i = "0" + i;\n    }\n    t -= e * 60;\n    e = t >> 0;\n    var s = e.toString();\n    if (e < 10) {\n      s = "0" + s;\n    }\n    return i + ":" + s;\n  };\n  t.PRICE_POSTFIX = "";\n  t.RANKS = ["", "k", "m", "omg", "wtf"];\n  return t;\n}();\nexports.UiStrUtil = o;\n\n//# sourceURL=webpack://motox3m/./src/utils/MyRand.js?')},"./src/utils/PhysicsUtils.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('//exports.__esModule = true;\nvar s = __webpack_require__(/*! @/src/utils/MyRand.js */ "./src/utils/MyRand.js");\nvar n = nape.constraint.PivotJoint;\nvar o = nape.geom.GeomPoly;\nvar a = nape.geom.GeomPolyList;\nvar r = nape.geom.Vec2;\nvar h = nape.phys.Body;\nvar l = nape.phys.BodyList;\nvar c = nape.phys.BodyType;\nvar u = nape.shape.Circle;\nvar d = nape.shape.Polygon;\nvar p = function () {\n  function t() {}\n  t.disposeBody = function (e) {\n    t.clearUserData(e);\n    e.cbTypes.clear();\n    if (e.compound) {\n      e.compound = null;\n    } else {\n      e.space = null;\n    }\n  };\n  t.stopBody = function (t) {\n    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    if (t.type === c.DYNAMIC) {\n      t.torque = 0;\n    }\n    t.velocity.x = 0;\n    t.velocity.y = 0;\n    t.angularVel = 0;\n    if (!e) {\n      t.allowMovement = t.allowRotation = e;\n    }\n  };\n  t.setupStartPos = function (t) {\n    t.userData.sx = t.position.x;\n    t.userData.sy = t.position.y;\n    t.userData.sr = t.rotation;\n  };\n  t.resetStartPos = function (t) {\n    t.position.x = t.userData.sx;\n    t.position.y = t.userData.sy;\n    t.rotation = t.userData.sr;\n  };\n  t.clearUserData = function (t) {\n    for (var e in t.userData) {\n      if (t.userData.hasOwnProperty(e)) {\n        t.userData[e] = null;\n      }\n    }\n  };\n  t.createRectBody = function (e, i, n, o) {\n    var a = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n    var r = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n    var h = new d(d.box(o.width, o.height, true), r, i);\n    h.sensorEnabled = n;\n    var l = t.createBody(e, o.x, o.y, s["default"].TO_RAD * o.rotation, a);\n    l.shapes.add(h);\n    return l;\n  };\n  t.createRectBodyWH = function (e, i, s, n, o) {\n    var a = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n    var r = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n    var h = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 0;\n    var l = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : null;\n    var c = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : null;\n    var u = new d(d.box(n, o, true), c, i);\n    u.sensorEnabled = s;\n    var p = t.createBody(e, a, r, h, l);\n    p.shapes.add(u);\n    return p;\n  };\n  t.createRegularBody = function (e, i, s, n, o, a) {\n    var r = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n    var h = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 0;\n    var l = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : 0;\n    var c = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : null;\n    var u = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : null;\n    var p = new d(d.regular(n * 0.5, o * 0.5, a, 0, true), u, i);\n    p.sensorEnabled = s;\n    var f = t.createBody(e, r, h, l, c);\n    f.shapes.add(p);\n    return f;\n  };\n  t.createBody = function (t) {\n    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var s = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    var n = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n    var o = new h(t, r.weak(e, i));\n    o.rotation = s;\n    if (n != null) {\n      o.cbTypes.add(n);\n    }\n    return o;\n  };\n  t.createCircleBody = function (e, i, s, n) {\n    var o = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n    var a = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n    var r = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n    var h = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n    var l = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : null;\n    var c = new u(n, null, l, i);\n    c.sensorEnabled = s;\n    var d = t.createBody(e, o, a, r, h);\n    if (h != null) {\n      d.cbTypes.add(h);\n    }\n    d.shapes.add(c);\n    return d;\n  };\n  t.bodiesInCircle = function (e, i, s) {\n    var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    var o = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n    t.bodyList.clear();\n    e.bodiesInCircle(i, s, n, o, t.bodyList);\n    return t.bodyList;\n  };\n  t.bodiesUnderPoint = function (e, i) {\n    var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    t.bodyList.clear();\n    e.bodiesUnderPoint(i, s, t.bodyList);\n    return t.bodyList;\n  };\n  t.createPolyBody = function (e, i, s, n) {\n    var a;\n    var l;\n    if (e instanceof Array) {\n      l = e;\n      a = new h(n);\n    } else {\n      l = e.vertices;\n      a = new h(n, r.weak(e.x, e.y));\n    }\n    for (var c = l.length, u = [], p = 0; p < c; p++) {\n      u[p] = r.get(l[p].x, l[p].y);\n    }\n    var f = new o(u);\n    if (f.isConvex()) {\n      a.shapes.add(new d(f, i, s));\n      f.dispose();\n    } else {\n      f.convexDecomposition(false, t.geomPolyList);\n      f.dispose();\n      while (!t.geomPolyList.empty()) {\n        f = t.geomPolyList.pop();\n        a.shapes.add(new d(f, i, s));\n        f.dispose();\n      }\n    }\n    return a;\n  };\n  t.createPivot = function (t, e, i) {\n    return new n(t, e, t.worldPointToLocal(i, true), e.worldPointToLocal(i, true));\n  };\n  t.disposeJoint = function (t) {\n    t.active = false;\n    t.space = null;\n    t.body1 = null;\n    t.body2 = null;\n  };\n  t.createPatherBody = function (t, e, i, s) {\n    e = e.copy();\n    e.density = t.params.density;\n    var n = new h(t.params.isStatic ? c.STATIC : c.DYNAMIC, r.weak(t.params.x, t.params.y));\n    var a = [r.get(), r.get(), r.get(), r.get()];\n    var l = r.get();\n    var u = r.get();\n    var p = t.params.vertices;\n    var f;\n    var y = p.length;\n    var g;\n    for (f = 0; f < y - 1; f++) {\n      l.setxy(p[f + 1].x - p[f].x, p[f + 1].y - p[f].y);\n      if (f === 0) {\n        g = l.angle + Math.PI * 0.5;\n        a[0].x = p[f].x - s * 0.5 * Math.cos(g);\n        a[0].y = p[f].y - s * 0.5 * Math.sin(g);\n        a[1].x = p[f].x + s * 0.5 * Math.cos(g);\n        a[1].y = p[f].y + s * 0.5 * Math.sin(g);\n      } else {\n        a[0].x = a[3].x;\n        a[0].y = a[3].y;\n        a[1].x = a[2].x;\n        a[1].y = a[2].y;\n      }\n      if (f === y - 2) {\n        g = l.angle + Math.PI * 0.5;\n        a[3].x = p[f + 1].x - s * 0.5 * Math.cos(g);\n        a[3].y = p[f + 1].y - s * 0.5 * Math.sin(g);\n        a[2].x = p[f + 1].x + s * 0.5 * Math.cos(g);\n        a[2].y = p[f + 1].y + s * 0.5 * Math.sin(g);\n      } else {\n        l.muleq(-1 / l.length);\n        var m = undefined;\n        while (true) {\n          u.setxy(p[f + 2].x - p[f + 1].x, p[f + 2].y - p[f + 1].y);\n          u.muleq(1 / u.length);\n          m = r.get(l.x + u.x, l.y + u.y);\n          if (m.length != 0) {\n            g = m.angle;\n            break;\n          }\n          if (++f >= y - 2) {\n            g = l.angle + Math.PI * 0.5;\n            break;\n          }\n        }\n        g = m.angle;\n        a[3].x = p[f + 1].x - s * 0.5 * Math.cos(g);\n        a[3].y = p[f + 1].y - s * 0.5 * Math.sin(g);\n        a[2].x = p[f + 1].x + s * 0.5 * Math.cos(g);\n        a[2].y = p[f + 1].y + s * 0.5 * Math.sin(g);\n        m.dispose();\n      }\n      var v = new o(a);\n      var b = undefined;\n      if (v.isConvex()) {\n        b = new d(a, e, i);\n        b.body = n;\n      } else {\n        var x = a[3];\n        a[3] = a[2];\n        a[2] = x;\n        b = new d(a, e, i);\n        b.body = n;\n      }\n    }\n    l.dispose();\n    u.dispose();\n    a[0].dispose();\n    a[1].dispose();\n    a[2].dispose();\n    a[3].dispose();\n    a = null;\n    n.align();\n    return n;\n  };\n  t.geomPolyList = new a();\n  t.bodyList = new l();\n  return t;\n}();\nexports.NapeUtil = p;\n\n//# sourceURL=webpack://motox3m/./src/utils/PhysicsUtils.js?')},"./src/utils/SaveUtils.js":(__unused_webpack_module,exports,__webpack_require__)=>{eval('//exports.__esModule = true;\nvar s = __webpack_require__(/*! @/src/bridge/UIBridge.js */ "./src/bridge/UIBridge.js");\nvar n = __webpack_require__(/*! @/src/utils/GameUtils.js */ "./src/utils/GameUtils.js");\nvar o = function () {\n  function t(t, e, i) {\n    var n = this;\n    this.musicOn = true;\n    this.sfxOn = true;\n    this.carSaves = {};\n    this.game = t;\n    this.callback = e;\n    this.callbackContext = i;\n    this.game.storage.getItem(s.Constants.STORAGE_KEY).then(function (t) {\n      if (t === null || t === undefined) {\n        n.initFirstSave();\n        if (n.callback && n.callbackContext) {\n          n.callback.call(n.callbackContext);\n        }\n      } else {\n        n.restore();\n      }\n    });\n  }\n  t.prototype.initFirstSave = function () {\n    this.sfxOn = true;\n    this.musicOn = true;\n    n.Inventory.instance.init();\n    this.save();\n  };\n  t.getInstance = function (e, i, s) {\n    if (t.instance) {\n      if (s) {\n        i.call(s);\n      }\n    } else {\n      t.instance = new t(e, i, s);\n    }\n    return t.instance;\n  };\n  Object.defineProperty(t.prototype, "music", {\n    get: function get() {\n      return this.musicOn;\n    },\n    set: function set(t) {\n      this.musicOn = t;\n      this.save();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(t.prototype, "sfx", {\n    get: function get() {\n      return this.sfxOn;\n    },\n    set: function set(t) {\n      this.sfxOn = t;\n      this.save();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  t.prototype.save = function () {\n    var t = JSON.stringify({\n      m: this.musicOn,\n      sf: this.sfxOn,\n      invsav: n.Inventory.instance.save\n    });\n    var e = this.hash(t);\n    this.game.storage.setItem(s.Constants.STORAGE_KEY, t);\n    this.game.storage.setItem(s.Constants.STORAGE_KEY + "h", e);\n  };\n  t.prototype.restore = function () {\n    var t = this;\n    var e = this.game.storage.getItem(s.Constants.STORAGE_KEY);\n    var i = this.game.storage.getItem(s.Constants.STORAGE_KEY + "h");\n    var o;\n    var a;\n    Promise.all([e, i]).then(function (e) {\n      o = e[0] || "";\n      a = e[1] || "0";\n      if (o === "") {\n        t.initFirstSave();\n        if (t.callback && t.callbackContext) {\n          t.callback.call(t.callbackContext);\n        }\n        return;\n      }\n      if (a !== t.hash(o)) {\n        t.initFirstSave();\n        if (t.callback && t.callbackContext) {\n          t.callback.call(t.callbackContext);\n        }\n        return;\n      }\n      if (o && o !== "") {\n        try {\n          var i = JSON.parse(o);\n          t.musicOn = i.m;\n          t.sfxOn = i.sf;\n          n.Inventory.instance.save = i.invsav;\n          n.Inventory.instance.restore();\n        } catch (e) {\n          t.initFirstSave();\n        }\n      } else {\n        t.initFirstSave();\n      }\n      if (t.callback && t.callbackContext) {\n        t.callback.call(t.callbackContext);\n      }\n    });\n  };\n  t.prototype.hash = function (t) {\n    var e = 0;\n    var i;\n    var s;\n    var n;\n    if (t.length === 0) {\n      return e.toString();\n    }\n    i = 0;\n    n = t.length;\n    for (; i < n; i++) {\n      s = t.charCodeAt(i);\n      e = (e << 5) - e + s;\n      e |= 0;\n    }\n    return e.toString();\n  };\n  return t;\n}();\nexports["default"] = o;\n\n//# sourceURL=webpack://motox3m/./src/utils/SaveUtils.js?')},"./src/utils/WebFontLoader.js":(module,exports,__webpack_require__)=>{eval('/* module decorator */ module = __webpack_require__.nmd(module);\n// WebFontLoader - Font loading utility for multiple providers\n// Handles loading web fonts from Google, Typekit, Fonts.com, etc.\n\n// Key features:\n// - Multi-provider font loading support\n// - Event handling for font loading states\n// - CSS class management for loading states\n// - Font loading timeout handling\n// - Cross-browser compatibility\n// - Font metrics checking\n\n// Supported providers:\n// - Google Fonts\n// - Typekit\n// - Monotype/Fonts.com\n// - Fontdeck\n// - Custom (CSS)\n\n// Key classes:\n// - WebFontConfig: Configuration handler\n// - FontWatcher: Monitors font loading\n// - EventDispatcher: Handles loading events\n// - FontMetrics: Checks font rendering\n// - Various provider-specific loaders\n\n// Usage example:\n// WebFont.load({\n//   google: {\n//     families: [\'Droid Sans\', \'Droid Serif\']\n//   },\n//   typekit: {\n//     id: \'myfont\'\n//   },\n//   loading: function() {},\n//   active: function() {},\n//   inactive: function() {}\n// });\nvar s;\n(function () {\n  function n(t, e, i) {\n    return t.call.apply(t.bind, arguments);\n  }\n  function o(t, e, i) {\n    if (!t) {\n      throw Error();\n    }\n    if (arguments.length > 2) {\n      var s = Array.prototype.slice.call(arguments, 2);\n      return function () {\n        var i = Array.prototype.slice.call(arguments);\n        Array.prototype.unshift.apply(i, s);\n        return t.apply(e, i);\n      };\n    }\n    return function () {\n      return t.apply(e, arguments);\n    };\n  }\n  function a(t, e, i) {\n    a = Function.prototype.bind && Function.prototype.bind.toString().indexOf("native code") != -1 ? n : o;\n    return a.apply(null, arguments);\n  }\n  function r(t, e) {\n    this.a = t;\n    this.o = e || t;\n    this.c = this.o.document;\n  }\n  function h(t, e, i, s) {\n    e = t.c.createElement(e);\n    if (i) {\n      for (var n in i) {\n        if (i.hasOwnProperty(n)) {\n          if (n == "style") {\n            e.style.cssText = i[n];\n          } else {\n            e.setAttribute(n, i[n]);\n          }\n        }\n      }\n    }\n    if (s) {\n      e.appendChild(t.c.createTextNode(s));\n    }\n    return e;\n  }\n  function l(t, e, i) {\n    t = t.c.getElementsByTagName(e)[0];\n    t || (t = document.documentElement);\n    t.insertBefore(i, t.lastChild);\n  }\n  function c(t) {\n    if (t.parentNode) {\n      t.parentNode.removeChild(t);\n    }\n  }\n  function u(t, e, i) {\n    e = e || [];\n    i = i || [];\n    var s = t.className.split(/\\s+/);\n    for (var n = 0; n < e.length; n += 1) {\n      var o = false;\n      for (var a = 0; a < s.length; a += 1) {\n        if (e[n] === s[a]) {\n          o = true;\n          break;\n        }\n      }\n      if (!o) {\n        s.push(e[n]);\n      }\n    }\n    e = [];\n    n = 0;\n    for (; n < s.length; n += 1) {\n      o = false;\n      a = 0;\n      for (; a < i.length; a += 1) {\n        if (s[n] === i[a]) {\n          o = true;\n          break;\n        }\n      }\n      if (!o) {\n        e.push(s[n]);\n      }\n    }\n    t.className = e.join(" ").replace(/\\s+/g, " ").replace(/^\\s+|\\s+$/, "");\n  }\n  function d(t, e) {\n    var i = t.className.split(/\\s+/);\n    for (var s = 0, n = i.length; s < n; s++) {\n      if (i[s] == e) {\n        return true;\n      }\n    }\n    return false;\n  }\n  function p(t) {\n    return t.o.location.hostname || t.a.location.hostname;\n  }\n  function f(t, e, i) {\n    function s() {\n      if (r && n && o) {\n        r(a);\n        r = null;\n      }\n    }\n    e = h(t, "link", {\n      rel: "stylesheet",\n      href: e,\n      media: "all"\n    });\n    var n = false;\n    var o = true;\n    var a = null;\n    var r = i || null;\n    if (ot) {\n      e.onload = function () {\n        n = true;\n        s();\n      };\n      e.onerror = function () {\n        n = true;\n        a = Error("Stylesheet failed to load");\n        s();\n      };\n    } else {\n      setTimeout(function () {\n        n = true;\n        s();\n      }, 0);\n    }\n    l(t, "head", e);\n  }\n  function y(t, e, i, s) {\n    var n = t.c.getElementsByTagName("head")[0];\n    if (n) {\n      var o = h(t, "script", {\n        src: e\n      });\n      var a = false;\n      o.onload = o.onreadystatechange = function () {\n        if (!a && (!this.readyState || this.readyState == "loaded" || this.readyState == "complete")) {\n          a = true;\n          if (i) {\n            i(null);\n          }\n          o.onload = o.onreadystatechange = null;\n          if (o.parentNode.tagName == "HEAD") {\n            n.removeChild(o);\n          }\n        }\n      };\n      n.appendChild(o);\n      setTimeout(function () {\n        if (!a) {\n          a = true;\n          if (i) {\n            i(Error("Script load timeout"));\n          }\n        }\n      }, s || 5000);\n      return o;\n    }\n    return null;\n  }\n  function g() {\n    this.a = 0;\n    this.c = null;\n  }\n  function m(t) {\n    t.a++;\n    return function () {\n      t.a--;\n      b(t);\n    };\n  }\n  function v(t, e) {\n    t.c = e;\n    b(t);\n  }\n  function b(t) {\n    if (t.a == 0 && t.c) {\n      t.c();\n      t.c = null;\n    }\n  }\n  function x(t) {\n    this.a = t || "-";\n  }\n  function _(t, e) {\n    this.c = t;\n    this.f = 4;\n    this.a = "n";\n    var i = (e || "n4").match(/^([nio])([1-9])$/i);\n    if (i) {\n      this.a = i[1];\n      this.f = parseInt(i[2], 10);\n    }\n  }\n  function w(t) {\n    return T(t) + " " + t.f + "00 300px " + C(t.c);\n  }\n  function C(t) {\n    var e = [];\n    t = t.split(/,\\s*/);\n    for (var i = 0; i < t.length; i++) {\n      var s = t[i].replace(/[\'"]/g, "");\n      if (s.indexOf(" ") != -1 || /^\\d/.test(s)) {\n        e.push("\'" + s + "\'");\n      } else {\n        e.push(s);\n      }\n    }\n    return e.join(",");\n  }\n  function P(t) {\n    return t.a + t.f;\n  }\n  function T(t) {\n    var e = "normal";\n    if (t.a === "o") {\n      e = "oblique";\n    } else if (t.a === "i") {\n      e = "italic";\n    }\n    return e;\n  }\n  function S(t) {\n    var e = 4;\n    var i = "n";\n    var s = null;\n    if (t) {\n      if ((s = t.match(/(normal|oblique|italic)/i)) && s[1]) {\n        i = s[1].substr(0, 1).toLowerCase();\n      }\n      if ((s = t.match(/([1-9]00|normal|bold)/i)) && s[1]) {\n        if (/bold/i.test(s[1])) {\n          e = 7;\n        } else if (/[1-9]00/.test(s[1])) {\n          e = parseInt(s[1].substr(0, 1), 10);\n        }\n      }\n    }\n    return i + e;\n  }\n  function A(t, e) {\n    this.c = t;\n    this.f = t.o.document.documentElement;\n    this.h = e;\n    this.a = new x("-");\n    this.j = e.events !== false;\n    this.g = e.classes !== false;\n  }\n  function E(t) {\n    if (t.g) {\n      u(t.f, [t.a.c("wf", "loading")]);\n    }\n    M(t, "loading");\n  }\n  function I(t) {\n    if (t.g) {\n      var e = d(t.f, t.a.c("wf", "active"));\n      var i = [];\n      var s = [t.a.c("wf", "loading")];\n      if (!e) {\n        i.push(t.a.c("wf", "inactive"));\n      }\n      u(t.f, i, s);\n    }\n    M(t, "inactive");\n  }\n  function M(t, e, i) {\n    if (t.j && t.h[e]) {\n      if (i) {\n        t.h[e](i.c, P(i));\n      } else {\n        t.h[e]();\n      }\n    }\n  }\n  function R() {\n    this.c = {};\n  }\n  function O(t, e, i) {\n    var s = [];\n    var n;\n    for (n in e) {\n      if (e.hasOwnProperty(n)) {\n        var o = t.c[n];\n        if (o) {\n          s.push(o(e[n], i));\n        }\n      }\n    }\n    return s;\n  }\n  function B(t, e) {\n    this.c = t;\n    this.f = e;\n    this.a = h(this.c, "span", {\n      "aria-hidden": "true"\n    }, this.f);\n  }\n  function L(t) {\n    l(t.c, "body", t.a);\n  }\n  function k(t) {\n    return "display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:" + C(t.c) + ";font-style:" + T(t) + ";font-weight:" + t.f + "00;";\n  }\n  function D(t, e, i, s, n, o) {\n    this.g = t;\n    this.j = e;\n    this.a = s;\n    this.c = i;\n    this.f = n || 3000;\n    this.h = o || undefined;\n  }\n  function F(t, e, i, s, n, o, a) {\n    this.v = t;\n    this.B = e;\n    this.c = i;\n    this.a = s;\n    this.s = a || "BESbswy";\n    this.f = {};\n    this.w = n || 3000;\n    this.u = o || null;\n    this.m = this.j = this.h = this.g = null;\n    this.g = new B(this.c, this.s);\n    this.h = new B(this.c, this.s);\n    this.j = new B(this.c, this.s);\n    this.m = new B(this.c, this.s);\n    t = new _(this.a.c + ",serif", P(this.a));\n    t = k(t);\n    this.g.a.style.cssText = t;\n    t = new _(this.a.c + ",sans-serif", P(this.a));\n    t = k(t);\n    this.h.a.style.cssText = t;\n    t = new _("serif", P(this.a));\n    t = k(t);\n    this.j.a.style.cssText = t;\n    t = new _("sans-serif", P(this.a));\n    t = k(t);\n    this.m.a.style.cssText = t;\n    L(this.g);\n    L(this.h);\n    L(this.j);\n    L(this.m);\n  }\n  function G() {\n    if (rt === null) {\n      var t = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\n      rt = !!t && (parseInt(t[1], 10) < 536 || parseInt(t[1], 10) === 536 && parseInt(t[2], 10) <= 11);\n    }\n    return rt;\n  }\n  function U(t, e, i) {\n    for (var s in at) {\n      if (at.hasOwnProperty(s) && e === t.f[at[s]] && i === t.f[at[s]]) {\n        return true;\n      }\n    }\n    return false;\n  }\n  function N(t) {\n    var e = t.g.a.offsetWidth;\n    var i = t.h.a.offsetWidth;\n    var s;\n    if (!(s = e === t.f.serif && i === t.f["sans-serif"])) {\n      s = G() && U(t, e, i);\n    }\n    if (s) {\n      if (nt() - t.A >= t.w) {\n        if (G() && U(t, e, i) && (t.u === null || t.u.hasOwnProperty(t.a.c))) {\n          W(t, t.v);\n        } else {\n          W(t, t.B);\n        }\n      } else {\n        j(t);\n      }\n    } else {\n      W(t, t.v);\n    }\n  }\n  function j(t) {\n    setTimeout(a(function () {\n      N(this);\n    }, t), 50);\n  }\n  function W(t, e) {\n    setTimeout(a(function () {\n      c(this.g.a);\n      c(this.h.a);\n      c(this.j.a);\n      c(this.m.a);\n      e(this.a);\n    }, t), 0);\n  }\n  function X(t, e, i) {\n    this.c = t;\n    this.a = e;\n    this.f = 0;\n    this.m = this.j = false;\n    this.s = i;\n  }\n  function H(t) {\n    if (--t.f == 0 && t.j) {\n      if (t.m) {\n        t = t.a;\n        if (t.g) {\n          u(t.f, [t.a.c("wf", "active")], [t.a.c("wf", "loading"), t.a.c("wf", "inactive")]);\n        }\n        M(t, "active");\n      } else {\n        I(t.a);\n      }\n    }\n  }\n  function V(t) {\n    this.j = t;\n    this.a = new R();\n    this.h = 0;\n    this.f = this.g = true;\n  }\n  function Y(t, e, i, s, n) {\n    var o = --t.h == 0;\n    if (t.f || t.g) {\n      setTimeout(function () {\n        var t = n || null;\n        var r = s || null || {};\n        if (i.length === 0 && o) {\n          I(e.a);\n        } else {\n          e.f += i.length;\n          if (o) {\n            e.j = o;\n          }\n          var h;\n          var l = [];\n          for (h = 0; h < i.length; h++) {\n            var c = i[h];\n            var d = r[c.c];\n            var p = e.a;\n            var f = c;\n            if (p.g) {\n              u(p.f, [p.a.c("wf", f.c, P(f).toString(), "loading")]);\n            }\n            M(p, "fontloading", f);\n            p = null;\n            if (ht === null) {\n              if (window.FontFace) {\n                var f = /Gecko.*Firefox\\/(\\d+)/.exec(window.navigator.userAgent);\n                var y = /OS X.*Version\\/10\\..*Safari/.exec(window.navigator.userAgent) && /Apple/.exec(window.navigator.vendor);\n                ht = f ? parseInt(f[1], 10) > 42 : !y;\n              } else {\n                ht = false;\n              }\n            }\n            p = ht ? new D(a(e.g, e), a(e.h, e), e.c, c, e.s, d) : new F(a(e.g, e), a(e.h, e), e.c, c, e.s, t, d);\n            l.push(p);\n          }\n          for (h = 0; h < l.length; h++) {\n            l[h].start();\n          }\n        }\n      }, 0);\n    }\n  }\n  function q(t, e, i) {\n    var s = [];\n    var n = i.timeout;\n    E(e);\n    var s = O(t.a, i, t.c);\n    var o = new X(t.c, e, n);\n    t.h = s.length;\n    e = 0;\n    i = s.length;\n    for (; e < i; e++) {\n      s[e].load(function (e, i, s) {\n        Y(t, o, e, i, s);\n      });\n    }\n  }\n  function z(t, e) {\n    this.c = t;\n    this.a = e;\n  }\n  function K(t, e) {\n    this.c = t;\n    this.a = e;\n  }\n  function J(t, e) {\n    this.c = t || lt;\n    this.a = [];\n    this.f = [];\n    this.g = e || "";\n  }\n  function Z(t, e) {\n    for (var i = e.length, s = 0; s < i; s++) {\n      var n = e[s].split(":");\n      if (n.length == 3) {\n        t.f.push(n.pop());\n      }\n      var o = "";\n      if (n.length == 2 && n[1] != "") {\n        o = ":";\n      }\n      t.a.push(n.join(o));\n    }\n  }\n  function Q(t) {\n    if (t.a.length == 0) {\n      throw Error("No fonts to load!");\n    }\n    if (t.c.indexOf("kit=") != -1) {\n      return t.c;\n    }\n    for (var e = t.a.length, i = [], s = 0; s < e; s++) {\n      i.push(t.a[s].replace(/ /g, "+"));\n    }\n    e = t.c + "?family=" + i.join("%7C");\n    if (t.f.length > 0) {\n      e += "&subset=" + t.f.join(",");\n    }\n    if (t.g.length > 0) {\n      e += "&text=" + encodeURIComponent(t.g);\n    }\n    return e;\n  }\n  function $(t) {\n    this.f = t;\n    this.a = [];\n    this.c = {};\n  }\n  function tt(t) {\n    for (var e = t.f.length, i = 0; i < e; i++) {\n      var s = t.f[i].split(":");\n      var n = s[0].replace(/\\+/g, " ");\n      var o = ["n4"];\n      if (s.length >= 2) {\n        var a;\n        var r = s[1];\n        a = [];\n        if (r) {\n          var r = r.split(",");\n          for (var h = r.length, l = 0; l < h; l++) {\n            var c;\n            c = r[l];\n            if (c.match(/^[\\w-]+$/)) {\n              var u = pt.exec(c.toLowerCase());\n              if (u == null) {\n                c = "";\n              } else {\n                c = u[2];\n                c = c == null || c == "" ? "n" : dt[c];\n                if ((u = u[1]) == null || u == "") {\n                  u = "4";\n                } else {\n                  var d = ut[u];\n                  var u = d || (isNaN(u) ? "4" : u.substr(0, 1));\n                }\n                c = [c, u].join("");\n              }\n            } else {\n              c = "";\n            }\n            if (c) {\n              a.push(c);\n            }\n          }\n        }\n        if (a.length > 0) {\n          o = a;\n        }\n        if (s.length == 3) {\n          s = s[2];\n          a = [];\n          s = s ? s.split(",") : a;\n          if (s.length > 0 && (s = ct[s[0]])) {\n            t.c[n] = s;\n          }\n        }\n      }\n      if (!t.c[n]) {\n        if (s = ct[n]) {\n          t.c[n] = s;\n        }\n      }\n      s = 0;\n      for (; s < o.length; s += 1) {\n        t.a.push(new _(n, o[s]));\n      }\n    }\n  }\n  function et(t, e) {\n    this.c = t;\n    this.a = e;\n  }\n  function it(t, e) {\n    this.c = t;\n    this.a = e;\n  }\n  function st(t, e) {\n    this.c = t;\n    this.f = e;\n    this.a = [];\n  }\n  var nt = Date.now || function () {\n    return +new Date();\n  };\n  var ot = !!window.FontFace;\n  x.prototype.c = function (t) {\n    var e = [];\n    for (var i = 0; i < arguments.length; i++) {\n      e.push(arguments[i].replace(/[\\W_]+/g, "").toLowerCase());\n    }\n    return e.join(this.a);\n  };\n  D.prototype.start = function () {\n    var t = this.c.o.document;\n    var e = this;\n    var i = nt();\n    var s = new Promise(function (s, n) {\n      function o() {\n        if (nt() - i >= e.f) {\n          n();\n        } else {\n          t.fonts.load(w(e.a), e.h).then(function (t) {\n            if (t.length >= 1) {\n              s();\n            } else {\n              setTimeout(o, 25);\n            }\n          }, function () {\n            n();\n          });\n        }\n      }\n      o();\n    });\n    var n = null;\n    var o = new Promise(function (t, i) {\n      n = setTimeout(i, e.f);\n    });\n    Promise.race([o, s]).then(function () {\n      if (n) {\n        clearTimeout(n);\n        n = null;\n      }\n      e.g(e.a);\n    }, function () {\n      e.j(e.a);\n    });\n  };\n  var at = {\n    D: "serif",\n    C: "sans-serif"\n  };\n  var rt = null;\n  F.prototype.start = function () {\n    this.f.serif = this.j.a.offsetWidth;\n    this.f["sans-serif"] = this.m.a.offsetWidth;\n    this.A = nt();\n    N(this);\n  };\n  var ht = null;\n  X.prototype.g = function (t) {\n    var e = this.a;\n    if (e.g) {\n      u(e.f, [e.a.c("wf", t.c, P(t).toString(), "active")], [e.a.c("wf", t.c, P(t).toString(), "loading"), e.a.c("wf", t.c, P(t).toString(), "inactive")]);\n    }\n    M(e, "fontactive", t);\n    this.m = true;\n    H(this);\n  };\n  X.prototype.h = function (t) {\n    var e = this.a;\n    if (e.g) {\n      var i = d(e.f, e.a.c("wf", t.c, P(t).toString(), "active"));\n      var s = [];\n      var n = [e.a.c("wf", t.c, P(t).toString(), "loading")];\n      if (!i) {\n        s.push(e.a.c("wf", t.c, P(t).toString(), "inactive"));\n      }\n      u(e.f, s, n);\n    }\n    M(e, "fontinactive", t);\n    H(this);\n  };\n  V.prototype.load = function (t) {\n    this.c = new r(this.j, t.context || this.j);\n    this.g = t.events !== false;\n    this.f = t.classes !== false;\n    q(this, new A(this.c, t), t);\n  };\n  z.prototype.load = function (t) {\n    function e() {\n      if (o["__mti_fntLst" + s]) {\n        var i = o["__mti_fntLst" + s]();\n        var n = [];\n        var a;\n        if (i) {\n          for (var r = 0; r < i.length; r++) {\n            var h = i[r].fontfamily;\n            if (i[r].fontStyle != undefined && i[r].fontWeight != undefined) {\n              a = i[r].fontStyle + i[r].fontWeight;\n              n.push(new _(h, a));\n            } else {\n              n.push(new _(h));\n            }\n          }\n        }\n        t(n);\n      } else {\n        setTimeout(function () {\n          e();\n        }, 50);\n      }\n    }\n    var i = this;\n    var s = i.a.projectId;\n    var n = i.a.version;\n    if (s) {\n      var o = i.c.o;\n      y(this.c, (i.a.api || "https://fast.fonts.net/jsapi") + "/" + s + ".js" + (n ? "?v=" + n : ""), function (n) {\n        if (n) {\n          t([]);\n        } else {\n          o["__MonotypeConfiguration__" + s] = function () {\n            return i.a;\n          };\n          e();\n        }\n      }).id = "__MonotypeAPIScript__" + s;\n    } else {\n      t([]);\n    }\n  };\n  K.prototype.load = function (t) {\n    var e;\n    var i;\n    var s = this.a.urls || [];\n    var n = this.a.families || [];\n    var o = this.a.testStrings || {};\n    var a = new g();\n    e = 0;\n    i = s.length;\n    for (; e < i; e++) {\n      f(this.c, s[e], m(a));\n    }\n    var r = [];\n    e = 0;\n    i = n.length;\n    for (; e < i; e++) {\n      s = n[e].split(":");\n      if (s[1]) {\n        for (var h = s[1].split(","), l = 0; l < h.length; l += 1) {\n          r.push(new _(s[0], h[l]));\n        }\n      } else {\n        r.push(new _(s[0]));\n      }\n    }\n    v(a, function () {\n      t(r, o);\n    });\n  };\n  var lt = "https://fonts.googleapis.com/css";\n  var ct = {\n    latin: "BESbswy",\n    "latin-ext": "çöüğş",\n    cyrillic: "йяЖ",\n    greek: "αβΣ",\n    khmer: "កខគ",\n    Hanuman: "កខគ"\n  };\n  var ut = {\n    thin: "1",\n    extralight: "2",\n    "extra-light": "2",\n    ultralight: "2",\n    "ultra-light": "2",\n    light: "3",\n    regular: "4",\n    book: "4",\n    medium: "5",\n    "semi-bold": "6",\n    semibold: "6",\n    "demi-bold": "6",\n    demibold: "6",\n    bold: "7",\n    "extra-bold": "8",\n    extrabold: "8",\n    "ultra-bold": "8",\n    ultrabold: "8",\n    black: "9",\n    heavy: "9",\n    l: "3",\n    r: "4",\n    b: "7"\n  };\n  var dt = {\n    i: "i",\n    italic: "i",\n    n: "n",\n    normal: "n"\n  };\n  var pt = /^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;\n  var ft = {\n    Arimo: true,\n    Cousine: true,\n    Tinos: true\n  };\n  et.prototype.load = function (t) {\n    var e = new g();\n    var i = this.c;\n    var s = new J(this.a.api, this.a.text);\n    var n = this.a.families;\n    Z(s, n);\n    var o = new $(n);\n    tt(o);\n    f(i, Q(s), m(e));\n    v(e, function () {\n      t(o.a, o.c, ft);\n    });\n  };\n  it.prototype.load = function (t) {\n    var e = this.a.id;\n    var i = this.c.o;\n    if (e) {\n      y(this.c, (this.a.api || "https://use.typekit.net") + "/" + e + ".js", function (e) {\n        if (e) {\n          t([]);\n        } else if (i.Typekit && i.Typekit.config && i.Typekit.config.fn) {\n          e = i.Typekit.config.fn;\n          var s = [];\n          for (var n = 0; n < e.length; n += 2) {\n            var o = e[n];\n            for (var a = e[n + 1], r = 0; r < a.length; r++) {\n              s.push(new _(o, a[r]));\n            }\n          }\n          try {\n            i.Typekit.load({\n              events: false,\n              classes: false,\n              async: true\n            });\n          } catch (t) {}\n          t(s);\n        }\n      }, 2000);\n    } else {\n      t([]);\n    }\n  };\n  st.prototype.load = function (t) {\n    var e = this.f.id;\n    var i = this.c.o;\n    var s = this;\n    if (e) {\n      i.__webfontfontdeckmodule__ || (i.__webfontfontdeckmodule__ = {});\n      i.__webfontfontdeckmodule__[e] = function (e, i) {\n        for (var n = 0, o = i.fonts.length; n < o; ++n) {\n          var a = i.fonts[n];\n          s.a.push(new _(a.name, S("font-weight:" + a.weight + ";font-style:" + a.style)));\n        }\n        t(s.a);\n      };\n      y(this.c, (this.f.api || "https://f.fontdeck.com/s/css/js/") + p(this.c) + "/" + e + ".js", function (e) {\n        if (e) {\n          t([]);\n        }\n      });\n    } else {\n      t([]);\n    }\n  };\n  var yt = new V(window);\n  yt.a.c.custom = function (t, e) {\n    return new K(e, t);\n  };\n  yt.a.c.fontdeck = function (t, e) {\n    return new st(e, t);\n  };\n  yt.a.c.monotype = function (t, e) {\n    return new z(e, t);\n  };\n  yt.a.c.typekit = function (t, e) {\n    return new it(e, t);\n  };\n  yt.a.c.google = function (t, e) {\n    return new et(e, t);\n  };\n  var gt = {\n    load: a(yt.load, yt)\n  };\n  if ((s = function () {\n    return gt;\n  }.call(exports, undefined, exports, module)) !== undefined) {\n    module.exports = s;\n  }\n})();\n\n//# sourceURL=webpack://motox3m/./src/utils/WebFontLoader.js?')},"./src/weapons/WeaponParams.js":(__unused_webpack_module,exports)=>{eval("// WeaponParams - Configuration class for weapon system parameters\n// Manages weapon stats and ammunition system\n\n// Key features:\n// - Weapon statistics tracking\n// - Ammunition management\n// - Upgrade calculations\n// - State reset capability\n// - Basic weapon configuration\n\n// Properties:\n// - ammo: Current ammunition count\n// - maxAmmo: Maximum ammunition capacity (default 100)\n// - speed: Projectile speed multiplier\n// - damage: Weapon damage value (default 60)\n// - count: Projectile count per shot\n// - life: Projectile lifetime\n// - radius: Effect radius\n\n// Methods:\n// - reset(config, upgradeLevel): Reset weapon state\n//   * Optional config parameter for new settings\n//   * Upgrade level affects max ammo\n//   * Resets current ammo to maximum\n//   * Updates all weapon parameters\n\n// Usage example:\n// const weapon = new WeaponParams();\n// weapon.reset({\n//   ammo: 120,\n//   speed: 1.5,\n//   damage: 75,\n//   count: 1,\n//   life: 1000,\n//   radius: 10,\n//   upg: 20\n// }, 2);  // upgrade level 2\n//exports.__esModule = true;\nvar s = function () {\n  function t() {\n    this.ammo = 100;\n    this.maxAmmo = 100;\n    this.speed = 1;\n    this.damage = 60;\n    this.count = 1;\n  }\n  t.prototype.reset = function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    if (t) {\n      this.maxAmmo = t.ammo + t.upg * e;\n      this.speed = t.speed;\n      this.damage = t.damage;\n      this.count = t.count;\n      this.life = t.life;\n      this.radius = t.radius;\n    }\n    this.ammo = this.maxAmmo;\n  };\n  return t;\n}();\nexports.WeaponParams = s;\n\n//# sourceURL=webpack://motox3m/./src/weapons/WeaponParams.js?")}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var __webpack_exports__=__webpack_require__("./index.js")})();